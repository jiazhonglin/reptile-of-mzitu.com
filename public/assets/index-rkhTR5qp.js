import{shallowRef as jb,inject as Qs,unref as Re,shallowReactive as $b,nextTick as Hb,defineComponent as Se,reactive as xt,computed as Ki,h as Zg,provide as lc,ref as Be,watch as ls,resolveComponent as zb,openBlock as $,createBlock as Te,withCtx as fi,createVNode as De,Transition as Js,resolveDynamicComponent as Vb,createElementBlock as Y,Fragment as Lt,renderList as en,normalizeStyle as pi,createElementVNode as F,toDisplayString as Ve,onMounted as Ot,onBeforeUnmount as El,mergeProps as qb,normalizeClass as Qg,renderSlot as Kd,onUnmounted as sn,createCommentVNode as Pe,pushScopeId as Bt,popScopeId as Nt,createStaticVNode as bs,createTextVNode as ms,withDirectives as Al,vShow as Dl,TransitionGroup as Gb,createApp as Wb}from"vue";import{Buffer as Xb}from"buffer";import*as Yb from"three";import{Vector3 as ye,Matrix4 as Zd,Object3D as Kc,Vector2 as $e,Scene as rr,Mesh as qe,Material as Kb,Texture as bp,Raycaster as xo,EventDispatcher as wo,Clock as Zb,WebGLRenderer as So,PerspectiveCamera as ar,OrthographicCamera as Qd,MeshLambertMaterial as Jg,Color as Xe,ShapeGeometry as Zc,MeshBasicMaterial as et,CircleGeometry as er,RingGeometry as ou,BufferGeometry as Jd,LineDashedMaterial as Qb,Line as Jb,AmbientLight as eh,HemisphereLight as th,DirectionalLight as ih,Box3 as eT,Ray as tT,Plane as iT,MathUtils as so,MOUSE as jn,TOUCH as rs,Quaternion as Tp,Spherical as xp,Loader as nT,Shape as e0,Frustum as sT,MeshStandardMaterial as rT,Float32BufferAttribute as _l,PlaneGeometry as aT,WebGLRenderTarget as t0,RGBAFormat as oT,HalfFloatType as lT,NearestFilter as wp,MeshNormalMaterial as uT,ShaderMaterial as cT,Vector4 as dT,CanvasTexture as hT,SRGBColorSpace as fT,LineBasicMaterial as pT,LineSegments as mT,Group as gT,EquirectangularReflectionMapping as _T,SphereGeometry as i0,TextureLoader as n0,CubeTextureLoader as yT}from"three";import{OrbitControls as lu}from"three/addons/controls/OrbitControls.js";import{DRACOLoader as nh}from"three/addons/loaders/DRACOLoader.js";import{GLTFLoader as sh}from"three/addons/loaders/GLTFLoader.js";import*as yl from"three/addons/libs/tween.module.js";import{mergeGeometries as rh}from"three/addons/utils/BufferGeometryUtils.js";import{FontLoader as vT}from"three/addons/loaders/FontLoader.js";import{RGBELoader as bT}from"three/addons/loaders/RGBELoader.js";import TT from"shpjs";import{Line2 as xT}from"three/addons/lines/Line2.js";import{LineGeometry as wT}from"three/addons/lines/LineGeometry.js";import{LineMaterial as ST}from"three/addons/lines/LineMaterial.js";import{ClearPass as CT}from"three/addons/postprocessing/ClearPass.js";import{EffectComposer as ET}from"three/addons/postprocessing/EffectComposer.js";import{MaskPass as AT,ClearMaskPass as DT}from"three/addons/postprocessing/MaskPass.js";import{RenderPass as Sp}from"three/addons/postprocessing/RenderPass.js";import{SMAAPass as kT}from"three/addons/postprocessing/SMAAPass.js";import{ShaderPass as IT}from"three/addons/postprocessing/ShaderPass.js";import{TexturePass as PT}from"three/addons/postprocessing/TexturePass.js";import{GammaCorrectionShader as LT}from"three/addons/shaders/GammaCorrectionShader.js";import{Pass as OT,FullScreenQuad as RT}from"three/addons/postprocessing/Pass.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const xr=typeof window<"u";function MT(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const je=Object.assign;function uc(n,e){const t={};for(const i in e){const s=e[i];t[i]=tn(s)?s.map(n):n(s)}return t}const Ga=()=>{},tn=Array.isArray,BT=/\/$/,NT=n=>n.replace(BT,"");function cc(n,e,t="/"){let i,s={},r="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,o>-1?o:e.length),s=n(r)),o>-1&&(i=i||e.slice(0,o),a=e.slice(o,e.length)),i=$T(i??e,t),{fullPath:i+(r&&"?")+r+a,path:i,query:s,hash:a}}function FT(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Cp(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function UT(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&jr(e.matched[i],t.matched[s])&&s0(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function jr(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function s0(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!jT(n[t],e[t]))return!1;return!0}function jT(n,e){return tn(n)?Ep(n,e):tn(e)?Ep(e,n):n===e}function Ep(n,e){return tn(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function $T(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=t.length-1,a,o;for(a=0;a<i.length;a++)if(o=i[a],o!==".")if(o==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(a-(a===i.length?1:0)).join("/")}var ro;(function(n){n.pop="pop",n.push="push"})(ro||(ro={}));var Wa;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Wa||(Wa={}));function HT(n){if(!n)if(xr){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),NT(n)}const zT=/^[^#]+#/;function VT(n,e){return n.replace(zT,"#")+e}function qT(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const uu=()=>({left:window.pageXOffset,top:window.pageYOffset});function GT(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=qT(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Ap(n,e){return(history.state?history.state.position-e:-1)+n}const Qc=new Map;function WT(n,e){Qc.set(n,e)}function XT(n){const e=Qc.get(n);return Qc.delete(n),e}let YT=()=>location.protocol+"//"+location.host;function r0(n,e){const{pathname:t,search:i,hash:s}=e,r=n.indexOf("#");if(r>-1){let o=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),Cp(l,"")}return Cp(t,n)+i+s}function KT(n,e,t,i){let s=[],r=[],a=null;const o=({state:m})=>{const y=r0(n,location),_=t.value,b=e.value;let x=0;if(m){if(t.value=y,e.value=m,a&&a===_){a=null;return}x=b?m.position-b.position:0}else i(y);s.forEach(S=>{S(t.value,_,{delta:x,type:ro.pop,direction:x?x>0?Wa.forward:Wa.back:Wa.unknown})})};function l(){a=t.value}function u(m){s.push(m);const y=()=>{const _=s.indexOf(m);_>-1&&s.splice(_,1)};return r.push(y),y}function c(){const{history:m}=window;m.state&&m.replaceState(je({},m.state,{scroll:uu()}),"")}function h(){for(const m of r)m();r=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:h}}function Dp(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?uu():null}}function ZT(n){const{history:e,location:t}=window,i={value:r0(n,t)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const h=n.indexOf("#"),m=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:YT()+n+l;try{e[c?"replaceState":"pushState"](u,"",m),s.value=u}catch(y){console.error(y),t[c?"replace":"assign"](m)}}function a(l,u){const c=je({},e.state,Dp(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});r(l,c,!0),i.value=l}function o(l,u){const c=je({},s.value,e.state,{forward:l,scroll:uu()});r(c.current,c,!0);const h=je({},Dp(i.value,l,null),{position:c.position+1},u);r(l,h,!1),i.value=l}return{location:i,state:s,push:o,replace:a}}function QT(n){n=HT(n);const e=ZT(n),t=KT(n,e.state,e.location,e.replace);function i(r,a=!0){a||t.pauseListeners(),history.go(r)}const s=je({location:"",base:n,go:i,createHref:VT.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function JT(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),QT(n)}function ex(n){return typeof n=="string"||n&&typeof n=="object"}function a0(n){return typeof n=="string"||typeof n=="symbol"}const ts={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},o0=Symbol("");var kp;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(kp||(kp={}));function $r(n,e){return je(new Error,{type:n,[o0]:!0},e)}function Bn(n,e){return n instanceof Error&&o0 in n&&(e==null||!!(n.type&e))}const Ip="[^/]+?",tx={sensitive:!1,strict:!1,start:!0,end:!0},ix=/[.+*?^${}()[\]/\\]/g;function nx(n,e){const t=je({},tx,e),i=[];let s=t.start?"^":"";const r=[];for(const u of n){const c=u.length?[]:[90];t.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const m=u[h];let y=40+(t.sensitive?.25:0);if(m.type===0)h||(s+="/"),s+=m.value.replace(ix,"\\$&"),y+=40;else if(m.type===1){const{value:_,repeatable:b,optional:x,regexp:S}=m;r.push({name:_,repeatable:b,optional:x});const w=S||Ip;if(w!==Ip){y+=10;try{new RegExp(`(${w})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${_}" (${w}): `+k.message)}}let A=b?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(A=x&&u.length<2?`(?:/${A})`:"/"+A),x&&(A+="?"),s+=A,y+=20,x&&(y+=-8),b&&(y+=-20),w===".*"&&(y+=-50)}c.push(y)}i.push(c)}if(t.strict&&t.end){const u=i.length-1;i[u][i[u].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&(s+="(?:/|$)");const a=new RegExp(s,t.sensitive?"":"i");function o(u){const c=u.match(a),h={};if(!c)return null;for(let m=1;m<c.length;m++){const y=c[m]||"",_=r[m-1];h[_.name]=y&&_.repeatable?y.split("/"):y}return h}function l(u){let c="",h=!1;for(const m of n){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const y of m)if(y.type===0)c+=y.value;else if(y.type===1){const{value:_,repeatable:b,optional:x}=y,S=_ in u?u[_]:"";if(tn(S)&&!b)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const w=tn(S)?S.join("/"):S;if(!w)if(x)m.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${_}"`);c+=w}}return c||"/"}return{re:a,score:i,keys:r,parse:o,stringify:l}}function sx(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function rx(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const r=sx(i[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-i.length)===1){if(Pp(i))return 1;if(Pp(s))return-1}return s.length-i.length}function Pp(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const ax={type:0,value:""},ox=/[a-zA-Z0-9_]/;function lx(n){if(!n)return[[]];if(n==="/")return[[ax]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(y){throw new Error(`ERR (${t})/"${u}": ${y}`)}let t=0,i=t;const s=[];let r;function a(){r&&s.push(r),r=[]}let o=0,l,u="",c="";function h(){u&&(t===0?r.push({type:0,value:u}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;o<n.length;){if(l=n[o++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(u&&h(),a()):l===":"?(h(),t=1):m();break;case 4:m(),t=i;break;case 1:l==="("?t=2:ox.test(l)?m():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:t=3:c+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),a(),s}function ux(n,e,t){const i=nx(lx(n.path),t),s=je(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function cx(n,e){const t=[],i=new Map;e=Rp({strict:!1,end:!0,sensitive:!1},e);function s(c){return i.get(c)}function r(c,h,m){const y=!m,_=dx(c);_.aliasOf=m&&m.record;const b=Rp(e,c),x=[_];if("alias"in c){const A=typeof c.alias=="string"?[c.alias]:c.alias;for(const k of A)x.push(je({},_,{components:m?m.record.components:_.components,path:k,aliasOf:m?m.record:_}))}let S,w;for(const A of x){const{path:k}=A;if(h&&k[0]!=="/"){const C=h.record.path,R=C[C.length-1]==="/"?"":"/";A.path=h.record.path+(k&&R+k)}if(S=ux(A,h,b),m?m.alias.push(S):(w=w||S,w!==S&&w.alias.push(S),y&&c.name&&!Op(S)&&a(c.name)),_.children){const C=_.children;for(let R=0;R<C.length;R++)r(C[R],S,m&&m.children[R])}m=m||S,(S.record.components&&Object.keys(S.record.components).length||S.record.name||S.record.redirect)&&l(S)}return w?()=>{a(w)}:Ga}function a(c){if(a0(c)){const h=i.get(c);h&&(i.delete(c),t.splice(t.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=t.indexOf(c);h>-1&&(t.splice(h,1),c.record.name&&i.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function o(){return t}function l(c){let h=0;for(;h<t.length&&rx(c,t[h])>=0&&(c.record.path!==t[h].record.path||!l0(c,t[h]));)h++;t.splice(h,0,c),c.record.name&&!Op(c)&&i.set(c.record.name,c)}function u(c,h){let m,y={},_,b;if("name"in c&&c.name){if(m=i.get(c.name),!m)throw $r(1,{location:c});b=m.record.name,y=je(Lp(h.params,m.keys.filter(w=>!w.optional).map(w=>w.name)),c.params&&Lp(c.params,m.keys.map(w=>w.name))),_=m.stringify(y)}else if("path"in c)_=c.path,m=t.find(w=>w.re.test(_)),m&&(y=m.parse(_),b=m.record.name);else{if(m=h.name?i.get(h.name):t.find(w=>w.re.test(h.path)),!m)throw $r(1,{location:c,currentLocation:h});b=m.record.name,y=je({},h.params,c.params),_=m.stringify(y)}const x=[];let S=m;for(;S;)x.unshift(S.record),S=S.parent;return{name:b,path:_,params:y,matched:x,meta:fx(x)}}return n.forEach(c=>r(c)),{addRoute:r,resolve:u,removeRoute:a,getRoutes:o,getRecordMatcher:s}}function Lp(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function dx(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:hx(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function hx(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function Op(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function fx(n){return n.reduce((e,t)=>je(e,t.meta),{})}function Rp(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function l0(n,e){return e.children.some(t=>t===n||l0(n,t))}const u0=/#/g,px=/&/g,mx=/\//g,gx=/=/g,_x=/\?/g,c0=/\+/g,yx=/%5B/g,vx=/%5D/g,d0=/%5E/g,bx=/%60/g,h0=/%7B/g,Tx=/%7C/g,f0=/%7D/g,xx=/%20/g;function ah(n){return encodeURI(""+n).replace(Tx,"|").replace(yx,"[").replace(vx,"]")}function wx(n){return ah(n).replace(h0,"{").replace(f0,"}").replace(d0,"^")}function Jc(n){return ah(n).replace(c0,"%2B").replace(xx,"+").replace(u0,"%23").replace(px,"%26").replace(bx,"`").replace(h0,"{").replace(f0,"}").replace(d0,"^")}function Sx(n){return Jc(n).replace(gx,"%3D")}function Cx(n){return ah(n).replace(u0,"%23").replace(_x,"%3F")}function Ex(n){return n==null?"":Cx(n).replace(mx,"%2F")}function kl(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function Ax(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(c0," "),a=r.indexOf("="),o=kl(a<0?r:r.slice(0,a)),l=a<0?null:kl(r.slice(a+1));if(o in e){let u=e[o];tn(u)||(u=e[o]=[u]),u.push(l)}else e[o]=l}return e}function Mp(n){let e="";for(let t in n){const i=n[t];if(t=Sx(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(tn(i)?i.map(r=>r&&Jc(r)):[i&&Jc(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function Dx(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=tn(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const kx=Symbol(""),Bp=Symbol(""),cu=Symbol(""),oh=Symbol(""),ed=Symbol("");function Ca(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function as(n,e,t,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,o)=>{const l=h=>{h===!1?o($r(4,{from:t,to:e})):h instanceof Error?o(h):ex(h)?o($r(2,{from:e,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),a())},u=n.call(i&&i.instances[s],e,t,l);let c=Promise.resolve(u);n.length<3&&(c=c.then(l)),c.catch(h=>o(h))})}function dc(n,e,t,i){const s=[];for(const r of n)for(const a in r.components){let o=r.components[a];if(!(e!=="beforeRouteEnter"&&!r.instances[a]))if(Ix(o)){const u=(o.__vccOpts||o)[e];u&&s.push(as(u,t,i,r,a))}else{let l=o();s.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${r.path}"`));const c=MT(u)?u.default:u;r.components[a]=c;const m=(c.__vccOpts||c)[e];return m&&as(m,t,i,r,a)()}))}}return s}function Ix(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Np(n){const e=Qs(cu),t=Qs(oh),i=Ki(()=>e.resolve(Re(n.to))),s=Ki(()=>{const{matched:l}=i.value,{length:u}=l,c=l[u-1],h=t.matched;if(!c||!h.length)return-1;const m=h.findIndex(jr.bind(null,c));if(m>-1)return m;const y=Fp(l[u-2]);return u>1&&Fp(c)===y&&h[h.length-1].path!==y?h.findIndex(jr.bind(null,l[u-2])):m}),r=Ki(()=>s.value>-1&&Rx(t.params,i.value.params)),a=Ki(()=>s.value>-1&&s.value===t.matched.length-1&&s0(t.params,i.value.params));function o(l={}){return Ox(l)?e[Re(n.replace)?"replace":"push"](Re(n.to)).catch(Ga):Promise.resolve()}return{route:i,href:Ki(()=>i.value.href),isActive:r,isExactActive:a,navigate:o}}const Px=Se({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Np,setup(n,{slots:e}){const t=xt(Np(n)),{options:i}=Qs(cu),s=Ki(()=>({[Up(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[Up(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&e.default(t);return n.custom?r:Zg("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),Lx=Px;function Ox(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Rx(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!tn(s)||s.length!==i.length||i.some((r,a)=>r!==s[a]))return!1}return!0}function Fp(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Up=(n,e,t)=>n??e??t,Mx=Se({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=Qs(ed),s=Ki(()=>n.route||i.value),r=Qs(Bp,0),a=Ki(()=>{let u=Re(r);const{matched:c}=s.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),o=Ki(()=>s.value.matched[a.value]);lc(Bp,Ki(()=>a.value+1)),lc(kx,o),lc(ed,s);const l=Be();return ls(()=>[l.value,o.value,n.name],([u,c,h],[m,y,_])=>{c&&(c.instances[h]=u,y&&y!==c&&u&&u===m&&(c.leaveGuards.size||(c.leaveGuards=y.leaveGuards),c.updateGuards.size||(c.updateGuards=y.updateGuards))),u&&c&&(!y||!jr(c,y)||!m)&&(c.enterCallbacks[h]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=s.value,c=n.name,h=o.value,m=h&&h.components[c];if(!m)return jp(t.default,{Component:m,route:u});const y=h.props[c],_=y?y===!0?u.params:typeof y=="function"?y(u):y:null,x=Zg(m,je({},_,e,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return jp(t.default,{Component:x,route:u})||x}}});function jp(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Bx=Mx;function Nx(n){const e=cx(n.routes,n),t=n.parseQuery||Ax,i=n.stringifyQuery||Mp,s=n.history,r=Ca(),a=Ca(),o=Ca(),l=jb(ts);let u=ts;xr&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=uc.bind(null,z=>""+z),h=uc.bind(null,Ex),m=uc.bind(null,kl);function y(z,te){let Z,se;return a0(z)?(Z=e.getRecordMatcher(z),se=te):se=z,e.addRoute(se,Z)}function _(z){const te=e.getRecordMatcher(z);te&&e.removeRoute(te)}function b(){return e.getRoutes().map(z=>z.record)}function x(z){return!!e.getRecordMatcher(z)}function S(z,te){if(te=je({},te||l.value),typeof z=="string"){const oe=cc(t,z,te.path),Ce=e.resolve({path:oe.path},te),pt=s.createHref(oe.fullPath);return je(oe,Ce,{params:m(Ce.params),hash:kl(oe.hash),redirectedFrom:void 0,href:pt})}let Z;if("path"in z)Z=je({},z,{path:cc(t,z.path,te.path).path});else{const oe=je({},z.params);for(const Ce in oe)oe[Ce]==null&&delete oe[Ce];Z=je({},z,{params:h(oe)}),te.params=h(te.params)}const se=e.resolve(Z,te),me=z.hash||"";se.params=c(m(se.params));const ce=FT(i,je({},z,{hash:wx(me),path:se.path})),le=s.createHref(ce);return je({fullPath:ce,hash:me,query:i===Mp?Dx(z.query):z.query||{}},se,{redirectedFrom:void 0,href:le})}function w(z){return typeof z=="string"?cc(t,z,l.value.path):je({},z)}function A(z,te){if(u!==z)return $r(8,{from:te,to:z})}function k(z){return N(z)}function C(z){return k(je(w(z),{replace:!0}))}function R(z){const te=z.matched[z.matched.length-1];if(te&&te.redirect){const{redirect:Z}=te;let se=typeof Z=="function"?Z(z):Z;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=w(se):{path:se},se.params={}),je({query:z.query,hash:z.hash,params:"path"in se?{}:z.params},se)}}function N(z,te){const Z=u=S(z),se=l.value,me=z.state,ce=z.force,le=z.replace===!0,oe=R(Z);if(oe)return N(je(w(oe),{state:typeof oe=="object"?je({},me,oe.state):me,force:ce,replace:le}),te||Z);const Ce=Z;Ce.redirectedFrom=te;let pt;return!ce&&UT(i,se,Z)&&(pt=$r(16,{to:Ce,from:se}),ft(se,se,!0,!1)),(pt?Promise.resolve(pt):ie(Ce,se)).catch(Ne=>Bn(Ne)?Bn(Ne,2)?Ne:Ae(Ne):pe(Ne,Ce,se)).then(Ne=>{if(Ne){if(Bn(Ne,2))return N(je({replace:le},w(Ne.to),{state:typeof Ne.to=="object"?je({},me,Ne.to.state):me,force:ce}),te||Ce)}else Ne=K(Ce,se,!0,le,me);return ee(Ce,se,Ne),Ne})}function H(z,te){const Z=A(z,te);return Z?Promise.reject(Z):Promise.resolve()}function M(z){const te=Ge.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(z):z()}function ie(z,te){let Z;const[se,me,ce]=Fx(z,te);Z=dc(se.reverse(),"beforeRouteLeave",z,te);for(const oe of se)oe.leaveGuards.forEach(Ce=>{Z.push(as(Ce,z,te))});const le=H.bind(null,z,te);return Z.push(le),X(Z).then(()=>{Z=[];for(const oe of r.list())Z.push(as(oe,z,te));return Z.push(le),X(Z)}).then(()=>{Z=dc(me,"beforeRouteUpdate",z,te);for(const oe of me)oe.updateGuards.forEach(Ce=>{Z.push(as(Ce,z,te))});return Z.push(le),X(Z)}).then(()=>{Z=[];for(const oe of ce)if(oe.beforeEnter)if(tn(oe.beforeEnter))for(const Ce of oe.beforeEnter)Z.push(as(Ce,z,te));else Z.push(as(oe.beforeEnter,z,te));return Z.push(le),X(Z)}).then(()=>(z.matched.forEach(oe=>oe.enterCallbacks={}),Z=dc(ce,"beforeRouteEnter",z,te),Z.push(le),X(Z))).then(()=>{Z=[];for(const oe of a.list())Z.push(as(oe,z,te));return Z.push(le),X(Z)}).catch(oe=>Bn(oe,8)?oe:Promise.reject(oe))}function ee(z,te,Z){o.list().forEach(se=>M(()=>se(z,te,Z)))}function K(z,te,Z,se,me){const ce=A(z,te);if(ce)return ce;const le=te===ts,oe=xr?history.state:{};Z&&(se||le?s.replace(z.fullPath,je({scroll:le&&oe&&oe.scroll},me)):s.push(z.fullPath,me)),l.value=z,ft(z,te,Z,le),Ae()}let q;function J(){q||(q=s.listen((z,te,Z)=>{if(!At.listening)return;const se=S(z),me=R(se);if(me){N(je(me,{replace:!0}),se).catch(Ga);return}u=se;const ce=l.value;xr&&WT(Ap(ce.fullPath,Z.delta),uu()),ie(se,ce).catch(le=>Bn(le,12)?le:Bn(le,2)?(N(le.to,se).then(oe=>{Bn(oe,20)&&!Z.delta&&Z.type===ro.pop&&s.go(-1,!1)}).catch(Ga),Promise.reject()):(Z.delta&&s.go(-Z.delta,!1),pe(le,se,ce))).then(le=>{le=le||K(se,ce,!1),le&&(Z.delta&&!Bn(le,8)?s.go(-Z.delta,!1):Z.type===ro.pop&&Bn(le,20)&&s.go(-1,!1)),ee(se,ce,le)}).catch(Ga)}))}let be=Ca(),ue=Ca(),he;function pe(z,te,Z){Ae(z);const se=ue.list();return se.length?se.forEach(me=>me(z,te,Z)):console.error(z),Promise.reject(z)}function vt(){return he&&l.value!==ts?Promise.resolve():new Promise((z,te)=>{be.add([z,te])})}function Ae(z){return he||(he=!z,J(),be.list().forEach(([te,Z])=>z?Z(z):te()),be.reset()),z}function ft(z,te,Z,se){const{scrollBehavior:me}=n;if(!xr||!me)return Promise.resolve();const ce=!Z&&XT(Ap(z.fullPath,0))||(se||!Z)&&history.state&&history.state.scroll||null;return Hb().then(()=>me(z,te,ce)).then(le=>le&&GT(le)).catch(le=>pe(le,z,te))}const at=z=>s.go(z);let jt;const Ge=new Set,At={currentRoute:l,listening:!0,addRoute:y,removeRoute:_,hasRoute:x,getRoutes:b,resolve:S,options:n,push:k,replace:C,go:at,back:()=>at(-1),forward:()=>at(1),beforeEach:r.add,beforeResolve:a.add,afterEach:o.add,onError:ue.add,isReady:vt,install(z){const te=this;z.component("RouterLink",Lx),z.component("RouterView",Bx),z.config.globalProperties.$router=te,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>Re(l)}),xr&&!jt&&l.value===ts&&(jt=!0,k(s.location).catch(me=>{}));const Z={};for(const me in ts)Object.defineProperty(Z,me,{get:()=>l.value[me],enumerable:!0});z.provide(cu,te),z.provide(oh,$b(Z)),z.provide(ed,l);const se=z.unmount;Ge.add(z),z.unmount=function(){Ge.delete(z),Ge.size<1&&(u=ts,q&&q(),q=null,l.value=ts,jt=!1,he=!1),se()}}};function X(z){return z.reduce((te,Z)=>te.then(()=>M(Z)),Promise.resolve())}return At}function Fx(n,e){const t=[],i=[],s=[],r=Math.max(e.matched.length,n.matched.length);for(let a=0;a<r;a++){const o=e.matched[a];o&&(n.matched.find(u=>jr(u,o))?i.push(o):t.push(o));const l=n.matched[a];l&&(e.matched.find(u=>jr(u,l))||s.push(l))}return[t,i,s]}function du(){return Qs(cu)}function p0(){return Qs(oh)}const Ux=Se({__name:"App",setup(n){const e=p0(),t=du();return e.meta.transition,t.afterEach((i,s)=>{s.path==="/detail"&&i.path==="/map"?i.meta.transition="slide-down":i.path==="/detail"&&s.path==="/map"&&(i.meta.transition="slide-up")}),(i,s)=>{const r=zb("router-view");return $(),Te(r,null,{default:fi(({Component:a})=>[De(Js,{name:Re(e).meta.transition},{default:fi(()=>[($(),Te(Vb(a)))]),_:2},1032,["name"])]),_:1})}}}),jx={class:"indicator"},$x=["onClick"],Hx=["data-is-current"],zx=["data-is-current"],Vx=Se({__name:"Indicator",props:{items:{},index:{}},emits:["click-item"],setup(n){return(e,t)=>($(),Y("div",jx,[($(!0),Y(Lt,null,en(e.$props.items,(i,s)=>($(),Y("div",{class:"indicator-item",style:pi({animationDelay:`${s*60}ms`}),onClick:()=>e.$emit("click-item",i,s)},[F("div",{class:"indicator-point","data-is-current":e.$props.index===s},null,8,Hx),F("div",{class:"indicator-label","data-is-current":e.$props.index===s},Ve(i),9,zx)],12,$x))),256))]))}}),_e=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},qx=_e(Vx,[["__scopeId","data-v-eb2324a6"]]),Gx={},Wx={class:"skip-intro"};function Xx(n,e){return $(),Y("div",Wx," SKIP INTRO → ")}const Yx=_e(Gx,[["render",Xx],["__scopeId","data-v-9c4720ea"]]);typeof self.global>"u"&&(self.global=self,global.Buffer=Xb);const Vs=Math.PI/2,kr={primary:14962944,secondary:9523530,background:16446442,ground:16446442,water:36863,roadRing:6207,grayText:6583435},Ee={primary:14962944,secondary:9523530,background:16446442,ground:16380905,water:13364217,grass:8519358,building:15328992,road:11184810,inherit:"inherit",current:"currentColor",transparent:"transparent",black:0,white:16777215,slate:{50:16317180,100:15857145,200:14870768,300:13358561,400:9741240,500:6583435,600:4674921,700:3359061,800:1976635,900:988970,950:132631},gray:{50:16382715,100:15987958,200:15067115,300:13751771,400:10265519,500:7041664,600:4937059,700:3621201,800:2042167,900:1120295,950:198418},zinc:{50:16448250,100:16053493,200:15000807,300:13948120,400:10592682,500:7434618,600:5395035,700:4144966,800:2565930,900:1579035,950:592139},neutral:{50:16448250,100:16119285,200:15066597,300:13948116,400:10724259,500:7566195,600:5395026,700:4210752,800:2500134,900:1513239,950:657930},stone:{50:16448249,100:16119284,200:15197668,300:14078929,400:11051678,500:7893356,600:5722958,700:4472892,800:2696484,900:1841431,950:789001},red:{50:16708338,100:16704226,200:16698058,300:16557477,400:16281969,500:15680580,600:14427686,700:12131356,800:10033947,900:8330525,950:4524554},orange:{50:16775149,100:16772565,200:16701354,300:16628340,400:16486972,500:16347926,600:15357964,700:12730636,800:10105874,900:8138002,950:4396039},amber:{50:16776171,100:16708551,200:16639626,300:16569165,400:16498468,500:16096779,600:14251782,700:11817737,800:9584654,900:7877903,950:4528643},yellow:{50:16710888,100:16710083,200:16707722,300:16638023,400:16436245,500:15381256,600:13273604,700:10576391,800:8736014,900:7421714,950:4333574},lime:{50:16252647,100:15531211,200:14285213,300:12513892,400:10741301,500:8702998,600:6660877,700:5078031,800:4153874,900:3560212,950:1715717},green:{50:15793652,100:14482663,200:12318672,300:8843180,400:4906624,500:2278750,600:1483594,700:1409085,800:1467700,900:1332013,950:339478},emerald:{50:15531509,100:13761253,200:11006928,300:7268279,400:3462041,500:1096065,600:366185,700:292951,800:417606,900:413243,950:142370},teal:{50:15793658,100:13433841,200:10090212,300:6220500,400:3003583,500:1357990,600:889992,700:1013358,800:1138265,900:1265226,950:274222},cyan:{50:15531775,100:13630206,200:10875900,300:6809849,400:2282478,500:440020,600:561586,700:947344,800:1400437,900:1461859,950:537412},sky:{50:15792639,100:14742270,200:12248829,300:8246268,400:3718648,500:959977,600:165063,700:223649,800:481669,900:805486,950:536393},blue:{50:15726335,100:14412542,200:12573694,300:9684477,400:6333946,500:3900150,600:2450411,700:1920728,800:1982639,900:1981066,950:1516884},indigo:{50:15659775,100:14739455,200:13095678,300:10859772,400:8490232,500:6514417,600:5195493,700:4405450,800:3616931,900:3223169,950:1973067},violet:{50:16118783,100:15591934,200:14538494,300:12891645,400:10980346,500:9133302,600:8141549,700:7153881,800:5972406,900:4988309,950:3018853},purple:{50:16446975,100:15984895,200:15324671,300:14202110,400:12616956,500:11032055,600:9647082,700:8266446,800:7020968,900:5774471,950:3868516},fuchsia:{50:16643327,100:16443647,200:16109822,300:15772668,400:15235577,500:14239471,600:12592851,700:10624175,800:8788367,900:7346805,950:4850766},pink:{50:16642808,100:16574451,200:16502760,300:16361684,400:16020150,500:15485081,600:14362487,700:12458077,800:10295117,900:8591427,950:5244708},rose:{50:16773618,100:16770278,200:16698835,300:16622767,400:16478597,500:16007006,600:14753096,700:12456508,800:10424889,900:8917815,950:4982041}};function m0(n=()=>{},e=300){let t=null;return function(){t!==null&&clearTimeout(t),t=setTimeout(n,e)}}const g0=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent);class td extends Kc{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new $e(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}class Kx extends td{constructor(e){super(e),this.isCSS2DObjectSign=!0}}const cn=new ye,$p=new Zd,Hp=new Zd,zp=new ye,Vp=new ye;class Zx{constructor(e={}){const t=this;let i,s,r,a;const o={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:i,height:s}},this.render=function(w,A){w.matrixWorldAutoUpdate===!0&&w.updateMatrixWorld(),A.parent===null&&A.matrixWorldAutoUpdate===!0&&A.updateMatrixWorld(),$p.copy(A.matrixWorldInverse),Hp.multiplyMatrices(A.projectionMatrix,$p),_(w,w,A),S(w)},this.setSize=function(w,A){i=w,s=A,r=i/2,a=s/2,l.style.width=w+"px",l.style.height=A+"px"};const u=g0?25:50,c=u,h=u,m=u,y=u;function _(w,A,k){if(w.isCSS2DObject){cn.setFromMatrixPosition(w.matrixWorld),cn.applyMatrix4(Hp);const C=w.visible===!0&&cn.z>=-1&&cn.z<=1&&w.layers.test(k.layers)===!0;if(w.element.style.display=C===!0?"":"none",C===!0){w.onBeforeRender(t,A,k);const N=w.element;if(w.isCSS2DObjectSign){let H=cn.x*r+r,M=-cn.y*a+a,ie=-100*w.center.x,ee=-100*w.center.y,K=!1;if((H<0||H>i)&&(K=!0),(M<0||M>s)&&(K=!0),H<h&&(H=h,ie=0),H>i-m&&(H=i-m,ie=-100),M<c&&(M=c,ee=0),M>s-y&&(M=s-y,ee=-100),K===!0){const q=-Math.atan2(-cn.x,cn.y);N.style.transform="translate("+ie+"%,"+ee+`%)translate(${H}px,${M}px)rotate(${q}rad)`,N.children[0].children[2].style.transform=`rotate(${-q}rad)`}else w.element.style.display="none"}else N.style.transform="translate("+-100*w.center.x+"%,"+-100*w.center.y+"%)translate("+(cn.x*r+r)+"px,"+(-cn.y*a+a)+"px)";N.parentNode!==l&&l.appendChild(N),w.onAfterRender(t,A,k)}const R={distanceToCameraSquared:b(k,w)};o.objects.set(w,R)}for(let C=0,R=w.children.length;C<R;C++)_(w.children[C],A,k)}function b(w,A){return zp.setFromMatrixPosition(w.matrixWorld),Vp.setFromMatrixPosition(A.matrixWorld),zp.distanceToSquared(Vp)}function x(w){const A=[];return w.traverse(function(k){k.isCSS2DObject&&A.push(k)}),A}function S(w){const A=x(w).sort(function(C,R){if(C.renderOrder!==R.renderOrder)return R.renderOrder-C.renderOrder;const N=o.objects.get(C).distanceToCameraSquared,H=o.objects.get(R).distanceToCameraSquared;return N-H}),k=A.length;for(let C=0,R=A.length;C<R;C++)A[C].element.style.zIndex=k-C}}}function Qx(){function n(t){const i=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-i))}})},1)}function e(t){clearTimeout(t)}window.requestIdleCallback=window.requestIdleCallback||n,window.cancelIdleCallback=window.cancelIdleCallback||e}class Jx{id;index;canUpdate;callbacks;info;constructor(){window.requestIdleCallback!==void 0||Qx(),this.canUpdate=!0,this.index=0,this.callbacks=[],this.info={calls:0}}async onceLoopRunTask(){const{callbacks:e}=this;if(e.length===0)return;const t=e.length-1;this.index>t&&(this.index=0);const i=e[this.index];if(i!==void 0){this.info.calls+=1;const s=await i();if(s instanceof Object){const{remove:r}=s;r===!0&&this.remove(i)}}this.index<t?this.index+=1:this.index===t&&this.abort()}reset(){this.id=void 0,this.canUpdate=!0,this.index=0}update(){this.canUpdate===!1||this.callbacks.length===0||(this.canUpdate=!1,this.id=window.requestIdleCallback(e=>{(e.timeRemaining()>1||e.didTimeout===!0)&&this.onceLoopRunTask(),this.canUpdate=!0,this.callbacks.length>0&&(this.id=window.requestIdleCallback(()=>this.update()))}))}abort(){this.id!==void 0&&(this.cancelIdleCallback(this.id),this.reset())}add(e){this.callbacks.push(e)}remove(e){const t=this.callbacks.indexOf(e);t>-1&&this.callbacks.splice(t,1)}requestIdleCallback(e,t){return window.requestIdleCallback?window.requestIdleCallback(e,t):window.setTimeout(e,1)}cancelIdleCallback(e){return window.cancelIdleCallback?window.cancelIdleCallback(e):clearTimeout(e)}}class lh{resources;constructor(){this.resources=new Set}track(e){if(!e)return e;if(Array.isArray(e)&&e.length>0)return e.forEach(t=>this.track(t)),e;if(e.dispose&&this.resources.add(e),(e instanceof rr||e instanceof Kc||e instanceof qe)&&(this.resources.add(e),e.geometry&&this.track(e.geometry),e.material&&this.track(e.material),e.children.length>0&&this.track(e.children)),e instanceof Kb){for(const i of Object.values(e))i instanceof bp&&this.track(i);const t=e.uniforms;if(t){for(const i of Object.values(t))if(i){const s=i.value;(s instanceof bp||Array.isArray(s))&&this.track(s)}}}return e}untrack(e){this.resources.delete(e)}dispose(){for(const e of this.resources)(e instanceof Kc||e instanceof qe)&&e.parent&&e.parent.remove(e);for(const e of this.resources)e.dispose&&e.dispose?.();this.resources.clear()}}class _0{callbacks;constructor(){this.callbacks=null}add(e){this.callbacks===null&&(this.callbacks=[]),e instanceof Function&&this.callbacks.push(e)}remove(e){if(this.callbacks===null)return;const t=this.callbacks.indexOf(e);t!==-1&&this.callbacks.splice(t,1),this.callbacks.length===0&&(this.callbacks=null)}update(e){this.callbacks!==null&&this.callbacks.forEach(t=>t(e))}clear(){this.callbacks=null}}const ew=new $e,tw=new ye;class iw extends wo{type="Stage";isStage=!0;ticker=new _0;scene=new rr;activeCamera;perspectiveCamera;orthographicCamera;effectComposer;controls;intersectObjects=[];constructor(e){super();const t=window.innerWidth,i=window.innerHeight,s=.1,r=3500,{perspectiveCamera:a=new ar(50,t/i,s,r),orthographicCamera:o=new Qd(-t/2,t/2,i/2,-i/2,s,r),controls:l}=e||{};this.perspectiveCamera=a,this.orthographicCamera=o,this.activeCamera=this.perspectiveCamera,this.controls=l}useOrthographicCamera(){const{controls:e,perspectiveCamera:t,orthographicCamera:i}=this,s=e.target;i.position.copy(t.position),i.lookAt(s),t.lookAt(s);const r=tw.copy(t.position),a=t.getViewSize(r.sub(s).length(),ew),o=a.x,l=a.y,u=o/-2,c=o/2,h=l/2,m=l/-2;i.left=u,i.right=c,i.top=h,i.bottom=m,i.updateProjectionMatrix(),this.activeCamera=i,e.object=i}usePerspectiveCamera(){const{controls:e,perspectiveCamera:t,orthographicCamera:i}=this,s=e.target;i.position.copy(t.position),i.lookAt(s),t.lookAt(s),this.activeCamera=t,e.object=t}render(){console.warn("Stage.render() is not implemented.")}dispose(){const{controls:e}=this;e&&e.dispose()}}class y0 extends wo{clock=new Zb;renderer;labelRenderer;stages;ticker=new _0;requestIdleCallbacks=new Jx;tracker=new lh;eventManager;isAnimating=!1;isCancelAnimation=!0;enableAnimate=!1;constructor(e){super();const{alpha:t=!1}=e||{},i=new So({antialias:!0,alpha:t});i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight);const s=new Zx;s.setSize(window.innerWidth,window.innerHeight),s.domElement.style.position="absolute",s.domElement.style.top="0px",s.domElement.style.left="0px",s.domElement.style.pointerEvents="none",this.labelRenderer=s;const r=[],a=new sw({dom:i.domElement,stages:r});this.stages=r,this.renderer=i,this.eventManager=a}addStage(...e){for(let t=0;t<e.length;t++){const i=e[t];i.render=this.render.bind(this),this.stages.push(i)}}dispose(){const{renderer:e,stages:t,tracker:i,eventManager:s}=this;s.dispose(),t.forEach(r=>i.track(r.scene)),i.dispose(),t.forEach(r=>r.dispose()),this.stages=[],e.dispose(),e.forceContextLoss()}render(){this._requestRender()}_requestRender(){if(this.isAnimating===!0)return;this.isAnimating=!0;const{stages:e,renderer:t,labelRenderer:i,clock:s}=this,r=()=>{this.isCancelAnimation=!0;const a=s.getDelta();this.requestIdleCallbacks.update(),this.ticker.update(a),yl.update()&&(this.isCancelAnimation=!1),e.forEach(l=>{l.ticker.update(a);const{scene:u,activeCamera:c,effectComposer:h}=l;l.controls&&l.controls.update(a),i.render(u,c),h&&h.passes.length>0?h.render(a):t.render(u,c)}),this.isCancelAnimation===!0&&this.enableAnimate===!1&&(t.setAnimationLoop(null),this.isAnimating=!1)};t.setAnimationLoop(r)}animate(e=!1){this.enableAnimate=e,e===!0&&this.render()}resize(){const{renderer:e,stages:t,labelRenderer:i}=this,s=window.innerWidth,r=window.innerHeight;t.forEach(a=>{const{controls:o,perspectiveCamera:l,orthographicCamera:u,effectComposer:c}=a;l.aspect=s/r,l.updateProjectionMatrix();const h=l.position.clone(),m=o&&o.target||new ye,y=l.getViewSize(h.sub(m).length(),new $e),_=y.x,b=y.y,x=_/-2,S=_/2,w=b/2,A=b/-2;u.left=x,u.right=S,u.top=w,u.bottom=A,u.updateProjectionMatrix(),c&&c.setSize(s,r),a.dispatchEvent({type:"resize"})}),e.setSize(s,r),i.setSize(s,r),this.render()}}const qp=new xo,id=new $e;function nw(n){id.x=n.clientX/window.innerWidth*2-1,id.y=-(n.clientY/window.innerHeight)*2+1}class sw extends wo{dom;stages;cacheObjects=[];onPointerMove;onPointerDown;onPointerUp;onClick;onDblClick;constructor(e){super();const{dom:t,stages:i}=e;this.dom=t,this.stages=i;const s=this;function r(h){s.dispatchEvent({type:"pointermove",event:h});const{stages:m}=s;m.forEach((y,_)=>{const{cacheObjects:b}=s,x=b[_],S=s.intersectObjects(h,y);if(S.length>0){const w=S[0].object;x==null?(w.dispatchEvent({type:"pointerenter"}),b[_]=w):x&&x!==w&&(x.dispatchEvent({type:"pointerleave"}),w.dispatchEvent({type:"pointerenter"}),b[_]=w),w.dispatchEvent({type:"pointermove"})}else x&&x.dispatchEvent({type:"pointerleave"}),delete b[_]})}function a(h){s.dispatchEvent({type:h.type,event:h});const{stages:m}=s;m.forEach(y=>{const _=s.intersectObjects(h,y);if(_.length>0){const b=_[0].object;b.dispatchEvent({type:h.type,event:h,object:b})}})}function o(h){s.dispatchEvent({type:h.type,event:h});const{stages:m}=s;m.forEach(y=>{const _=s.intersectObjects(h,y);if(_.length>0){const b=_[0].object;b.dispatchEvent({type:h.type,event:h,object:b})}})}function l(h){s.dispatchEvent({type:h.type,event:h});const{stages:m}=s;m.forEach(y=>{const _=s.intersectObjects(h,y);if(_.length>0){const b=_[0].object;b.dispatchEvent({type:h.type,event:h,object:b})}})}function u(h){s.dispatchEvent({type:h.type,event:h});const{stages:m}=s;m.forEach(y=>{const _=s.intersectObjects(h,y);if(_.length>0){const b=_[0].object;b.dispatchEvent({type:h.type,event:h,object:b})}})}function c(h){s.dispatchEvent({type:h.type,event:h});const{stages:m}=s;m.forEach(y=>{const _=s.intersectObjects(h,y);if(_.length>0){const b=_[0].object;b.dispatchEvent({type:h.type,event:h,object:b})}})}this.onPointerMove=r,this.onPointerDown=a,this.onPointerUp=o,this.onClick=l,this.onDblClick=u,t.addEventListener("pointermove",r),t.addEventListener("pointerdown",a),t.addEventListener("pointerup",o),t.addEventListener("click",l),t.addEventListener("dblclick",u),t.addEventListener("contextmenu",c)}intersectObjects(e,t){nw(e);const{scene:i,activeCamera:s,intersectObjects:r}=t,a=r.length>0?r:i.children;return qp.setFromCamera(id,s),qp.intersectObjects(a)}dispose(){const{dom:e}=this;e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("click",this.onClick),e.removeEventListener("dblclick",this.onDblClick)}}const Fn=(...n)=>{};function Un(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function v0(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ai={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Hr={duration:.5,overwrite:!1,delay:0},uh,zt,rt,Ni=1e8,Ze=1/Ni,nd=Math.PI*2,rw=nd/4,aw=0,b0=Math.sqrt,ow=Math.cos,lw=Math.sin,Rt=function(e){return typeof e=="string"},ht=function(e){return typeof e=="function"},Gn=function(e){return typeof e=="number"},ch=function(e){return typeof e>"u"},En=function(e){return typeof e=="object"},li=function(e){return e!==!1},dh=function(){return typeof window<"u"},ol=function(e){return ht(e)||Rt(e)},T0=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Vt=Array.isArray,sd=/(?:-?\.?\d|\.)+/gi,x0=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,wr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,hc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,w0=/[+-]=-?[.\d]+/,S0=/[^,'"\[\]\s]+/gi,uw=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ot,dn,rd,hh,ki={},Il={},C0,E0=function(e){return(Il=tr(e,ki))&&mi},fh=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ao=function(e,t){return!t&&console.warn(e)},A0=function(e,t){return e&&(ki[e]=t)&&Il&&(Il[e]=t)||ki},oo=function(){return 0},cw={suppressEvents:!0,isStart:!0,kill:!1},vl={suppressEvents:!0,kill:!1},dw={suppressEvents:!0},ph={},fs=[],ad={},D0,wi={},fc={},Gp=30,bl=[],mh="",gh=function(e){var t=e[0],i,s;if(En(t)||ht(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(s=bl.length;s--&&!bl[s].targetTest(t););i=bl[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new Q0(e[s],i)))||e.splice(s,1);return e},qs=function(e){return e._gsap||gh(Fi(e))[0]._gsap},k0=function(e,t,i){return(i=e[t])&&ht(i)?e[t]():ch(i)&&e.getAttribute&&e.getAttribute(t)||i},ui=function(e,t){return(e=e.split(",")).forEach(t)||e},_t=function(e){return Math.round(e*1e5)/1e5||0},It=function(e){return Math.round(e*1e7)/1e7||0},Ir=function(e,t){var i=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+s:i==="-"?e-s:i==="*"?e*s:e/s},hw=function(e,t){for(var i=t.length,s=0;e.indexOf(t[s])<0&&++s<i;);return s<i},Pl=function(){var e=fs.length,t=fs.slice(0),i,s;for(ad={},fs.length=0,i=0;i<e;i++)s=t[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},I0=function(e,t,i,s){fs.length&&!zt&&Pl(),e.render(t,i,s||zt&&t<0&&(e._initted||e._startAt)),fs.length&&!zt&&Pl()},P0=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(S0).length<2?t:Rt(e)?e.trim():e},L0=function(e){return e},ji=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},fw=function(e){return function(t,i){for(var s in i)s in t||s==="duration"&&e||s==="ease"||(t[s]=i[s])}},tr=function(e,t){for(var i in t)e[i]=t[i];return e},Wp=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=En(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Ll=function(e,t){var i={},s;for(s in e)s in t||(i[s]=e[s]);return i},Xa=function(e){var t=e.parent||ot,i=e.keyframes?fw(Vt(e.keyframes)):ji;if(li(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},pw=function(e,t){for(var i=e.length,s=i===t.length;s&&i--&&e[i]===t[i];);return i<0},O0=function(e,t,i,s,r){i===void 0&&(i="_first"),s===void 0&&(s="_last");var a=e[s],o;if(r)for(o=t[r];a&&a[r]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[s]=t,t._prev=a,t.parent=t._dp=e,t},hu=function(e,t,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=t._prev,a=t._next;r?r._next=a:e[i]===t&&(e[i]=a),a?a._prev=r:e[s]===t&&(e[s]=r),t._next=t._prev=t.parent=null},gs=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Gs=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},mw=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},od=function(e,t,i,s){return e._startAt&&(zt?e._startAt.revert(vl):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},gw=function n(e){return!e||e._ts&&n(e.parent)},Xp=function(e){return e._repeat?zr(e._tTime,e=e.duration()+e._rDelay)*e:0},zr=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Ol=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},fu=function(e){return e._end=It(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ze)||0))},pu=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=It(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),fu(e),i._dirty||Gs(i,e)),e},R0=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Ol(e.rawTime(),t),(!t._dur||Co(0,t.totalDuration(),i)-t._tTime>Ze)&&t.render(i,!0)),Gs(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Ze}},pn=function(e,t,i,s){return t.parent&&gs(t),t._start=It((Gn(i)?i:i||e!==ot?Bi(e,i,t):e._time)+t._delay),t._end=It(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),O0(e,t,"_first","_last",e._sort?"_start":0),ld(t)||(e._recent=t),s||R0(e,t),e._ts<0&&pu(e,e._tTime),e},M0=function(e,t){return(ki.ScrollTrigger||fh("scrollTrigger",t))&&ki.ScrollTrigger.create(t,e)},B0=function(e,t,i,s,r){if(yh(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!zt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&D0!==Si.frame)return fs.push(e),e._lazy=[r,s],1},_w=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},ld=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},yw=function(e,t,i,s){var r=e.ratio,a=t<0||!t&&(!e._start&&_w(e)&&!(!e._initted&&ld(e))||(e._ts<0||e._dp._ts<0)&&!ld(e))?0:1,o=e._rDelay,l=0,u,c,h;if(o&&e._repeat&&(l=Co(0,e._tDur,t),c=zr(l,o),e._yoyo&&c&1&&(a=1-a),c!==zr(e._tTime,o)&&(r=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==r||zt||s||e._zTime===Ze||!t&&e._zTime){if(!e._initted&&B0(e,t,s,i,l))return;for(h=e._zTime,e._zTime=t||(i?Ze:0),i||(i=t&&!h),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,u=e._pt;u;)u.r(a,u.d),u=u._next;t<0&&od(e,t,i,!0),e._onUpdate&&!i&&Ei(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Ei(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&gs(e,1),!i&&!zt&&(Ei(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},vw=function(e,t,i){var s;if(i>t)for(s=e._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},Vr=function(e,t,i,s){var r=e._repeat,a=It(t)||0,o=e._tTime/e._tDur;return o&&!s&&(e._time*=a/e._dur),e._dur=a,e._tDur=r?r<0?1e10:It(a*(r+1)+e._rDelay*r):a,o>0&&!s&&pu(e,e._tTime=e._tDur*o),e.parent&&fu(e),i||Gs(e.parent,e),e},Yp=function(e){return e instanceof Zt?Gs(e):Vr(e,e._dur)},bw={_start:0,endTime:oo,totalDuration:oo},Bi=function n(e,t,i){var s=e.labels,r=e._recent||bw,a=e.duration()>=Ni?r.endTime(!1):e._dur,o,l,u;return Rt(t)&&(isNaN(t)||t in s)?(l=t.charAt(0),u=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(o<0?r:i).totalDuration()/100:1)):o<0?(t in s||(s[t]=a),s[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),u&&i&&(l=l/100*(Vt(i)?i[0]:i).totalDuration()),o>1?n(e,t.substr(0,o-1),i)+l:a+l)):t==null?a:+t},Ya=function(e,t,i){var s=Gn(t[1]),r=(s?2:1)+(e<2?0:1),a=t[r],o,l;if(s&&(a.duration=t[1]),a.parent=i,e){for(o=a,l=i;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=li(l.vars.inherit)&&l.parent;a.immediateRender=li(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[r-1]}return new bt(t[0],a,t[r+1])},Ts=function(e,t){return e||e===0?t(e):t},Co=function(e,t,i){return i<e?e:i>t?t:i},$t=function(e,t){return!Rt(e)||!(t=uw.exec(e))?"":t[1]},Tw=function(e,t,i){return Ts(i,function(s){return Co(e,t,s)})},ud=[].slice,N0=function(e,t){return e&&En(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&En(e[0]))&&!e.nodeType&&e!==dn},xw=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(s){var r;return Rt(s)&&!t||N0(s,1)?(r=i).push.apply(r,Fi(s)):i.push(s)})||i},Fi=function(e,t,i){return rt&&!t&&rt.selector?rt.selector(e):Rt(e)&&!i&&(rd||!qr())?ud.call((t||hh).querySelectorAll(e),0):Vt(e)?xw(e,i):N0(e)?ud.call(e,0):e?[e]:[]},cd=function(e){return e=Fi(e)[0]||ao("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Fi(t,i.querySelectorAll?i:i===e?ao("Invalid scope")||hh.createElement("div"):e)}},F0=function(e){return e.sort(function(){return .5-Math.random()})},U0=function(e){if(ht(e))return e;var t=En(e)?e:{each:e},i=Ws(t.ease),s=t.from||0,r=parseFloat(t.base)||0,a={},o=s>0&&s<1,l=isNaN(s)||o,u=t.axis,c=s,h=s;return Rt(s)?c=h={center:.5,edges:.5,end:1}[s]||0:!o&&l&&(c=s[0],h=s[1]),function(m,y,_){var b=(_||t).length,x=a[b],S,w,A,k,C,R,N,H,M;if(!x){if(M=t.grid==="auto"?0:(t.grid||[1,Ni])[1],!M){for(N=-Ni;N<(N=_[M++].getBoundingClientRect().left)&&M<b;);M<b&&M--}for(x=a[b]=[],S=l?Math.min(M,b)*c-.5:s%M,w=M===Ni?0:l?b*h/M-.5:s/M|0,N=0,H=Ni,R=0;R<b;R++)A=R%M-S,k=w-(R/M|0),x[R]=C=u?Math.abs(u==="y"?k:A):b0(A*A+k*k),C>N&&(N=C),C<H&&(H=C);s==="random"&&F0(x),x.max=N-H,x.min=H,x.v=b=(parseFloat(t.amount)||parseFloat(t.each)*(M>b?b-1:u?u==="y"?b/M:M:Math.max(M,b/M))||0)*(s==="edges"?-1:1),x.b=b<0?r-b:r,x.u=$t(t.amount||t.each)||0,i=i&&b<0?Y0(i):i}return b=(x[m]-x.min)/x.max||0,It(x.b+(i?i(b):b)*x.v)+x.u}},dd=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var s=It(Math.round(parseFloat(i)/e)*e*t);return(s-s%1)/t+(Gn(i)?0:$t(i))}},j0=function(e,t){var i=Vt(e),s,r;return!i&&En(e)&&(s=i=e.radius||Ni,e.values?(e=Fi(e.values),(r=!Gn(e[0]))&&(s*=s)):e=dd(e.increment)),Ts(t,i?ht(e)?function(a){return r=e(a),Math.abs(r-a)<=s?r:a}:function(a){for(var o=parseFloat(r?a.x:a),l=parseFloat(r?a.y:0),u=Ni,c=0,h=e.length,m,y;h--;)r?(m=e[h].x-o,y=e[h].y-l,m=m*m+y*y):m=Math.abs(e[h]-o),m<u&&(u=m,c=h);return c=!s||u<=s?e[c]:a,r||c===a||Gn(a)?c:c+$t(a)}:dd(e))},$0=function(e,t,i,s){return Ts(Vt(e)?!t:i===!0?!!(i=0):!s,function(){return Vt(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*s)/s})},ww=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(s){return t.reduce(function(r,a){return a(r)},s)}},Sw=function(e,t){return function(i){return e(parseFloat(i))+(t||$t(i))}},Cw=function(e,t,i){return z0(e,t,0,1,i)},H0=function(e,t,i){return Ts(i,function(s){return e[~~t(s)]})},Ew=function n(e,t,i){var s=t-e;return Vt(e)?H0(e,n(0,e.length),t):Ts(i,function(r){return(s+(r-e)%s)%s+e})},Aw=function n(e,t,i){var s=t-e,r=s*2;return Vt(e)?H0(e,n(0,e.length-1),t):Ts(i,function(a){return a=(r+(a-e)%r)%r||0,e+(a>s?r-a:a)})},lo=function(e){for(var t=0,i="",s,r,a,o;~(s=e.indexOf("random(",t));)a=e.indexOf(")",s),o=e.charAt(s+7)==="[",r=e.substr(s+7,a-s-7).match(o?S0:sd),i+=e.substr(t,s-t)+$0(o?r:+r[0],o?0:+r[1],+r[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},z0=function(e,t,i,s,r){var a=t-e,o=s-i;return Ts(r,function(l){return i+((l-e)/a*o||0)})},Dw=function n(e,t,i,s){var r=isNaN(e+t)?0:function(y){return(1-y)*e+y*t};if(!r){var a=Rt(e),o={},l,u,c,h,m;if(i===!0&&(s=1)&&(i=null),a)e={p:e},t={p:t};else if(Vt(e)&&!Vt(t)){for(c=[],h=e.length,m=h-2,u=1;u<h;u++)c.push(n(e[u-1],e[u]));h--,r=function(_){_*=h;var b=Math.min(m,~~_);return c[b](_-b)},i=t}else s||(e=tr(Vt(e)?[]:{},e));if(!c){for(l in t)_h.call(o,e,l,"get",t[l]);r=function(_){return Th(_,o)||(a?e.p:e)}}}return Ts(i,r)},Kp=function(e,t,i){var s=e.labels,r=Ni,a,o,l;for(a in s)o=s[a]-t,o<0==!!i&&o&&r>(o=Math.abs(o))&&(l=a,r=o);return l},Ei=function(e,t,i){var s=e.vars,r=s[t],a=rt,o=e._ctx,l,u,c;if(r)return l=s[t+"Params"],u=s.callbackScope||e,i&&fs.length&&Pl(),o&&(rt=o),c=l?r.apply(u,l):r.call(u),rt=a,c},Fa=function(e){return gs(e),e.scrollTrigger&&e.scrollTrigger.kill(!!zt),e.progress()<1&&Ei(e,"onInterrupt"),e},Sr,V0=[],q0=function(e){if(e)if(e=!e.name&&e.default||e,dh()||e.headless){var t=e.name,i=ht(e),s=t&&!i&&e.init?function(){this._props=[]}:e,r={init:oo,render:Th,add:_h,kill:Vw,modifier:zw,rawVars:0},a={targetTest:0,get:0,getSetter:bh,aliases:{},register:0};if(qr(),e!==s){if(wi[t])return;ji(s,ji(Ll(e,r),a)),tr(s.prototype,tr(r,Ll(e,a))),wi[s.prop=t]=s,e.targetTest&&(bl.push(s),ph[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}A0(t,s),e.register&&e.register(mi,s,ci)}else V0.push(e)},Ye=255,Ua={aqua:[0,Ye,Ye],lime:[0,Ye,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ye],navy:[0,0,128],white:[Ye,Ye,Ye],olive:[128,128,0],yellow:[Ye,Ye,0],orange:[Ye,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ye,0,0],pink:[Ye,192,203],cyan:[0,Ye,Ye],transparent:[Ye,Ye,Ye,0]},pc=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Ye+.5|0},G0=function(e,t,i){var s=e?Gn(e)?[e>>16,e>>8&Ye,e&Ye]:0:Ua.black,r,a,o,l,u,c,h,m,y,_;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ua[e])s=Ua[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+r+r+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Ye,s&Ye,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Ye,e&Ye]}else if(e.substr(0,3)==="hsl"){if(s=_=e.match(sd),!t)l=+s[0]%360/360,u=+s[1]/100,c=+s[2]/100,a=c<=.5?c*(u+1):c+u-c*u,r=c*2-a,s.length>3&&(s[3]*=1),s[0]=pc(l+1/3,r,a),s[1]=pc(l,r,a),s[2]=pc(l-1/3,r,a);else if(~e.indexOf("="))return s=e.match(x0),i&&s.length<4&&(s[3]=1),s}else s=e.match(sd)||Ua.transparent;s=s.map(Number)}return t&&!_&&(r=s[0]/Ye,a=s[1]/Ye,o=s[2]/Ye,h=Math.max(r,a,o),m=Math.min(r,a,o),c=(h+m)/2,h===m?l=u=0:(y=h-m,u=c>.5?y/(2-h-m):y/(h+m),l=h===r?(a-o)/y+(a<o?6:0):h===a?(o-r)/y+2:(r-a)/y+4,l*=60),s[0]=~~(l+.5),s[1]=~~(u*100+.5),s[2]=~~(c*100+.5)),i&&s.length<4&&(s[3]=1),s},W0=function(e){var t=[],i=[],s=-1;return e.split(ps).forEach(function(r){var a=r.match(wr)||[];t.push.apply(t,a),i.push(s+=a.length+1)}),t.c=i,t},Zp=function(e,t,i){var s="",r=(e+s).match(ps),a=t?"hsla(":"rgba(",o=0,l,u,c,h;if(!r)return e;if(r=r.map(function(m){return(m=G0(m,t,1))&&a+(t?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),i&&(c=W0(e),l=i.c,l.join(s)!==c.c.join(s)))for(u=e.replace(ps,"1").split(wr),h=u.length-1;o<h;o++)s+=u[o]+(~l.indexOf(o)?r.shift()||a+"0,0,0,0)":(c.length?c:r.length?r:i).shift());if(!u)for(u=e.split(ps),h=u.length-1;o<h;o++)s+=u[o]+r[o];return s+u[h]},ps=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ua)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),kw=/hsl[a]?\(/,X0=function(e){var t=e.join(" "),i;if(ps.lastIndex=0,ps.test(t))return i=kw.test(t),e[1]=Zp(e[1],i),e[0]=Zp(e[0],i,W0(e[1])),!0},uo,Si=function(){var n=Date.now,e=500,t=33,i=n(),s=i,r=1e3/240,a=r,o=[],l,u,c,h,m,y,_=function b(x){var S=n()-s,w=x===!0,A,k,C,R;if((S>e||S<0)&&(i+=S-t),s+=S,C=s-i,A=C-a,(A>0||w)&&(R=++h.frame,m=C-h.time*1e3,h.time=C=C/1e3,a+=A+(A>=r?4:r-A),k=1),w||(l=u(b)),k)for(y=0;y<o.length;y++)o[y](C,m,R,x)};return h={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(x){return m/(1e3/(x||60))},wake:function(){C0&&(!rd&&dh()&&(dn=rd=window,hh=dn.document||{},ki.gsap=mi,(dn.gsapVersions||(dn.gsapVersions=[])).push(mi.version),E0(Il||dn.GreenSockGlobals||!dn.gsap&&dn||{}),V0.forEach(q0)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),u=c||function(x){return setTimeout(x,a-h.time*1e3+1|0)},uo=1,_(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),uo=0,u=oo},lagSmoothing:function(x,S){e=x||1/0,t=Math.min(S||33,e)},fps:function(x){r=1e3/(x||240),a=h.time*1e3+r},add:function(x,S,w){var A=S?function(k,C,R,N){x(k,C,R,N),h.remove(A)}:x;return h.remove(x),o[w?"unshift":"push"](A),qr(),A},remove:function(x,S){~(S=o.indexOf(x))&&o.splice(S,1)&&y>=S&&y--},_listeners:o},h}(),qr=function(){return!uo&&Si.wake()},Oe={},Iw=/^[\d.\-M][\d.\-,\s]/,Pw=/["']/g,Lw=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),s=i[0],r=1,a=i.length,o,l,u;r<a;r++)l=i[r],o=r!==a-1?l.lastIndexOf(","):l.length,u=l.substr(0,o),t[s]=isNaN(u)?u.replace(Pw,"").trim():+u,s=l.substr(o+1).trim();return t},Ow=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<i?e.indexOf(")",i+1):i)},Rw=function(e){var t=(e+"").split("("),i=Oe[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Lw(t[1])]:Ow(e).split(",").map(P0)):Oe._CE&&Iw.test(e)?Oe._CE("",e):i},Y0=function(e){return function(t){return 1-e(1-t)}},K0=function n(e,t){for(var i=e._first,s;i;)i instanceof Zt?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=t)),i=i._next},Ws=function(e,t){return e&&(ht(e)?e:Oe[e]||Rw(e))||t},or=function(e,t,i,s){i===void 0&&(i=function(l){return 1-t(1-l)}),s===void 0&&(s=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:s},a;return ui(e,function(o){Oe[o]=ki[o]=r,Oe[a=o.toLowerCase()]=i;for(var l in r)Oe[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Oe[o+"."+l]=r[l]}),r},Z0=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},mc=function n(e,t,i){var s=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),a=r/nd*(Math.asin(1/s)||0),o=function(c){return c===1?1:s*Math.pow(2,-10*c)*lw((c-a)*r)+1},l=e==="out"?o:e==="in"?function(u){return 1-o(1-u)}:Z0(o);return r=nd/r,l.config=function(u,c){return n(e,u,c)},l},gc=function n(e,t){t===void 0&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},s=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:Z0(i);return s.config=function(r){return n(e,r)},s};ui("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;or(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Oe.Linear.easeNone=Oe.none=Oe.Linear.easeIn;or("Elastic",mc("in"),mc("out"),mc());(function(n,e){var t=1/e,i=2*t,s=2.5*t,r=function(o){return o<t?n*o*o:o<i?n*Math.pow(o-1.5/e,2)+.75:o<s?n*(o-=2.25/e)*o+.9375:n*Math.pow(o-2.625/e,2)+.984375};or("Bounce",function(a){return 1-r(1-a)},r)})(7.5625,2.75);or("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});or("Circ",function(n){return-(b0(1-n*n)-1)});or("Sine",function(n){return n===1?1:-ow(n*rw)+1});or("Back",gc("in"),gc("out"),gc());Oe.SteppedEase=Oe.steps=ki.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,s=e+(t?0:1),r=t?1:0,a=1-Ze;return function(o){return((s*Co(0,a,o)|0)+r)*i}}};Hr.ease=Oe["quad.out"];ui("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return mh+=n+","+n+"Params,"});var Q0=function(e,t){this.id=aw++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:k0,this.set=t?t.getSetter:bh},co=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Vr(this,+t.duration,1,1),this.data=t.data,rt&&(this._ctx=rt,rt.data.push(this)),uo||Si.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Vr(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,s){if(qr(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(pu(this,i),!r._dp||r.parent||R0(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&pn(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Ze||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),I0(this,i,s)),this},e.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Xp(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},e.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Xp(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?zr(this._tTime,r)+1:1},e.timeScale=function(i,s){if(!arguments.length)return this._rts===-Ze?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Ol(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Ze?0:this._rts,this.totalTime(Co(-Math.abs(this._delay),this._tDur,r),s!==!1),fu(this),mw(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(qr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ze&&(this._tTime-=Ze)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&pn(s,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(li(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ol(s.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=dw);var s=zt;return zt=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),zt=s,this},e.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Yp(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,Yp(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,s){return this.totalTime(Bi(this,i),li(s))},e.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,li(s))},e.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},e.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Ze:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ze,this},e.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-Ze)},e.eventCallback=function(i,s,r){var a=this.vars;return arguments.length>1?(s?(a[i]=s,r&&(a[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete a[i],this):a[i]},e.then=function(i){var s=this;return new Promise(function(r){var a=ht(i)?i:L0,o=function(){var u=s.then;s.then=null,ht(a)&&(a=a(s))&&(a.then||a===s)&&(s.then=u),r(a),s.then=u};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?o():s._prom=o})},e.kill=function(){Fa(this)},n}();ji(co.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ze,_prom:0,_ps:!1,_rts:1});var Zt=function(n){v0(e,n);function e(i,s){var r;return i===void 0&&(i={}),r=n.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=li(i.sortChildren),ot&&pn(i.parent||ot,Un(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&M0(Un(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(s,r,a){return Ya(0,arguments,this),this},t.from=function(s,r,a){return Ya(1,arguments,this),this},t.fromTo=function(s,r,a,o){return Ya(2,arguments,this),this},t.set=function(s,r,a){return r.duration=0,r.parent=this,Xa(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new bt(s,r,Bi(this,a),1),this},t.call=function(s,r,a){return pn(this,bt.delayedCall(0,s,r),a)},t.staggerTo=function(s,r,a,o,l,u,c){return a.duration=r,a.stagger=a.stagger||o,a.onComplete=u,a.onCompleteParams=c,a.parent=this,new bt(s,a,Bi(this,l)),this},t.staggerFrom=function(s,r,a,o,l,u,c){return a.runBackwards=1,Xa(a).immediateRender=li(a.immediateRender),this.staggerTo(s,r,a,o,l,u,c)},t.staggerFromTo=function(s,r,a,o,l,u,c,h){return o.startAt=a,Xa(o).immediateRender=li(o.immediateRender),this.staggerTo(s,r,o,l,u,c,h)},t.render=function(s,r,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=s<=0?0:It(s),h=this._zTime<0!=s<0&&(this._initted||!u),m,y,_,b,x,S,w,A,k,C,R,N;if(this!==ot&&c>l&&s>=0&&(c=l),c!==this._tTime||a||h){if(o!==this._time&&u&&(c+=this._time-o,s+=this._time-o),m=c,k=this._start,A=this._ts,S=!A,h&&(u||(o=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(R=this._yoyo,x=u+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(x*100+s,r,a);if(m=It(c%x),c===l?(b=this._repeat,m=u):(b=~~(c/x),b&&b===c/x&&(m=u,b--),m>u&&(m=u)),C=zr(this._tTime,x),!o&&this._tTime&&C!==b&&this._tTime-C*x-this._dur<=0&&(C=b),R&&b&1&&(m=u-m,N=1),b!==C&&!this._lock){var H=R&&C&1,M=H===(R&&b&1);if(b<C&&(H=!H),o=H?0:c%u?u:c,this._lock=1,this.render(o||(N?0:It(b*x)),r,!u)._lock=0,this._tTime=c,!r&&this.parent&&Ei(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),o&&o!==this._time||S!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,M&&(this._lock=2,o=H?u:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!S)return this;K0(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=vw(this,It(o),It(m)),w&&(c-=m-(m=w._start))),this._tTime=c,this._time=m,this._act=!A,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,o=0),!o&&m&&!r&&!b&&(Ei(this,"onStart"),this._tTime!==c))return this;if(m>=o&&s>=0)for(y=this._first;y;){if(_=y._next,(y._act||m>=y._start)&&y._ts&&w!==y){if(y.parent!==this)return this.render(s,r,a);if(y.render(y._ts>0?(m-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(m-y._start)*y._ts,r,a),m!==this._time||!this._ts&&!S){w=0,_&&(c+=this._zTime=-Ze);break}}y=_}else{y=this._last;for(var ie=s<0?s:m;y;){if(_=y._prev,(y._act||ie<=y._end)&&y._ts&&w!==y){if(y.parent!==this)return this.render(s,r,a);if(y.render(y._ts>0?(ie-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(ie-y._start)*y._ts,r,a||zt&&(y._initted||y._startAt)),m!==this._time||!this._ts&&!S){w=0,_&&(c+=this._zTime=ie?-Ze:Ze);break}}y=_}}if(w&&!r&&(this.pause(),w.render(m>=o?0:-Ze)._zTime=m>=o?1:-1,this._ts))return this._start=k,fu(this),this.render(s,r,a);this._onUpdate&&!r&&Ei(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&o)&&(k===this._start||Math.abs(A)!==Math.abs(this._ts))&&(this._lock||((s||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&gs(this,1),!r&&!(s<0&&!o)&&(c||o||!l)&&(Ei(this,c===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,r){var a=this;if(Gn(r)||(r=Bi(this,r,s)),!(s instanceof co)){if(Vt(s))return s.forEach(function(o){return a.add(o,r)}),this;if(Rt(s))return this.addLabel(s,r);if(ht(s))s=bt.delayedCall(0,s);else return this}return this!==s?pn(this,s,r):this},t.getChildren=function(s,r,a,o){s===void 0&&(s=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),o===void 0&&(o=-Ni);for(var l=[],u=this._first;u;)u._start>=o&&(u instanceof bt?r&&l.push(u):(a&&l.push(u),s&&l.push.apply(l,u.getChildren(!0,r,a)))),u=u._next;return l},t.getById=function(s){for(var r=this.getChildren(1,1,1),a=r.length;a--;)if(r[a].vars.id===s)return r[a]},t.remove=function(s){return Rt(s)?this.removeLabel(s):ht(s)?this.killTweensOf(s):(hu(this,s),s===this._recent&&(this._recent=this._last),Gs(this))},t.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=It(Si.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},t.addLabel=function(s,r){return this.labels[s]=Bi(this,r),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,r,a){var o=bt.delayedCall(0,r||oo,a);return o.data="isPause",this._hasPause=1,pn(this,o,Bi(this,s))},t.removePause=function(s){var r=this._first;for(s=Bi(this,s);r;)r._start===s&&r.data==="isPause"&&gs(r),r=r._next},t.killTweensOf=function(s,r,a){for(var o=this.getTweensOf(s,a),l=o.length;l--;)us!==o[l]&&o[l].kill(s,r);return this},t.getTweensOf=function(s,r){for(var a=[],o=Fi(s),l=this._first,u=Gn(r),c;l;)l instanceof bt?hw(l._targets,o)&&(u?(!us||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&a.push(l):(c=l.getTweensOf(o,r)).length&&a.push.apply(a,c),l=l._next;return a},t.tweenTo=function(s,r){r=r||{};var a=this,o=Bi(a,s),l=r,u=l.startAt,c=l.onStart,h=l.onStartParams,m=l.immediateRender,y,_=bt.to(a,ji({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:r.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale())||Ze,onStart:function(){if(a.pause(),!y){var x=r.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale());_._dur!==x&&Vr(_,x,0,1).render(_._time,!0,!0),y=1}c&&c.apply(_,h||[])}},r));return m?_.render(0):_},t.tweenFromTo=function(s,r,a){return this.tweenTo(r,ji({startAt:{time:Bi(this,s)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),Kp(this,Bi(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),Kp(this,Bi(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Ze)},t.shiftChildren=function(s,r,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,u;o;)o._start>=a&&(o._start+=s,o._end+=s),o=o._next;if(r)for(u in l)l[u]>=a&&(l[u]+=s);return Gs(this)},t.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return n.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,a;r;)a=r._next,this.remove(r),r=a;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Gs(this)},t.totalDuration=function(s){var r=0,a=this,o=a._last,l=Ni,u,c,h;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-s:s));if(a._dirty){for(h=a.parent;o;)u=o._prev,o._dirty&&o.totalDuration(),c=o._start,c>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,pn(a,o,c-o._delay,1)._lock=0):l=c,c<0&&o._ts&&(r-=c,(!h&&!a._dp||h&&h.smoothChildTiming)&&(a._start+=c/a._ts,a._time-=c,a._tTime-=c),a.shiftChildren(-c,!1,-1/0),l=0),o._end>r&&o._ts&&(r=o._end),o=u;Vr(a,a===ot&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(s){if(ot._ts&&(I0(ot,Ol(s,ot)),D0=Si.frame),Si.frame>=Gp){Gp+=Ai.autoSleep||120;var r=ot._first;if((!r||!r._ts)&&Ai.autoSleep&&Si._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Si.sleep()}}},e}(co);ji(Zt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Mw=function(e,t,i,s,r,a,o){var l=new ci(this._pt,e,t,0,1,s_,null,r),u=0,c=0,h,m,y,_,b,x,S,w;for(l.b=i,l.e=s,i+="",s+="",(S=~s.indexOf("random("))&&(s=lo(s)),a&&(w=[i,s],a(w,e,t),i=w[0],s=w[1]),m=i.match(hc)||[];h=hc.exec(s);)_=h[0],b=s.substring(u,h.index),y?y=(y+1)%5:b.substr(-5)==="rgba("&&(y=1),_!==m[c++]&&(x=parseFloat(m[c-1])||0,l._pt={_next:l._pt,p:b||c===1?b:",",s:x,c:_.charAt(1)==="="?Ir(x,_)-x:parseFloat(_)-x,m:y&&y<4?Math.round:0},u=hc.lastIndex);return l.c=u<s.length?s.substring(u,s.length):"",l.fp=o,(w0.test(s)||S)&&(l.e=0),this._pt=l,l},_h=function(e,t,i,s,r,a,o,l,u,c){ht(s)&&(s=s(r||0,e,a));var h=e[t],m=i!=="get"?i:ht(h)?u?e[t.indexOf("set")||!ht(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():h,y=ht(h)?u?jw:i_:vh,_;if(Rt(s)&&(~s.indexOf("random(")&&(s=lo(s)),s.charAt(1)==="="&&(_=Ir(m,s)+($t(m)||0),(_||_===0)&&(s=_))),!c||m!==s||hd)return!isNaN(m*s)&&s!==""?(_=new ci(this._pt,e,t,+m||0,s-(m||0),typeof h=="boolean"?Hw:n_,0,y),u&&(_.fp=u),o&&_.modifier(o,this,e),this._pt=_):(!h&&!(t in e)&&fh(t,s),Mw.call(this,e,t,m,s,y,l||Ai.stringFilter,u))},Bw=function(e,t,i,s,r){if(ht(e)&&(e=Ka(e,r,t,i,s)),!En(e)||e.style&&e.nodeType||Vt(e)||T0(e))return Rt(e)?Ka(e,r,t,i,s):e;var a={},o;for(o in e)a[o]=Ka(e[o],r,t,i,s);return a},J0=function(e,t,i,s,r,a){var o,l,u,c;if(wi[e]&&(o=new wi[e]).init(r,o.rawVars?t[e]:Bw(t[e],s,r,a,i),i,s,a)!==!1&&(i._pt=l=new ci(i._pt,r,e,0,1,o.render,o,0,o.priority),i!==Sr))for(u=i._ptLookup[i._targets.indexOf(r)],c=o._props.length;c--;)u[o._props[c]]=l;return o},us,hd,yh=function n(e,t,i){var s=e.vars,r=s.ease,a=s.startAt,o=s.immediateRender,l=s.lazy,u=s.onUpdate,c=s.runBackwards,h=s.yoyoEase,m=s.keyframes,y=s.autoRevert,_=e._dur,b=e._startAt,x=e._targets,S=e.parent,w=S&&S.data==="nested"?S.vars.targets:x,A=e._overwrite==="auto"&&!uh,k=e.timeline,C,R,N,H,M,ie,ee,K,q,J,be,ue,he;if(k&&(!m||!r)&&(r="none"),e._ease=Ws(r,Hr.ease),e._yEase=h?Y0(Ws(h===!0?r:h,Hr.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!k&&!!s.runBackwards,!k||m&&!s.stagger){if(K=x[0]?qs(x[0]).harness:0,ue=K&&s[K.prop],C=Ll(s,ph),b&&(b._zTime<0&&b.progress(1),t<0&&c&&o&&!y?b.render(-1,!0):b.revert(c&&_?vl:cw),b._lazy=0),a){if(gs(e._startAt=bt.set(x,ji({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!b&&li(l),startAt:null,delay:0,onUpdate:u&&function(){return Ei(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(zt||!o&&!y)&&e._startAt.revert(vl),o&&_&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(c&&_&&!b){if(t&&(o=!1),N=ji({overwrite:!1,data:"isFromStart",lazy:o&&!b&&li(l),immediateRender:o,stagger:0,parent:S},C),ue&&(N[K.prop]=ue),gs(e._startAt=bt.set(x,N)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(zt?e._startAt.revert(vl):e._startAt.render(-1,!0)),e._zTime=t,!o)n(e._startAt,Ze,Ze);else if(!t)return}for(e._pt=e._ptCache=0,l=_&&li(l)||l&&!_,R=0;R<x.length;R++){if(M=x[R],ee=M._gsap||gh(x)[R]._gsap,e._ptLookup[R]=J={},ad[ee.id]&&fs.length&&Pl(),be=w===x?R:w.indexOf(M),K&&(q=new K).init(M,ue||C,e,be,w)!==!1&&(e._pt=H=new ci(e._pt,M,q.name,0,1,q.render,q,0,q.priority),q._props.forEach(function(pe){J[pe]=H}),q.priority&&(ie=1)),!K||ue)for(N in C)wi[N]&&(q=J0(N,C,e,be,M,w))?q.priority&&(ie=1):J[N]=H=_h.call(e,M,N,"get",C[N],be,w,0,s.stringFilter);e._op&&e._op[R]&&e.kill(M,e._op[R]),A&&e._pt&&(us=e,ot.killTweensOf(M,J,e.globalTime(t)),he=!e.parent,us=0),e._pt&&l&&(ad[ee.id]=1)}ie&&r_(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!he,m&&t<=0&&k.render(Ni,!0,!0)},Nw=function(e,t,i,s,r,a,o,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,h,m,y;if(!u)for(u=e._ptCache[t]=[],m=e._ptLookup,y=e._targets.length;y--;){if(c=m[y][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return hd=1,e.vars[t]="+=0",yh(e,o),hd=0,l?ao(t+" not eligible for reset"):1;u.push(c)}for(y=u.length;y--;)h=u[y],c=h._pt||h,c.s=(s||s===0)&&!r?s:c.s+(s||0)+a*c.c,c.c=i-c.s,h.e&&(h.e=_t(i)+$t(h.e)),h.b&&(h.b=c.s+$t(h.b))},Fw=function(e,t){var i=e[0]?qs(e[0]).harness:0,s=i&&i.aliases,r,a,o,l;if(!s)return t;r=tr({},t);for(a in s)if(a in r)for(l=s[a].split(","),o=l.length;o--;)r[l[o]]=r[a];return r},Uw=function(e,t,i,s){var r=t.ease||s||"power1.inOut",a,o;if(Vt(t))o=i[e]||(i[e]=[]),t.forEach(function(l,u){return o.push({t:u/(t.length-1)*100,v:l,e:r})});else for(a in t)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:r})},Ka=function(e,t,i,s,r){return ht(e)?e.call(t,i,s,r):Rt(e)&&~e.indexOf("random(")?lo(e):e},e_=mh+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",t_={};ui(e_+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return t_[n]=1});var bt=function(n){v0(e,n);function e(i,s,r,a){var o;typeof s=="number"&&(r.duration=s,s=r,r=null),o=n.call(this,a?s:Xa(s))||this;var l=o.vars,u=l.duration,c=l.delay,h=l.immediateRender,m=l.stagger,y=l.overwrite,_=l.keyframes,b=l.defaults,x=l.scrollTrigger,S=l.yoyoEase,w=s.parent||ot,A=(Vt(i)||T0(i)?Gn(i[0]):"length"in s)?[i]:Fi(i),k,C,R,N,H,M,ie,ee;if(o._targets=A.length?gh(A):ao("GSAP target "+i+" not found. https://gsap.com",!Ai.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=y,_||m||ol(u)||ol(c)){if(s=o.vars,k=o.timeline=new Zt({data:"nested",defaults:b||{},targets:w&&w.data==="nested"?w.vars.targets:A}),k.kill(),k.parent=k._dp=Un(o),k._start=0,m||ol(u)||ol(c)){if(N=A.length,ie=m&&U0(m),En(m))for(H in m)~e_.indexOf(H)&&(ee||(ee={}),ee[H]=m[H]);for(C=0;C<N;C++)R=Ll(s,t_),R.stagger=0,S&&(R.yoyoEase=S),ee&&tr(R,ee),M=A[C],R.duration=+Ka(u,Un(o),C,M,A),R.delay=(+Ka(c,Un(o),C,M,A)||0)-o._delay,!m&&N===1&&R.delay&&(o._delay=c=R.delay,o._start+=c,R.delay=0),k.to(M,R,ie?ie(C,M,A):0),k._ease=Oe.none;k.duration()?u=c=0:o.timeline=0}else if(_){Xa(ji(k.vars.defaults,{ease:"none"})),k._ease=Ws(_.ease||s.ease||"none");var K=0,q,J,be;if(Vt(_))_.forEach(function(ue){return k.to(A,ue,">")}),k.duration();else{R={};for(H in _)H==="ease"||H==="easeEach"||Uw(H,_[H],R,_.easeEach);for(H in R)for(q=R[H].sort(function(ue,he){return ue.t-he.t}),K=0,C=0;C<q.length;C++)J=q[C],be={ease:J.e,duration:(J.t-(C?q[C-1].t:0))/100*u},be[H]=J.v,k.to(A,be,K),K+=be.duration;k.duration()<u&&k.to({},{duration:u-k.duration()})}}u||o.duration(u=k.duration())}else o.timeline=0;return y===!0&&!uh&&(us=Un(o),ot.killTweensOf(A),us=0),pn(w,Un(o),r),s.reversed&&o.reverse(),s.paused&&o.paused(!0),(h||!u&&!_&&o._start===It(w._time)&&li(h)&&gw(Un(o))&&w.data!=="nested")&&(o._tTime=-Ze,o.render(Math.max(0,-c)||0)),x&&M0(Un(o),x),o}var t=e.prototype;return t.render=function(s,r,a){var o=this._time,l=this._tDur,u=this._dur,c=s<0,h=s>l-Ze&&!c?l:s<Ze?0:s,m,y,_,b,x,S,w,A,k;if(!u)yw(this,s,r,a);else if(h!==this._tTime||!s||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(m=h,A=this.timeline,this._repeat){if(b=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(b*100+s,r,a);if(m=It(h%b),h===l?(_=this._repeat,m=u):(_=~~(h/b),_&&_===It(h/b)&&(m=u,_--),m>u&&(m=u)),S=this._yoyo&&_&1,S&&(k=this._yEase,m=u-m),x=zr(this._tTime,b),m===o&&!a&&this._initted&&_===x)return this._tTime=h,this;_!==x&&(A&&this._yEase&&K0(A,S),this.vars.repeatRefresh&&!S&&!this._lock&&this._time!==b&&this._initted&&(this._lock=a=1,this.render(It(b*_),!0).invalidate()._lock=0))}if(!this._initted){if(B0(this,c?s:m,a,r,h))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&_!==x))return this;if(u!==this._dur)return this.render(s,r,a)}if(this._tTime=h,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(k||this._ease)(m/u),this._from&&(this.ratio=w=1-w),m&&!o&&!r&&!_&&(Ei(this,"onStart"),this._tTime!==h))return this;for(y=this._pt;y;)y.r(w,y.d),y=y._next;A&&A.render(s<0?s:A._dur*A._ease(m/this._dur),r,a)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(c&&od(this,s,r,a),Ei(this,"onUpdate")),this._repeat&&_!==x&&this.vars.onRepeat&&!r&&this.parent&&Ei(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&od(this,s,!0,!0),(s||!u)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&gs(this,1),!r&&!(c&&!o)&&(h||o||S)&&(Ei(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},t.resetTo=function(s,r,a,o,l){uo||Si.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||yh(this,u),c=this._ease(u/this._dur),Nw(this,s,r,a,o,c,u,l)?this.resetTo(s,r,a,o,1):(pu(this,0),this.parent||O0(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Fa(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,us&&us.vars.overwrite!==!0)._first||Fa(this),this.parent&&a!==this.timeline.totalDuration()&&Vr(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=s?Fi(s):o,u=this._ptLookup,c=this._pt,h,m,y,_,b,x,S;if((!r||r==="all")&&pw(o,l))return r==="all"&&(this._pt=0),Fa(this);for(h=this._op=this._op||[],r!=="all"&&(Rt(r)&&(b={},ui(r,function(w){return b[w]=1}),r=b),r=Fw(o,r)),S=o.length;S--;)if(~l.indexOf(o[S])){m=u[S],r==="all"?(h[S]=r,_=m,y={}):(y=h[S]=h[S]||{},_=r);for(b in _)x=m&&m[b],x&&((!("kill"in x.d)||x.d.kill(b)===!0)&&hu(this,x,"_pt"),delete m[b]),y!=="all"&&(y[b]=1)}return this._initted&&!this._pt&&c&&Fa(this),this},e.to=function(s,r){return new e(s,r,arguments[2])},e.from=function(s,r){return Ya(1,arguments)},e.delayedCall=function(s,r,a,o){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(s,r,a){return Ya(2,arguments)},e.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(s,r)},e.killTweensOf=function(s,r,a){return ot.killTweensOf(s,r,a)},e}(co);ji(bt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ui("staggerTo,staggerFrom,staggerFromTo",function(n){bt[n]=function(){var e=new Zt,t=ud.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var vh=function(e,t,i){return e[t]=i},i_=function(e,t,i){return e[t](i)},jw=function(e,t,i,s){return e[t](s.fp,i)},$w=function(e,t,i){return e.setAttribute(t,i)},bh=function(e,t){return ht(e[t])?i_:ch(e[t])&&e.setAttribute?$w:vh},n_=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Hw=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},s_=function(e,t){var i=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+s,i=i._next;s+=t.c}t.set(t.t,t.p,s,t)},Th=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},zw=function(e,t,i,s){for(var r=this._pt,a;r;)a=r._next,r.p===s&&r.modifier(e,t,i),r=a},Vw=function(e){for(var t=this._pt,i,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?hu(this,t,"_pt"):t.dep||(i=1),t=s;return!i},qw=function(e,t,i,s){s.mSet(e,t,s.m.call(s.tween,i,s.mt),s)},r_=function(e){for(var t=e._pt,i,s,r,a;t;){for(i=t._next,s=r;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:a)?t._prev._next=t:r=t,(t._next=s)?s._prev=t:a=t,t=i}e._pt=r},ci=function(){function n(t,i,s,r,a,o,l,u,c){this.t=i,this.s=r,this.c=a,this.p=s,this.r=o||n_,this.d=l||this,this.set=u||vh,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=qw,this.m=i,this.mt=r,this.tween=s},n}();ui(mh+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return ph[n]=1});ki.TweenMax=ki.TweenLite=bt;ki.TimelineLite=ki.TimelineMax=Zt;ot=new Zt({sortChildren:!1,defaults:Hr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ai.stringFilter=X0;var Xs=[],Tl={},Gw=[],Qp=0,Ww=0,_c=function(e){return(Tl[e]||Gw).map(function(t){return t()})},fd=function(){var e=Date.now(),t=[];e-Qp>2&&(_c("matchMediaInit"),Xs.forEach(function(i){var s=i.queries,r=i.conditions,a,o,l,u;for(o in s)a=dn.matchMedia(s[o]).matches,a&&(l=1),a!==r[o]&&(r[o]=a,u=1);u&&(i.revert(),l&&t.push(i))}),_c("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),Qp=e,_c("matchMedia"))},a_=function(){function n(t,i){this.selector=i&&cd(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Ww++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,s,r){ht(i)&&(r=s,s=i,i=ht);var a=this,o=function(){var u=rt,c=a.selector,h;return u&&u!==a&&u.data.push(a),r&&(a.selector=cd(r)),rt=a,h=s.apply(a,arguments),ht(h)&&a._r.push(h),rt=u,a.selector=c,a.isReverted=!1,h};return a.last=o,i===ht?o(a,function(l){return a.add(null,l)}):i?a[i]=o:o},e.ignore=function(i){var s=rt;rt=null,i(this),rt=s},e.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof bt&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,s){var r=this;if(i?function(){for(var o=r.getTweens(),l=r.data.length,u;l--;)u=r.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(c){return o.splice(o.indexOf(c),1)}));for(o.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,h){return h.g-c.g||-1/0}).forEach(function(c){return c.t.revert(i)}),l=r.data.length;l--;)u=r.data[l],u instanceof Zt?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof bt)&&u.revert&&u.revert(i);r._r.forEach(function(c){return c(i,r)}),r.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),s)for(var a=Xs.length;a--;)Xs[a].id===this.id&&Xs.splice(a,1)},e.revert=function(i){this.kill(i||{})},n}(),Xw=function(){function n(t){this.contexts=[],this.scope=t,rt&&rt.data.push(this)}var e=n.prototype;return e.add=function(i,s,r){En(i)||(i={matches:i});var a=new a_(0,r||this.scope),o=a.conditions={},l,u,c;rt&&!a.selector&&(a.selector=rt.selector),this.contexts.push(a),s=a.add("onMatch",s),a.queries=i;for(u in i)u==="all"?c=1:(l=dn.matchMedia(i[u]),l&&(Xs.indexOf(a)<0&&Xs.push(a),(o[u]=l.matches)&&(c=1),l.addListener?l.addListener(fd):l.addEventListener("change",fd)));return c&&s(a,function(h){return a.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n}(),Rl={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(s){return q0(s)})},timeline:function(e){return new Zt(e)},getTweensOf:function(e,t){return ot.getTweensOf(e,t)},getProperty:function(e,t,i,s){Rt(e)&&(e=Fi(e)[0]);var r=qs(e||{}).get,a=i?L0:P0;return i==="native"&&(i=""),e&&(t?a((wi[t]&&wi[t].get||r)(e,t,i,s)):function(o,l,u){return a((wi[o]&&wi[o].get||r)(e,o,l,u))})},quickSetter:function(e,t,i){if(e=Fi(e),e.length>1){var s=e.map(function(c){return mi.quickSetter(c,t,i)}),r=s.length;return function(c){for(var h=r;h--;)s[h](c)}}e=e[0]||{};var a=wi[t],o=qs(e),l=o.harness&&(o.harness.aliases||{})[t]||t,u=a?function(c){var h=new a;Sr._pt=0,h.init(e,i?c+i:c,Sr,0,[e]),h.render(1,h),Sr._pt&&Th(1,Sr)}:o.set(e,l);return a?u:function(c){return u(e,l,i?c+i:c,o,1)}},quickTo:function(e,t,i){var s,r=mi.to(e,tr((s={},s[t]="+=0.1",s.paused=!0,s),i||{})),a=function(l,u,c){return r.resetTo(t,l,u,c)};return a.tween=r,a},isTweening:function(e){return ot.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ws(e.ease,Hr.ease)),Wp(Hr,e||{})},config:function(e){return Wp(Ai,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.plugins,r=e.defaults,a=e.extendTimeline;(s||"").split(",").forEach(function(o){return o&&!wi[o]&&!ki[o]&&ao(t+" effect requires "+o+" plugin.")}),fc[t]=function(o,l,u){return i(Fi(o),ji(l||{},r),u)},a&&(Zt.prototype[t]=function(o,l,u){return this.add(fc[t](o,En(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){Oe[e]=Ws(t)},parseEase:function(e,t){return arguments.length?Ws(e,t):Oe},getById:function(e){return ot.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Zt(e),s,r;for(i.smoothChildTiming=li(e.smoothChildTiming),ot.remove(i),i._dp=0,i._time=i._tTime=ot._time,s=ot._first;s;)r=s._next,(t||!(!s._dur&&s instanceof bt&&s.vars.onComplete===s._targets[0]))&&pn(i,s,s._start-s._delay),s=r;return pn(ot,i,0),i},context:function(e,t){return e?new a_(e,t):rt},matchMedia:function(e){return new Xw(e)},matchMediaRefresh:function(){return Xs.forEach(function(e){var t=e.conditions,i,s;for(s in t)t[s]&&(t[s]=!1,i=1);i&&e.revert()})||fd()},addEventListener:function(e,t){var i=Tl[e]||(Tl[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Tl[e],s=i&&i.indexOf(t);s>=0&&i.splice(s,1)},utils:{wrap:Ew,wrapYoyo:Aw,distribute:U0,random:$0,snap:j0,normalize:Cw,getUnit:$t,clamp:Tw,splitColor:G0,toArray:Fi,selector:cd,mapRange:z0,pipe:ww,unitize:Sw,interpolate:Dw,shuffle:F0},install:E0,effects:fc,ticker:Si,updateRoot:Zt.updateRoot,plugins:wi,globalTimeline:ot,core:{PropTween:ci,globals:A0,Tween:bt,Timeline:Zt,Animation:co,getCache:qs,_removeLinkedListItem:hu,reverting:function(){return zt},context:function(e){return e&&rt&&(rt.data.push(e),e._ctx=rt),rt},suppressOverwrites:function(e){return uh=e}}};ui("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Rl[n]=bt[n]});Si.add(Zt.updateRoot);Sr=Rl.to({},{duration:0});var Yw=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Kw=function(e,t){var i=e._targets,s,r,a;for(s in t)for(r=i.length;r--;)a=e._ptLookup[r][s],a&&(a=a.d)&&(a._pt&&(a=Yw(a,s)),a&&a.modifier&&a.modifier(t[s],e,i[r],s))},yc=function(e,t){return{name:e,rawVars:1,init:function(s,r,a){a._onInit=function(o){var l,u;if(Rt(r)&&(l={},ui(r,function(c){return l[c]=1}),r=l),t){l={};for(u in r)l[u]=t(r[u]);r=l}Kw(o,r)}}}},mi=Rl.registerPlugin({name:"attr",init:function(e,t,i,s,r){var a,o,l;this.tween=i;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],s,r,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)zt?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},yc("roundProps",dd),yc("modifiers"),yc("snap",j0))||Rl;bt.version=Zt.version=mi.version="3.12.5";C0=1;dh()&&qr();Oe.Power0;Oe.Power1;Oe.Power2;Oe.Power3;Oe.Power4;Oe.Linear;Oe.Quad;Oe.Cubic;Oe.Quart;Oe.Quint;Oe.Strong;Oe.Elastic;Oe.Back;Oe.SteppedEase;Oe.Bounce;Oe.Sine;Oe.Expo;Oe.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Jp,cs,Pr,xh,$s,em,wh,Zw=function(){return typeof window<"u"},Wn={},Ns=180/Math.PI,Lr=Math.PI/180,mr=Math.atan2,tm=1e8,Sh=/([A-Z])/g,Qw=/(left|right|width|margin|padding|x)/i,Jw=/[\s,\(]\S/,mn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},pd=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},e3=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},t3=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},i3=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},o_=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},l_=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},n3=function(e,t,i){return e.style[t]=i},s3=function(e,t,i){return e.style.setProperty(t,i)},r3=function(e,t,i){return e._gsap[t]=i},a3=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},o3=function(e,t,i,s,r){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(r,a)},l3=function(e,t,i,s,r){var a=e._gsap;a[t]=i,a.renderTransform(r,a)},lt="transform",di=lt+"Origin",u3=function n(e,t){var i=this,s=this.target,r=s.style,a=s._gsap;if(e in Wn&&r){if(this.tfm=this.tfm||{},e!=="transform")e=mn[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=$n(s,o)}):this.tfm[e]=a.x?a[e]:$n(s,e),e===di&&(this.tfm.zOrigin=a.zOrigin);else return mn.transform.split(",").forEach(function(o){return n.call(i,o,t)});if(this.props.indexOf(lt)>=0)return;a.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(di,t,"")),e=lt}(r||t)&&this.props.push(e,t,r[e])},u_=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},c3=function(){var e=this.props,t=this.target,i=t.style,s=t._gsap,r,a;for(r=0;r<e.length;r+=3)e[r+1]?t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(Sh,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)s[a]=this.tfm[a];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=wh(),(!r||!r.isStart)&&!i[lt]&&(u_(i),s.zOrigin&&i[di]&&(i[di]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},c_=function(e,t){var i={target:e,props:[],revert:c3,save:u3};return e._gsap||mi.core.getCache(e),t&&t.split(",").forEach(function(s){return i.save(s)}),i},d_,md=function(e,t){var i=cs.createElementNS?cs.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):cs.createElement(e);return i&&i.style?i:cs.createElement(e)},bn=function n(e,t,i){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(Sh,"-$1").toLowerCase())||s.getPropertyValue(t)||!i&&n(e,Gr(t)||t,1)||""},im="O,Moz,ms,Ms,Webkit".split(","),Gr=function(e,t,i){var s=t||$s,r=s.style,a=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(im[a]+e in r););return a<0?null:(a===3?"ms":a>=0?im[a]:"")+e},gd=function(){Zw()&&window.document&&(Jp=window,cs=Jp.document,Pr=cs.documentElement,$s=md("div")||{style:{}},md("div"),lt=Gr(lt),di=lt+"Origin",$s.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",d_=!!Gr("perspective"),wh=mi.core.reverting,xh=1)},vc=function n(e){var t=md("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,a;if(Pr.appendChild(t),t.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(a=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),Pr.removeChild(t),this.style.cssText=r,a},nm=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},h_=function(e){var t;try{t=e.getBBox()}catch{t=vc.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===vc||(t=vc.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+nm(e,["x","cx","x1"])||0,y:+nm(e,["y","cy","y1"])||0,width:0,height:0}:t},f_=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&h_(e))},ir=function(e,t){if(t){var i=e.style,s;t in Wn&&t!==di&&(t=lt),i.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(s==="--"?t:t.replace(Sh,"-$1").toLowerCase())):i.removeAttribute(t)}},ds=function(e,t,i,s,r,a){var o=new ci(e._pt,t,i,0,1,a?l_:o_);return e._pt=o,o.b=s,o.e=r,e._props.push(i),o},sm={deg:1,rad:1,turn:1},d3={grid:1,flex:1},_s=function n(e,t,i,s){var r=parseFloat(i)||0,a=(i+"").trim().substr((r+"").length)||"px",o=$s.style,l=Qw.test(t),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),h=100,m=s==="px",y=s==="%",_,b,x,S;if(s===a||!r||sm[s]||sm[a])return r;if(a!=="px"&&!m&&(r=n(e,t,i,"px")),S=e.getCTM&&f_(e),(y||a==="%")&&(Wn[t]||~t.indexOf("adius")))return _=S?e.getBBox()[l?"width":"height"]:e[c],_t(y?r/_*h:r/100*_);if(o[l?"width":"height"]=h+(m?a:s),b=~t.indexOf("adius")||s==="em"&&e.appendChild&&!u?e:e.parentNode,S&&(b=(e.ownerSVGElement||{}).parentNode),(!b||b===cs||!b.appendChild)&&(b=cs.body),x=b._gsap,x&&y&&x.width&&l&&x.time===Si.time&&!x.uncache)return _t(r/x.width*h);if(y&&(t==="height"||t==="width")){var w=e.style[t];e.style[t]=h+s,_=e[c],w?e.style[t]=w:ir(e,t)}else(y||a==="%")&&!d3[bn(b,"display")]&&(o.position=bn(e,"position")),b===e&&(o.position="static"),b.appendChild($s),_=$s[c],b.removeChild($s),o.position="absolute";return l&&y&&(x=qs(b),x.time=Si.time,x.width=b[c]),_t(m?_*r/h:_&&r?h/_*r:0)},$n=function(e,t,i,s){var r;return xh||gd(),t in mn&&t!=="transform"&&(t=mn[t],~t.indexOf(",")&&(t=t.split(",")[0])),Wn[t]&&t!=="transform"?(r=fo(e,s),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:Bl(bn(e,di))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Ml[t]&&Ml[t](e,t,i)||bn(e,t)||k0(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?_s(e,t,r,i)+i:r},h3=function(e,t,i,s){if(!i||i==="none"){var r=Gr(t,e,1),a=r&&bn(e,r,1);a&&a!==i?(t=r,i=a):t==="borderColor"&&(i=bn(e,"borderTopColor"))}var o=new ci(this._pt,e.style,t,0,1,s_),l=0,u=0,c,h,m,y,_,b,x,S,w,A,k,C;if(o.b=i,o.e=s,i+="",s+="",s==="auto"&&(b=e.style[t],e.style[t]=s,s=bn(e,t)||s,b?e.style[t]=b:ir(e,t)),c=[i,s],X0(c),i=c[0],s=c[1],m=i.match(wr)||[],C=s.match(wr)||[],C.length){for(;h=wr.exec(s);)x=h[0],w=s.substring(l,h.index),_?_=(_+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(_=1),x!==(b=m[u++]||"")&&(y=parseFloat(b)||0,k=b.substr((y+"").length),x.charAt(1)==="="&&(x=Ir(y,x)+k),S=parseFloat(x),A=x.substr((S+"").length),l=wr.lastIndex-A.length,A||(A=A||Ai.units[t]||k,l===s.length&&(s+=A,o.e+=A)),k!==A&&(y=_s(e,t,b,A)||0),o._pt={_next:o._pt,p:w||u===1?w:",",s:y,c:S-y,m:_&&_<4||t==="zIndex"?Math.round:0});o.c=l<s.length?s.substring(l,s.length):""}else o.r=t==="display"&&s==="none"?l_:o_;return w0.test(s)&&(o.e=0),this._pt=o,o},rm={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},f3=function(e){var t=e.split(" "),i=t[0],s=t[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(e=i,i=s,s=e),t[0]=rm[i]||i,t[1]=rm[s]||s,t.join(" ")},p3=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,s=i.style,r=t.u,a=i._gsap,o,l,u;if(r==="all"||r===!0)s.cssText="",l=1;else for(r=r.split(","),u=r.length;--u>-1;)o=r[u],Wn[o]&&(l=1,o=o==="transformOrigin"?di:lt),ir(i,o);l&&(ir(i,lt),a&&(a.svg&&i.removeAttribute("transform"),fo(i,1),a.uncache=1,u_(s)))}},Ml={clearProps:function(e,t,i,s,r){if(r.data!=="isFromStart"){var a=e._pt=new ci(e._pt,t,i,0,0,p3);return a.u=s,a.pr=-10,a.tween=r,e._props.push(i),1}}},ho=[1,0,0,1,0,0],p_={},m_=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},am=function(e){var t=bn(e,lt);return m_(t)?ho:t.substr(7).match(x0).map(_t)},Ch=function(e,t){var i=e._gsap||qs(e),s=e.style,r=am(e),a,o,l,u;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?ho:r):(r===ho&&!e.offsetParent&&e!==Pr&&!i.svg&&(l=s.display,s.display="block",a=e.parentNode,(!a||!e.offsetParent)&&(u=1,o=e.nextElementSibling,Pr.appendChild(e)),r=am(e),l?s.display=l:ir(e,"display"),u&&(o?a.insertBefore(e,o):a?a.appendChild(e):Pr.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},_d=function(e,t,i,s,r,a){var o=e._gsap,l=r||Ch(e,!0),u=o.xOrigin||0,c=o.yOrigin||0,h=o.xOffset||0,m=o.yOffset||0,y=l[0],_=l[1],b=l[2],x=l[3],S=l[4],w=l[5],A=t.split(" "),k=parseFloat(A[0])||0,C=parseFloat(A[1])||0,R,N,H,M;i?l!==ho&&(N=y*x-_*b)&&(H=k*(x/N)+C*(-b/N)+(b*w-x*S)/N,M=k*(-_/N)+C*(y/N)-(y*w-_*S)/N,k=H,C=M):(R=h_(e),k=R.x+(~A[0].indexOf("%")?k/100*R.width:k),C=R.y+(~(A[1]||A[0]).indexOf("%")?C/100*R.height:C)),s||s!==!1&&o.smooth?(S=k-u,w=C-c,o.xOffset=h+(S*y+w*b)-S,o.yOffset=m+(S*_+w*x)-w):o.xOffset=o.yOffset=0,o.xOrigin=k,o.yOrigin=C,o.smooth=!!s,o.origin=t,o.originIsAbsolute=!!i,e.style[di]="0px 0px",a&&(ds(a,o,"xOrigin",u,k),ds(a,o,"yOrigin",c,C),ds(a,o,"xOffset",h,o.xOffset),ds(a,o,"yOffset",m,o.yOffset)),e.setAttribute("data-svg-origin",k+" "+C)},fo=function(e,t){var i=e._gsap||new Q0(e);if("x"in i&&!t&&!i.uncache)return i;var s=e.style,r=i.scaleX<0,a="px",o="deg",l=getComputedStyle(e),u=bn(e,di)||"0",c,h,m,y,_,b,x,S,w,A,k,C,R,N,H,M,ie,ee,K,q,J,be,ue,he,pe,vt,Ae,ft,at,jt,Ge,At;return c=h=m=b=x=S=w=A=k=0,y=_=1,i.svg=!!(e.getCTM&&f_(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[lt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[lt]!=="none"?l[lt]:"")),s.scale=s.rotate=s.translate="none"),N=Ch(e,i.svg),i.svg&&(i.uncache?(pe=e.getBBox(),u=i.xOrigin-pe.x+"px "+(i.yOrigin-pe.y)+"px",he=""):he=!t&&e.getAttribute("data-svg-origin"),_d(e,he||u,!!he||i.originIsAbsolute,i.smooth!==!1,N)),C=i.xOrigin||0,R=i.yOrigin||0,N!==ho&&(ee=N[0],K=N[1],q=N[2],J=N[3],c=be=N[4],h=ue=N[5],N.length===6?(y=Math.sqrt(ee*ee+K*K),_=Math.sqrt(J*J+q*q),b=ee||K?mr(K,ee)*Ns:0,w=q||J?mr(q,J)*Ns+b:0,w&&(_*=Math.abs(Math.cos(w*Lr))),i.svg&&(c-=C-(C*ee+R*q),h-=R-(C*K+R*J))):(At=N[6],jt=N[7],Ae=N[8],ft=N[9],at=N[10],Ge=N[11],c=N[12],h=N[13],m=N[14],H=mr(At,at),x=H*Ns,H&&(M=Math.cos(-H),ie=Math.sin(-H),he=be*M+Ae*ie,pe=ue*M+ft*ie,vt=At*M+at*ie,Ae=be*-ie+Ae*M,ft=ue*-ie+ft*M,at=At*-ie+at*M,Ge=jt*-ie+Ge*M,be=he,ue=pe,At=vt),H=mr(-q,at),S=H*Ns,H&&(M=Math.cos(-H),ie=Math.sin(-H),he=ee*M-Ae*ie,pe=K*M-ft*ie,vt=q*M-at*ie,Ge=J*ie+Ge*M,ee=he,K=pe,q=vt),H=mr(K,ee),b=H*Ns,H&&(M=Math.cos(H),ie=Math.sin(H),he=ee*M+K*ie,pe=be*M+ue*ie,K=K*M-ee*ie,ue=ue*M-be*ie,ee=he,be=pe),x&&Math.abs(x)+Math.abs(b)>359.9&&(x=b=0,S=180-S),y=_t(Math.sqrt(ee*ee+K*K+q*q)),_=_t(Math.sqrt(ue*ue+At*At)),H=mr(be,ue),w=Math.abs(H)>2e-4?H*Ns:0,k=Ge?1/(Ge<0?-Ge:Ge):0),i.svg&&(he=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!m_(bn(e,lt)),he&&e.setAttribute("transform",he))),Math.abs(w)>90&&Math.abs(w)<270&&(r?(y*=-1,w+=b<=0?180:-180,b+=b<=0?180:-180):(_*=-1,w+=w<=0?180:-180)),t=t||i.uncache,i.x=c-((i.xPercent=c&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=m+a,i.scaleX=_t(y),i.scaleY=_t(_),i.rotation=_t(b)+o,i.rotationX=_t(x)+o,i.rotationY=_t(S)+o,i.skewX=w+o,i.skewY=A+o,i.transformPerspective=k+a,(i.zOrigin=parseFloat(u.split(" ")[2])||!t&&i.zOrigin||0)&&(s[di]=Bl(u)),i.xOffset=i.yOffset=0,i.force3D=Ai.force3D,i.renderTransform=i.svg?g3:d_?g_:m3,i.uncache=0,i},Bl=function(e){return(e=e.split(" "))[0]+" "+e[1]},bc=function(e,t,i){var s=$t(t);return _t(parseFloat(t)+parseFloat(_s(e,"x",i+"px",s)))+s},m3=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,g_(e,t)},Ls="0deg",Ea="0px",Os=") ",g_=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,a=i.x,o=i.y,l=i.z,u=i.rotation,c=i.rotationY,h=i.rotationX,m=i.skewX,y=i.skewY,_=i.scaleX,b=i.scaleY,x=i.transformPerspective,S=i.force3D,w=i.target,A=i.zOrigin,k="",C=S==="auto"&&e&&e!==1||S===!0;if(A&&(h!==Ls||c!==Ls)){var R=parseFloat(c)*Lr,N=Math.sin(R),H=Math.cos(R),M;R=parseFloat(h)*Lr,M=Math.cos(R),a=bc(w,a,N*M*-A),o=bc(w,o,-Math.sin(R)*-A),l=bc(w,l,H*M*-A+A)}x!==Ea&&(k+="perspective("+x+Os),(s||r)&&(k+="translate("+s+"%, "+r+"%) "),(C||a!==Ea||o!==Ea||l!==Ea)&&(k+=l!==Ea||C?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+Os),u!==Ls&&(k+="rotate("+u+Os),c!==Ls&&(k+="rotateY("+c+Os),h!==Ls&&(k+="rotateX("+h+Os),(m!==Ls||y!==Ls)&&(k+="skew("+m+", "+y+Os),(_!==1||b!==1)&&(k+="scale("+_+", "+b+Os),w.style[lt]=k||"translate(0, 0)"},g3=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,a=i.x,o=i.y,l=i.rotation,u=i.skewX,c=i.skewY,h=i.scaleX,m=i.scaleY,y=i.target,_=i.xOrigin,b=i.yOrigin,x=i.xOffset,S=i.yOffset,w=i.forceCSS,A=parseFloat(a),k=parseFloat(o),C,R,N,H,M;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=Lr,u*=Lr,C=Math.cos(l)*h,R=Math.sin(l)*h,N=Math.sin(l-u)*-m,H=Math.cos(l-u)*m,u&&(c*=Lr,M=Math.tan(u-c),M=Math.sqrt(1+M*M),N*=M,H*=M,c&&(M=Math.tan(c),M=Math.sqrt(1+M*M),C*=M,R*=M)),C=_t(C),R=_t(R),N=_t(N),H=_t(H)):(C=h,H=m,R=N=0),(A&&!~(a+"").indexOf("px")||k&&!~(o+"").indexOf("px"))&&(A=_s(y,"x",a,"px"),k=_s(y,"y",o,"px")),(_||b||x||S)&&(A=_t(A+_-(_*C+b*N)+x),k=_t(k+b-(_*R+b*H)+S)),(s||r)&&(M=y.getBBox(),A=_t(A+s/100*M.width),k=_t(k+r/100*M.height)),M="matrix("+C+","+R+","+N+","+H+","+A+","+k+")",y.setAttribute("transform",M),w&&(y.style[lt]=M)},_3=function(e,t,i,s,r){var a=360,o=Rt(r),l=parseFloat(r)*(o&&~r.indexOf("rad")?Ns:1),u=l-s,c=s+u+"deg",h,m;return o&&(h=r.split("_")[1],h==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),h==="cw"&&u<0?u=(u+a*tm)%a-~~(u/a)*a:h==="ccw"&&u>0&&(u=(u-a*tm)%a-~~(u/a)*a)),e._pt=m=new ci(e._pt,t,i,s,u,e3),m.e=c,m.u="deg",e._props.push(i),m},om=function(e,t){for(var i in t)e[i]=t[i];return e},y3=function(e,t,i){var s=om({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,l,u,c,h,m,y,_;s.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),a[lt]=t,o=fo(i,1),ir(i,lt),i.setAttribute("transform",u)):(u=getComputedStyle(i)[lt],a[lt]=t,o=fo(i,1),a[lt]=u);for(l in Wn)u=s[l],c=o[l],u!==c&&r.indexOf(l)<0&&(y=$t(u),_=$t(c),h=y!==_?_s(i,l,u,_):parseFloat(u),m=parseFloat(c),e._pt=new ci(e._pt,o,l,h,m-h,pd),e._pt.u=_||0,e._props.push(l));om(o,s)};ui("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",s="Bottom",r="Left",a=(e<3?[t,i,s,r]:[t+r,t+i,s+i,s+r]).map(function(o){return e<2?n+o:"border"+o+n});Ml[e>1?"border"+n:n]=function(o,l,u,c,h){var m,y;if(arguments.length<4)return m=a.map(function(_){return $n(o,_,u)}),y=m.join(" "),y.split(m[0]).length===5?m[0]:y;m=(c+"").split(" "),y={},a.forEach(function(_,b){return y[_]=m[b]=m[b]||m[(b-1)/2|0]}),o.init(l,y,h)}});var __={name:"css",register:gd,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,s,r){var a=this._props,o=e.style,l=i.vars.startAt,u,c,h,m,y,_,b,x,S,w,A,k,C,R,N,H;xh||gd(),this.styles=this.styles||c_(e),H=this.styles.props,this.tween=i;for(b in t)if(b!=="autoRound"&&(c=t[b],!(wi[b]&&J0(b,t,i,s,e,r)))){if(y=typeof c,_=Ml[b],y==="function"&&(c=c.call(i,s,e,r),y=typeof c),y==="string"&&~c.indexOf("random(")&&(c=lo(c)),_)_(this,e,b,c,i)&&(N=1);else if(b.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(b)+"").trim(),c+="",ps.lastIndex=0,ps.test(u)||(x=$t(u),S=$t(c)),S?x!==S&&(u=_s(e,b,u,S)+S):x&&(c+=x),this.add(o,"setProperty",u,c,s,r,0,0,b),a.push(b),H.push(b,0,o[b]);else if(y!=="undefined"){if(l&&b in l?(u=typeof l[b]=="function"?l[b].call(i,s,e,r):l[b],Rt(u)&&~u.indexOf("random(")&&(u=lo(u)),$t(u+"")||u==="auto"||(u+=Ai.units[b]||$t($n(e,b))||""),(u+"").charAt(1)==="="&&(u=$n(e,b))):u=$n(e,b),m=parseFloat(u),w=y==="string"&&c.charAt(1)==="="&&c.substr(0,2),w&&(c=c.substr(2)),h=parseFloat(c),b in mn&&(b==="autoAlpha"&&(m===1&&$n(e,"visibility")==="hidden"&&h&&(m=0),H.push("visibility",0,o.visibility),ds(this,o,"visibility",m?"inherit":"hidden",h?"inherit":"hidden",!h)),b!=="scale"&&b!=="transform"&&(b=mn[b],~b.indexOf(",")&&(b=b.split(",")[0]))),A=b in Wn,A){if(this.styles.save(b),k||(C=e._gsap,C.renderTransform&&!t.parseTransform||fo(e,t.parseTransform),R=t.smoothOrigin!==!1&&C.smooth,k=this._pt=new ci(this._pt,o,lt,0,1,C.renderTransform,C,0,-1),k.dep=1),b==="scale")this._pt=new ci(this._pt,C,"scaleY",C.scaleY,(w?Ir(C.scaleY,w+h):h)-C.scaleY||0,pd),this._pt.u=0,a.push("scaleY",b),b+="X";else if(b==="transformOrigin"){H.push(di,0,o[di]),c=f3(c),C.svg?_d(e,c,0,R,0,this):(S=parseFloat(c.split(" ")[2])||0,S!==C.zOrigin&&ds(this,C,"zOrigin",C.zOrigin,S),ds(this,o,b,Bl(u),Bl(c)));continue}else if(b==="svgOrigin"){_d(e,c,1,R,0,this);continue}else if(b in p_){_3(this,C,b,m,w?Ir(m,w+c):c);continue}else if(b==="smoothOrigin"){ds(this,C,"smooth",C.smooth,c);continue}else if(b==="force3D"){C[b]=c;continue}else if(b==="transform"){y3(this,c,e);continue}}else b in o||(b=Gr(b)||b);if(A||(h||h===0)&&(m||m===0)&&!Jw.test(c)&&b in o)x=(u+"").substr((m+"").length),h||(h=0),S=$t(c)||(b in Ai.units?Ai.units[b]:x),x!==S&&(m=_s(e,b,u,S)),this._pt=new ci(this._pt,A?C:o,b,m,(w?Ir(m,w+h):h)-m,!A&&(S==="px"||b==="zIndex")&&t.autoRound!==!1?i3:pd),this._pt.u=S||0,x!==S&&S!=="%"&&(this._pt.b=u,this._pt.r=t3);else if(b in o)h3.call(this,e,b,u,w?w+c:c);else if(b in e)this.add(e,b,u||e[b],w?w+c:c,s,r);else if(b!=="parseTransform"){fh(b,c);continue}A||(b in o?H.push(b,0,o[b]):H.push(b,1,u||e[b])),a.push(b)}}N&&r_(this)},render:function(e,t){if(t.tween._time||!wh())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:$n,aliases:mn,getSetter:function(e,t,i){var s=mn[t];return s&&s.indexOf(",")<0&&(t=s),t in Wn&&t!==di&&(e._gsap.x||$n(e,"x"))?i&&em===i?t==="scale"?a3:r3:(em=i||{})&&(t==="scale"?o3:l3):e.style&&!ch(e.style[t])?n3:~t.indexOf("-")?s3:bh(e,t)},core:{_removeProperty:ir,_getMatrix:Ch}};mi.utils.checkPrefix=Gr;mi.core.getStyleSaver=c_;(function(n,e,t,i){var s=ui(n+","+e+","+t,function(r){Wn[r]=1});ui(e,function(r){Ai.units[r]="deg",p_[r]=1}),mn[s[13]]=n+","+e,ui(i,function(r){var a=r.split(":");mn[a[1]]=s[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ui("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Ai.units[n]="px"});mi.registerPlugin(__);var y_=mi.registerPlugin(__)||mi;y_.core.Tween;const Tn=2,Fs=Tn/2,W={ground:"ground",china:"china",chinaBeijing:"china-beijing",chinaBeijingEdge:"china-beijing-edge",chinaOther:"china-other",beijingRoad:"beijing-road",beijingRoadRing1:"beijing-road-ring-1",beijingRoadRing2:"beijing-road-ring-2",beijingRoadRing3:"beijing-road-ring-3",beijingRoadRing4:"beijing-road-ring-4",beijingRoadRing5:"beijing-road-ring-5",beijingRoadX:"beijing-road-x",beijingRoadY:"beijing-road-y",beijingCenterCity:"beijing-center-city",beijingWater:"beijing-water",beijingZoneBoundary:"beijing-zone-boundary",beijingZoneCenter1:"beijing-zone-center-1",beijingZoneCenter2:"beijing-zone-center-2",beijingZoneCenter3:"beijing-zone-center-3",beijingZoneCenter4:"beijing-zone-center-4",beijingZoneCenter5:"beijing-zone-center-5",beijingZoneCenter6:"beijing-zone-center-6",beijingMountain:"beijing-mountain",meshHeight1:"mesh-height-1",meshHeight2:"mesh-height-2",meshHeight3:"mesh-height-3",meshHeight4:"mesh-height-4",city:"city"},vi=(...n)=>{};let v3=0;class Pn{id;stage3d;scene;controls;render;inited=!1;meshes={};index=0;timeline;onStart=vi;onUpdate;onComplete=vi;onReverseStart=vi;onReverseComplete=vi;startCallbacks=[];completeCallbacks=[];reverseStartCallbacks=[];reverseCompleteCallbacks=[];prevAnimationFadeIns=[];prevAnimationFadeOuts=[];nextAnimationFadeIns=[];nextAnimationFadeOuts=[];constructor(e){const{stage3d:t,scene:i,controls:s,render:r=vi,duration:a=Tn}=e||{};this.id=v3++,this.stage3d=t,this.scene=i,this.controls=s,this.render=r,this.onUpdate=()=>{this.render()},this.timeline=y_.timeline({paused:!0,defaults:{duration:a},onStart:()=>{this.onStart()},onUpdate:()=>{this.onUpdate()},onComplete:()=>{this.onComplete()},onReverseComplete:()=>{this.onReverseComplete()}})}callByNextAnimation(e){}_start(){this.startCallbacks.forEach(e=>e())}_complete(){this.completeCallbacks.forEach(e=>e())}_reverseStart(){this.reverseStartCallbacks.forEach(e=>e())}_reverseComplete(){this.reverseCompleteCallbacks.forEach(e=>e())}toggle(){const{timeline:e}=this;e.reversed(!e.reversed())}reverse(e,t){const{onStart:i=vi,onComplete:s=vi,onReverseStart:r=vi,onReverseComplete:a=vi}=t||{};this.index=e,this.onStart=()=>{this._start(),i()},this.onComplete=()=>{this._complete(),s()},this.onReverseStart=()=>{this._reverseStart(),r()},this.onReverseComplete=()=>{this._reverseComplete(),a()},setTimeout(this.onReverseStart,0),this.timeline.reverse()}play(e,t){const{onStart:i=vi,onComplete:s=vi,onReverseStart:r=vi,onReverseComplete:a=vi}=t||{};this.index=e,this.onStart=()=>{this._start(),i()},this.onComplete=()=>{this._complete(),s()},this.onReverseStart=()=>{this._reverseStart(),r()},this.onReverseComplete=()=>{this._reverseComplete(),a()},this.timeline.play()}fadeIn(e,t={}){const{duration:i=Tn,position:s=0,delay:r,stagger:a,onStart:o,onUpdate:l,onReverseComplete:u}=t,{timeline:c}=this;function h(m){const y=m.material;c.fromTo(y,{duration:i,opacity:0,delay:r,stagger:a},{duration:i,opacity:1,delay:r,stagger:a,onStart:()=>{o&&o(),m.visible=!0},onUpdate:()=>{m.visible=!0,l&&l()},onReverseComplete:()=>{u&&u(),m.visible=!1}},s)}Array.isArray(e)?e.forEach(h):h(e)}fadeOut(e,t={}){const{duration:i=Tn,position:s=0,delay:r,stagger:a,onStart:o,onUpdate:l,onComplete:u}=t,{timeline:c}=this;function h(m){const y=m.material;c.fromTo(y,{duration:i,opacity:1,delay:r,stagger:a},{duration:i,opacity:0,delay:r,stagger:a,onStart:()=>{o&&o(),m.visible=!0},onUpdate:()=>{m.visible=!0,l&&l()},onComplete:()=>{u&&u(),m.visible=!1}},s)}Array.isArray(e)?e.forEach(h):h(e)}}function b3(n,e){const t=n;t&&(t.visible=!1,t.renderOrder=2,t.material&&(t.material.transparent=!0,t.material.opacity=0))}class T3 extends Pn{inited=!1;constructor(e){super(e)}init(e){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{meshes:t}=this;[t[W.meshHeight1],t[W.meshHeight2],t[W.meshHeight3],t[W.meshHeight4]].forEach(i=>{i.material=new Jg({color:15790313,transparent:!0,opacity:1})}),[t[W.beijingZoneCenter1],t[W.beijingZoneCenter2],t[W.beijingZoneCenter3],t[W.beijingZoneCenter4],t[W.beijingZoneCenter5],t[W.beijingZoneCenter6]].forEach(i=>{i.renderOrder=100}),e.children.forEach(i=>b3(i));{const i=t[W.ground];i.renderOrder=0,i.material.color=new Xe(kr.ground)}{const i=t[W.beijingMountain];i.renderOrder=1}{const i=t[W.beijingCenterCity];i&&i.material.color.set(15781812)}{const i=t[W.beijingWater];i&&i.material.color.set(kr.water)}[t[W.beijingZoneCenter1],t[W.beijingZoneCenter2],t[W.beijingZoneCenter3],t[W.beijingZoneCenter4],t[W.beijingZoneCenter5],t[W.beijingZoneCenter6]].forEach(i=>{i.renderOrder=100,i.material.color.set(15507590)}),[t[W.ground],t[W.chinaBeijingEdge],t[W.beijingRoad],t[W.beijingRoadRing1],t[W.beijingRoadRing2],t[W.beijingRoadRing3],t[W.beijingRoadRing4],t[W.beijingRoadRing5]].forEach(i=>{i.visible=!0;const s=i.material;s.transparent=!0,s.opacity=1})}}const x3=new vT,w3=await x3.loadAsync("fonts/helvetiker_bold.typeface.json");class S3{font;constructor(){this.font=w3}createGeometry(e){const{text:t="",size:i=1}=e||{},{font:s}=this,r=s.generateShapes(t,i),a=new Zc(r);return a.name=t,a}}const xn=new S3;class C3 extends Pn{constructor(e){super(e)}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{stage3d:e,meshes:t,scene:i,controls:s,timeline:r,nextAnimationFadeOuts:a}=this,{perspectiveCamera:o}=e;this.fadeIn([t[W.china],t[W.chinaBeijing]],{duration:Tn}),this.fadeOut([t[W.chinaBeijingEdge],t[W.ground],t[W.beijingRoad],t[W.beijingRoadRing1],t[W.beijingRoadRing2],t[W.beijingRoadRing3],t[W.beijingRoadRing4],t[W.beijingRoadRing5]],{duration:Tn}),r.fromTo(o.position,{x:0,y:300,z:0},{x:0,y:3e3,z:1e3},0),r.fromTo(s.target,{x:0,y:0,z:0},{x:0,y:0,z:1e3},0);const l=12632514,u=10;return[{text:"BEIJING",position:[-180,u,0],color:Ee.primary},{text:"HEBEI",position:[-100,u,200],color:l},{text:"TIANJIN",position:[184,u,168],color:l}].forEach(({text:c,position:h,color:m})=>{const y=xn.createGeometry({text:c,size:24});y.rotateX(-Vs),y.computeBoundingBox();const _=y.boundingBox,b=.5*(_.max.x-_.min.x),x=.5*(_.max.y-_.min.y);y.translate(-b+h[0],-x+h[1],h[2]);const S=new et({transparent:!0,opacity:0,color:m}),w=new qe(y,S);w.visible=!1,w.renderOrder=100,i.add(w),this.fadeIn(w,{duration:.1,position:">-0.05"}),a.push(w)}),[{text:"SHANGHAI",position:[471.1,u,1013.53],color:Ee.primary,offsetX:50},{text:"SHENZHEN",position:[-290.66,u,1909.11],color:Ee.primary,offsetX:50},{text:"GUANGZHOU",position:[-383.94,u,1887.37],color:Ee.primary,offsetX:-261.77}].forEach(({text:c,position:h,color:m,offsetX:y})=>{const _=new er(16);_.rotateX(-Vs),_.translate(h[0],h[1],h[2]),h[0]+=y;const b=xn.createGeometry({text:c,size:24});b.rotateX(-Vs),b.computeBoundingBox();const x=b.boundingBox,S=.5*(x.max.z-x.min.z);b.translate(h[0],h[1],S+h[2]);const w=rh([_,b]),A=new et({transparent:!0,opacity:0,color:m}),k=new qe(w,A);k.visible=!1,k.renderOrder=100,i.add(k),this.fadeIn(k,{duration:.1,position:">-0.05"}),a.push(k)}),r}callByNextAnimation(e){e.fadeOut(this.nextAnimationFadeOuts,{duration:1})}}class E3 extends Pn{constructor(e){super(e)}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{stage3d:e,meshes:t,controls:i,timeline:s}=this,{perspectiveCamera:r}=e;this.fadeOut([t[W.china],t[W.chinaBeijing]],{duration:Fs}),this.fadeIn([t[W.ground],t[W.chinaBeijingEdge],t[W.chinaOther],t[W.beijingRoad],t[W.beijingRoadRing1],t[W.beijingRoadRing2],t[W.beijingRoadRing3],t[W.beijingRoadRing4],t[W.beijingRoadRing5]],{duration:Tn}),s.fromTo(r.position,{x:0,y:3e3,z:1e3},{x:0,y:300,z:0},0),s.fromTo(i.target,{x:0,y:0,z:1e3},{x:0,y:0,z:0},0)}}class A3 extends Pn{constructor(e){super(e)}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{stage3d:e,meshes:t,scene:i,timeline:s}=this,{perspectiveCamera:r}=e,a=[t[W.beijingWater],t[W.beijingCenterCity]];this.fadeIn(a,{duration:Tn}),this.nextAnimationFadeOuts.push(...a),this.fadeOut([t[W.chinaBeijingEdge],t[W.chinaOther],t[W.beijingRoad],t[W.beijingRoadRing1],t[W.beijingRoadRing2],t[W.beijingRoadRing3],t[W.beijingRoadRing4],t[W.beijingRoadRing5]],{duration:.3}),s.fromTo(r.position,{y:300,z:0},{y:250,z:50,duration:.1,onUpdate:()=>{r.lookAt(0,0,0)}},0),s.fromTo(r.position,{x:0,y:250,z:50},{x:68,y:110,z:110,duration:1.9},">");{const o=xn.createGeometry({text:"CENTRAL CITY",size:2});o.computeBoundingBox();const l=o.boundingBox,u=.5*(l.max.x-l.min.x),c=.5*(l.max.y-l.min.y);o.translate(-u,-c,0);const h=new et({transparent:!0,opacity:0,color:kr.primary}),m=new qe(o,h);m.visible=!1,m.renderOrder=100,m.position.set(0,4,32),i.add(m),this.fadeIn(m,{duration:.1,position:">-1.0",onUpdate:()=>{m.quaternion.copy(r.quaternion)},onComplete:()=>{m.quaternion.copy(r.quaternion)}}),this.nextAnimationFadeOuts.push(m)}}callByNextAnimation(e){e.fadeOut(this.nextAnimationFadeOuts,{duration:.3})}}class D3 extends Pn{constructor(e){super(e)}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{stage3d:e,meshes:t,scene:i,controls:s,timeline:r}=this,{perspectiveCamera:a}=e;this.fadeIn([t[W.beijingRoad]],{duration:Tn}),[t[W.beijingRoadRing1],t[W.beijingRoadRing2],t[W.beijingRoadRing3],t[W.beijingRoadRing4],t[W.beijingRoadRing5]].forEach((o,l)=>{const u=o.material,c=.2*l;r.fromTo(u,{color:u.color.getHex()},{color:kr.roadRing,duration:Fs},c),this.fadeIn(o,{duration:Fs,position:c})});{const o=xn.createGeometry({text:"CENTRAL AXIS",size:1});o.rotateX(-Vs),o.rotateY(Vs),o.computeBoundingBox();const l=o.boundingBox,u=l.max.x-l.min.x;o.translate(u+.5,0,0);const c=new et({transparent:!0,opacity:0,color:kr.primary}),h=new qe(o,c);h.renderOrder=2,h.position.set(0,2,16),i.add(h),this.nextAnimationFadeOuts.push(h),this.fadeIn(h,{duration:Fs,position:.5}),this.fadeIn(t[W.beijingRoadY],{duration:Fs,position:.5})}{const o=xn.createGeometry({text:"CHANG'AN AVENUE",size:1});o.rotateX(-Vs),o.computeBoundingBox();const l=o.boundingBox,u=l.max.z-l.min.z;o.translate(0,0,u+.5);const c=new et({transparent:!0,opacity:0,color:kr.primary}),h=new qe(o,c);h.renderOrder=2,h.position.set(14,2,32),i.add(h),this.nextAnimationFadeOuts.push(h),this.fadeIn(h,{duration:Fs,position:1}),this.fadeIn(t[W.beijingRoadX],{duration:Fs,position:1})}r.fromTo(a.position,{x:68,y:110,z:110},{x:16,y:60,z:80},0),r.fromTo(s.target,{x:0,y:0,z:0},{x:0,y:0,z:32},0)}callByNextAnimation(e){e.fadeOut(this.nextAnimationFadeOuts,{duration:.3})}}class k3 extends Pn{constructor(e){super(e)}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{stage3d:e,meshes:t,scene:i,controls:s,timeline:r}=this,{perspectiveCamera:a}=e;this.fadeIn([t[W.chinaBeijingEdge],t[W.beijingZoneBoundary]],{duration:Tn}),this.fadeOut([t[W.beijingRoad],t[W.beijingRoadRing1],t[W.beijingRoadRing2],t[W.beijingRoadRing3],t[W.beijingRoadRing4],t[W.beijingRoadRing5],t[W.beijingRoadX],t[W.beijingRoadY]],{duration:.3});function o(u,c,h){const m=xn.createGeometry({text:u,size:2});m.computeBoundingBox();const y=m.boundingBox,_=.5*(y.max.x-y.min.x),b=.5*(y.max.y-y.min.y);m.translate(-_,-b,0),m.rotateX(-Vs),m.translate(c[0],c[1],c[2]);const x=new et({color:h,transparent:!0,opacity:0}),S=new qe(m,x);return S.renderOrder=2,i.add(S),S}const l=8;[{text:"YANQING",position:[-30,l,-30]},{text:"HUAIROU",position:[15,l,-20]},{text:"MIYUN",position:[50,l,-30]},{text:"CHANGPING",position:[-15,l,-2]},{text:"SHUNYI",position:[25,l,5]},{text:"PINGGU",position:[60,l,0]},{text:"MENTOUGOU",position:[-50,l,20]},{text:"FANGSHAN",position:[-40,l,50]},{text:"DAXING",position:[0,l,60]},{text:"TONGZHOU",position:[30,l,45]}].map(({text:u,position:c})=>o(u,c,12238015)).forEach((u,c)=>{const h=c*.1;u.visible=!1,u.renderOrder=100,this.fadeIn(u,{duration:.1,position:h}),this.nextAnimationFadeOuts.push(u)}),[t[W.beijingZoneCenter1],t[W.beijingZoneCenter2],t[W.beijingZoneCenter3],t[W.beijingZoneCenter4],t[W.beijingZoneCenter5],t[W.beijingZoneCenter6]].forEach((u,c)=>{const h=u,m=c*.16;this.fadeIn(h,{duration:.1,position:m})}),[{text:"HAIDIAN",position:[-10,l,20]},{text:"CHAOYANG",position:[12,l,25]},{text:"SHIJINGSHAN",position:[-20,l,29]},{text:"XICHENG",position:[-7.5,l,33]},{text:"DONGCHENG",position:[10,l,31]},{text:"FENGTAI",position:[-15,l,38]}].map(({text:u,position:c})=>o(u,c,16448250)).forEach((u,c)=>{const h=c*.16;u.visible=!1,u.renderOrder=100,this.fadeIn(u,{duration:.1,position:h}),this.nextAnimationFadeOuts.push(u)}),r.fromTo(a.position,{x:16,y:60,z:80},{x:0,y:180,z:30,duration:1.9,onUpdate:()=>{a.lookAt(0,0,25)}},0),r.fromTo(s.target,{z:30},{z:25,duration:1.9},0),r.fromTo(a.position,{z:30},{z:25,duration:.1,onUpdate:()=>{a.lookAt(0,0,25)}},">")}callByNextAnimation(e){e.fadeOut(this.nextAnimationFadeOuts,{duration:.3})}}const Rs=.3,Tc=1.8;class I3 extends Pn{constructor(e){super(e)}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{meshes:e,scene:t,nextAnimationFadeOuts:i}=this;{const r="ECOLOGICAL CONSERVATION AREA",a=xn.createGeometry({text:r,size:Tc});a.computeBoundingBox();const o=a.boundingBox,l=-.5*(o.max.x-o.min.x),u=-.5*(o.max.y-o.min.y);a.translate(l,u,0),a.rotateX(-Math.PI/2);const c=new qe(a,new et({color:Ee.white}));c.visible=!1,c.renderOrder=100,c.position.set(15,10,-25),t.add(c),i.push(c),this.fadeIn([c],{duration:Rs})}const s=3.35;[{text:"FANGSHAN",position:[-23.13896369934082,1.5,52.71833801269531],radius:s},{text:"DAXING",position:[-6.419914245605469,1.5,51.63374328613281],radius:s},{text:"E-TOWN",position:[13.225245475769043,1.5,47.077308654785156],radius:s},{text:"SHUNYI",position:[20.588871002197266,1.5,9.750022888183594],radius:s},{text:"CHANGPING",position:[-13.374675750732422,1.5,-.10028457641601562],radius:s}].forEach(({text:r,position:a,radius:o})=>{{const _=new er(o);_.rotateX(-Math.PI/2);const b=new et({color:Ee.primary}),x=new qe(_,b);x.position.set(a[0],a[1],a[2]),t.add(x),i.push(x),this.fadeIn([x],{duration:Rs})}const l=xn.createGeometry({text:r,size:Tc});l.computeBoundingBox();const u=l.boundingBox,c=u.max.x-u.min.x,h=u.max.y-u.min.y;l.translate(-c/2,-h,0),l.rotateX(-Math.PI/2);const m=new qe(l,new et({color:Ee.primary}));m.visible=!1,m.renderOrder=100;const y=o+1;m.position.set(a[0],a[1],a[2]+y),t.add(m),i.push(m),this.fadeIn([m],{duration:Rs})}),[{text:`    SUB
CENTER`,position:[27.24445152282715,1.5,31.9537353515625],radius:5.695},{text:`CENTRAL
    CITY`,position:[.8807215690612793,1.5,31.953872680664062],radius:9.905}].forEach(({text:r,position:a,radius:o})=>{{const m=new er(o);m.rotateX(-Math.PI/2);const y=new et({color:Ee.primary}),_=new qe(m,y);_.position.set(a[0],a[1],a[2]),t.add(_),i.push(_),this.fadeIn([_],{duration:Rs})}const l=xn.createGeometry({text:r,size:Tc});l.computeBoundingBox();const u=l.boundingBox,c=u.max.x-u.min.x;l.translate(-c/2,0,0),l.rotateX(-Math.PI/2);const h=new qe(l,new et({color:Ee.white}));h.visible=!1,h.renderOrder=100,h.position.set(a[0],a[1],a[2]),t.add(h),this.fadeIn([h],{duration:Rs}),i.push(h)}),this.fadeIn([e[W.beijingMountain]],{duration:Rs}),i.push(e[W.beijingMountain]),this.fadeOut([e[W.ground],e[W.beijingZoneBoundary],e[W.beijingZoneCenter1],e[W.beijingZoneCenter2],e[W.beijingZoneCenter3],e[W.beijingZoneCenter4],e[W.beijingZoneCenter5],e[W.beijingZoneCenter6]],{duration:Rs})}callByNextAnimation(e){e.fadeOut(this.nextAnimationFadeOuts,{duration:.01})}}const lm="BEIJING",um="TIANJIN",P3="HEBEI";class L3 extends Pn{constructor(e){super(e)}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{stage3d:e,meshes:t,scene:i,controls:s,timeline:r,nextAnimationFadeOuts:a}=this,{perspectiveCamera:o,activeCamera:l}=e;r.fromTo(o.position,{x:0,y:180,z:30},{x:145,y:420,z:700,duration:.3,onUpdate:()=>{r.reversed()?e.usePerspectiveCamera():e.useOrthographicCamera()}},0),r.fromTo(s.target,{x:0,y:0,z:25},{x:0,y:0,z:0,duration:.3,onUpdate:()=>{o.lookAt(s.target)}},0),this.fadeIn([t[W.chinaOther]],{duration:2,position:.3}),this.fadeIn([t[W.meshHeight1],t[W.meshHeight2],t[W.meshHeight3],t[W.meshHeight4]],{duration:.1,position:.3}),[t[W.meshHeight1],t[W.meshHeight2],t[W.meshHeight3],t[W.meshHeight4]].forEach(m=>{r.fromTo(m.scale,{y:0},{y:1,duration:1.2},.3)}),a.push(t[W.chinaOther],t[W.meshHeight1],t[W.meshHeight2],t[W.meshHeight3],t[W.meshHeight4]);const u=m=>{const y=new er(8);y.rotateX(-Math.PI/2);const _=new ou(12,14);_.rotateX(-Math.PI/2);const b=rh([y,_]),x=new et({color:Ee.primary,transparent:!0,opacity:0}),S=new qe(b,x);return S.position.copy(m),S.renderOrder=100,i.add(S),S},c=m=>{const y=[];for(let S=m.y;S<m.y+85;S+=1)y.push(new ye(m.x,S,m.z));const _=new Jd().setFromPoints(y),b=new Qb({color:Ee.primary,scale:1,dashSize:2,gapSize:2}),x=new Jb(_,b);return x.computeLineDistances(),x.geometry.setDrawRange(0,0),i.add(x),x},h=(m,y,_=Ee.primary)=>{const b=xn.createGeometry({text:m,size:8});b.computeBoundingBox();const x=b.boundingBox,S=-(x.max.x-x.min.x)/2;b.translate(S,0,0);const w=new et({color:_,transparent:!0,opacity:0}),A=new qe(b,w);return A.position.copy(y),A.visible=!1,A.renderOrder=100,i.add(A),A};[{position:new ye(-0,32,42),text:lm},{position:new ye(80,22,150),text:um},{position:new ye(-100,12,200),text:P3},{position:new ye(200,0,180),text:"BOHAI SEA"}].forEach(({position:m,text:y})=>{const _=h(y,m,12566722);a.push(_),this.fadeIn(_,{duration:1,position:.3,onStart:()=>{_.quaternion.copy(l.quaternion)}})}),[{position:new ye(0,32,0),text:lm},{position:new ye(78,22,110),text:um},{position:new ye(-30,12,132),text:"XIONG'AN"}].forEach(({position:m,text:y})=>{{const _=u(m);a.push(_),r.fromTo(_.position,{y:m.y-10},{y:m.y,duration:.3},1),this.fadeIn(_,{duration:.1,position:1})}{const _=c(m);a.push(_);const b=_.geometry.attributes.position.count;r.fromTo(_.geometry.drawRange,{count:0},{count:b,duration:1},1)}{m.y+=85;const _=h(y,m);a.push(_),this.fadeIn(_,{duration:.2,position:1.8,onStart:()=>{_.quaternion.copy(l.quaternion)}})}})}callByNextAnimation(e){e.nextAnimationFadeOuts.push(...this.nextAnimationFadeOuts)}}class O3 extends Pn{constructor(e){super(e)}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{stage3d:e,timeline:t}=this,{perspectiveCamera:i}=e;t.fromTo(i.position,{x:145,y:420,z:700},{x:70,y:210,z:350,duration:2,onUpdate:()=>{e.useOrthographicCamera()}},0)}callByNextAnimation(e){e.fadeOut(this.nextAnimationFadeOuts,{duration:.3})}}class R3 extends Pn{glb=null;constructor(e){super(e)}async preload(){const e=new sh,t=new nh;t.setDecoderPath("/libs/draco/"),e.setDRACOLoader(t);const i=await e.loadAsync("/glb/city.glb");i.scene.name="city.glb",this.glb=i.scene}init(){if(this.inited===!0){console.warn("Animation.init() has been called");return}this.inited=!0;const{stage3d:e,meshes:t,timeline:i,render:s}=this,{perspectiveCamera:r}=e;i.fromTo(r.position,{x:70,y:210,z:350},{x:3.5,y:3.5,z:3.5,duration:1,onUpdate:()=>{e.useOrthographicCamera()}},0);{const a=t[W.city];i.fromTo(a.scale,{y:.05},{y:1,duration:1,onReverseComplete:()=>{a.visible=!1},onUpdate:()=>{a.visible=!0,s()},onComplete:()=>{a.visible=!0}},1)}}}class M3{stage3d;scene;controls;render;animations=[];index=0;ready=!1;isAnimating=!1;meshes={};constructor(e){const{stage3d:t,scene:i,controls:s,render:r=Fn}=e||{};this.stage3d=t,this.scene=i,this.controls=s,this.render=r}init(e){e.children.forEach(o=>{const l=o;this.meshes[l.name]=l});const{stage3d:t,scene:i,controls:s,render:r}=this,a=new T3({stage3d:t,scene:i,controls:s,render:r});a.meshes=this.meshes,a.init(e),this.ready=!0}prev(e,t={}){const{onReverseStart:i=Fn,onReverseComplete:s=Fn,onError:r=Fn}=t;if(this.isAnimating===!0)return;console.log("prev",e),this.index=e;const a=this.animations[e];if(a)t.onReverseStart=()=>{this.isAnimating=!0,i()},t.onReverseComplete=()=>{this.isAnimating=!1,s()},a.reverse(e,t);else{const o=`Animation ${e} not found`;r(new Error(o))}}async next(e,t={}){const{onStart:i=Fn,onComplete:s=Fn,onError:r=Fn}=t;if(this.isAnimating===!0)return;console.log("next",e),this.index=e,await this.lazyInitAnimation();const a=this.animations[e];if(a)t.onStart=()=>{this.isAnimating=!0,i()},t.onComplete=()=>{this.isAnimating=!1,s()},a.play(e,t);else{const o=`Animation ${e} not found`;r(new Error(o))}}async lazyInitAnimation(){const{index:e,stage3d:t,scene:i,controls:s,render:r}=this;if(this.animations[e]===void 0){if(e===0){const a=new C3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init()}else if(e===1){const a=new E3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init();const o=this.animations[e-1];o&&o.callByNextAnimation(a)}else if(e===2){const a=new A3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init()}else if(e===3){const a=new D3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init();const o=this.animations[e-1];o&&o.callByNextAnimation(a)}else if(e===4){const a=new k3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init();const o=this.animations[e-1];o&&o.callByNextAnimation(a)}else if(e===5){const a=new I3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init();const o=this.animations[e-1];o&&o.callByNextAnimation(a)}else if(e===6){const a=new L3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init();const o=this.animations[e-1];o&&o.callByNextAnimation(a)}else if(e===7){const a=new O3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init();const o=this.animations[e-1];o&&o.callByNextAnimation(a)}else if(e===8){const a=new R3({stage3d:t,scene:i,controls:s,render:r});this.add(e,a),a.init();const o=this.animations[e-1];o&&o.callByNextAnimation(a)}}}add(e,t){t.index=e,t.meshes=this.meshes,this.animations[e]=t}push(e){this.animations.push(e)}remove(e){const t=this.animations.indexOf(e);t!==-1&&this.animations.splice(t,1)}}class v_ extends iw{isStage3D;constructor(e){super(e),this.type="Stage3D",this.isStage3D=!0}}const cm=.1,dm=3500,B3=Se({__name:"Welcome",emits:["progress","finish","error"],setup(n,{expose:e,emit:t}){const i=t,s=new sh,r=new nh;r.setDecoderPath("/libs/draco/"),s.setDRACOLoader(r);const a=new y0;function o(){a.render()}const l=a.renderer,u=window.innerWidth,c=window.innerHeight,h=new ar(50,u/c,cm,dm),m=new Qd(-u/2,u/2,c/2,-c/2,cm,dm),y=new ye(0,300,0),_=new ye(0,0,0);h.position.copy(y),m.position.copy(y),h.lookAt(_),m.lookAt(_);const b=new lu(h,l.domElement);b.addEventListener("change",o);const x=new v_({controls:b,perspectiveCamera:h,orthographicCamera:m}),S=x.scene,w=new M3({stage3d:x,scene:S,controls:b,render:o});a.addStage(x);const A=new Xe(Ee.white);S.add(new eh(A,1)),S.add(new th(A,A,1));const k=new ih(A,1);S.add(k),S.background=new Xe(Ee.background);const R=[new Promise((ee,K)=>{s.load("/glb/intro.glb",async q=>{const J=q.scene;J.name="intro.glb",w.init(J),l.compileAsync(J,h,S).then(()=>{S.add(J),o()}),ee(J)},q=>{const J=q.loaded/q.total/R.length;i("progress",J)},q=>K(q))})];Promise.all(R).then(()=>{o(),setTimeout(()=>i("finish"),0)}).catch(ee=>{i("error",ee)}),e({prev(ee,K){const{onError:q=Fn}=K||{};if(w.ready===!1)return q(new Error("Animations: Not ready"));w.prev(ee,K)},next(ee,K){const{onError:q=Fn}=K||{};if(w.ready===!1)return q(new Error("Animations: Not ready"));w.next(ee,K)}});let N=0;function H(ee){switch(console.log(ee.code),ee.code){case"KeyA":const K=N-1;w.prev(K,{onReverseStart:()=>{console.log("onReverseStart"),N-=1,console.log("sub one:",N)},onReverseComplete:()=>{console.log("onReverseComplete")},onError:J=>{console.error(J)}});break;case"KeyD":const q=N;w.next(q,{onStart:()=>{console.log("onStart"),N+=1,console.log("add one:",N)},onComplete:()=>{console.log("onComplete")},onError:J=>{console.error(J)}});break}}Ot(()=>{window.addEventListener("keydown",H)}),El(()=>{window.removeEventListener("keydown",H)});const M=Be(null),ie=m0(a.resize.bind(a));return Ot(()=>{M.value?.appendChild(l.domElement),window.addEventListener("resize",ie)}),El(()=>{window.removeEventListener("resize",ie),a.dispose(),r.dispose(),M.value?.removeChild(l.domElement)}),(ee,K)=>($(),Y("div",{ref_key:"domRef",ref:M},null,512))}}),N3={class:"loading-container"},F3={class:"progress"},U3=Se({__name:"Loading",props:{progress:{}},setup(n){const e=n;return(t,i)=>($(),Y("div",N3,[F("span",F3,Ve(e.progress)+"%",1)]))}}),j3=_e(U3,[["__scopeId","data-v-7a7d98db"]]),$3=(n,e,t)=>n<e&&t>e||n>=e&&t<e;function b_({start:n=0,end:e=0,duration:t=300,easeFn:i=o=>1-(1-o)**3,update:s=()=>null,complete:r=()=>null,canceled:a=()=>null}){if(t===0)return s(e,0),r(),()=>null;let o=0,l=0,u=n,c=0,h=!1;const m=()=>{const y=window.performance.now();o===0&&(o=y);const _=Math.min(y-o,t);l=n+(e-n)*i(_/t),$3(n,e,l)&&(l=e);let b=l-u;u=l,Math.abs(b)<.1&&b!==0&&(l=e,b=l-u),s(Number(Number(l).toFixed(6)),Number(Number(b).toFixed(6))),l!==e&&!h?(cancelAnimationFrame(c),c=requestAnimationFrame(m)):h?a():r()};return c=requestAnimationFrame(m),()=>{h=!0}}const H3=Se({__name:"RippleEffect",props:{initRippleSize:{default:0},rippleColor:{default:"#fff"},rippleSize:{default:screen.width*.3},slotClass:{},animationDuration:{default:300},position:{default:()=>({x:-1,y:-1})}},emits:["animation-finished","reverse-animation-finished"],setup(n,{expose:e,emit:t}){const i=n,s=t,r=xt({currentSize:i.initRippleSize});let a=()=>{};function o(l=!1){a(),a=b_({start:r.currentSize,end:l?0:i.rippleSize,duration:l?i.animationDuration/3:i.animationDuration,update:u=>{r.currentSize=u},complete:()=>{s(l?"reverse-animation-finished":"animation-finished")}})}return ls(()=>i.initRippleSize,()=>{r.currentSize=i.initRippleSize}),e({startAnimation:o}),(l,u)=>($(),Y(Lt,null,[F("div",qb({class:"ripple-effect"},l.$attrs,{style:{backgroundColor:l.rippleColor,left:l.position.x===-1?"50%":`${l.position.x}px`,top:l.position.y===-1?"50%":`${l.position.y}px`,width:`${r.currentSize}px`,height:`${r.currentSize}px`}}),null,16),F("div",{class:Qg(`ripple-slot ${i.slotClass}`),style:pi({clipPath:`circle(${r.currentSize/2}px at ${l.position.x}px ${l.position.y}px)`})},[Kd(l.$slots,"default",{},void 0,!0)],6)],64))}}),mu=_e(H3,[["__scopeId","data-v-6640cabc"]]),z3={class:"button-text"},V3={class:"button-text-reverse"},q3=Se({__name:"RippleButton",props:{label:{},class:{},style:{},onClick:{type:Function}},emits:["position-changed","animation-finished"],setup(n,{emit:e}){const t=n,i=e,s=Be(null),r=Be(null),a=xt({x:0,y:0}),o=xt({value:0});function l(){t.onClick()}function u(m){const y=s.value?.getBoundingClientRect()??{left:0,top:0};a.x=m.clientX-y.left,a.y=m.clientY-y.top,i("position-changed",{x:m.clientX,y:m.clientY})}function c(m){u(m),r.value?.startAnimation()}function h(){r.value?.startAnimation(!0)}return Ot(()=>{o.value=(s.value?.getBoundingClientRect().width??0)*2.4,s.value?.addEventListener("mouseenter",c),s.value?.addEventListener("mouseleave",h)}),sn(()=>{s.value?.removeEventListener("mouseenter",c),s.value?.removeEventListener("mouseleave",h)}),(m,y)=>($(),Y("button",{ref_key:"button",ref:s,class:Qg(`button ${t.class}`),style:pi(t.style),onClick:l},[F("span",z3,Ve(m.label),1),De(mu,{ref_key:"rippleEffect",ref:r,class:"ripple-effect","ripple-color":"#fafafa","ripple-size":o.value,"slot-class":"ripple-button-slot-padding",position:a,"animation-duration":800,onAnimationFinished:y[0]||(y[0]=_=>m.$emit("animation-finished"))},{default:fi(()=>[F("span",V3,Ve(m.label),1)]),_:1},8,["ripple-size","position"])],6))}}),G3=_e(q3,[["__scopeId","data-v-a6d0b642"]]),W3=Se({__name:"MarqueePoints",emits:["dismiss"],setup(n,{emit:e}){const t=xt({count:0,active:-1}),i=Be(null),s=e;function r(){const a={duration:300,fill:"forwards",easing:"ease-in-out"};i.value?.animate([{opacity:1},{opacity:0}],a)?.addEventListener("finish",()=>s("dismiss"))}return Ot(()=>{const a=setInterval(()=>{t.active=t.count%3+1,t.count++,t.count===9&&(clearInterval(a),setTimeout(()=>r(),400))},400)}),(a,o)=>($(),Y("div",{ref_key:"container",ref:i,class:"marquee-container"},[($(),Y(Lt,null,en(3,l=>F("div",{class:"marquee-point",style:pi({zIndex:l,backgroundColor:t.active===l?"var(--secondary-color)":"var(--primary-color)"})},null,4)),64))],512))}}),X3=_e(W3,[["__scopeId","data-v-5ae65fcb"]]),Y3=n=>(Bt("data-v-9e941b1f"),n=n(),Nt(),n),K3=Y3(()=>F("div",{class:"spacer"},null,-1)),Z3=Se({__name:"Welcome",emits:["load-finished"],setup(n,{emit:e}){const t=e,i=Be(null),s=Be(null),r=Be(null),a=Be(null),o=xt({beijingAnimationStarted:!1,beijingAnimationFinished:!1,welcomeToAnimationFinished:!1});function l(){const c=[{transform:"translateX(-100%)",opacity:0},{transform:"translateX(0)",opacity:1}],h={duration:600,fill:"forwards",easing:"cubic-bezier(0.25, 1, 0.5, 1)"};i.value?.animate(c,h),s.value?.animate(c,{delay:200,...h}).addEventListener("finish",()=>{o.welcomeToAnimationFinished=!0})}function u(c){o.beijingAnimationStarted=!0,b_({start:0,end:c,duration:600,easeFn:h=>1-Math.pow(1-h,4),update:h=>{r?.value!==null&&(r.value.style.transform=`translateY(${h}px)`)},complete:()=>{a?.value!==null&&(a.value.style.opacity="1"),r?.value!==null&&(r.value.style.display="none"),o.beijingAnimationFinished=!0,l()}})}return Ot(()=>{if(a?.value===null||r?.value===null){console.warn("title element is null");return}const{top:c}=r.value.getBoundingClientRect(),{top:h}=a.value.getBoundingClientRect();u(h-c)}),(c,h)=>($(),Y(Lt,null,[F("div",{class:"title top",ref_key:"titleBeijing",ref:r},"BEIJING",512),F("div",{class:"title transparent",ref_key:"titleWelcome",ref:i,style:{animationDelay:"200ms"}},"WELCOME",512),F("div",{class:"title transparent",ref_key:"titleTo",ref:s,style:{animationDelay:"400ms"}},"TO",512),F("div",{class:"title transparent",ref_key:"titleBeijingPlaceholder",ref:a},"BEIJING",512),K3,o.welcomeToAnimationFinished?($(),Te(X3,{key:0,class:"marquee-points",onDismiss:h[0]||(h[0]=m=>t("load-finished"))})):Pe("",!0)],64))}}),Q3=_e(Z3,[["__scopeId","data-v-9e941b1f"]]),Eo=n=>(Bt("data-v-767715a6"),n=n(),Nt(),n),J3={class:"step-1"},eS=Eo(()=>F("div",{class:"title",style:{animationDelay:"200ms"}},"BEIJING",-1)),tS=Eo(()=>F("div",{class:"title",style:{animationDelay:"400ms"}},"2035",-1)),iS=Eo(()=>F("div",{class:"spacer"},null,-1)),nS=Eo(()=>F("div",{class:"bottom-spacer"},null,-1)),sS=Eo(()=>F("div",{class:"title-reverse"},"BEIJING",-1)),rS={key:0,class:"step-2"},hm=1200,aS=Se({__name:"Start",emits:["animation-finished"],setup(n,{emit:e}){const t=Math.max(window.innerWidth,window.innerHeight)*2.4,i=Be(null),s=xt({x:0,y:0}),r=xt({value:"#fafafa"}),a=e,o=xt({current:0}),l=Ki(()=>o.current>1?"#f9f3e8":"linear-gradient(110deg, #fb644d, #ffd7cb)");function u(){o.current>=1||(o.current=1,r.value="#f9f3e8",i.value?.startAnimation())}function c(y){s.x=y.x,s.y=y.y}function h(){o.current=2}function m(){a("animation-finished")}return(y,_)=>($(),Y("div",{class:"page",style:pi({background:l.value})},[F("div",J3,[eS,tS,iS,De(G3,{class:"button",label:"explore",style:{animationDelay:"600ms"},onClick:u,onPositionChanged:c,onAnimationFinished:u}),nS,De(mu,{ref_key:"rippleEffect",ref:i,style:pi({transition:`background-color ${hm}ms`}),"ripple-color":r.value,"ripple-size":t,"slot-class":"ripple-slot-title-reverse",position:s,"animation-duration":hm,onAnimationFinished:h},{default:fi(()=>[sS]),_:1},8,["style","ripple-color","position"])]),o.current===2?($(),Y("div",rS,[De(Q3,{onLoadFinished:m})])):Pe("",!0)],4))}}),oS=_e(aS,[["__scopeId","data-v-767715a6"]]),gu=n=>(Bt("data-v-23516831"),n=n(),Nt(),n),lS=gu(()=>F("div",{class:"title"},"WELCOME",-1)),uS=gu(()=>F("div",{class:"title"},"TO",-1)),cS=gu(()=>F("div",{class:"title"},"BEIJING",-1)),dS=gu(()=>F("div",{class:"title"},"2035",-1)),hS=Se({__name:"Welcome",setup(n){return(e,t)=>($(),Y("div",null,[lS,uS,cS,De(Js,{name:"ltr",appear:""},{default:fi(()=>[dS]),_:1})]))}}),fS=_e(hS,[["__scopeId","data-v-23516831"]]),pS={},mS={class:"overall"},gS=bs('<div class="label top-left" data-v-fb736cd9>Beijing is the capital of China and is defined as the national <span class="underline" data-v-fb736cd9>political</span> center, <span class="underline" data-v-fb736cd9>cultural</span> center, center for <span class="underline" data-v-fb736cd9>international exchanges</span> and center for <span class="underline" data-v-fb736cd9>technological innovation</span>.</div><div class="label bottom-right" data-v-fb736cd9>Located in northern China, adjacent to Tianjin and Hebei Province, Beijing is the only northern city among China&#39;s four &quot;first-tier cities&quot; (Beijing, Shanghai, Guangzhou, and Shenzhen).</div>',2),_S=[gS];function yS(n,e){return $(),Y("div",mS,_S)}const vS=_e(pS,[["render",yS],["__scopeId","data-v-fb736cd9"]]),bS={},TS={class:"quick-facts"},xS=bs('<div class="left" data-v-55c9dfbb><div class="left-0" data-v-55c9dfbb><div class="title" data-v-55c9dfbb>BEIJING IS OLD</div><div class="content" data-v-55c9dfbb>Beijing, as a city, has a history of <span class="underline" data-v-55c9dfbb>3,000</span> years and has served as the capital for <span class="underline" data-v-55c9dfbb>900</span> years. It boasts <span class="underline" data-v-55c9dfbb>7</span> World Heritage sites, the most in any city worldwide.</div></div><div class="left-1" data-v-55c9dfbb><div class="title" data-v-55c9dfbb>BEIJING IS BIG</div><div class="content" data-v-55c9dfbb>The area of Beijing is <span class="underline" data-v-55c9dfbb>16,400</span> square kilometers, approximately half the size of the Netherlands.</div></div></div><div class="right" data-v-55c9dfbb><div class="title" data-v-55c9dfbb>BEIJING HAS A LOT OF PEOPLE</div><div class="content" data-v-55c9dfbb>Over the next decade, Beijing plans to control and manage its population growth orderly. By 2035, the population is expected to reach <span class="underline" data-v-55c9dfbb>23 million</span>, which is 2.3 times the population of Sweden.</div></div>',2),wS=[xS];function SS(n,e){return $(),Y("div",TS,wS)}const CS=_e(bS,[["render",SS],["__scopeId","data-v-55c9dfbb"]]),ES={},T_=n=>(Bt("data-v-4f0e0f45"),n=n(),Nt(),n),AS={class:"geography"},DS=T_(()=>F("div",{class:"label top-left"},"60% of Beijing's area consists of mountains, with the Central City primarily built on the plains. By 2035, the expansive hilly areas will be developed as key ecological conservation zones.",-1)),kS=T_(()=>F("div",{class:"label bottom-right"},[ms("Five major river systems flow through the city."),F("br"),ms("In the past, these rivers either suffered from water shortages or poor water quality, but recent ecological restoration efforts have significantly improved their condition, greatly enhancing the presence of water in Beijing.")],-1)),IS=[DS,kS];function PS(n,e){return $(),Y("div",AS,IS)}const LS=_e(ES,[["render",PS],["__scopeId","data-v-4f0e0f45"]]),OS={},RS={class:"layout"},MS=bs('<div class="label-0" data-v-5c7ea2bf>The structure of Beijing&#39;s city is very clear and can be summarized by its <span class="underline" data-v-5c7ea2bf>two axes</span>, <span class="underline" data-v-5c7ea2bf>ring roads</span>, and <span class="underline" data-v-5c7ea2bf>radial highways</span>.</div><div class="label-1" data-v-5c7ea2bf>Centered around the Forbidden City and Tiananmen Square, <span class="hl-primary" data-v-5c7ea2bf>two axes</span> - the Central Axis and Chang&#39;an Avenue - divide Beijing into four quadrants.</div><div class="label-2" data-v-5c7ea2bf>Five <span class="hl-tertiary" data-v-5c7ea2bf>ring roads</span>, extending from the center outward, form layers in both spatial and socio-economic dimensions.</div><div class="label-3" data-v-5c7ea2bf>Additionally, several <span class="hl-gray" data-v-5c7ea2bf>radial highways</span> and railways extend from the center to various parts of the country.</div>',4),BS=[MS];function NS(n,e){return $(),Y("div",RS,BS)}const FS=_e(OS,[["render",NS],["__scopeId","data-v-5c7ea2bf"]]),US={},jS={class:"districts"},$S=bs('<div class="label-0" data-v-90139ecb>Beijing has 16 districts, each with distinct natural endowments and developmental statuses. </div><div class="label-1" data-v-90139ecb>Generally, the six districts located on the plains are referred to as <span class="underline" data-v-90139ecb>Central City</span>, accommodating the majority of Beijing&#39;s population and industries.</div><div class="label-2" data-v-90139ecb>The peripheral districts are defined as <span class="underline" data-v-90139ecb>Ecological Conservation Area</span>.</div>',3),HS=[$S];function zS(n,e){return $(),Y("div",jS,HS)}const VS=_e(US,[["render",zS],["__scopeId","data-v-90139ecb"]]),qS={},GS={class:"vision"},WS=bs('<div class="label-0" data-v-3fc4e688>Chinese cities typically update their master plans every 10-15 years, setting the direction and future prospects for the city&#39;s development over the next 20 years. In 2017, Beijing issued a new round of master plan, which gives us a glimpse of what Beijing will look like in 2035. Its spatial structure can be summarized with the areas here:</div><div class="refer" data-v-3fc4e688><div class="refer-left" data-v-3fc4e688><div class="circle large" data-v-3fc4e688></div><div class="circle middle" data-v-3fc4e688></div><div class="circle small" data-v-3fc4e688></div></div><div class="refer-right" data-v-3fc4e688><div class="refer-0 v-center" data-v-3fc4e688>CENTRAL CITY</div><div class="refer-1 v-center" data-v-3fc4e688>SUB-CENTER<br data-v-3fc4e688>(BEIJING MUNICIPAL CENTER)</div><div class="refer-2 v-center" data-v-3fc4e688>NEW TOWNS</div></div></div>',2),XS=[WS];function YS(n,e){return $(),Y("div",GS,XS)}const KS=_e(qS,[["render",YS],["__scopeId","data-v-3fc4e688"]]),ZS={},x_=n=>(Bt("data-v-c7459414"),n=n(),Nt(),n),QS={class:"regional-coordination"},JS=x_(()=>F("div",{class:"label-0"},"By 2035, Beijing will experience several key development trends. First, Beijing and its neighboring Tianjin and Hebei Province will form a more integrated urban agglomeration.",-1)),eC=x_(()=>F("div",{class:"label-1"},"In the past, despite being geographically close, there were many barriers between these three regions. By 2035, increased connectivity in transportation, industry, and energy, as well as reduced obstacles, will enhance the competitiveness of the Beijing-Tianjin-Hebei urban cluster on a global scale, and alleviate urban issues like traffic congestion in Beijing.",-1)),tC=[JS,eC];function iC(n,e){return $(),Y("div",QS,tC)}const nC=_e(ZS,[["render",iC],["__scopeId","data-v-c7459414"]]),sC={},w_=n=>(Bt("data-v-02ea67a9"),n=n(),Nt(),n),rC={class:"reduction-development"},aC=w_(()=>F("div",{class:"label-0"},'Beijing is the first mega-city in China to adopt "reduction development." This strategy involves actively reducing population and industries, as well as decreasing the amount of land used for urban construction. ',-1)),oC=w_(()=>F("div",{class:"label-1"},"This relatively uncommon approach to urban development has allowed Beijing to break away from the inertia of extensive expansion by 2035. Instead, the city has become more refined, and its ecological environment has significantly improved.",-1)),lC=[aC,oC];function uC(n,e){return $(),Y("div",rC,lC)}const cC=_e(sC,[["render",uC],["__scopeId","data-v-02ea67a9"]]),dC={},hC={class:"urban-renewal"};function fC(n,e){return $(),Y("div",hC,"Accompanying the reduction development strategy, Beijing has fully entered the stage of urban renewal. This involves meticulous updates to historical districts, residential areas, industrial plants, commercial buildings, parks, and infrastructure. While Europe is accustomed to this state of affairs, for Beijing, which is used to rapid expansion, this represents a completely new condition.")}const pC=_e(dC,[["render",fC],["__scopeId","data-v-c08dcd60"]]),mC={},S_=n=>(Bt("data-v-a21849d4"),n=n(),Nt(),n),gC={class:"deep-tech-city"},_C=S_(()=>F("div",{class:"label-0"},"Due to the organizational model of a large government and the public's inertia for convenience, new technologies are more easily applied on a large scale in urban settings in China.",-1)),yC=S_(()=>F("div",{class:"label-1"},"Beijing, with the most universities in the country, naturally has an advantage in research strength. The city has also planned and built numerous industrial parks, as well as new technology experimental and demonstration areas. By 2035, new technologies have been deeply integrated into every aspect of the city.",-1)),vC=[_C,yC];function bC(n,e){return $(),Y("div",gC,vC)}const TC=_e(mC,[["render",bC],["__scopeId","data-v-a21849d4"]]),xC=n=>(Bt("data-v-26ae6116"),n=n(),Nt(),n),wC={class:"keywords"},SC=xC(()=>F("div",{class:"tag"},"KEYWORDS:",-1)),CC={class:"keyword"},EC=Se({__name:"Keywords",props:{keywords:{}},setup(n){const e=n;return(t,i)=>($(),Y("div",wC,[SC,($(!0),Y(Lt,null,en(e.keywords,s=>($(),Y("div",CC,Ve(s),1))),256))]))}}),Eh=_e(EC,[["__scopeId","data-v-26ae6116"]]),AC={class:"transportation"},DC=bs('<div data-v-644a51ab>These trends will be distinctly reflected across different urban systems.</div><div data-v-644a51ab>In terms of transportation, by 2035, there will be a comprehensive, <span class="underline" data-v-644a51ab>smart transportation system</span> that amalgamates data from diverse modes of transport. The use of <span class="underline" data-v-644a51ab>autonomous vehicles</span>, along with public and logistics transport, is expected to significantly ease Beijing&#39;s chronic traffic woes. Furthermore, the emphasis will also be on promoting <span class="underline" data-v-644a51ab>green travel</span> and enhancing <span class="underline" data-v-644a51ab>regional transportation</span> networks.</div><div class="spacer" data-v-644a51ab></div>',3),kC=Se({__name:"Transportation",setup(n){return(e,t)=>($(),Y("div",AC,[DC,De(Eh,{keywords:["smart system","autonomous driving","unmanned public transport","unmanned urban logistics","green travel","regional transportation"]})]))}}),IC=_e(kC,[["__scopeId","data-v-644a51ab"]]),C_=n=>(Bt("data-v-48051fee"),n=n(),Nt(),n),PC={class:"energy"},LC=C_(()=>F("div",null,`Under the national goal of "carbon peak and carbon neutrality", Beijing will play a leading role in energy transformation. Leveraging its geographical advantages, the proportion of renewable energy like wind and solar power in Beijing's energy mix will significantly increase. By 2035, the city will achieve coal-free, and the share of renewable energy consumption is expected to rise to 30%. In new urban areas, microgrid systems will gradually be established. All urban operational vehicles will be fully transitioned to new energy sources, and new public buildings will meet zero-carbon standards.`,-1)),OC=C_(()=>F("div",{class:"spacer"},null,-1)),RC=Se({__name:"Energy",setup(n){return(e,t)=>($(),Y("div",PC,[LC,OC,De(Eh,{keywords:["coal-free","zero-carbon power system","microgrid","new energy vehicles","green building"]})]))}}),MC=_e(RC,[["__scopeId","data-v-48051fee"]]),E_=n=>(Bt("data-v-99cf0c68"),n=n(),Nt(),n),BC={class:"governance"},NC=E_(()=>F("div",null,"By 2035, Beijing will leverage digital technology to enhance urban governance and public service efficiency while ensuring safety. The city's infrastructure will be fundamentally smart, and on this basis, a digital urban governance platform that integrates various sectors will be established to improve the efficiency of handling complex issues. Additionally, smart governance will strengthen the interaction between the government and the public, promoting governance by all citizens.",-1)),FC=E_(()=>F("div",{class:"spacer"},null,-1)),UC=Se({__name:"Governance",setup(n){return(e,t)=>($(),Y("div",BC,[NC,FC,De(Eh,{keywords:["digital platform","smart city infrastructure","smart government services","collective governance","ecological management"]})]))}}),jC=_e(UC,[["__scopeId","data-v-99cf0c68"]]),$C={},HC={class:"insights"};function zC(n,e){return $(),Y("div",HC," Beijing's developmental trajectory is highly compatible with Scania's technological and product expertise. Scania is well-positioned to offer pivotal solutions in clean energy and intelligent transportation, aligning with Beijing’s overarching strategic goals. The company is particularly poised to make significant contributions to Beijing's advanced traffic management and urban logistics systems. Moreover, as Beijing stands as a hub of international relations and a beacon of technological innovation in China, it presents Scania with a strategic foothold. Collaborations and successful pilot initiatives in Beijing are set to substantially boost Scania’s influence in the Chinese and broader Asian markets. ")}const VC=_e($C,[["render",zC],["__scopeId","data-v-337e9ffb"]]),fm=[{title:"WELCOME"},{title:"OVERALL",content:"Beijing is the capital of China and is defined as the national political center, cultural center, center for international exchanges and center for technological innovation."},{title:"QUICK FACTS",content:"Diverse industries including tech, sustainable energy, and creative arts."},{title:"GEOGRAPHY",content:"60% of Beijing's area consists of mountains, with the Central City primarily built on the plains. By 2035, the expansive hilly areas will be developed as key ecological conservation zones."},{title:"LAYOUT",content:"The structure of Beijing's city is very clear and can be summarized by its two axes, ring roads, and radial highways."},{title:"DISTRICTS",content:"Beijing has 16 districts, each with distinct natural endowments and developmental statuses."},{title:"VISION",content:"Chinese cities typically update their master plans every 10-15 years, setting the direction and future prospects for the city's development over the next 20 years. In 2017, Beijing issued a new round of master plan, which gives us a glimpse of what Beijing will look like in 2035. Its spatial structure can be summarized with the areas here:"},{title:`REGIONAL
COORDINATION`,content:`By 2035, Beijing will experience several key development trends. First, Beijing and its neighboring Tianjin and Hebei Province will form a more integrated urban agglomeration.

In the past, despite being geographically close, there were many barriers between these three regions. By 2035, increased connectivity in transportation, industry, and energy, as well as reduced obstacles, will enhance the competitiveness of the Beijing-Tianjin-Hebei urban cluster on a global scale, and alleviate urban issues like traffic congestion in Beijing.`},{title:`REDUCTION
DEVELOPMENT`,content:`Protecting natural reserves and historical sites, Controlled expansion to maintain a manageable city size. Encouraging green buffers between urban and rural areas.

This relatively uncommon approach to urban development has allowed Beijing to break away from the inertia of extensive expansion by 2035. Instead, the city has become more refined, and its ecological environment has significantly improved.`},{title:"URBAN RENEWAL",content:"Accompanying the reduction development strategy, Beijing has fully entered the stage of urban renewal. This involves meticulous updates to historical districts, residential areas, industrial plants, commercial buildings, parks, and infrastructure. While Europe is accustomed to this state of affairs, for Beijing, which is used to rapid expansion, this represents a completely new condition."},{title:`DEEP TECH
CITY`,content:`Due to the organizational model of a large government and the public's inertia for convenience, new technologies are more easily applied on a large scale in urban settings in China.

Beijing, with the most universities in the country, naturally has an advantage in research strength. The city has also planned and built numerous industrial parks, as well as new technology experimental and demonstration areas. By 2035, new technologies have been deeply integrated into every aspect of the city.`},{title:"TRANSPORTATION",content:`These trends will be distinctly reflected across different urban systems.
In terms of transportation, by 2035, there will be a comprehensive, smart transportation system that amalgamates data from diverse modes of transport. The use of autonomous vehicles, along with public and logistics transport, is expected to significantly ease Beijing's chronic traffic woes. Furthermore, the emphasis will also be on promoting green travel and enhancing regional transportation networks.`,keywords:["smart system","autonomous driving","unmanned public transport","unmanned urban logistics","green travel","regional transportation"]},{title:"ENERGY",content:`Under the national goal of "carbon peak and carbon neutrality", Beijing will play a leading role in energy transformation. Leveraging its geographical advantages, the proportion of renewable energy like wind and solar power in Beijing's energy mix will significantly increase. By 2035, the city will achieve coal-free, and the share of renewable energy consumption is expected to rise to 30%. In new urban areas, microgrid systems will gradually be established. All urban operational vehicles will be fully transitioned to new energy sources, and new public buildings will meet zero-carbon standards.`,keywords:["coal-free","zero-carbon power system","microgrid","new energy vehicles","green building"]},{title:"GOVERNANCE",content:"By 2035, Beijing will leverage digital technology to enhance urban governance and public service efficiency while ensuring safety. The city's infrastructure will be fundamentally smart, and on this basis, a digital urban governance platform that integrates various sectors will be established to improve the efficiency of handling complex issues. Additionally, smart governance will strengthen the interaction between the government and the public, promoting governance by all citizens.",keywords:["digital platform","smart city infrastructure","smart government services","collective governance","ecological management"]},{title:"INSIGHTS",content:"Beijing's developmental trajectory is highly compatible with Scania's technological and product expertise. Scania is well-positioned to offer pivotal solutions in clean energy and intelligent transportation, aligning with Beijing’s overarching strategic goals. The company is particularly poised to make significant contributions to Beijing's advanced traffic management and urban logistics systems. Moreover, as Beijing stands as a hub of international relations and a beacon of technological innovation in China, it presents Scania with a strategic foothold. Collaborations and successful pilot initiatives in Beijing are set to substantially boost Scania’s influence in the Chinese and broader Asian markets."}];function A_(n,e,t){let i=!1,s,r=0,a=0;function o(){i=!0,clearTimeout(s),s=setTimeout(()=>{i=!1},t)}function l(m){i||(m.deltaY>30?(n(),o()):m.deltaY<-30&&(e(),o()))}function u(m){r=m.touches[0].clientY,a=r}function c(m){a=m.touches[0].clientY}function h(){const m=a-r;i||(m<-100?n():m>100&&e())}return Ot(()=>{window.addEventListener("wheel",l),document.body.addEventListener("touchstart",u),document.body.addEventListener("touchmove",c),document.body.addEventListener("touchend",h)}),sn(()=>{window.removeEventListener("wheel",l),document.body.removeEventListener("touchstart",u),document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",h),clearTimeout(s)}),o}const qC=["data-fade-out"],GC={class:"intro-fragment"},WC={class:"container"},XC={class:"bottom-layer"},YC={class:"main-layer"},KC={class:"intro"},ZC={key:0,class:"intro-title"},QC=300,JC=Se({__name:"Intro",setup(n){const e=Be(),t=fm.map(({title:y})=>y.toLowerCase()),i=t.length,s=xt({showLoading:!0,showStart:!1,pageIndex:0,pageLock:!1,willLeavePage:!1,progress:0}),r=du();function a(){if(s.pageLock)return;const y=s.pageIndex-1;e.value?.prev(y,{onReverseStart:()=>{console.log("onReverseStart"),s.pageIndex>0&&(s.pageIndex-=1,s.pageLock=!0)},onReverseComplete:()=>{console.log("onReverseComplete"),s.pageLock=!1},onError:_=>{console.error(_),s.pageLock=!1}})}function o(){if(s.pageLock)return;const y=s.pageIndex;e.value?.next(y,{onStart:()=>{console.log("onStart"),s.pageIndex<i-1?(s.pageIndex+=1,s.pageLock=!0):s.pageIndex==i-1&&l()},onComplete:()=>{console.log("onComplete"),s.pageLock=!1},onError:_=>{console.error(_),s.pageLock=!1}})}function l(){s.willLeavePage=!0,setTimeout(()=>r.push("/map"),300)}A_(o,a,QC*2);function u(y){s.progress=Math.trunc(y*100),console.log("progress",y)}function c(){s.showLoading=!1,s.showStart=!0}function h(){s.showStart=!1}function m(y){switch(console.log(y.code),y.code){case"ArrowLeft":a();break;case"ArrowRight":o();break}}return Ot(()=>{window.addEventListener("keydown",m)}),El(()=>{window.removeEventListener("keydown",m)}),(y,_)=>($(),Y("div",{"data-fade-out":s.willLeavePage},[F("div",GC,[De(Js,{name:"fade"},{default:fi(()=>[s.showLoading?($(),Te(j3,{key:0,progress:s.progress},null,8,["progress"])):s.showStart?($(),Te(oS,{key:1,onAnimationFinished:h})):Pe("",!0)]),_:1})]),Al(F("div",WC,[F("div",XC,[De(B3,{ref_key:"ThreeRef",ref:e,onProgress:u,onFinish:c},null,512)]),F("div",YC,[($(!0),Y(Lt,null,en(Re(fm),(b,x)=>($(),Te(Js,{name:"intro"},{default:fi(()=>[Al(F("div",KC,[x!==0?($(),Y("div",ZC,Ve(b.title),1)):Pe("",!0),b.title==="WELCOME"&&!(s.showLoading||s.showStart)?($(),Te(fS,{key:1})):b.title==="OVERALL"?($(),Te(vS,{key:2})):b.title==="QUICK FACTS"?($(),Te(CS,{key:3})):b.title==="GEOGRAPHY"?($(),Te(LS,{key:4})):b.title==="LAYOUT"?($(),Te(FS,{key:5})):b.title==="DISTRICTS"?($(),Te(VS,{key:6})):b.title==="VISION"?($(),Te(KS,{key:7})):b.title===`REGIONAL
COORDINATION`?($(),Te(nC,{key:8})):b.title===`REDUCTION
DEVELOPMENT`?($(),Te(cC,{key:9})):b.title==="URBAN RENEWAL"?($(),Te(pC,{key:10})):b.title===`DEEP TECH
CITY`?($(),Te(TC,{key:11})):b.title==="TRANSPORTATION"?($(),Te(IC,{key:12})):b.title==="ENERGY"?($(),Te(MC,{key:13})):b.title==="GOVERNANCE"?($(),Te(jC,{key:14})):b.title==="INSIGHTS"?($(),Te(VC,{key:15})):Pe("",!0)],512),[[Dl,x===s.pageIndex]])]),_:2},1024))),256))]),De(qx,{class:"indicator",index:s.pageIndex,items:Re(t)},null,8,["index","items"]),De(Yx,{class:"skip",style:{animation:"fade-in .3s .6s ease-in-out forwards"},onClick:l})],512),[[Dl,!(s.showLoading||s.showStart)]])],8,qC))}}),eE=_e(JC,[["__scopeId","data-v-4857e869"]]),tE={width:"0",height:"0",fill:"none",xmlns:"http://www.w3.org/2000/svg"},iE=["id"],nE=["x","rx","ry","width","height"],sE=["points"],rE=Se({__name:"DialogBoxShape",props:{id:{},width:{},height:{},triangleWidth:{},radius:{}},setup(n){return(e,t)=>($(),Y("svg",tE,[F("defs",null,[F("clipPath",{id:e.id},[F("rect",{x:e.triangleWidth,y:0,rx:e.radius,ry:e.radius,width:e.width,height:e.height,fill:"red"},null,8,nE),F("polygon",{points:[{x:0,y:100},{x:e.triangleWidth,y:100-e.triangleWidth},{x:e.triangleWidth,y:100+e.triangleWidth}].map(({x:i,y:s})=>`${i},${s}`).join(" "),fill:"red"},null,8,sE)],8,iE)])]))}}),aE={},oE={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},lE=F("path",{fill:"#fafafa",d:"M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z"},null,-1),uE=[lE];function cE(n,e){return $(),Y("svg",oE,uE)}const yd=_e(aE,[["render",cE]]),dE={width:"17",height:"20",viewBox:"0 0 17 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},hE=["fill"],D_=Se({__name:"IconEnergy",props:{color:{}},setup(n){const e=n;return(t,i)=>($(),Y("svg",dE,[F("path",{d:"M8.41751 19.7083C8.36751 19.7083 8.32751 19.6983 8.27751 19.6883C8.06751 19.6283 7.91751 19.4283 7.91751 19.2083V12.1483H0.497508C0.317508 12.1483 0.1575 12.0483 0.0675 11.8983C-0.0225 11.7383 -0.0225 11.5483 0.0675 11.3983L6.57751 0.24833C6.68751 0.0483297 6.92751 -0.041666 7.13751 0.018334C7.35751 0.078334 7.5075 0.27833 7.5075 0.49833V7.56834H15.6075C15.7875 7.56834 15.9575 7.66833 16.0475 7.82833C16.1375 7.98833 16.1275 8.18834 16.0275 8.33834L8.8375 19.4683C8.7475 19.6283 8.58751 19.7083 8.41751 19.7083ZM1.3775 11.1483H8.41751C8.69751 11.1483 8.91751 11.3683 8.91751 11.6483V17.5183L14.6875 8.57833H7.0075C6.7275 8.57833 6.5075 8.35833 6.5075 8.07833V2.34834L1.3775 11.1483Z",fill:e.color},null,8,hE)]))}}),fE={width:"15",height:"18",viewBox:"0 0 15 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pE=["fill"],mE=["fill"],gE=["fill"],_E=["fill"],k_=Se({__name:"IconManagement",props:{color:{}},setup(n){const e=n;return(t,i)=>($(),Y("svg",fE,[F("path",{d:"M11.77 2.97V0.5C11.77 0.22 11.55 0 11.27 0H7.96002C7.68002 0 7.46002 0.22 7.46002 0.5V2.97H2.36002C1.06002 2.97 0 4.03 0 5.33V14.7C0 16 1.06002 17.07 2.36002 17.07H11.7C13 17.07 14.06 16 14.06 14.7V5.33C14.06 4.05 13.04 3.01 11.77 2.97ZM8.46002 1H10.77V9.22H8.46002V1ZM10.56 10.22L9.62 12.77L8.67001 10.22H10.56ZM13.06 14.7C13.06 15.45 12.45 16.07 11.7 16.07H2.36002C1.61002 16.07 1 15.45 1 14.7V5.33C1 4.58 1.61002 3.97 2.36002 3.97H7.46002V9.72C7.46002 9.77 7.47002 9.81999 7.49002 9.87C7.49002 9.88 7.49002 9.88 7.49002 9.89L7.5 9.91L9.14999 14.39C9.21999 14.58 9.41 14.71 9.62 14.71C9.81999 14.71 10.01 14.58 10.08 14.39L11.73 9.91L11.74 9.89C11.74 9.88 11.74 9.88 11.74 9.87C11.76 9.81999 11.77 9.77 11.77 9.72V3.98C12.49 4.01 13.06 4.6 13.06 5.33V14.7Z",fill:e.color},null,8,pE),F("path",{d:"M5.67981 7.11011H3.52979C3.24979 7.11011 3.02979 6.89011 3.02979 6.61011C3.02979 6.33011 3.24979 6.11011 3.52979 6.11011H5.67981C5.95981 6.11011 6.17981 6.33011 6.17981 6.61011C6.17981 6.89011 5.95981 7.11011 5.67981 7.11011Z",fill:e.color},null,8,mE),F("path",{d:"M5.67981 10.25H3.52979C3.24979 10.25 3.02979 10.03 3.02979 9.75C3.02979 9.47 3.24979 9.25 3.52979 9.25H5.67981C5.95981 9.25 6.17981 9.47 6.17981 9.75C6.17981 10.03 5.95981 10.25 5.67981 10.25Z",fill:e.color},null,8,gE),F("path",{d:"M6.5798 13.3999H3.52979C3.24979 13.3999 3.02979 13.1799 3.02979 12.8999C3.02979 12.6199 3.24979 12.3999 3.52979 12.3999H6.5798C6.8598 12.3999 7.0798 12.6199 7.0798 12.8999C7.0798 13.1799 6.8498 13.3999 6.5798 13.3999Z",fill:e.color},null,8,_E)]))}}),yE={width:"24",height:"19",viewBox:"0 0 24 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vE=["fill"],bE=["fill"],TE=["fill"],xE=["fill"],wE=["fill"],SE=["fill"],I_=Se({__name:"IconTransportation",props:{color:{}},setup(n){const e=n;return(t,i)=>($(),Y("svg",yE,[F("path",{d:"M21.915 15.2239H20.7777V14.0392H21.915C22.4126 14.0392 22.8154 13.6364 22.8154 13.1388V10.4614C22.8154 9.39513 21.9506 8.53029 20.8843 8.53029H3.25592C2.18968 8.53029 1.32484 9.39513 1.32484 10.4614V13.1388C1.32484 13.6364 1.72765 14.0392 2.22523 14.0392H3.35068V15.2239H2.22523C1.07607 15.2239 0.140137 14.288 0.140137 13.1388V10.4614C0.140137 8.74354 1.53809 7.34558 3.25592 7.34558H20.8843C22.6022 7.34558 24.0001 8.74354 24.0001 10.4614V13.1388C24.0001 14.288 23.0642 15.2239 21.915 15.2239Z",fill:e.color},null,8,vE),F("path",{d:"M14.5104 14.0392H9.62939V15.2239H14.5104V14.0392Z",fill:e.color},null,8,bE),F("path",{d:"M21.0385 8.5304H3.10205L5.30562 2.02636C5.67288 1.14968 6.4903 0.616577 7.39068 0.616577H16.7499C17.6503 0.616577 18.4677 1.14969 18.8231 1.97898L21.0385 8.5304ZM4.74881 7.3457H19.3799L17.7095 2.40548C17.5555 2.05006 17.1764 1.80128 16.7499 1.80128H7.39068C6.96418 1.80128 6.57325 2.05006 6.40739 2.45286L4.74881 7.3457Z",fill:e.color},null,8,TE),F("path",{d:"M6.49015 18.3634C4.42876 18.3634 2.7583 16.693 2.7583 14.6316C2.7583 12.5702 4.42876 10.8998 6.49015 10.8998C8.55154 10.8998 10.222 12.5702 10.222 14.6316C10.222 16.693 8.55154 18.3634 6.49015 18.3634ZM6.49015 12.0845C5.08035 12.0845 3.94301 13.2218 3.94301 14.6316C3.94301 16.0414 5.08035 17.1787 6.49015 17.1787C7.89995 17.1787 9.03726 16.0414 9.03726 14.6316C9.03726 13.2218 7.8881 12.0845 6.49015 12.0845Z",fill:e.color},null,8,xE),F("path",{d:"M17.6381 18.3634C15.5767 18.3634 13.9062 16.693 13.9062 14.6316C13.9062 12.5702 15.5767 10.8998 17.6381 10.8998C19.6995 10.8998 21.3699 12.5702 21.3699 14.6316C21.3699 16.693 19.6995 18.3634 17.6381 18.3634ZM17.6381 12.0845C16.2283 12.0845 15.091 13.2218 15.091 14.6316C15.091 16.0414 16.2283 17.1787 17.6381 17.1787C19.0479 17.1787 20.1852 16.0414 20.1852 14.6316C20.1852 13.2218 19.0479 12.0845 17.6381 12.0845Z",fill:e.color},null,8,wE),F("path",{d:"M12.6622 1.48145H11.4775V7.94993H12.6622V1.48145Z",fill:e.color},null,8,SE)]))}}),CE=["data-keep-dom","data-visible"],EE=["data-big"],AE={key:2,class:"modal-subtitle"},DE={key:3,class:"modal-tags"},kE={class:"modal-tag"},IE={key:0,class:"modal-tag-icon"},PE={class:"modal-tag-label"},LE={key:4,class:"modal-image"},OE=["src"],RE={key:5,class:"modal-content"},ME={key:6,class:"modal-footer"},BE=Se({__name:"MapModal",props:{title:{},subtitle:{},tags:{},image:{},content:{},visible:{type:Boolean,default:!1},useBigTitle:{type:Boolean,default:!1},showCloseInTitle:{type:Boolean},showCloseInFooter:{type:Boolean},transitionName:{},useRippleEffect:{type:Boolean,default:!1},keepDom:{type:Boolean,default:!1},initRippleSize:{},rippleColor:{default:"var(--tertiary-color)"},rippleSize:{},slotClass:{},animationDuration:{},position:{}},emits:["close","size-changed"],setup(n,{expose:e,emit:t}){const i=n,s=t,r=Be(null),a=Be(null),o=Be(i.visible);function l(){if(r.value===null)return;const{width:c,height:h}=r.value.getBoundingClientRect();s("size-changed",{width:c,height:h})}function u(c){a.value?.startAnimation(c)}return ls(()=>i.visible,()=>{i.visible&&l()}),Ot(()=>{l(),window.addEventListener("resize",l)}),sn(()=>{window.removeEventListener("resize",l)}),e({startRippleAnimation:u}),(c,h)=>($(),Te(Js,{name:i.transitionName},{default:fi(()=>[i.visible||i.keepDom?($(),Y("div",{key:0,class:"modal",ref_key:"modalRef",ref:r,"data-keep-dom":i.keepDom,"data-visible":i.visible},[i.useRippleEffect?($(),Te(mu,{key:0,ref_key:"rippleRef",ref:a,"init-ripple-size":o.value?i.rippleSize:0,"ripple-color":i.rippleColor,"ripple-size":i.rippleSize,position:i.position,"animation-duration":i.animationDuration},null,8,["init-ripple-size","ripple-color","ripple-size","position","animation-duration"])):Pe("",!0),i.title?($(),Y("div",{key:1,class:"modal-title","data-big":i.useBigTitle},[F("span",null,Ve(i.title),1),i.showCloseInTitle?($(),Y("div",{key:0,class:"modal-close",onClick:h[0]||(h[0]=()=>s("close"))},[De(yd)])):Pe("",!0)],8,EE)):Pe("",!0),i.subtitle?($(),Y("div",AE,[F("span",null,Ve(i.subtitle),1)])):Pe("",!0),c.$props.tags?($(),Y("div",DE,[($(!0),Y(Lt,null,en(i.tags,m=>($(),Y("div",kE,[m?($(),Y("span",IE,[m.toUpperCase()==="ENERGY"?($(),Te(D_,{key:0,color:"var(--tertiary-color)"})):m.toUpperCase()==="MANAGEMENT"?($(),Te(k_,{key:1,color:"var(--tertiary-color)"})):m.toUpperCase()==="TRANSPORTATION"?($(),Te(I_,{key:2,color:"var(--tertiary-color)"})):Pe("",!0)])):Pe("",!0),F("span",PE,Ve(m),1)]))),256))])):Pe("",!0),i.image?($(),Y("div",LE,[typeof i.image=="string"?($(),Y("img",{key:0,src:i.image},null,8,OE)):Pe("",!0)])):Pe("",!0),i.content?($(),Y("div",RE,[F("div",null,Ve(i.content),1)])):Pe("",!0),c.$slots.default||i.showCloseInFooter?($(),Y("div",ME,[i.showCloseInFooter?($(),Y("div",{key:0,class:"modal-close",onClick:h[1]||(h[1]=()=>s("close"))},[De(yd)])):Pe("",!0),Kd(c.$slots,"default",{},void 0,!0)])):Pe("",!0)],8,CE)):Pe("",!0)]),_:3},8,["name"]))}}),xc=_e(BE,[["__scopeId","data-v-d2ece623"]]),NE={},FE={width:"42",height:"40",viewBox:"0 0 42 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},UE=F("path",{d:"M3.6792 11.12C3.6792 6.15 7.6992 2.12 12.6792 2.12C17.6492 2.12 21.6792 6.15 21.6792 11.12",stroke:"#041E42","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),jE=F("path",{d:"M9.68926 25.65V10.08C9.68926 8.49002 10.9793 7.21002 12.5593 7.21002C14.1493 7.21002 15.4292 8.50002 15.4292 10.08V19.65L22.7292 20.77C25.5892 21.21 27.5792 23.86 27.2092 26.73L25.7092 38.22H9.68926L2.47924 27.92C1.73924 26.86 1.86922 25.43 2.77922 24.52C3.53922 23.76 4.69926 23.53 5.68926 23.95L9.68926 25.65Z",stroke:"#041E42","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),$E=F("path",{d:"M35.9294 2.12L39.6794 5.87L35.8394 9.72003",stroke:"#041E42","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),HE=F("path",{d:"M39.6794 5.87H27.8794",stroke:"#041E42","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),zE=[UE,jE,$E,HE];function VE(n,e){return $(),Y("svg",FE,zE)}const qE=_e(NE,[["render",VE]]),GE={},WE={width:"26",height:"52",viewBox:"0 0 26 52",fill:"none",xmlns:"http://www.w3.org/2000/svg"},XE=F("path",{d:"M7.80908 5.70001L12.6991 2L17.6991 5.79004",stroke:"#041E42","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),YE=F("path",{d:"M17.6991 46.14L12.8091 49.84L7.80908 46.05",stroke:"#041E42","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),KE=F("path",{d:"M12.7493 40.4C18.8293 40.4 23.7493 35.48 23.7493 29.4V21.4C23.7493 15.32 18.8293 10.4 12.7493 10.4C6.66927 10.4 1.74927 15.32 1.74927 21.4V29.4C1.74927 35.47 6.67927 40.4 12.7493 40.4Z",stroke:"#041E42","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round"},null,-1),ZE=F("path",{d:"M12.7493 18.44V25.4",stroke:"#041E42","stroke-width":"3","stroke-miterlimit":"10","stroke-linecap":"round"},null,-1),QE=[XE,YE,KE,ZE];function JE(n,e){return $(),Y("svg",WE,QE)}const e4=_e(GE,[["render",JE]]),P_=n=>(Bt("data-v-66b5f767"),n=n(),Nt(),n),t4=["data-visible"],i4={class:"tip"},n4=P_(()=>F("div",null,[ms(" CLICK & DRAG "),F("br"),ms(" TO EXPLORE ")],-1)),s4={class:"tip"},r4=P_(()=>F("div",null,[ms(" SCROLL TO "),F("br"),ms(" ZOOM IN & OUT ")],-1)),a4=Se({__name:"ControlTip",props:{visible:{type:Boolean}},setup(n){const e=n;return(t,i)=>($(),Y("div",{class:"control-tip","data-visible":e.visible},[F("div",i4,[De(qE,{class:"icon-click-and-drag"}),n4]),F("div",s4,[De(e4),r4])],8,t4))}}),o4=_e(a4,[["__scopeId","data-v-66b5f767"]]),L_=n=>(Bt("data-v-ea82d65d"),n=n(),Nt(),n),l4=["data-primary"],u4=L_(()=>F("div",null,"BEIJING",-1)),c4=L_(()=>F("div",null,"2035",-1)),d4=[u4,c4],h4=Se({__name:"Logo",props:{primary:{type:Boolean,default:!0}},setup(n){const e=n;return(t,i)=>($(),Y("div",{class:"logo","data-primary":e.primary},d4,8,l4))}}),vd=_e(h4,[["__scopeId","data-v-ea82d65d"]]),f4=["data-active"],p4={class:"menu-layer-button-icon"},m4={class:"menu-layer-button-label-container"},g4=Se({__name:"MenuLayerButton",props:{type:{},active:{type:Boolean}},setup(n){const e=xt({labelWidth:0}),t=Be(null);return Ot(()=>{t.value!==null&&(e.labelWidth=t.value.getBoundingClientRect().width)}),(i,s)=>($(),Y("div",{class:"menu-layer-button","data-active":i.$props.active,style:pi({paddingRight:i.$props.active?`calc(${e.labelWidth}px + .2rem)`:0})},[F("span",p4,[i.$props.type==="ENERGY"?($(),Te(D_,{key:0,color:i.$props.active?"var(--surface-color)":"var(--primary-color)"},null,8,["color"])):Pe("",!0),i.$props.type==="MANAGEMENT"?($(),Te(k_,{key:1,color:i.$props.active?"var(--surface-color)":"var(--primary-color)"},null,8,["color"])):Pe("",!0),i.$props.type==="TRANSPORTATION"?($(),Te(I_,{key:2,color:i.$props.active?"var(--surface-color)":"var(--primary-color)"},null,8,["color"])):Pe("",!0)]),F("span",m4,[F("span",{class:"menu-layer-button-label",ref_key:"label",ref:t},Ve(i.$props.type),513)])],12,f4))}}),wc=_e(g4,[["__scopeId","data-v-e79b41a5"]]),_4={class:"menu-text-button"},y4=Se({__name:"MenuTextButton",props:{label:{}},setup(n){return(e,t)=>($(),Y("div",_4,Ve(e.$props.label),1))}}),Sc=_e(y4,[["__scopeId","data-v-e9e88732"]]),O_=n=>(Bt("data-v-480257d1"),n=n(),Nt(),n),v4={class:"menu-area"},b4={class:"menu-area-name"},T4={key:0},x4=O_(()=>F("svg",{width:"19",height:"14",viewBox:"0 0 19 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3645 5.30812H16.1699L14.7383 1.07476C14.458 0.420555 13.8131 0 13.1028 0H5.71962C5.00934 0 4.3645 0.420549 4.07478 1.11214L2.65318 5.30812H2.45795C1.10281 5.30812 0 6.41093 0 7.76607V9.87821C0 10.7848 0.738327 11.5231 1.64487 11.5231H2.10316C2.32698 12.9271 3.5431 13.9997 5.01025 13.9997C6.47726 13.9997 7.69327 12.9273 7.91724 11.5234H10.8976C11.1216 12.9273 12.3377 13.9998 13.8047 13.9998C15.2718 13.9998 16.4879 12.9271 16.7117 11.5231H17.1776C18.0841 11.5231 18.8224 10.7848 18.8224 9.87821V7.76607C18.8224 6.41093 17.7196 5.30812 16.3645 5.30812ZM13.8047 8.1119C12.3374 8.1119 11.1212 9.18469 10.8975 10.5889H7.91736C7.6937 9.18467 6.47752 8.11186 5.01025 8.11186C3.5431 8.11186 2.32698 9.18448 2.10316 10.5885H1.64487C1.25235 10.5885 0.93458 10.2707 0.93458 9.87821V7.76607C0.93458 6.93489 1.60079 6.25885 2.42819 6.24299H16.3943C17.2217 6.25885 17.8879 6.93489 17.8879 7.76607V9.87821C17.8879 10.2707 17.5701 10.5885 17.1776 10.5885H16.7117C16.4879 9.1845 15.2718 8.1119 13.8047 8.1119ZM13.8598 1.41121L15.1775 5.30812H9.8788V0.93458H13.1028C13.4393 0.93458 13.7383 1.13084 13.8598 1.41121ZM8.94422 0.93458H5.71962C5.38317 0.93458 5.07478 1.13083 4.94393 1.44859L3.63563 5.30812H8.94422V0.93458ZM3.00088 11.0558C3.00088 9.94363 3.8981 9.04644 5.01025 9.04644C6.11305 9.04644 7.01959 9.94363 7.01959 11.0558C7.01959 12.1679 6.1224 13.0651 5.01025 13.0651C3.8981 13.0651 3.00088 12.1679 3.00088 11.0558ZM13.8047 9.04648C12.6925 9.04648 11.7953 9.94367 11.7953 11.0558C11.7953 12.168 12.6925 13.0652 13.8047 13.0652C14.9168 13.0652 15.814 12.168 15.814 11.0558C15.814 9.94367 14.9168 9.04648 13.8047 9.04648Z",fill:"#FAFAFA"})],-1)),w4=[x4],S4={key:1},C4=O_(()=>F("svg",{width:"14",height:"17",viewBox:"0 0 14 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[F("path",{d:"M7.05413 16.5162C7.01222 16.5162 6.9787 16.5078 6.9368 16.4994C6.76082 16.4491 6.63511 16.2815 6.63511 16.0972V10.1807H0.416927C0.266081 10.1807 0.13199 10.0969 0.056567 9.97117C-0.0188557 9.83708 -0.0188557 9.67786 0.056567 9.55215L5.51215 0.208108C5.60434 0.0405018 5.80546 -0.0349174 5.98145 0.0153644C6.16581 0.0656463 6.29151 0.233249 6.29151 0.417615V6.3425H13.0796C13.2304 6.3425 13.3729 6.42629 13.4483 6.56038C13.5237 6.69446 13.5153 6.86208 13.4315 6.98778L7.4061 16.3151C7.33067 16.4491 7.19659 16.5162 7.05413 16.5162ZM1.15438 9.34265H7.05413C7.28877 9.34265 7.47314 9.52701 7.47314 9.76166V14.6809L12.3086 7.1889H5.8725C5.63785 7.1889 5.45348 7.00454 5.45348 6.76989V1.96798L1.15438 9.34265Z",fill:"#FAFAFA"})],-1)),E4=[C4],A4={key:2},D4=bs('<svg width="13" height="16" viewBox="0 0 13 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-480257d1><path d="M10.4641 2.64047V0.444524C10.4641 0.19559 10.2685 0 10.0196 0H7.07683C6.8279 0 6.63231 0.19559 6.63231 0.444524V2.64047H2.09817C0.942404 2.64047 0 3.58286 0 4.73862V13.069C0 14.2248 0.942404 15.176 2.09817 15.176H10.4019C11.5576 15.176 12.5 14.2248 12.5 13.069V4.73862C12.5 3.60064 11.5932 2.67603 10.4641 2.64047ZM7.52136 0.889047H9.57505V8.19701H7.52136V0.889047ZM9.38834 9.08606L8.55263 11.3531L7.70805 9.08606H9.38834ZM11.611 13.069C11.611 13.7358 11.0686 14.287 10.4019 14.287H2.09817C1.43138 14.287 0.889047 13.7358 0.889047 13.069V4.73862C0.889047 4.07184 1.43138 3.52952 2.09817 3.52952H6.63231V8.64154C6.63231 8.68599 6.6412 8.73044 6.65898 8.77489C6.65898 8.78378 6.65898 8.78378 6.65898 8.79268L6.66785 8.81046L8.13478 12.7934C8.19701 12.9623 8.36593 13.0779 8.55263 13.0779C8.73044 13.0779 8.89938 12.9623 8.96161 12.7934L10.4285 8.81046L10.4374 8.79268C10.4374 8.78378 10.4374 8.78378 10.4374 8.77489C10.4552 8.73044 10.4641 8.68599 10.4641 8.64154V3.5384C11.1042 3.56507 11.611 4.08962 11.611 4.73862V13.069Z" fill="#FAFAFA" data-v-480257d1></path><path d="M5.04936 6.32118H3.13788C2.88895 6.32118 2.69336 6.12559 2.69336 5.87665C2.69336 5.62772 2.88895 5.43213 3.13788 5.43213H5.04936C5.29829 5.43213 5.49388 5.62772 5.49388 5.87665C5.49388 6.12559 5.29829 6.32118 5.04936 6.32118Z" fill="#FAFAFA" data-v-480257d1></path><path d="M5.04936 9.11268H3.13788C2.88895 9.11268 2.69336 8.91709 2.69336 8.66816C2.69336 8.41922 2.88895 8.22363 3.13788 8.22363H5.04936C5.29829 8.22363 5.49388 8.41922 5.49388 8.66816C5.49388 8.91709 5.29829 9.11268 5.04936 9.11268Z" fill="#FAFAFA" data-v-480257d1></path><path d="M5.84949 11.913H3.13788C2.88895 11.913 2.69336 11.7174 2.69336 11.4684C2.69336 11.2195 2.88895 11.0239 3.13788 11.0239H5.84949C6.09843 11.0239 6.29402 11.2195 6.29402 11.4684C6.29402 11.7174 6.08954 11.913 5.84949 11.913Z" fill="#FAFAFA" data-v-480257d1></path></svg>',1),k4=[D4],I4=Se({__name:"MenuAreaItem",props:{name:{},type:{}},setup(n){const e=n;return(t,i)=>($(),Y("div",v4,[F("span",b4,Ve(e.name),1),($(!0),Y(Lt,null,en(t.type,s=>($(),Y(Lt,null,[s==="transportation"?($(),Y("span",T4,w4)):Pe("",!0),s==="energy"?($(),Y("span",S4,E4)):Pe("",!0),s==="management"?($(),Y("span",A4,k4)):Pe("",!0)],64))),256))]))}}),pm=_e(I4,[["__scopeId","data-v-480257d1"]]),_u=n=>(Bt("data-v-e4f48814"),n=n(),Nt(),n),P4=["data-expand"],L4={class:"fold-container"},O4={class:"menu-all-places"},R4=_u(()=>F("div",null,"--MAJOR AREAS--",-1)),M4=_u(()=>F("div",null,"--MINOR AREAS--",-1)),B4=_u(()=>F("div",{class:"spacer"},null,-1)),N4=_u(()=>F("div",{class:"spacer"},null,-1)),F4={class:"menu-button-group"},U4=Se({__name:"Menu",props:{activeLayerType:{},majorPoints:{},minorPoints:{}},emits:["click-layer","click-back-to-intro","click-area","menu-expand-state-changed"],setup(n,{emit:e}){const t=e,i=n,s=xt({menuRipplePosition:{x:-1,y:-1},menuPaddingBottom:0,rippleSize:Math.max(screen.width,screen.height)/2,expand:!1}),r=Be(null),a=Be(null),o=Be(null),l=Be(null);function u(y){const _=a.value?.getBoundingClientRect()??{left:0,top:0},b=a.value!==null&&a.value.parentElement!==null?Number.parseInt(getComputedStyle(a.value.parentElement).padding.replace("px","")):0;s.menuRipplePosition={x:y.clientX-_.left+b,y:y.clientY-_.top+b}}function c(y){t("click-layer",y),s.expand=!1,o.value?.startAnimation(!0)}function h(y){s.expand=!s.expand,u(y),o.value?.startAnimation(!s.expand),t("menu-expand-state-changed",s.expand)}function m(){if(l.value!==null&&(s.menuPaddingBottom=l.value?.getBoundingClientRect().height),r.value!==null){const{width:y,height:_}=r.value.getBoundingClientRect();s.rippleSize=Math.max(y,_)*3,screen.width<=500&&(s.rippleSize*=1.6)}}return Ot(()=>{m(),window.addEventListener("resize",m)}),sn(()=>{window.removeEventListener("resize",m)}),(y,_)=>($(),Y(Lt,null,[F("div",{class:"menu",ref_key:"menu",ref:r,"data-expand":s.expand,style:pi({paddingBottom:s.expand?`${s.menuPaddingBottom+16}px`:0,marginBottom:s.expand?"8px":0})},[De(mu,{ref_key:"menuRippleEffect",ref:o,"ripple-color":"var(--menu-bg-color)","ripple-size":s.rippleSize,position:s.menuRipplePosition,"animation-duration":600},null,8,["ripple-size","position"]),F("div",{class:"menu-title",ref_key:"menuTitle",ref:a,onClick:h}," MENU ",512),F("div",L4,[F("div",{class:"menu-fold-content",ref_key:"foldContent",ref:l},[De(Sc,{label:"ALL PLACES"}),F("div",O4,[R4,($(!0),Y(Lt,null,en(y.majorPoints,b=>($(),Te(pm,{name:b.name,type:b.type,onClick:()=>t("click-area",b.name,b.type,!0)},null,8,["name","type","onClick"]))),256)),M4,($(!0),Y(Lt,null,en(y.minorPoints,b=>($(),Te(pm,{name:b.name,type:b.type,onClick:()=>t("click-area",b.name,b.type,!1)},null,8,["name","type","onClick"]))),256))]),B4,De(Sc,{label:"BACK TO INTRO",onClick:_[0]||(_[0]=()=>t("click-back-to-intro"))}),N4,De(Sc,{label:"ABOUT BEIJING 2035"})],512)])],12,P4),F("div",F4,[De(wc,{type:"ENERGY",active:i.activeLayerType==="energy",onClick:_[1]||(_[1]=()=>c("energy"))},null,8,["active"]),De(wc,{type:"TRANSPORTATION",active:i.activeLayerType==="transportation",onClick:_[2]||(_[2]=()=>c("transportation"))},null,8,["active"]),De(wc,{type:"MANAGEMENT",active:i.activeLayerType==="management",onClick:_[3]||(_[3]=()=>c("management"))},null,8,["active"])])],64))}}),j4=_e(U4,[["__scopeId","data-v-e4f48814"]]),$4=["data-rotate"],H4=bs('<svg width="12" height="18" viewBox="0 0 12 18" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-305df4d1><g clip-path="url(#clip0_1913_14127)" data-v-305df4d1><path d="M0.661133 0.557617L10.6778 9.00037L0.661133 17.4431" stroke="#FAFAFA" stroke-width="1.5" stroke-miterlimit="10" data-v-305df4d1></path></g><defs data-v-305df4d1><clipPath id="clip0_1913_14127" data-v-305df4d1><rect width="12" height="18" fill="white" data-v-305df4d1></rect></clipPath></defs></svg>',1),z4=[H4],V4={class:"point-name"},q4={class:"content"},G4={key:0,class:"content-video"},W4=Se({__name:"LayerModalCollapsiblePoint",props:{name:{},description:{},video:{}},emits:["expand"],setup(n,{emit:e}){const t=n,i=xt({collpase:!0}),s=e;function r(a){i.collpase=!i.collpase,i.collpase||s("expand",a.target)}return(a,o)=>($(),Y("div",{class:"collapsible-point",onClick:r},[F("div",{class:"collapsible-arrow","data-rotate":!i.collpase},z4,8,$4),F("div",null,[F("div",V4,Ve(t.name),1),Al(F("div",q4,[F("div",null,Ve(t.description),1),t.video?($(),Y("div",G4)):Pe("",!0)],512),[[Dl,!i.collpase]])])]))}}),X4=_e(W4,[["__scopeId","data-v-305df4d1"]]);var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Y4(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var ja;typeof window<"u"?ja=window:typeof Nl<"u"?ja=Nl:typeof self<"u"?ja=self:ja={};var yu=ja;const P=Qn(yu),K4={},Z4=Object.freeze(Object.defineProperty({__proto__:null,default:K4},Symbol.toStringTag,{value:"Module"})),Q4=Y4(Z4);var mm=typeof Nl<"u"?Nl:typeof window<"u"?window:{},J4=Q4,$a;typeof document<"u"?$a=document:($a=mm["__GLOBAL_DOCUMENT_CACHE@4"],$a||($a=mm["__GLOBAL_DOCUMENT_CACHE@4"]=J4));var R_=$a;const Q=Qn(R_);var bd={exports:{}};(function(n,e){function t(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return a[l];var c=String(l),h=i[c.toLowerCase()];if(h)return h;var h=s[c.toLowerCase()];if(h)return h;if(c.length===1)return c.charCodeAt(0)}t.isEventKey=function(u,c){if(u&&typeof u=="object"){var h=u.which||u.keyCode||u.charCode;if(h==null)return!1;if(typeof c=="string"){var m=i[c.toLowerCase()];if(m)return m===h;var m=s[c.toLowerCase()];if(m)return m===h}else if(typeof c=="number")return c===h;return!1}},e=n.exports=t;var i=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(r=97;r<123;r++)i[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)i[r-48]=r;for(r=1;r<13;r++)i["f"+r]=r+111;for(r=0;r<10;r++)i["numpad "+r]=r+96;var a=e.names=e.title={};for(r in i)a[i[r]]=r;for(var o in s)i[o]=s[o]})(bd,bd.exports);var e5=bd.exports;const xe=Qn(e5);var t5=i5;function i5(n,e){var t,i=null;try{t=JSON.parse(n,e)}catch(s){i=s}return[i,t]}const n5=Qn(t5);var Ah={exports:{}},M_={exports:{}};(function(n){function e(){return n.exports=e=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},n.exports.__esModule=!0,n.exports.default=n.exports,e.apply(this,arguments)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(M_);var s5=M_.exports,r5=o5,a5=Object.prototype.toString;function o5(n){if(!n)return!1;var e=a5.call(n);return e==="[object Function]"||typeof n=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}var l5=yu,u5=function(e,t){return t===void 0&&(t=!1),function(i,s,r){if(i){e(i);return}if(s.statusCode>=400&&s.statusCode<=599){var a=r;if(t)if(l5.TextDecoder){var o=c5(s.headers&&s.headers["content-type"]);try{a=new TextDecoder(o).decode(r)}catch{}}else a=String.fromCharCode.apply(null,new Uint8Array(r));e({cause:a});return}e(null,r)}};function c5(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(e,t){var i=t.split("="),s=i[0],r=i[1];return s.trim()==="charset"?r.trim():e},"utf-8")}var d5=u5,B_=yu,h5=s5,f5=r5;wn.httpHandler=d5;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var p5=function(e){var t={};return e&&e.trim().split(`
`).forEach(function(i){var s=i.indexOf(":"),r=i.slice(0,s).trim().toLowerCase(),a=i.slice(s+1).trim();typeof t[r]>"u"?t[r]=a:Array.isArray(t[r])?t[r].push(a):t[r]=[t[r],a]}),t};Ah.exports=wn;Ah.exports.default=wn;wn.XMLHttpRequest=B_.XMLHttpRequest||y5;wn.XDomainRequest="withCredentials"in new wn.XMLHttpRequest?wn.XMLHttpRequest:B_.XDomainRequest;m5(["get","put","post","patch","head","delete"],function(n){wn[n==="delete"?"del":n]=function(e,t,i){return t=N_(e,t,i),t.method=n.toUpperCase(),F_(t)}});function m5(n,e){for(var t=0;t<n.length;t++)e(n[t])}function g5(n){for(var e in n)if(n.hasOwnProperty(e))return!1;return!0}function N_(n,e,t){var i=n;return f5(e)?(t=e,typeof n=="string"&&(i={uri:n})):i=h5({},e,{uri:n}),i.callback=t,i}function wn(n,e,t){return e=N_(n,e,t),F_(e)}function F_(n){if(typeof n.callback>"u")throw new Error("callback argument missing");var e=!1,t=function(A,k,C){e||(e=!0,n.callback(A,k,C))};function i(){o.readyState===4&&setTimeout(a,0)}function s(){var w=void 0;if(o.response?w=o.response:w=o.responseText||_5(o),b)try{w=JSON.parse(w)}catch{}return w}function r(w){return clearTimeout(x),w instanceof Error||(w=new Error(""+(w||"Unknown XMLHttpRequest Error"))),w.statusCode=0,t(w,S)}function a(){if(!u){var w;clearTimeout(x),n.useXDR&&o.status===void 0?w=200:w=o.status===1223?204:o.status;var A=S,k=null;return w!==0?(A={body:s(),statusCode:w,method:h,headers:{},url:c,rawRequest:o},o.getAllResponseHeaders&&(A.headers=p5(o.getAllResponseHeaders()))):k=new Error("Internal XMLHttpRequest Error"),t(k,A,A.body)}}var o=n.xhr||null;o||(n.cors||n.useXDR?o=new wn.XDomainRequest:o=new wn.XMLHttpRequest);var l,u,c=o.url=n.uri||n.url,h=o.method=n.method||"GET",m=n.body||n.data,y=o.headers=n.headers||{},_=!!n.sync,b=!1,x,S={body:void 0,headers:{},statusCode:0,method:h,url:c,rawRequest:o};if("json"in n&&n.json!==!1&&(b=!0,y.accept||y.Accept||(y.Accept="application/json"),h!=="GET"&&h!=="HEAD"&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),m=JSON.stringify(n.json===!0?m:n.json))),o.onreadystatechange=i,o.onload=a,o.onerror=r,o.onprogress=function(){},o.onabort=function(){u=!0},o.ontimeout=r,o.open(h,c,!_,n.username,n.password),_||(o.withCredentials=!!n.withCredentials),!_&&n.timeout>0&&(x=setTimeout(function(){if(!u){u=!0,o.abort("timeout");var w=new Error("XMLHttpRequest timeout");w.code="ETIMEDOUT",r(w)}},n.timeout)),o.setRequestHeader)for(l in y)y.hasOwnProperty(l)&&o.setRequestHeader(l,y[l]);else if(n.headers&&!g5(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(o.responseType=n.responseType),"beforeSend"in n&&typeof n.beforeSend=="function"&&n.beforeSend(o),o.send(m||null),o}function _5(n){try{if(n.responseType==="document")return n.responseXML;var e=n.responseXML&&n.responseXML.documentElement.nodeName==="parsererror";if(n.responseType===""&&!e)return n.responseXML}catch{}return null}function y5(){}var v5=Ah.exports;const U_=Qn(v5);var j_={exports:{}},gm=R_,Dh=Object.create||function(){function n(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=e,new n}}();function Ci(n,e){this.name="ParsingError",this.code=n.code,this.message=e||n.message}Ci.prototype=Dh(Error.prototype);Ci.prototype.constructor=Ci;Ci.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function kh(n){function e(i,s,r,a){return(i|0)*3600+(s|0)*60+(r|0)+(a|0)/1e3}var t=n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function Za(){this.values=Dh(null)}Za.prototype={set:function(n,e){!this.get(n)&&e!==""&&(this.values[n]=e)},get:function(n,e,t){return t?this.has(n)?this.values[n]:e[t]:this.has(n)?this.values[n]:e},has:function(n){return n in this.values},alt:function(n,e,t){for(var i=0;i<t.length;++i)if(e===t[i]){this.set(n,e);break}},integer:function(n,e){/^-?\d+$/.test(e)&&this.set(n,parseInt(e,10))},percent:function(n,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(n,e),!0):!1}};function Ha(n,e,t,i){var s=i?n.split(i):[n];for(var r in s)if(typeof s[r]=="string"){var a=s[r].split(t);if(a.length===2){var o=a[0].trim(),l=a[1].trim();e(o,l)}}}function b5(n,e,t){var i=n;function s(){var o=kh(n);if(o===null)throw new Ci(Ci.Errors.BadTimeStamp,"Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function r(o,l){var u=new Za;Ha(o,function(c,h){switch(c){case"region":for(var m=t.length-1;m>=0;m--)if(t[m].id===h){u.set(c,t[m].region);break}break;case"vertical":u.alt(c,h,["rl","lr"]);break;case"line":var y=h.split(","),_=y[0];u.integer(c,_),u.percent(c,_)&&u.set("snapToLines",!1),u.alt(c,_,["auto"]),y.length===2&&u.alt("lineAlign",y[1],["start","center","end"]);break;case"position":y=h.split(","),u.percent(c,y[0]),y.length===2&&u.alt("positionAlign",y[1],["start","center","end"]);break;case"size":u.percent(c,h);break;case"align":u.alt(c,h,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");try{l.line=u.get("line","auto")}catch{}l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100);try{l.align=u.get("align","center")}catch{l.align=u.get("align","middle")}try{l.position=u.get("position","auto")}catch{l.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=s(),a(),n.substr(0,3)!=="-->")throw new Ci(Ci.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.substr(3),a(),e.endTime=s(),a(),r(n,e)}var Cc=gm.createElement&&gm.createElement("textarea"),T5={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_m={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},x5={v:"title",lang:"lang"},ym={rt:"ruby"};function $_(n,e){function t(){if(!e)return null;function _(x){return e=e.substr(x.length),x}var b=e.match(/^([^<]*)(<[^>]*>?)?/);return _(b[1]?b[1]:b[2])}function i(_){return Cc.innerHTML=_,_=Cc.textContent,Cc.textContent="",_}function s(_,b){return!ym[b.localName]||ym[b.localName]===_.localName}function r(_,b){var x=T5[_];if(!x)return null;var S=n.document.createElement(x),w=x5[_];return w&&b&&(S[w]=b.trim()),S}for(var a=n.document.createElement("div"),o=a,l,u=[];(l=t())!==null;){if(l[0]==="<"){if(l[1]==="/"){u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),o=o.parentNode);continue}var c=kh(l.substr(1,l.length-2)),h;if(c){h=n.document.createProcessingInstruction("timestamp",c),o.appendChild(h);continue}var m=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m||(h=r(m[1],m[3]),!h)||!s(o,h))continue;if(m[2]){var y=m[2].split(".");y.forEach(function(_){var b=/^bg_/.test(_),x=b?_.slice(3):_;if(_m.hasOwnProperty(x)){var S=b?"background-color":"color",w=_m[x];h.style[S]=w}}),h.className=y.join(" ")}u.push(m[1]),o.appendChild(h),o=h;continue}o.appendChild(n.document.createTextNode(i(l)))}return a}var vm=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function w5(n){for(var e=0;e<vm.length;e++){var t=vm[e];if(n>=t[0]&&n<=t[1])return!0}return!1}function S5(n){var e=[],t="",i;if(!n||!n.childNodes)return"ltr";function s(o,l){for(var u=l.childNodes.length-1;u>=0;u--)o.push(l.childNodes[u])}function r(o){if(!o||!o.length)return null;var l=o.pop(),u=l.textContent||l.innerText;if(u){var c=u.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):u}if(l.tagName==="ruby")return r(o);if(l.childNodes)return s(o,l),r(o)}for(s(e,n);t=r(e);)for(var a=0;a<t.length;a++)if(i=t.charCodeAt(a),w5(i))return"rtl";return"ltr"}function C5(n){if(typeof n.line=="number"&&(n.snapToLines||n.line>=0&&n.line<=100))return n.line;if(!n.track||!n.track.textTrackList||!n.track.textTrackList.mediaElement)return-1;for(var e=n.track,t=e.textTrackList,i=0,s=0;s<t.length&&t[s]!==e;s++)t[s].mode==="showing"&&i++;return++i*-1}function vu(){}vu.prototype.applyStyles=function(n,e){e=e||this.div;for(var t in n)n.hasOwnProperty(t)&&(e.style[t]=n[t])};vu.prototype.formatStyle=function(n,e){return n===0?0:n+e};function Fl(n,e,t){vu.call(this),this.cue=e,this.cueDiv=$_(n,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=n.document.createElement("div"),i={direction:S5(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:t.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var s=0;switch(e.positionAlign){case"start":case"line-left":s=e.position;break;case"center":s=e.position-e.size/2;break;case"end":case"line-right":s=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(r){this.applyStyles({top:this.formatStyle(r.top,"px"),bottom:this.formatStyle(r.bottom,"px"),left:this.formatStyle(r.left,"px"),right:this.formatStyle(r.right,"px"),height:this.formatStyle(r.height,"px"),width:this.formatStyle(r.width,"px")})}}Fl.prototype=Dh(vu.prototype);Fl.prototype.constructor=Fl;function Qt(n){var e,t,i,s;if(n.div){t=n.div.offsetHeight,i=n.div.offsetWidth,s=n.div.offsetTop;var r=(r=n.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects();n=n.div.getBoundingClientRect(),e=r?Math.max(r[0]&&r[0].height||0,n.height/r.length):0}this.left=n.left,this.right=n.right,this.top=n.top||s,this.height=n.height||t,this.bottom=n.bottom||s+(n.height||t),this.width=n.width||i,this.lineHeight=e!==void 0?e:n.lineHeight}Qt.prototype.move=function(n,e){switch(e=e!==void 0?e:this.lineHeight,n){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Qt.prototype.overlaps=function(n){return this.left<n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};Qt.prototype.overlapsAny=function(n){for(var e=0;e<n.length;e++)if(this.overlaps(n[e]))return!0;return!1};Qt.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};Qt.prototype.overlapsOppositeAxis=function(n,e){switch(e){case"+x":return this.left<n.left;case"-x":return this.right>n.right;case"+y":return this.top<n.top;case"-y":return this.bottom>n.bottom}};Qt.prototype.intersectPercentage=function(n){var e=Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left)),t=Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top)),i=e*t;return i/(this.height*this.width)};Qt.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};Qt.getSimpleBoxPosition=function(n){var e=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,t=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:0,i=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n;var s={left:n.left,right:n.right,top:n.top||i,height:n.height||e,bottom:n.bottom||i+(n.height||e),width:n.width||t};return s};function E5(n,e,t,i){function s(x,S){for(var w,A=new Qt(x),k=1,C=0;C<S.length;C++){for(;x.overlapsOppositeAxis(t,S[C])||x.within(t)&&x.overlapsAny(i);)x.move(S[C]);if(x.within(t))return x;var R=x.intersectPercentage(t);k>R&&(w=new Qt(x),k=R),x=new Qt(A)}return w||A}var r=new Qt(e),a=e.cue,o=C5(a),l=[];if(a.snapToLines){var u;switch(a.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=r.lineHeight,h=c*Math.round(o),m=t[u]+c,y=l[0];Math.abs(h)>m&&(h=h<0?-1:1,h*=Math.ceil(m/c)*c),o<0&&(h+=a.vertical===""?t.height:t.width,l=l.reverse()),r.move(y,h)}else{var _=r.lineHeight/t.height*100;switch(a.lineAlign){case"center":o-=_/2;break;case"end":o-=_;break}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],r=new Qt(e)}var b=s(r,l);e.move(b.toCSSCompatValues(t))}function ra(){}ra.StringDecoder=function(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};ra.convertCueToDOMTree=function(n,e){return!n||!e?null:$_(n,e)};var A5=.05,D5="sans-serif",k5="1.5%";ra.processCues=function(n,e,t){if(!n||!e||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var i=n.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=k5,t.appendChild(i);function s(c){for(var h=0;h<c.length;h++)if(c[h].hasBeenReset||!c[h].displayState)return!0;return!1}if(!s(e)){for(var r=0;r<e.length;r++)i.appendChild(e[r].displayState);return}var a=[],o=Qt.getSimpleBoxPosition(i),l=Math.round(o.height*A5*100)/100,u={font:l+"px "+D5};(function(){for(var c,h,m=0;m<e.length;m++)h=e[m],c=new Fl(n,h,u),i.appendChild(c.div),E5(n,c,o,a),h.displayState=c.div,a.push(Qt.getSimpleBoxPosition(c))})()};ra.Parser=function(n,e,t){t||(t=e,e={}),e||(e={}),this.window=n,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]};ra.Parser.prototype={reportOrThrowError:function(n){if(n instanceof Ci)this.onparsingerror&&this.onparsingerror(n);else throw n},parse:function(n){var e=this;n&&(e.buffer+=e.decoder.decode(n,{stream:!0}));function t(){for(var c=e.buffer,h=0;h<c.length&&c[h]!=="\r"&&c[h]!==`
`;)++h;var m=c.substr(0,h);return c[h]==="\r"&&++h,c[h]===`
`&&++h,e.buffer=c.substr(h),m}function i(c){var h=new Za;if(Ha(c,function(y,_){switch(y){case"id":h.set(y,_);break;case"width":h.percent(y,_);break;case"lines":h.integer(y,_);break;case"regionanchor":case"viewportanchor":var b=_.split(",");if(b.length!==2)break;var x=new Za;if(x.percent("x",b[0]),x.percent("y",b[1]),!x.has("x")||!x.has("y"))break;h.set(y+"X",x.get("x")),h.set(y+"Y",x.get("y"));break;case"scroll":h.alt(y,_,["up"]);break}},/=/,/\s/),h.has("id")){var m=new(e.vttjs.VTTRegion||e.window.VTTRegion);m.width=h.get("width",100),m.lines=h.get("lines",3),m.regionAnchorX=h.get("regionanchorX",0),m.regionAnchorY=h.get("regionanchorY",100),m.viewportAnchorX=h.get("viewportanchorX",0),m.viewportAnchorY=h.get("viewportanchorY",100),m.scroll=h.get("scroll",""),e.onregion&&e.onregion(m),e.regionList.push({id:h.get("id"),region:m})}}function s(c){var h=new Za;Ha(c,function(m,y){switch(m){case"MPEGT":h.integer(m+"S",y);break;case"LOCA":h.set(m+"L",kh(y));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:h.get("MPEGTS"),LOCAL:h.get("LOCAL")})}function r(c){c.match(/X-TIMESTAMP-MAP/)?Ha(c,function(h,m){switch(h){case"X-TIMESTAMP-MAP":s(m);break}},/=/):Ha(c,function(h,m){switch(h){case"Region":i(m);break}},/:/)}try{var a;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=t();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Ci(Ci.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:a=t(),e.state){case"HEADER":/:/.test(a)?r(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":try{b5(a,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=a.indexOf("-->")!==-1;if(!a||u&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=a.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":a||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||n.state==="HEADER")&&(n.buffer+=`

`,n.parse()),n.state==="INITIAL")throw new Ci(Ci.Errors.BadSignature)}catch(e){n.reportOrThrowError(e)}return n.onflush&&n.onflush(),this}};var I5=ra,P5="auto",L5={"":1,lr:1,rl:1},O5={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function R5(n){if(typeof n!="string")return!1;var e=L5[n.toLowerCase()];return e?n.toLowerCase():!1}function Ec(n){if(typeof n!="string")return!1;var e=O5[n.toLowerCase()];return e?n.toLowerCase():!1}function H_(n,e,t){this.hasBeenReset=!1;var i="",s=!1,r=n,a=e,o=t,l=null,u="",c=!0,h="auto",m="start",y="auto",_="auto",b=100,x="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(S){i=""+S}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(S){s=!!S}},startTime:{enumerable:!0,get:function(){return r},set:function(S){if(typeof S!="number")throw new TypeError("Start time must be set to a number.");r=S,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(S){if(typeof S!="number")throw new TypeError("End time must be set to a number.");a=S,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(S){o=""+S,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(S){l=S,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(S){var w=R5(S);if(w===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=w,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(S){c=!!S,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(S){if(typeof S!="number"&&S!==P5)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=S,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(S){var w=Ec(S);w?(m=w,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return y},set:function(S){if(S<0||S>100)throw new Error("Position must be between 0 and 100.");y=S,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return _},set:function(S){var w=Ec(S);w?(_=w,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return b},set:function(S){if(S<0||S>100)throw new Error("Size must be between 0 and 100.");b=S,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return x},set:function(S){var w=Ec(S);if(!w)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");x=w,this.hasBeenReset=!0}}}),this.displayState=void 0}H_.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var M5=H_,B5={"":!0,up:!0};function N5(n){if(typeof n!="string")return!1;var e=B5[n.toLowerCase()];return e?n.toLowerCase():!1}function Aa(n){return typeof n=="number"&&n>=0&&n<=100}function F5(){var n=100,e=3,t=0,i=100,s=0,r=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(o){if(!Aa(o))throw new Error("Width must be between 0 and 100.");n=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(o){if(!Aa(o))throw new Error("RegionAnchorX must be between 0 and 100.");i=o}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!Aa(o))throw new Error("RegionAnchorY must be between 0 and 100.");t=o}},viewportAnchorY:{enumerable:!0,get:function(){return r},set:function(o){if(!Aa(o))throw new Error("ViewportAnchorY must be between 0 and 100.");r=o}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(o){if(!Aa(o))throw new Error("ViewportAnchorX must be between 0 and 100.");s=o}},scroll:{enumerable:!0,get:function(){return a},set:function(o){var l=N5(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):a=l}}})}var U5=F5,Xn=yu,lr=j_.exports={WebVTT:I5,VTTCue:M5,VTTRegion:U5};Xn.vttjs=lr;Xn.WebVTT=lr.WebVTT;var j5=lr.VTTCue,$5=lr.VTTRegion,H5=Xn.VTTCue,z5=Xn.VTTRegion;lr.shim=function(){Xn.VTTCue=j5,Xn.VTTRegion=$5};lr.restore=function(){Xn.VTTCue=H5,Xn.VTTRegion=z5};Xn.VTTCue||lr.shim();var V5=j_.exports;const bm=Qn(V5);function Zi(){return Zi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Zi.apply(this,arguments)}var z_={exports:{}};(function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var m=o.parseURL(u);if(!m)throw new Error("Error trying to parse relative URL.");if(m.scheme)return c.alwaysNormalize?(m.path=o.normalizePath(m.path),o.buildURLFromParts(m)):u;var y=o.parseURL(l);if(!y)throw new Error("Error trying to parse base URL.");if(!y.netLoc&&y.path&&y.path[0]!=="/"){var _=s.exec(y.path);y.netLoc=_[1],y.path=_[2]}y.netLoc&&!y.path&&(y.path="/");var b={scheme:y.scheme,netLoc:m.netLoc,path:null,params:m.params,query:m.query,fragment:m.fragment};if(!m.netLoc&&(b.netLoc=y.netLoc,m.path[0]!=="/"))if(!m.path)b.path=y.path,m.params||(b.params=y.params,m.query||(b.query=y.query));else{var x=y.path,S=x.substring(0,x.lastIndexOf("/")+1)+m.path;b.path=o.normalizePath(S)}return b.path===null&&(b.path=c.alwaysNormalize?o.normalizePath(m.path):m.path),o.buildURLFromParts(b)},parseURL:function(l){var u=i.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(r,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=o})()})(z_);var q5=z_.exports;const Tm=Qn(q5);var xm="http://example.com",bu=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=P.location&&P.location.href||"");var i=typeof P.URL=="function",s=/^\/\//.test(e),r=!P.location&&!/\/\//i.test(e);if(i?e=new P.URL(e,P.location||xm):/\/\//i.test(e)||(e=Tm.buildAbsoluteURL(P.location&&P.location.href||"",e)),i){var a=new URL(t,e);return r?a.href.slice(xm.length):s?a.href.slice(a.protocol.length):a.href}return Tm.buildAbsoluteURL(e,t)},Ih=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(i,s){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(s)},e.off=function(i,s){if(!this.listeners[i])return!1;var r=this.listeners[i].indexOf(s);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(r,1),r>-1},e.trigger=function(i){var s=this.listeners[i];if(s)if(arguments.length===2)for(var r=s.length,a=0;a<r;++a)s[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=s.length,u=0;u<l;++u)s[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(s){i.push(s)})},n}(),G5=function(e){return P.atob?P.atob(e):Buffer.from(e,"base64").toString("binary")};function W5(n){for(var e=G5(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}/*! @name m3u8-parser @version 7.1.0 @license Apache-2.0 */class X5 extends Ih{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const Y5="	",Ac=function(n){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},K5=function(){const n="[^=]*",e='"[^"]*"|[^,]*',t="(?:"+n+")=(?:"+e+")";return new RegExp("(?:^|,)("+t+")")},bi=function(n){const e={};if(!n)return e;const t=n.split(K5());let i=t.length,s;for(;i--;)t[i]!==""&&(s=/([^=]*)=(.*)/.exec(t[i]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),e[s[0]]=s[1]);return e};class Z5 extends Ih{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((r,a)=>{const o=a(e);return o===e?r:r.concat([o])},[e]).forEach(r=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,r))return;if(r.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:r.slice(1)});return}if(r=r.replace("\r",""),t=/^#EXTM3U/.exec(r),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(r),t){i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),this.trigger("data",i);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(r),t){i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(r),t){i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(r),t){i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(r),t){i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(r),t){i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(r),t){i=Zi(Ac(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(r),t){i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(r),t){if(i={type:"tag",tagType:"map"},t[1]){const a=bi(t[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=Ac(a.BYTERANGE))}this.trigger("data",i);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(r),t){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=bi(t[1]),i.attributes.RESOLUTION){const a=i.attributes.RESOLUTION.split("x"),o={};a[0]&&(o.width=parseInt(a[0],10)),a[1]&&(o.height=parseInt(a[1],10)),i.attributes.RESOLUTION=o}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(r),t){i={type:"tag",tagType:"media"},t[1]&&(i.attributes=bi(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-ENDLIST/.exec(r),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(r),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(r),t){i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(r),t){i={type:"tag",tagType:"key"},t[1]&&(i.attributes=bi(t[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(t=/^#EXT-X-START:(.*)$/.exec(r),t){i={type:"tag",tagType:"start"},t[1]&&(i.attributes=bi(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(r),t){i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(r),t){i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(r),t){i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"skip"},i.attributes=bi(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(Y5)),this.trigger("data",i);return}if(t=/^#EXT-X-PART:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"part"},i.attributes=bi(t[1]),["DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=Ac(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"server-control"},i.attributes=bi(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"part-inf"},i.attributes=bi(t[1]),["PART-TARGET"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=bi(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(i.attributes.hasOwnProperty(a)){i.attributes[a]=parseInt(i.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[a],delete i.attributes[a]}}),this.trigger("data",i);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=bi(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseInt(i.attributes[a],10))}),this.trigger("data",i);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"daterange"},i.attributes=bi(t[1]),["ID","CLASS"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=String(i.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=new Date(i.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/i.test(i.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=i.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in i.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(i.attributes[o]),u=/^\d+(\.\d+)?$/.test(i.attributes[o]);i.attributes[o]=l?i.attributes[o].toString(16):u?parseFloat(i.attributes[o]):String(i.attributes[o])}this.trigger("data",i);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(r),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(r),t){i={type:"tag",tagType:"content-steering"},i.attributes=bi(t[1]),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:r.slice(4)})})}addParser({expression:e,customType:t,dataParser:i,segment:s}){typeof i!="function"&&(i=r=>r),this.customParsers.push(r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:i(r),customType:t,segment:s}),!0})}addTagMapper({expression:e,map:t}){const i=s=>e.test(s)?t(s):s;this.tagMappers.push(i)}}const Q5=n=>n.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),is=function(n){const e={};return Object.keys(n).forEach(function(t){e[Q5(t)]=n[t]}),e},Dc=function(n){const{serverControl:e,targetDuration:t,partTargetDuration:i}=n;if(!e)return;const s="#EXT-X-SERVER-CONTROL",r="holdBack",a="partHoldBack",o=t&&t*3,l=i&&i*2;t&&!e.hasOwnProperty(r)&&(e[r]=o,this.trigger("info",{message:`${s} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[r]<o&&(this.trigger("warn",{message:`${s} clamping HOLD-BACK (${e[r]}) to targetDuration * 3 (${o})`}),e[r]=o),i&&!e.hasOwnProperty(a)&&(e[a]=i*3,this.trigger("info",{message:`${s} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),i&&e[a]<l&&(this.trigger("warn",{message:`${s} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};class J5 extends Ih{constructor(){super(),this.lineStream=new X5,this.parseStream=new Z5,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const e=this,t=[];let i={},s,r,a=!1;const o=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let c=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let h=0,m=0;const y={};this.on("end",()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&s&&(i.map=s),!i.key&&r&&(i.key=r),!i.timeline&&typeof c=="number"&&(i.timeline=c),this.manifest.preloadSegment=i)}),this.parseStream.on("data",function(_){let b,x;({tag(){({version(){_.version&&(this.manifest.version=_.version)},"allow-cache"(){this.manifest.allowCache=_.allowed,"allowed"in _||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const S={};"length"in _&&(i.byterange=S,S.length=_.length,"offset"in _||(_.offset=h)),"offset"in _&&(i.byterange=S,S.offset=_.offset),h=S.offset+S.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),_.title&&(i.title=_.title),_.duration>0&&(i.duration=_.duration),_.duration===0&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(!_.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(_.attributes.METHOD==="NONE"){r=null;return}if(!_.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(_.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:_.attributes};return}if(_.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:_.attributes.URI};return}if(_.attributes.KEYFORMAT===u){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(_.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(_.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),_.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(_.attributes.KEYID&&_.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:_.attributes.KEYFORMAT,keyId:_.attributes.KEYID.substring(2)},pssh:W5(_.attributes.URI.split(",")[1])};return}_.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:_.attributes.METHOD||"AES-128",uri:_.attributes.URI},typeof _.attributes.IV<"u"&&(r.iv=_.attributes.IV)},"media-sequence"(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+_.number});return}this.manifest.mediaSequence=_.number},"discontinuity-sequence"(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+_.number});return}this.manifest.discontinuitySequence=_.number,c=_.number},"playlist-type"(){if(!/VOD|EVENT/.test(_.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+_.playlist});return}this.manifest.playlistType=_.playlistType},map(){s={},_.uri&&(s.uri=_.uri),_.byterange&&(s.byterange=_.byterange),r&&(s.key=r)},"stream-inf"(){if(this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||l,!_.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}i.attributes||(i.attributes={}),Zi(i.attributes,_.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(_.attributes&&_.attributes.TYPE&&_.attributes["GROUP-ID"]&&_.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const S=this.manifest.mediaGroups[_.attributes.TYPE];S[_.attributes["GROUP-ID"]]=S[_.attributes["GROUP-ID"]]||{},b=S[_.attributes["GROUP-ID"]],x={default:/yes/i.test(_.attributes.DEFAULT)},x.default?x.autoselect=!0:x.autoselect=/yes/i.test(_.attributes.AUTOSELECT),_.attributes.LANGUAGE&&(x.language=_.attributes.LANGUAGE),_.attributes.URI&&(x.uri=_.attributes.URI),_.attributes["INSTREAM-ID"]&&(x.instreamId=_.attributes["INSTREAM-ID"]),_.attributes.CHARACTERISTICS&&(x.characteristics=_.attributes.CHARACTERISTICS),_.attributes.FORCED&&(x.forced=/yes/i.test(_.attributes.FORCED)),b[_.attributes.NAME]=x},discontinuity(){c+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=_.dateTimeString,this.manifest.dateTimeObject=_.dateTimeObject),i.dateTimeString=_.dateTimeString,i.dateTimeObject=_.dateTimeObject;const{lastProgramDateTime:S}=this;this.lastProgramDateTime=new Date(_.dateTimeString).getTime(),S===null&&this.manifest.segments.reduceRight((w,A)=>(A.programDateTime=w-A.duration*1e3,A.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(_.duration)||_.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+_.duration});return}this.manifest.targetDuration=_.duration,Dc.call(this,this.manifest)},start(){if(!_.attributes||isNaN(_.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:_.attributes["TIME-OFFSET"],precise:_.attributes.PRECISE}},"cue-out"(){i.cueOut=_.data},"cue-out-cont"(){i.cueOutCont=_.data},"cue-in"(){i.cueIn=_.data},skip(){this.manifest.skip=is(_.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",_.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const S=this.manifest.segments.length,w=is(_.attributes);i.parts=i.parts||[],i.parts.push(w),w.byterange&&(w.byterange.hasOwnProperty("offset")||(w.byterange.offset=m),m=w.byterange.offset+w.byterange.length);const A=i.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${A} for segment #${S}`,_.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((k,C)=>{k.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${C} lacks required attribute(s): LAST-PART`})})},"server-control"(){const S=this.manifest.serverControl=is(_.attributes);S.hasOwnProperty("canBlockReload")||(S.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Dc.call(this,this.manifest),S.canSkipDateranges&&!S.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const S=this.manifest.segments.length,w=is(_.attributes),A=w.type&&w.type==="PART";i.preloadHints=i.preloadHints||[],i.preloadHints.push(w),w.byterange&&(w.byterange.hasOwnProperty("offset")||(w.byterange.offset=A?m:0,A&&(m=w.byterange.offset+w.byterange.length)));const k=i.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${k} for segment #${S}`,_.attributes,["TYPE","URI"]),!!w.type)for(let C=0;C<i.preloadHints.length-1;C++){const R=i.preloadHints[C];R.type&&R.type===w.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${k} for segment #${S} has the same TYPE ${w.type} as preload hint #${C}`})}},"rendition-report"(){const S=is(_.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(S);const w=this.manifest.renditionReports.length-1,A=["LAST-MSN","URI"];a&&A.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${w}`,_.attributes,A)},"part-inf"(){this.manifest.partInf=is(_.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",_.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Dc.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(is(_.attributes));const S=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${S}`,_.attributes,["ID","START-DATE"]);const w=this.manifest.dateRanges[S];w.endDate&&w.startDate&&new Date(w.endDate)<new Date(w.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),w.duration&&w.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),w.plannedDuration&&w.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const A=!!w.endOnNext;if(A&&!w.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),A&&(w.duration||w.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),w.duration&&w.endDate){const C=w.startDate.getTime()+w.duration*1e3;this.manifest.dateRanges[S].endDate=new Date(C)}if(!y[w.id])y[w.id]=w;else{for(const C in y[w.id])if(w[C]&&JSON.stringify(y[w.id][C])!==JSON.stringify(w[C])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const k=this.manifest.dateRanges.findIndex(C=>C.id===w.id);this.manifest.dateRanges[k]=Zi(this.manifest.dateRanges[k],w),y[w.id]=Zi(y[w.id],w),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=is(_.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",_.attributes,["SERVER-URI"])}}[_.tagType]||o).call(e)},uri(){i.uri=_.uri,t.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),r&&(i.key=r),i.timeline=c,s&&(i.map=s),m=0,this.lastProgramDateTime!==null&&(i.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=i.duration*1e3),i={}},comment(){},custom(){_.segment?(i.custom=i.custom||{},i.custom[_.customType]=_.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[_.customType]=_.data)}})[_.type].call(e)})}warnOnMissingAttributes_(e,t,i){const s=[];i.forEach(function(r){t.hasOwnProperty(r)||s.push(r)}),s.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${s.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var Ys={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},e8=["video","audio","text"],wm=["Video","Audio","Text"],V_=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,s){var r=("00"+Number(i).toString(16)).slice(-2),a=("00"+Number(s).toString(16)).slice(-2);return"avc1."+r+"00"+a})},hn=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(s){s=s.trim();var r;e8.forEach(function(a){var o=Ys[a].exec(s.toLowerCase());if(!(!o||o.length<=1)){r=a;var l=s.substring(0,o[1].length),u=s.replace(l,"");i.push({type:l,details:u,mediaType:a})}}),r||i.push({type:s,details:"",mediaType:"unknown"})}),i},t8=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var s in i){var r=i[s];if(r.default&&r.playlists)return hn(r.playlists[0].attributes.CODECS)}return null},q_=function(e){return e===void 0&&(e=""),Ys.audio.test(e.trim().toLowerCase())},i8=function(e){return e===void 0&&(e=""),Ys.text.test(e.trim().toLowerCase())},po=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(r){return V_(r.trim())}),i="video";t.length===1&&q_(t[0])?i="audio":t.length===1&&i8(t[0])&&(i="application");var s="mp4";return t.every(function(r){return Ys.mp4.test(r)})?s="mp4":t.every(function(r){return Ys.webm.test(r)})?s="webm":t.every(function(r){return Ys.ogg.test(r)})&&(s="ogg"),i+"/"+s+';codecs="'+e+'"'}},xl=function(e){return e===void 0&&(e=""),P.MediaSource&&P.MediaSource.isTypeSupported&&P.MediaSource.isTypeSupported(po(e))||!1},kc=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<wm.length;i++){var s=wm[i];if(Ys["muxer"+s].test(t))return!0}return!1})},Sm="mp4a.40.2",n8="avc1.4d400d",s8=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,r8=/^application\/dash\+xml/i,G_=function(e){return s8.test(e)?"hls":r8.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},a8=function(e){return e.toString(2).length},o8=function(e){return Math.ceil(a8(e)/8)},W_=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},l8=function(e){return W_(e)},de=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!l8(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Ut=P.BigInt||Number,Td=[Ut("0x1"),Ut("0x100"),Ut("0x10000"),Ut("0x1000000"),Ut("0x100000000"),Ut("0x10000000000"),Ut("0x1000000000000"),Ut("0x100000000000000"),Ut("0x10000000000000000")];(function(){var n=new Uint16Array([65484]),e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var u8=function(e,t){var i=t===void 0?{}:t,s=i.signed,r=s===void 0?!1:s,a=i.le,o=a===void 0?!1:a;e=de(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(m,y,_){var b=o?_:Math.abs(_+1-e.length);return m+Ut(y)*Td[b]},Ut(0));if(r){var h=Td[e.length]/Ut(2)-Ut(1);c=Ut(c),c>h&&(c-=h,c-=h,c-=Ut(2))}return Number(c)},c8=function(e,t){var i=t===void 0?{}:t,s=i.le,r=s===void 0?!1:s;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Ut(e);for(var a=o8(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=r?l:Math.abs(l+1-o.length);o[u]=Number(e/Td[l]&Ut(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},X_=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i},d8=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return de(t[0]);var s=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),r=new Uint8Array(s),a=0;return t.forEach(function(o){o=de(o),r.set(o,a),a+=o.byteLength}),r},nt=function(e,t,i){var s=i===void 0?{}:i,r=s.offset,a=r===void 0?0:r,o=s.mask,l=o===void 0?[]:o;e=de(e),t=de(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var m=l[h]?l[h]&e[a+h]:e[a+h];return c===m})},h8=function(e,t,i){t.forEach(function(s){for(var r in e.mediaGroups[s])for(var a in e.mediaGroups[s][r]){var o=e.mediaGroups[s][r][a];i(o,s,r,a)}})},f8=function(e){return P.atob?P.atob(e):Buffer.from(e,"base64").toString("binary")};function p8(n){for(var e=f8(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}var xs={},Jn={};function m8(n,e,t){if(t===void 0&&(t=Array.prototype),n&&typeof t.find=="function")return t.find.call(n,e);for(var i=0;i<n.length;i++)if(Object.prototype.hasOwnProperty.call(n,i)){var s=n[i];if(e.call(void 0,s,i,n))return s}}function Ph(n,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(n):n}function g8(n,e){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}var Y_=Ph({HTML:"text/html",isHTML:function(n){return n===Y_.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),K_=Ph({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===K_.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Jn.assign=g8;Jn.find=m8;Jn.freeze=Ph;Jn.MIME_TYPE=Y_;Jn.NAMESPACE=K_;var Z_=Jn,Sn=Z_.find,mo=Z_.NAMESPACE;function _8(n){return n!==""}function y8(n){return n?n.split(/[\t\n\f\r ]+/).filter(_8):[]}function v8(n,e){return n.hasOwnProperty(e)||(n[e]=!0),n}function Cm(n){if(!n)return[];var e=y8(n);return Object.keys(e.reduce(v8,{}))}function b8(n){return function(e){return n&&n.indexOf(e)!==-1}}function Ao(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function gi(n,e){var t=n.prototype;if(!(t instanceof e)){let i=function(){};i.prototype=e.prototype,i=new i,Ao(t,i),n.prototype=t=i}t.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),t.constructor=n)}var _i={},Qi=_i.ELEMENT_NODE=1,Wr=_i.ATTRIBUTE_NODE=2,Ul=_i.TEXT_NODE=3,Q_=_i.CDATA_SECTION_NODE=4,J_=_i.ENTITY_REFERENCE_NODE=5,T8=_i.ENTITY_NODE=6,e1=_i.PROCESSING_INSTRUCTION_NODE=7,t1=_i.COMMENT_NODE=8,i1=_i.DOCUMENT_NODE=9,n1=_i.DOCUMENT_TYPE_NODE=10,Yn=_i.DOCUMENT_FRAGMENT_NODE=11,x8=_i.NOTATION_NODE=12,Gt={},Mt={};Gt.INDEX_SIZE_ERR=(Mt[1]="Index size error",1);Gt.DOMSTRING_SIZE_ERR=(Mt[2]="DOMString size error",2);var ri=Gt.HIERARCHY_REQUEST_ERR=(Mt[3]="Hierarchy request error",3);Gt.WRONG_DOCUMENT_ERR=(Mt[4]="Wrong document",4);Gt.INVALID_CHARACTER_ERR=(Mt[5]="Invalid character",5);Gt.NO_DATA_ALLOWED_ERR=(Mt[6]="No data allowed",6);Gt.NO_MODIFICATION_ALLOWED_ERR=(Mt[7]="No modification allowed",7);var s1=Gt.NOT_FOUND_ERR=(Mt[8]="Not found",8);Gt.NOT_SUPPORTED_ERR=(Mt[9]="Not supported",9);var Em=Gt.INUSE_ATTRIBUTE_ERR=(Mt[10]="Attribute in use",10);Gt.INVALID_STATE_ERR=(Mt[11]="Invalid state",11);Gt.SYNTAX_ERR=(Mt[12]="Syntax error",12);Gt.INVALID_MODIFICATION_ERR=(Mt[13]="Invalid modification",13);Gt.NAMESPACE_ERR=(Mt[14]="Invalid namespace",14);Gt.INVALID_ACCESS_ERR=(Mt[15]="Invalid access",15);function yt(n,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Mt[n]),this.message=Mt[n],Error.captureStackTrace&&Error.captureStackTrace(this,yt);return t.code=n,e&&(this.message=this.message+": "+e),t}yt.prototype=Error.prototype;Ao(Gt,yt);function Vn(){}Vn.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,e){for(var t=[],i=0;i<this.length;i++)Cr(this[i],t,n,e);return t.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function Xr(n,e){this._node=n,this._refresh=e,Lh(this)}function Lh(n){var e=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==e){var t=n._refresh(n._node);if(g1(n,"length",t.length),!n.$$length||t.length<n.$$length)for(var i=t.length;i in n;i++)Object.prototype.hasOwnProperty.call(n,i)&&delete n[i];Ao(t,n),n._inc=e}}Xr.prototype.item=function(n){return Lh(this),this[n]||null};gi(Xr,Vn);function jl(){}function r1(n,e){for(var t=n.length;t--;)if(n[t]===e)return t}function Am(n,e,t,i){if(i?e[r1(e,i)]=t:e[e.length++]=t,n){t.ownerElement=n;var s=n.ownerDocument;s&&(i&&l1(s,n,i),w8(s,n,t))}}function Dm(n,e,t){var i=r1(e,t);if(i>=0){for(var s=e.length-1;i<s;)e[i]=e[++i];if(e.length=s,n){var r=n.ownerDocument;r&&(l1(r,n,t),t.ownerElement=null)}}else throw new yt(s1,new Error(n.tagName+"@"+t))}jl.prototype={length:0,item:Vn.prototype.item,getNamedItem:function(n){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==n)return t}},setNamedItem:function(n){var e=n.ownerElement;if(e&&e!=this._ownerElement)throw new yt(Em);var t=this.getNamedItem(n.nodeName);return Am(this._ownerElement,this,n,t),t},setNamedItemNS:function(n){var e=n.ownerElement,t;if(e&&e!=this._ownerElement)throw new yt(Em);return t=this.getNamedItemNS(n.namespaceURI,n.localName),Am(this._ownerElement,this,n,t),t},removeNamedItem:function(n){var e=this.getNamedItem(n);return Dm(this._ownerElement,this,e),e},removeNamedItemNS:function(n,e){var t=this.getNamedItemNS(n,e);return Dm(this._ownerElement,this,t),t},getNamedItemNS:function(n,e){for(var t=this.length;t--;){var i=this[t];if(i.localName==e&&i.namespaceURI==n)return i}return null}};function a1(){}a1.prototype={hasFeature:function(n,e){return!0},createDocument:function(n,e,t){var i=new Do;if(i.implementation=this,i.childNodes=new Vn,i.doctype=t||null,t&&i.appendChild(t),e){var s=i.createElementNS(n,e);i.appendChild(s)}return i},createDocumentType:function(n,e,t){var i=new Tu;return i.name=n,i.nodeName=n,i.publicId=e||"",i.systemId=t||"",i}};function He(){}He.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,e){return $l(this,n,e)},replaceChild:function(n,e){$l(this,n,e,c1),e&&this.removeChild(e)},removeChild:function(n){return u1(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return xd(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var e=n.nextSibling;e&&e.nodeType==Ul&&n.nodeType==Ul?(this.removeChild(e),n.appendData(e.data)):(n.normalize(),n=e)}},isSupported:function(n,e){return this.ownerDocument.implementation.hasFeature(n,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var e=this;e;){var t=e._nsMap;if(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]===n)return i}e=e.nodeType==Wr?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(n){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n];e=e.nodeType==Wr?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(n){var e=this.lookupPrefix(n);return e==null}};function o1(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}Ao(_i,He);Ao(_i,He.prototype);function go(n,e){if(e(n))return!0;if(n=n.firstChild)do if(go(n,e))return!0;while(n=n.nextSibling)}function Do(){this.ownerDocument=this}function w8(n,e,t){n&&n._inc++;var i=t.namespaceURI;i===mo.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function l1(n,e,t,i){n&&n._inc++;var s=t.namespaceURI;s===mo.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Oh(n,e,t){if(n&&n._inc){n._inc++;var i=e.childNodes;if(t)i[i.length++]=t;else{for(var s=e.firstChild,r=0;s;)i[r++]=s,s=s.nextSibling;i.length=r,delete i[i.length]}}}function u1(n,e){var t=e.previousSibling,i=e.nextSibling;return t?t.nextSibling=i:n.firstChild=i,i?i.previousSibling=t:n.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Oh(n.ownerDocument,n),e}function S8(n){return n&&(n.nodeType===He.DOCUMENT_NODE||n.nodeType===He.DOCUMENT_FRAGMENT_NODE||n.nodeType===He.ELEMENT_NODE)}function C8(n){return n&&(Cn(n)||Rh(n)||Kn(n)||n.nodeType===He.DOCUMENT_FRAGMENT_NODE||n.nodeType===He.COMMENT_NODE||n.nodeType===He.PROCESSING_INSTRUCTION_NODE)}function Kn(n){return n&&n.nodeType===He.DOCUMENT_TYPE_NODE}function Cn(n){return n&&n.nodeType===He.ELEMENT_NODE}function Rh(n){return n&&n.nodeType===He.TEXT_NODE}function km(n,e){var t=n.childNodes||[];if(Sn(t,Cn)||Kn(e))return!1;var i=Sn(t,Kn);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function Im(n,e){var t=n.childNodes||[];function i(r){return Cn(r)&&r!==e}if(Sn(t,i))return!1;var s=Sn(t,Kn);return!(e&&s&&t.indexOf(s)>t.indexOf(e))}function E8(n,e,t){if(!S8(n))throw new yt(ri,"Unexpected parent node type "+n.nodeType);if(t&&t.parentNode!==n)throw new yt(s1,"child not in parent");if(!C8(e)||Kn(e)&&n.nodeType!==He.DOCUMENT_NODE)throw new yt(ri,"Unexpected node type "+e.nodeType+" for parent node type "+n.nodeType)}function A8(n,e,t){var i=n.childNodes||[],s=e.childNodes||[];if(e.nodeType===He.DOCUMENT_FRAGMENT_NODE){var r=s.filter(Cn);if(r.length>1||Sn(s,Rh))throw new yt(ri,"More than one element or text in fragment");if(r.length===1&&!km(n,t))throw new yt(ri,"Element in fragment can not be inserted before doctype")}if(Cn(e)&&!km(n,t))throw new yt(ri,"Only one element can be added and only after doctype");if(Kn(e)){if(Sn(i,Kn))throw new yt(ri,"Only one doctype is allowed");var a=Sn(i,Cn);if(t&&i.indexOf(a)<i.indexOf(t))throw new yt(ri,"Doctype can only be inserted before an element");if(!t&&a)throw new yt(ri,"Doctype can not be appended since element is present")}}function c1(n,e,t){var i=n.childNodes||[],s=e.childNodes||[];if(e.nodeType===He.DOCUMENT_FRAGMENT_NODE){var r=s.filter(Cn);if(r.length>1||Sn(s,Rh))throw new yt(ri,"More than one element or text in fragment");if(r.length===1&&!Im(n,t))throw new yt(ri,"Element in fragment can not be inserted before doctype")}if(Cn(e)&&!Im(n,t))throw new yt(ri,"Only one element can be added and only after doctype");if(Kn(e)){if(Sn(i,function(l){return Kn(l)&&l!==t}))throw new yt(ri,"Only one doctype is allowed");var a=Sn(i,Cn);if(t&&i.indexOf(a)<i.indexOf(t))throw new yt(ri,"Doctype can only be inserted before an element")}}function $l(n,e,t,i){E8(n,e,t),n.nodeType===He.DOCUMENT_NODE&&(i||A8)(n,e,t);var s=e.parentNode;if(s&&s.removeChild(e),e.nodeType===Yn){var r=e.firstChild;if(r==null)return e;var a=e.lastChild}else r=a=e;var o=t?t.previousSibling:n.lastChild;r.previousSibling=o,a.nextSibling=t,o?o.nextSibling=r:n.firstChild=r,t==null?n.lastChild=a:t.previousSibling=a;do r.parentNode=n;while(r!==a&&(r=r.nextSibling));return Oh(n.ownerDocument||n,n),e.nodeType==Yn&&(e.firstChild=e.lastChild=null),e}function D8(n,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=n,e.previousSibling=n.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,n.lastChild=e,Oh(n.ownerDocument,n,e),e}Do.prototype={nodeName:"#document",nodeType:i1,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,e){if(n.nodeType==Yn){for(var t=n.firstChild;t;){var i=t.nextSibling;this.insertBefore(t,e),t=i}return n}return $l(this,n,e),n.ownerDocument=this,this.documentElement===null&&n.nodeType===Qi&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),u1(this,n)},replaceChild:function(n,e){$l(this,n,e,c1),n.ownerDocument=this,e&&this.removeChild(e),Cn(n)&&(this.documentElement=n)},importNode:function(n,e){return m1(this,n,e)},getElementById:function(n){var e=null;return go(this.documentElement,function(t){if(t.nodeType==Qi&&t.getAttribute("id")==n)return e=t,!0}),e},getElementsByClassName:function(n){var e=Cm(n);return new Xr(this,function(t){var i=[];return e.length>0&&go(t.documentElement,function(s){if(s!==t&&s.nodeType===Qi){var r=s.getAttribute("class");if(r){var a=n===r;if(!a){var o=Cm(r);a=e.every(b8(o))}a&&i.push(s)}}}),i})},createElement:function(n){var e=new nr;e.ownerDocument=this,e.nodeName=n,e.tagName=n,e.localName=n,e.childNodes=new Vn;var t=e.attributes=new jl;return t._ownerElement=e,e},createDocumentFragment:function(){var n=new xu;return n.ownerDocument=this,n.childNodes=new Vn,n},createTextNode:function(n){var e=new Mh;return e.ownerDocument=this,e.appendData(n),e},createComment:function(n){var e=new Bh;return e.ownerDocument=this,e.appendData(n),e},createCDATASection:function(n){var e=new Nh;return e.ownerDocument=this,e.appendData(n),e},createProcessingInstruction:function(n,e){var t=new Uh;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=n,t.nodeValue=t.data=e,t},createAttribute:function(n){var e=new Hl;return e.ownerDocument=this,e.name=n,e.nodeName=n,e.localName=n,e.specified=!0,e},createEntityReference:function(n){var e=new Fh;return e.ownerDocument=this,e.nodeName=n,e},createElementNS:function(n,e){var t=new nr,i=e.split(":"),s=t.attributes=new jl;return t.childNodes=new Vn,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=n,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,s._ownerElement=t,t},createAttributeNS:function(n,e){var t=new Hl,i=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=n,t.specified=!0,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,t}};gi(Do,He);function nr(){this._nsMap={}}nr.prototype={nodeType:Qi,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var e=this.getAttributeNode(n);return e&&e.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,e){var t=this.ownerDocument.createAttribute(n);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(n){var e=this.getAttributeNode(n);e&&this.removeAttributeNode(e)},appendChild:function(n){return n.nodeType===Yn?this.insertBefore(n,null):D8(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(n,e){return this.getAttributeNodeNS(n,e)!=null},getAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);return t&&t.value||""},setAttributeNS:function(n,e,t){var i=this.ownerDocument.createAttributeNS(n,e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},getAttributeNodeNS:function(n,e){return this.attributes.getNamedItemNS(n,e)},getElementsByTagName:function(n){return new Xr(this,function(e){var t=[];return go(e,function(i){i!==e&&i.nodeType==Qi&&(n==="*"||i.tagName==n)&&t.push(i)}),t})},getElementsByTagNameNS:function(n,e){return new Xr(this,function(t){var i=[];return go(t,function(s){s!==t&&s.nodeType===Qi&&(n==="*"||s.namespaceURI===n)&&(e==="*"||s.localName==e)&&i.push(s)}),i})}};Do.prototype.getElementsByTagName=nr.prototype.getElementsByTagName;Do.prototype.getElementsByTagNameNS=nr.prototype.getElementsByTagNameNS;gi(nr,He);function Hl(){}Hl.prototype.nodeType=Wr;gi(Hl,He);function ko(){}ko.prototype={data:"",substringData:function(n,e){return this.data.substring(n,n+e)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,e){this.replaceData(n,0,e)},appendChild:function(n){throw new Error(Mt[ri])},deleteData:function(n,e){this.replaceData(n,e,"")},replaceData:function(n,e,t){var i=this.data.substring(0,n),s=this.data.substring(n+e);t=i+t+s,this.nodeValue=this.data=t,this.length=t.length}};gi(ko,He);function Mh(){}Mh.prototype={nodeName:"#text",nodeType:Ul,splitText:function(n){var e=this.data,t=e.substring(n);e=e.substring(0,n),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};gi(Mh,ko);function Bh(){}Bh.prototype={nodeName:"#comment",nodeType:t1};gi(Bh,ko);function Nh(){}Nh.prototype={nodeName:"#cdata-section",nodeType:Q_};gi(Nh,ko);function Tu(){}Tu.prototype.nodeType=n1;gi(Tu,He);function d1(){}d1.prototype.nodeType=x8;gi(d1,He);function h1(){}h1.prototype.nodeType=T8;gi(h1,He);function Fh(){}Fh.prototype.nodeType=J_;gi(Fh,He);function xu(){}xu.prototype.nodeName="#document-fragment";xu.prototype.nodeType=Yn;gi(xu,He);function Uh(){}Uh.prototype.nodeType=e1;gi(Uh,He);function f1(){}f1.prototype.serializeToString=function(n,e,t){return p1.call(n,e,t)};He.prototype.toString=p1;function p1(n,e){var t=[],i=this.nodeType==9&&this.documentElement||this,s=i.prefix,r=i.namespaceURI;if(r&&s==null){var s=i.lookupPrefix(r);if(s==null)var a=[{namespace:r,prefix:null}]}return Cr(this,t,n,e,a),t.join("")}function Pm(n,e,t){var i=n.prefix||"",s=n.namespaceURI;if(!s||i==="xml"&&s===mo.XML||s===mo.XMLNS)return!1;for(var r=t.length;r--;){var a=t[r];if(a.prefix===i)return a.namespace!==s}return!0}function Ic(n,e,t){n.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,o1),'"')}function Cr(n,e,t,i,s){if(s||(s=[]),i)if(n=i(n),n){if(typeof n=="string"){e.push(n);return}}else return;switch(n.nodeType){case Qi:var r=n.attributes,a=r.length,S=n.firstChild,o=n.tagName;t=mo.isHTML(n.namespaceURI)||t;var l=o;if(!t&&!n.prefix&&n.namespaceURI){for(var u,c=0;c<r.length;c++)if(r.item(c).name==="xmlns"){u=r.item(c).value;break}if(!u)for(var h=s.length-1;h>=0;h--){var m=s[h];if(m.prefix===""&&m.namespace===n.namespaceURI){u=m.namespace;break}}if(u!==n.namespaceURI)for(var h=s.length-1;h>=0;h--){var m=s[h];if(m.namespace===n.namespaceURI){m.prefix&&(l=m.prefix+":"+o);break}}}e.push("<",l);for(var y=0;y<a;y++){var _=r.item(y);_.prefix=="xmlns"?s.push({prefix:_.localName,namespace:_.value}):_.nodeName=="xmlns"&&s.push({prefix:"",namespace:_.value})}for(var y=0;y<a;y++){var _=r.item(y);if(Pm(_,t,s)){var b=_.prefix||"",x=_.namespaceURI;Ic(e,b?"xmlns:"+b:"xmlns",x),s.push({prefix:b,namespace:x})}Cr(_,e,t,i,s)}if(o===l&&Pm(n,t,s)){var b=n.prefix||"",x=n.namespaceURI;Ic(e,b?"xmlns:"+b:"xmlns",x),s.push({prefix:b,namespace:x})}if(S||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;S;)S.data?e.push(S.data):Cr(S,e,t,i,s.slice()),S=S.nextSibling;else for(;S;)Cr(S,e,t,i,s.slice()),S=S.nextSibling;e.push("</",l,">")}else e.push("/>");return;case i1:case Yn:for(var S=n.firstChild;S;)Cr(S,e,t,i,s.slice()),S=S.nextSibling;return;case Wr:return Ic(e,n.name,n.value);case Ul:return e.push(n.data.replace(/[<&>]/g,o1));case Q_:return e.push("<![CDATA[",n.data,"]]>");case t1:return e.push("<!--",n.data,"-->");case n1:var w=n.publicId,A=n.systemId;if(e.push("<!DOCTYPE ",n.name),w)e.push(" PUBLIC ",w),A&&A!="."&&e.push(" ",A),e.push(">");else if(A&&A!=".")e.push(" SYSTEM ",A,">");else{var k=n.internalSubset;k&&e.push(" [",k,"]"),e.push(">")}return;case e1:return e.push("<?",n.target," ",n.data,"?>");case J_:return e.push("&",n.nodeName,";");default:e.push("??",n.nodeName)}}function m1(n,e,t){var i;switch(e.nodeType){case Qi:i=e.cloneNode(!1),i.ownerDocument=n;case Yn:break;case Wr:t=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=n,i.parentNode=null,t)for(var s=e.firstChild;s;)i.appendChild(m1(n,s,t)),s=s.nextSibling;return i}function xd(n,e,t){var i=new e.constructor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=e[s];typeof r!="object"&&r!=i[s]&&(i[s]=r)}switch(e.childNodes&&(i.childNodes=new Vn),i.ownerDocument=n,i.nodeType){case Qi:var a=e.attributes,o=i.attributes=new jl,l=a.length;o._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(xd(n,a.item(u),!0));break;case Wr:t=!0}if(t)for(var c=e.firstChild;c;)i.appendChild(xd(n,c,t)),c=c.nextSibling;return i}function g1(n,e,t){n[e]=t}try{if(Object.defineProperty){let n=function(e){switch(e.nodeType){case Qi:case Yn:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(n(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(Xr.prototype,"length",{get:function(){return Lh(this),this.$$length}}),Object.defineProperty(He.prototype,"textContent",{get:function(){return n(this)},set:function(e){switch(this.nodeType){case Qi:case Yn:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),g1=function(e,t,i){e["$$"+t]=i}}}catch{}xs.DocumentType=Tu;xs.DOMException=yt;xs.DOMImplementation=a1;xs.Element=nr;xs.Node=He;xs.NodeList=Vn;xs.XMLSerializer=f1;var wu={},_1={};(function(n){var e=Jn.freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(_1);var jh={},_o=Jn.NAMESPACE,wd=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Lm=new RegExp("[\\-\\.0-9"+wd.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Om=new RegExp("^"+wd.source+Lm.source+"*(?::"+wd.source+Lm.source+"*)?$"),Da=0,ns=1,gr=2,ka=3,_r=4,yr=5,Ia=6,ll=7;function Yr(n,e){this.message=n,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Yr)}Yr.prototype=new Error;Yr.prototype.name=Yr.name;function y1(){}y1.prototype={parse:function(n,e,t){var i=this.domBuilder;i.startDocument(),v1(e,e={}),k8(n,e,t,i,this.errorHandler),i.endDocument()}};function k8(n,e,t,i,s){function r(ue){if(ue>65535){ue-=65536;var he=55296+(ue>>10),pe=56320+(ue&1023);return String.fromCharCode(he,pe)}else return String.fromCharCode(ue)}function a(ue){var he=ue.slice(1,-1);return Object.hasOwnProperty.call(t,he)?t[he]:he.charAt(0)==="#"?r(parseInt(he.substr(1).replace("x","0x"))):(s.error("entity not found:"+ue),ue)}function o(ue){if(ue>b){var he=n.substring(b,ue).replace(/&#?\w+;/g,a);m&&l(b),i.characters(he,0,ue-b),b=ue}}function l(ue,he){for(;ue>=c&&(he=h.exec(n));)u=he.index,c=u+he[0].length,m.lineNumber++;m.columnNumber=ue-u+1}for(var u=0,c=0,h=/.*(?:\r\n?|\n)|.*$/g,m=i.locator,y=[{currentNSMap:e}],_={},b=0;;){try{var x=n.indexOf("<",b);if(x<0){if(!n.substr(b).match(/^\s*$/)){var S=i.doc,w=S.createTextNode(n.substr(b));S.appendChild(w),i.currentElement=w}return}switch(x>b&&o(x),n.charAt(x+1)){case"/":var ee=n.indexOf(">",x+3),A=n.substring(x+2,ee).replace(/[ \t\n\r]+$/g,""),k=y.pop();ee<0?(A=n.substring(x+2).replace(/[\s<].*/,""),s.error("end tag name: "+A+" is not complete:"+k.tagName),ee=x+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),s.error("end tag name: "+A+" maybe not complete"),ee=x+1+A.length);var C=k.localNSMap,R=k.tagName==A,N=R||k.tagName&&k.tagName.toLowerCase()==A.toLowerCase();if(N){if(i.endElement(k.uri,k.localName,A),C)for(var H in C)Object.prototype.hasOwnProperty.call(C,H)&&i.endPrefixMapping(H);R||s.fatalError("end tag name: "+A+" is not match the current start tagName:"+k.tagName)}else y.push(k);ee++;break;case"?":m&&l(x),ee=R8(n,x,i);break;case"!":m&&l(x),ee=O8(n,x,i,s);break;default:m&&l(x);var M=new b1,ie=y[y.length-1].currentNSMap,ee=I8(n,x,M,ie,a,s),K=M.length;if(!M.closed&&L8(n,ee,M.tagName,_)&&(M.closed=!0,t.nbsp||s.warning("unclosed xml attribute")),m&&K){for(var q=Rm(m,{}),J=0;J<K;J++){var be=M[J];l(be.offset),be.locator=Rm(m,{})}i.locator=q,Mm(M,i,ie)&&y.push(M),i.locator=m}else Mm(M,i,ie)&&y.push(M);_o.isHTML(M.uri)&&!M.closed?ee=P8(n,ee,M.tagName,a,i):ee++}}catch(ue){if(ue instanceof Yr)throw ue;s.error("element parse error: "+ue),ee=-1}ee>b?b=ee:o(Math.max(x,b)+1)}}function Rm(n,e){return e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber,e}function I8(n,e,t,i,s,r){function a(m,y,_){t.attributeNames.hasOwnProperty(m)&&r.fatalError("Attribute "+m+" redefined"),t.addValue(m,y.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),_)}for(var o,l,u=++e,c=Da;;){var h=n.charAt(u);switch(h){case"=":if(c===ns)o=n.slice(e,u),c=ka;else if(c===gr)c=ka;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===ka||c===ns)if(c===ns&&(r.warning('attribute value must after "="'),o=n.slice(e,u)),e=u+1,u=n.indexOf(h,e),u>0)l=n.slice(e,u),a(o,l,e-1),c=yr;else throw new Error("attribute value no end '"+h+"' match");else if(c==_r)l=n.slice(e,u),a(o,l,e),r.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=u+1,c=yr;else throw new Error('attribute value must after "="');break;case"/":switch(c){case Da:t.setTagName(n.slice(e,u));case yr:case Ia:case ll:c=ll,t.closed=!0;case _r:case ns:break;case gr:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return r.error("unexpected end of input"),c==Da&&t.setTagName(n.slice(e,u)),u;case">":switch(c){case Da:t.setTagName(n.slice(e,u));case yr:case Ia:case ll:break;case _r:case ns:l=n.slice(e,u),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case gr:c===gr&&(l=o),c==_r?(r.warning('attribute "'+l+'" missed quot(")!'),a(o,l,e)):((!_o.isHTML(i[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&r.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case ka:throw new Error("attribute value missed!!")}return u;case"":h=" ";default:if(h<=" ")switch(c){case Da:t.setTagName(n.slice(e,u)),c=Ia;break;case ns:o=n.slice(e,u),c=gr;break;case _r:var l=n.slice(e,u);r.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case yr:c=Ia;break}else switch(c){case gr:t.tagName,(!_o.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&r.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=u,c=ns;break;case yr:r.warning('attribute space is required"'+o+'"!!');case Ia:c=ns,e=u;break;case ka:c=_r,e=u;break;case ll:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function Mm(n,e,t){for(var i=n.tagName,s=null,h=n.length;h--;){var r=n[h],a=r.qName,o=r.value,m=a.indexOf(":");if(m>0)var l=r.prefix=a.slice(0,m),u=a.slice(m+1),c=l==="xmlns"&&u;else u=a,l=null,c=a==="xmlns"&&"";r.localName=u,c!==!1&&(s==null&&(s={},v1(t,t={})),t[c]=s[c]=o,r.uri=_o.XMLNS,e.startPrefixMapping(c,o))}for(var h=n.length;h--;){r=n[h];var l=r.prefix;l&&(l==="xml"&&(r.uri=_o.XML),l!=="xmlns"&&(r.uri=t[l||""]))}var m=i.indexOf(":");m>0?(l=n.prefix=i.slice(0,m),u=n.localName=i.slice(m+1)):(l=null,u=n.localName=i);var y=n.uri=t[l||""];if(e.startElement(y,u,i,n),n.closed){if(e.endElement(y,u,i),s)for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&e.endPrefixMapping(l)}else return n.currentNSMap=t,n.localNSMap=s,!0}function P8(n,e,t,i,s){if(/^(?:script|textarea)$/i.test(t)){var r=n.indexOf("</"+t+">",e),a=n.substring(e+1,r);if(/[&<]/.test(a))return/^script$/i.test(t)?(s.characters(a,0,a.length),r):(a=a.replace(/&#?\w+;/g,i),s.characters(a,0,a.length),r)}return e+1}function L8(n,e,t,i){var s=i[t];return s==null&&(s=n.lastIndexOf("</"+t+">"),s<e&&(s=n.lastIndexOf("</"+t)),i[t]=s),s<e}function v1(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function O8(n,e,t,i){var s=n.charAt(e+2);switch(s){case"-":if(n.charAt(e+3)==="-"){var r=n.indexOf("-->",e+4);return r>e?(t.comment(n,e+4,r-e-4),r+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(e+3,6)=="CDATA["){var r=n.indexOf("]]>",e+9);return t.startCDATA(),t.characters(n,e+9,r-e-9),t.endCDATA(),r+3}var a=M8(n,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],u=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var h=a[o-1];return t.startDTD(l,u,c),t.endDTD(),h.index+h[0].length}}return-1}function R8(n,e,t){var i=n.indexOf("?>",e);if(i){var s=n.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return s?(s[0].length,t.processingInstruction(s[1],s[2]),i+2):-1}return-1}function b1(){this.attributeNames={}}b1.prototype={setTagName:function(n){if(!Om.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,e,t){if(!Om.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:e,offset:t}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function M8(n,e){var t,i=[],s=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(s.lastIndex=e,s.exec(n);t=s.exec(n);)if(i.push(t),t[1])return i}jh.XMLReader=y1;jh.ParseError=Yr;var B8=Jn,N8=xs,Bm=_1,T1=jh,F8=N8.DOMImplementation,Nm=B8.NAMESPACE,U8=T1.ParseError,j8=T1.XMLReader;function x1(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function w1(n){this.options=n||{locator:{}}}w1.prototype.parseFromString=function(n,e){var t=this.options,i=new j8,s=t.domBuilder||new Io,r=t.errorHandler,a=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),u=l?Bm.HTML_ENTITIES:Bm.XML_ENTITIES;a&&s.setDocumentLocator(a),i.errorHandler=$8(r,s,a),i.domBuilder=t.domBuilder||s,l&&(o[""]=Nm.HTML),o.xml=o.xml||Nm.XML;var c=t.normalizeLineEndings||x1;return n&&typeof n=="string"?i.parse(c(n),o,u):i.errorHandler.error("invalid doc source"),s.doc};function $8(n,e,t){if(!n){if(e instanceof Io)return e;n=e}var i={},s=n instanceof Function;t=t||{};function r(a){var o=n[a];!o&&s&&(o=n.length==2?function(l){n(a,l)}:n),i[a]=o&&function(l){o("[xmldom "+a+"]	"+l+Sd(t))}||function(){}}return r("warning"),r("error"),r("fatalError"),i}function Io(){this.cdata=!1}function vr(n,e){e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber}Io.prototype={startDocument:function(){this.doc=new F8().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,e,t,i){var s=this.doc,r=s.createElementNS(n,t||e),a=i.length;ul(this,r),this.currentElement=r,this.locator&&vr(this.locator,r);for(var o=0;o<a;o++){var n=i.getURI(o),l=i.getValue(o),t=i.getQName(o),u=s.createAttributeNS(n,t);this.locator&&vr(i.getLocator(o),u),u.value=u.nodeValue=l,r.setAttributeNode(u)}},endElement:function(n,e,t){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(n,e){},endPrefixMapping:function(n){},processingInstruction:function(n,e){var t=this.doc.createProcessingInstruction(n,e);this.locator&&vr(this.locator,t),ul(this,t)},ignorableWhitespace:function(n,e,t){},characters:function(n,e,t){if(n=Fm.apply(this,arguments),n){if(this.cdata)var i=this.doc.createCDATASection(n);else var i=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(n)&&this.doc.appendChild(i),this.locator&&vr(this.locator,i)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,e,t){n=Fm.apply(this,arguments);var i=this.doc.createComment(n);this.locator&&vr(this.locator,i),ul(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,e,t){var i=this.doc.implementation;if(i&&i.createDocumentType){var s=i.createDocumentType(n,e,t);this.locator&&vr(this.locator,s),ul(this,s),this.doc.doctype=s}},warning:function(n){console.warn("[xmldom warning]	"+n,Sd(this.locator))},error:function(n){console.error("[xmldom error]	"+n,Sd(this.locator))},fatalError:function(n){throw new U8(n,this.locator)}};function Sd(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function Fm(n,e,t){return typeof n=="string"?n.substr(e,t):n.length>=e+t||e?new java.lang.String(n,e,t)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){Io.prototype[n]=function(){return null}});function ul(n,e){n.currentElement?n.currentElement.appendChild(e):n.doc.appendChild(e)}wu.__DOMHandler=Io;wu.normalizeLineEndings=x1;wu.DOMParser=w1;var H8=wu.DOMParser;/*! @name mpd-parser @version 1.3.0 @license Apache-2.0 */const Um=n=>!!n&&typeof n=="object",Pt=(...n)=>n.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):Um(e[i])&&Um(t[i])?e[i]=Pt(e[i],t[i]):e[i]=t[i]}),e),{}),S1=n=>Object.keys(n).map(e=>n[e]),z8=(n,e)=>{const t=[];for(let i=n;i<e;i++)t.push(i);return t},Kr=n=>n.reduce((e,t)=>e.concat(t),[]),C1=n=>{if(!n.length)return[];const e=[];for(let t=0;t<n.length;t++)e.push(n[t]);return e},V8=(n,e)=>n.reduce((t,i,s)=>(i[e]&&t.push(s),t),[]),q8=(n,e)=>S1(n.reduce((t,i)=>(i.forEach(s=>{t[e(s)]=s}),t),{}));var Zr={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const yo=({baseUrl:n="",source:e="",range:t="",indexRange:i=""})=>{const s={uri:e,resolvedUri:bu(n||"",e)};if(t||i){const a=(t||i).split("-");let o=P.BigInt?P.BigInt(a[0]):parseInt(a[0],10),l=P.BigInt?P.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=P.BigInt(l)-P.BigInt(o)+P.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),s.byterange={length:u,offset:o}}return s},G8=n=>{let e;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=P.BigInt(n.offset)+P.BigInt(n.length)-P.BigInt(1):e=n.offset+n.length-1,`${n.offset}-${e}`},jm=n=>(n&&typeof n!="number"&&(n=parseInt(n,10)),isNaN(n)?null:n),W8={static(n){const{duration:e,timescale:t=1,sourceDuration:i,periodDuration:s}=n,r=jm(n.endNumber),a=e/t;return typeof r=="number"?{start:0,end:r}:typeof s=="number"?{start:0,end:s/a}:{start:0,end:i/a}},dynamic(n){const{NOW:e,clientOffset:t,availabilityStartTime:i,timescale:s=1,duration:r,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=n,u=jm(n.endNumber),c=(e+t)/1e3,h=i+a,y=c+o-h,_=Math.ceil(y*s/r),b=Math.floor((c-h-l)*s/r),x=Math.floor((c-h)*s/r);return{start:Math.max(0,b),end:typeof u=="number"?u:Math.min(_,x)}}},X8=n=>e=>{const{duration:t,timescale:i=1,periodStart:s,startNumber:r=1}=n;return{number:r+e,duration:t/i,timeline:s,time:e*t}},$h=n=>{const{type:e,duration:t,timescale:i=1,periodDuration:s,sourceDuration:r}=n,{start:a,end:o}=W8[e](n),l=z8(a,o).map(X8(n));if(e==="static"){const u=l.length-1,c=typeof s=="number"?s:r;l[u].duration=c-t/i*u}return l},E1=n=>{const{baseUrl:e,initialization:t={},sourceDuration:i,indexRange:s="",periodStart:r,presentationTime:a,number:o=0,duration:l}=n;if(!e)throw new Error(Zr.NO_BASE_URL);const u=yo({baseUrl:e,source:t.sourceURL,range:t.range}),c=yo({baseUrl:e,source:e,indexRange:s});if(c.map=u,l){const h=$h(n);h.length&&(c.duration=h[0].duration,c.timeline=h[0].timeline)}else i&&(c.duration=i,c.timeline=r);return c.presentationTime=a||r,c.number=o,[c]},Hh=(n,e,t)=>{const i=n.sidx.map?n.sidx.map:null,s=n.sidx.duration,r=n.timeline||0,a=n.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(x=>x.referenceType!==1),c=[],h=n.endList?"static":"dynamic",m=n.sidx.timeline;let y=m,_=n.mediaSequence||0,b;typeof e.firstOffset=="bigint"?b=P.BigInt(o)+e.firstOffset:b=o+e.firstOffset;for(let x=0;x<u.length;x++){const S=e.references[x],w=S.referencedSize,A=S.subsegmentDuration;let k;typeof b=="bigint"?k=b+P.BigInt(w)-P.BigInt(1):k=b+w-1;const C=`${b}-${k}`,N=E1({baseUrl:t,timescale:l,timeline:r,periodStart:m,presentationTime:y,number:_,duration:A,sourceDuration:s,indexRange:C,type:h})[0];i&&(N.map=i),c.push(N),typeof b=="bigint"?b+=P.BigInt(w):b+=w,y+=A/l,_++}return n.segments=c,n},Y8=["AUDIO","SUBTITLES"],K8=1/60,A1=n=>q8(n,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),Z8=(n,e)=>{for(let t=0;t<n.length;t++)if(n[t].attributes.NAME===e)return n[t];return null},$m=n=>{let e=[];return h8(n,Y8,(t,i,s,r)=>{e=e.concat(t.playlists||[])}),e},Hm=({playlist:n,mediaSequence:e})=>{n.mediaSequence=e,n.segments.forEach((t,i)=>{t.number=n.mediaSequence+i})},Q8=({oldPlaylists:n,newPlaylists:e,timelineStarts:t})=>{e.forEach(i=>{i.discontinuitySequence=t.findIndex(function({timeline:l}){return l===i.timeline});const s=Z8(n,i.attributes.NAME);if(!s||i.sidx)return;const r=i.segments[0],a=s.segments.findIndex(function(l){return Math.abs(l.presentationTime-r.presentationTime)<K8});if(a===-1){Hm({playlist:i,mediaSequence:s.mediaSequence+s.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!s.segments.length&&i.timeline>s.timeline||s.segments.length&&i.timeline>s.segments[s.segments.length-1].timeline)&&i.discontinuitySequence--;return}s.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Hm({playlist:i,mediaSequence:s.segments[a].number})})},J8=({oldManifest:n,newManifest:e})=>{const t=n.playlists.concat($m(n)),i=e.playlists.concat($m(e));return e.timelineStarts=A1([n.timelineStarts,e.timelineStarts]),Q8({oldPlaylists:t,newPlaylists:i,timelineStarts:e.timelineStarts}),e},Su=n=>n&&n.uri+"-"+G8(n.byterange),Pc=n=>{const e=n.reduce(function(i,s){return i[s.attributes.baseUrl]||(i[s.attributes.baseUrl]=[]),i[s.attributes.baseUrl].push(s),i},{});let t=[];return Object.values(e).forEach(i=>{const s=S1(i.reduce((r,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return r[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),r[o].segments.push(...a.segments)),a.attributes.contentProtection&&(r[o].attributes.contentProtection=a.attributes.contentProtection)):(r[o]=a,r[o].attributes.timelineStarts=[]),r[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),r},{}));t=t.concat(s)}),t.map(i=>(i.discontinuityStarts=V8(i.segments||[],"discontinuity"),i))},zh=(n,e)=>{const t=Su(n.sidx),i=t&&e[t]&&e[t].sidx;return i&&Hh(n,i,n.sidx.resolvedUri),n},eA=(n,e={})=>{if(!Object.keys(e).length)return n;for(const t in n)n[t]=zh(n[t],e);return n},tA=({attributes:n,segments:e,sidx:t,mediaSequence:i,discontinuitySequence:s,discontinuityStarts:r},a)=>{const o={attributes:{NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuitySequence:s,discontinuityStarts:r,timelineStarts:n.timelineStarts,mediaSequence:i,segments:e};return n.contentProtection&&(o.contentProtection=n.contentProtection),n.serviceLocation&&(o.attributes.serviceLocation=n.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},iA=({attributes:n,segments:e,mediaSequence:t,discontinuityStarts:i,discontinuitySequence:s})=>{typeof e>"u"&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);const r={NAME:n.id,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1};n.codecs&&(r.CODECS=n.codecs);const a={attributes:r,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:i,discontinuitySequence:s,mediaSequence:t,segments:e};return n.serviceLocation&&(a.attributes.serviceLocation=n.serviceLocation),a},nA=(n,e={},t=!1)=>{let i;const s=n.reduce((r,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const h=o?` (${o})`:"";u=`${a.attributes.lang}${h}`}r[u]||(r[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=zh(tA(a,t),e);return r[u].playlists.push(c),typeof i>"u"&&o==="main"&&(i=a,i.default=!0),r},{});if(!i){const r=Object.keys(s)[0];s[r].default=!0}return s},sA=(n,e={})=>n.reduce((t,i)=>{const s=i.attributes.label||i.attributes.lang||"text";return t[s]||(t[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),t[s].playlists.push(zh(iA(i),e)),t},{}),rA=n=>n.reduce((e,t)=>(t&&t.forEach(i=>{const{channel:s,language:r}=i;e[r]={autoselect:!1,default:!1,instreamId:s,language:r},i.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[r].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[r]["3D"]=i["3D"])}),e),{}),aA=({attributes:n,segments:e,sidx:t,discontinuityStarts:i})=>{const s={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuityStarts:i,timelineStarts:n.timelineStarts,segments:e};return n.frameRate&&(s.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(s.contentProtection=n.contentProtection),n.serviceLocation&&(s.attributes.serviceLocation=n.serviceLocation),t&&(s.sidx=t),s},oA=({attributes:n})=>n.mimeType==="video/mp4"||n.mimeType==="video/webm"||n.contentType==="video",lA=({attributes:n})=>n.mimeType==="audio/mp4"||n.mimeType==="audio/webm"||n.contentType==="audio",uA=({attributes:n})=>n.mimeType==="text/vtt"||n.contentType==="text",cA=(n,e)=>{n.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:i}){return i===t.timeline}),t.segments&&t.segments.forEach((i,s)=>{i.number=s})})},zm=n=>n?Object.keys(n).reduce((e,t)=>{const i=n[t];return e.concat(i.playlists)},[]):[],dA=({dashPlaylists:n,locations:e,contentSteering:t,sidxMapping:i={},previousManifest:s,eventStream:r})=>{if(!n.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=n[0].attributes,c=Pc(n.filter(oA)).map(aA),h=Pc(n.filter(lA)),m=Pc(n.filter(uA)),y=n.map(k=>k.attributes.captionServices).filter(Boolean),_={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:eA(c,i)};u>=0&&(_.minimumUpdatePeriod=u*1e3),e&&(_.locations=e),t&&(_.contentSteering=t),o==="dynamic"&&(_.suggestedPresentationDelay=l),r&&r.length>0&&(_.eventStream=r);const b=_.playlists.length===0,x=h.length?nA(h,i,b):null,S=m.length?sA(m,i):null,w=c.concat(zm(x),zm(S)),A=w.map(({timelineStarts:k})=>k);return _.timelineStarts=A1(A),cA(w,_.timelineStarts),x&&(_.mediaGroups.AUDIO.audio=x),S&&(_.mediaGroups.SUBTITLES.subs=S),y.length&&(_.mediaGroups["CLOSED-CAPTIONS"].cc=rA(y)),s?J8({oldManifest:s,newManifest:_}):_},hA=(n,e,t)=>{const{NOW:i,clientOffset:s,availabilityStartTime:r,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=n,u=(i+s)/1e3,c=r+o,m=u+l-c;return Math.ceil((m*a-e)/t)},D1=(n,e)=>{const{type:t,minimumUpdatePeriod:i=0,media:s="",sourceDuration:r,timescale:a=1,startNumber:o=1,periodStart:l}=n,u=[];let c=-1;for(let h=0;h<e.length;h++){const m=e[h],y=m.d,_=m.r||0,b=m.t||0;c<0&&(c=b),b&&b>c&&(c=b);let x;if(_<0){const A=h+1;A===e.length?t==="dynamic"&&i>0&&s.indexOf("$Number$")>0?x=hA(n,c,y):x=(r*a-c)/y:x=(e[A].t-c)/y}else x=_+1;const S=o+u.length+x;let w=o+u.length;for(;w<S;)u.push({number:w,duration:y/a,time:c,timeline:l}),c+=y,w++}return u},fA=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,pA=n=>(e,t,i,s)=>{if(e==="$$")return"$";if(typeof n[t]>"u")return e;const r=""+n[t];return t==="RepresentationID"||(i?s=parseInt(s,10):s=1,r.length>=s)?r:`${new Array(s-r.length+1).join("0")}${r}`},Vm=(n,e)=>n.replace(fA,pA(e)),mA=(n,e)=>!n.duration&&!e?[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodStart}]:n.duration?$h(n):D1(n,e),gA=(n,e)=>{const t={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=n,s=yo({baseUrl:n.baseUrl,source:Vm(i.sourceURL,t),range:i.range});return mA(n,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=Vm(n.media||"",t),l=n.timescale||1,u=n.presentationTimeOffset||0,c=n.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:bu(n.baseUrl||"",o),map:s,number:a.number,presentationTime:c}})},_A=(n,e)=>{const{baseUrl:t,initialization:i={}}=n,s=yo({baseUrl:t,source:i.sourceURL,range:i.range}),r=yo({baseUrl:t,source:e.media,range:e.mediaRange});return r.map=s,r},yA=(n,e)=>{const{duration:t,segmentUrls:i=[],periodStart:s}=n;if(!t&&!e||t&&e)throw new Error(Zr.SEGMENT_TIME_UNSPECIFIED);const r=i.map(l=>_A(n,l));let a;return t&&(a=$h(n)),e&&(a=D1(n,e)),a.map((l,u)=>{if(r[u]){const c=r[u],h=n.timescale||1,m=n.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=s+(l.time-m)/h,c}}).filter(l=>l)},vA=({attributes:n,segmentInfo:e})=>{let t,i;e.template?(i=gA,t=Pt(n,e.template)):e.base?(i=E1,t=Pt(n,e.base)):e.list&&(i=yA,t=Pt(n,e.list));const s={attributes:n};if(!i)return s;const r=i(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else r.length?t.duration=r.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return s.attributes=t,s.segments=r,e.base&&t.indexRange&&(s.sidx=r[0],s.segments=[]),s},bA=n=>n.map(vA),st=(n,e)=>C1(n.childNodes).filter(({tagName:t})=>t===e),Po=n=>n.textContent.trim(),TA=n=>parseFloat(n.split("/").reduce((e,t)=>e/t)),br=n=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!o)return 0;const[l,u,c,h,m,y]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(h||0)*3600+parseFloat(m||0)*60+parseFloat(y||0)},xA=n=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)),qm={mediaPresentationDuration(n){return br(n)},availabilityStartTime(n){return xA(n)/1e3},minimumUpdatePeriod(n){return br(n)},suggestedPresentationDelay(n){return br(n)},type(n){return n},timeShiftBufferDepth(n){return br(n)},start(n){return br(n)},width(n){return parseInt(n,10)},height(n){return parseInt(n,10)},bandwidth(n){return parseInt(n,10)},frameRate(n){return TA(n)},startNumber(n){return parseInt(n,10)},timescale(n){return parseInt(n,10)},presentationTimeOffset(n){return parseInt(n,10)},duration(n){const e=parseInt(n,10);return isNaN(e)?br(n):e},d(n){return parseInt(n,10)},t(n){return parseInt(n,10)},r(n){return parseInt(n,10)},presentationTime(n){return parseInt(n,10)},DEFAULT(n){return n}},Tt=n=>n&&n.attributes?C1(n.attributes).reduce((e,t)=>{const i=qm[t.name]||qm.DEFAULT;return e[t.name]=i(t.value),e},{}):{},wA={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Cu=(n,e)=>e.length?Kr(n.map(function(t){return e.map(function(i){const s=Po(i),r=bu(t.baseUrl,s),a=Pt(Tt(i),{baseUrl:r});return r!==s&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):n,Vh=n=>{const e=st(n,"SegmentTemplate")[0],t=st(n,"SegmentList")[0],i=t&&st(t,"SegmentURL").map(h=>Pt({tag:"SegmentURL"},Tt(h))),s=st(n,"SegmentBase")[0],r=t||e,a=r&&st(r,"SegmentTimeline")[0],o=t||s||e,l=o&&st(o,"Initialization")[0],u=e&&Tt(e);u&&l?u.initialization=l&&Tt(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&st(a,"S").map(h=>Tt(h)),list:t&&Pt(Tt(t),{segmentUrls:i,initialization:Tt(l)}),base:s&&Pt(Tt(s),{initialization:Tt(l)})};return Object.keys(c).forEach(h=>{c[h]||delete c[h]}),c},SA=(n,e,t)=>i=>{const s=st(i,"BaseURL"),r=Cu(e,s),a=Pt(n,Tt(i)),o=Vh(i);return r.map(l=>({segmentInfo:Pt(t,o),attributes:Pt(a,l)}))},CA=n=>n.reduce((e,t)=>{const i=Tt(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const s=wA[i.schemeIdUri];if(s){e[s]={attributes:i};const r=st(t,"cenc:pssh")[0];if(r){const a=Po(r);e[s].pssh=a&&p8(a)}}return e},{}),EA=n=>{if(n.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{let i,s;return s=t,/^CC\d=/.test(t)?[i,s]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:s}});if(n.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{const i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[s,r=""]=t.split("=");i.channel=s,i.language=t,r.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?i.language=l:o==="er"?i.easyReader=Number(l):o==="war"?i.aspectRatio=Number(l):o==="3D"&&(i["3D"]=Number(l))})}else i.language=t;return i.channel&&(i.channel="SERVICE"+i.channel),i})},AA=n=>Kr(st(n.node,"EventStream").map(e=>{const t=Tt(e),i=t.schemeIdUri;return st(e,"Event").map(s=>{const r=Tt(s),a=r.presentationTime||0,o=t.timescale||1,l=r.duration||0,u=a/o+n.attributes.start;return{schemeIdUri:i,value:t.value,id:r.id,start:u,end:u+l/o,messageData:Po(s)||r.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),DA=(n,e,t)=>i=>{const s=Tt(i),r=Cu(e,st(i,"BaseURL")),a=st(i,"Role")[0],o={role:Tt(a)};let l=Pt(n,s,o);const u=st(i,"Accessibility")[0],c=EA(Tt(u));c&&(l=Pt(l,{captionServices:c}));const h=st(i,"Label")[0];if(h&&h.childNodes.length){const x=h.childNodes[0].nodeValue.trim();l=Pt(l,{label:x})}const m=CA(st(i,"ContentProtection"));Object.keys(m).length&&(l=Pt(l,{contentProtection:m}));const y=Vh(i),_=st(i,"Representation"),b=Pt(t,y);return Kr(_.map(SA(l,r,b)))},kA=(n,e)=>(t,i)=>{const s=Cu(e,st(t.node,"BaseURL")),r=Pt(n,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(r.periodDuration=t.attributes.duration);const a=st(t.node,"AdaptationSet"),o=Vh(t.node);return Kr(a.map(DA(r,s,o)))},IA=(n,e)=>{if(n.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!n.length)return null;const t=Pt({serverURL:Po(n[0])},Tt(n[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},PA=({attributes:n,priorPeriodAttributes:e,mpdType:t})=>typeof n.start=="number"?n.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,LA=(n,e={})=>{const{manifestUri:t="",NOW:i=Date.now(),clientOffset:s=0,eventHandler:r=function(){}}=e,a=st(n,"Period");if(!a.length)throw new Error(Zr.INVALID_NUMBER_OF_PERIOD);const o=st(n,"Location"),l=Tt(n),u=Cu([{baseUrl:t}],st(n,"BaseURL")),c=st(n,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=s,o.length&&(l.locations=o.map(Po));const h=[];return a.forEach((m,y)=>{const _=Tt(m),b=h[y-1];_.start=PA({attributes:_,priorPeriodAttributes:b?b.attributes:null,mpdType:l.type}),h.push({node:m,attributes:_})}),{locations:l.locations,contentSteeringInfo:IA(c,r),representationInfo:Kr(h.map(kA(l,u))),eventStream:Kr(h.map(AA))}},k1=n=>{if(n==="")throw new Error(Zr.DASH_EMPTY_MANIFEST);const e=new H8;let t,i;try{t=e.parseFromString(n,"application/xml"),i=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Zr.DASH_INVALID_XML);return i},OA=n=>{const e=st(n,"UTCTiming")[0];if(!e)return null;const t=Tt(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Zr.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},RA=(n,e={})=>{const t=LA(k1(n),e),i=bA(t.representationInfo);return dA({dashPlaylists:i,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},MA=n=>OA(k1(n));var I1=Math.pow(2,32),BA=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*I1+e.getUint32(4)},NA={getUint64:BA,MAX_UINT32:I1},Gm=NA.getUint64,FA=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;t.version===0?(t.earliestPresentationTime=e.getUint32(i),t.firstOffset=e.getUint32(i+4),i+=8):(t.earliestPresentationTime=Gm(n.subarray(i)),t.firstOffset=Gm(n.subarray(i+8)),i+=16),i+=2;var s=e.getUint16(i);for(i+=2;s>0;i+=12,s--)t.references.push({referenceType:(n[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(n[i+8]&128),sapType:(n[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return t},UA=FA;const jA=Qn(UA);var $A=de([73,68,51]),HA=function(e,t){t===void 0&&(t=0),e=de(e);var i=e[t+5],s=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=(i&16)>>4;return r?s+20:s+10},za=function n(e,t){return t===void 0&&(t=0),e=de(e),e.length-t<10||!nt(e,$A,{offset:t})?t:(t+=HA(e,t),n(e,t))},Wm=function(e){return typeof e=="string"?X_(e):e},zA=function(e){return Array.isArray(e)?e.map(function(t){return Wm(t)}):[Wm(e)]},VA=function n(e,t,i){i===void 0&&(i=!1),t=zA(t),e=de(e);var s=[];if(!t.length)return s;for(var r=0;r<e.length;){var a=(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0,o=e.subarray(r+4,r+8);if(a===0)break;var l=r+a;if(l>e.length){if(i)break;l=e.length}var u=e.subarray(r+8,l);nt(o,t[0])&&(t.length===1?s.push(u):s.push.apply(s,n(u,t.slice(1),i))),r=l}return s},cl={EBML:de([26,69,223,163]),DocType:de([66,130]),Segment:de([24,83,128,103]),SegmentInfo:de([21,73,169,102]),Tracks:de([22,84,174,107]),Track:de([174]),TrackNumber:de([215]),DefaultDuration:de([35,227,131]),TrackEntry:de([174]),TrackType:de([131]),FlagDefault:de([136]),CodecID:de([134]),CodecPrivate:de([99,162]),VideoTrack:de([224]),AudioTrack:de([225]),Cluster:de([31,67,182,117]),Timestamp:de([231]),TimestampScale:de([42,215,177]),BlockGroup:de([160]),BlockDuration:de([155]),Block:de([161]),SimpleBlock:de([163])},Cd=[128,64,32,16,8,4,2,1],qA=function(e){for(var t=1,i=0;i<Cd.length&&!(e&Cd[i]);i++)t++;return t},zl=function(e,t,i,s){i===void 0&&(i=!0),s===void 0&&(s=!1);var r=qA(e[t]),a=e.subarray(t,t+r);return i&&(a=Array.prototype.slice.call(e,t,t+r),a[0]^=Cd[r-1]),{length:r,value:u8(a,{signed:s}),bytes:a}},Xm=function n(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return n(t)}):typeof e=="number"?c8(e):e},GA=function(e){return Array.isArray(e)?e.map(function(t){return Xm(t)}):[Xm(e)]},WA=function n(e,t,i){if(i>=t.length)return t.length;var s=zl(t,i,!1);if(nt(e.bytes,s.bytes))return i;var r=zl(t,i+s.length);return n(e,t,i+r.length+r.value+s.length)},Ym=function n(e,t){t=GA(t),e=de(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var r=zl(e,s,!1),a=zl(e,s+r.length),o=s+r.length+a.length;a.value===127&&(a.value=WA(r,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);nt(t[0],r.bytes)&&(t.length===1?i.push(u):i=i.concat(n(u,t.slice(1))));var c=r.length+a.length+u.length;s+=c}return i},XA=de([0,0,0,1]),YA=de([0,0,1]),KA=de([0,0,3]),ZA=function(e){for(var t=[],i=1;i<e.length-2;)nt(e.subarray(i,i+3),KA)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var s=e.length-t.length,r=new Uint8Array(s),a=0;for(i=0;i<s;a++,i++)a===t[0]&&(a++,t.shift()),r[i]=e[a];return r},P1=function(e,t,i,s){s===void 0&&(s=1/0),e=de(e),i=[].concat(i);for(var r=0,a,o=0;r<e.length&&(o<s||a);){var l=void 0;if(nt(e.subarray(r),XA)?l=4:nt(e.subarray(r),YA)&&(l=3),!l){r++;continue}if(o++,a)return ZA(e.subarray(a,r));var u=void 0;t==="h264"?u=e[r+l]&31:t==="h265"&&(u=e[r+l]>>1&63),i.indexOf(u)!==-1&&(a=r+l),r+=l+(t==="h264"?1:2)}return e.subarray(0,0)},QA=function(e,t,i){return P1(e,"h264",t,i)},JA=function(e,t,i){return P1(e,"h265",t,i)},Yt={webm:de([119,101,98,109]),matroska:de([109,97,116,114,111,115,107,97]),flac:de([102,76,97,67]),ogg:de([79,103,103,83]),ac3:de([11,119]),riff:de([82,73,70,70]),avi:de([65,86,73]),wav:de([87,65,86,69]),"3gp":de([102,116,121,112,51,103]),mp4:de([102,116,121,112]),fmp4:de([115,116,121,112]),mov:de([102,116,121,112,113,116]),moov:de([109,111,111,118]),moof:de([109,111,111,102])},Qr={aac:function(e){var t=za(e);return nt(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=za(e);return nt(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Ym(e,[cl.EBML,cl.DocType])[0];return nt(t,Yt.webm)},mkv:function(e){var t=Ym(e,[cl.EBML,cl.DocType])[0];return nt(t,Yt.matroska)},mp4:function(e){if(Qr["3gp"](e)||Qr.mov(e))return!1;if(nt(e,Yt.mp4,{offset:4})||nt(e,Yt.fmp4,{offset:4})||nt(e,Yt.moof,{offset:4})||nt(e,Yt.moov,{offset:4}))return!0},mov:function(e){return nt(e,Yt.mov,{offset:4})},"3gp":function(e){return nt(e,Yt["3gp"],{offset:4})},ac3:function(e){var t=za(e);return nt(e,Yt.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=za(e);return nt(e,Yt.flac,{offset:t})},ogg:function(e){return nt(e,Yt.ogg)},avi:function(e){return nt(e,Yt.riff)&&nt(e,Yt.avi,{offset:8})},wav:function(e){return nt(e,Yt.riff)&&nt(e,Yt.wav,{offset:8})},h264:function(e){return QA(e,7,3).length},h265:function(e){return JA(e,[32,33],3).length}},Ed=Object.keys(Qr).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);Ed.forEach(function(n){var e=Qr[n];Qr[n]=function(t){return e(de(t))}});var e6=Qr,qh=function(e){e=de(e);for(var t=0;t<Ed.length;t++){var i=Ed[t];if(e6[i](e))return i}return""},t6=function(e){return VA(e,["moof"]).length>0},Gh=9e4,Wh,Xh,Eu,Yh,L1,O1,R1;Wh=function(n){return n*Gh};Xh=function(n,e){return n*e};Eu=function(n){return n/Gh};Yh=function(n,e){return n/e};L1=function(n,e){return Wh(Yh(n,e))};O1=function(n,e){return Xh(Eu(n),e)};R1=function(n,e,t){return Eu(t?n:n-e)};var Hs={ONE_SECOND_IN_TS:Gh,secondsToVideoTs:Wh,secondsToAudioTs:Xh,videoTsToSeconds:Eu,audioTsToSeconds:Yh,audioTsToVideoTs:L1,videoTsToAudioTs:O1,metadataTsToSeconds:R1};/**
 * @license
 * Video.js 8.10.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var Ad="8.10.0";const Hn={},ys=function(n,e){return Hn[n]=Hn[n]||[],e&&(Hn[n]=Hn[n].concat(e)),Hn[n]},i6=function(n,e){ys(n,e)},M1=function(n,e){const t=ys(n).indexOf(e);return t<=-1?!1:(Hn[n]=Hn[n].slice(),Hn[n].splice(t,1),!0)},n6=function(n,e){ys(n,[].concat(e).map(t=>{const i=(...s)=>(M1(n,i),t(...s));return i}))},Vl={prefixed:!0},wl=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],Km=wl[0];let Va;for(let n=0;n<wl.length;n++)if(wl[n][1]in Q){Va=wl[n];break}if(Va){for(let n=0;n<Va.length;n++)Vl[Km[n]]=Va[n];Vl.prefixed=Va[0]!==Km[0]}let si=[];const s6=(n,e,t)=>(i,s,r)=>{const a=e.levels[s],o=new RegExp(`^(${a})$`);let l=n;if(i!=="log"&&r.unshift(i.toUpperCase()+":"),t&&(l=`%c${n}`,r.unshift(t)),r.unshift(l+":"),si){si.push([].concat(r));const c=si.length-1e3;si.splice(0,c>0?c:0)}if(!P.console)return;let u=P.console[i];!u&&i==="debug"&&(u=P.console.info||P.console.log),!(!u||!a||!o.test(i))&&u[Array.isArray(r)?"apply":"call"](P.console,r)};function Dd(n,e=":",t=""){let i="info",s;const r=function(...a){s("log",i,a)};return s=s6(n,r,t),r.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:t,h=`${n} ${u} ${a}`;return Dd(h,u,c)},r.createNewLogger=(a,o,l)=>Dd(a,o,l),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=a=>{if(typeof a=="string"){if(!r.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);i=a}return i},r.history=()=>si?[].concat(si):[],r.history.filter=a=>(si||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),r.history.clear=()=>{si&&(si.length=0)},r.history.disable=()=>{si!==null&&(si.length=0,si=null)},r.history.enable=()=>{si===null&&(si=[])},r.error=(...a)=>s("error",i,a),r.warn=(...a)=>s("warn",i,a),r.debug=(...a)=>s("debug",i,a),r}const Le=Dd("VIDEOJS"),B1=Le.createLogger,r6=Object.prototype.toString,N1=function(n){return An(n)?Object.keys(n):[]};function Or(n,e){N1(n).forEach(t=>e(n[t],t))}function F1(n,e,t=0){return N1(n).reduce((i,s)=>e(i,n[s],s),t)}function An(n){return!!n&&typeof n=="object"}function Jr(n){return An(n)&&r6.call(n)==="[object Object]"&&n.constructor===Object}function Qe(...n){const e={};return n.forEach(t=>{t&&Or(t,(i,s)=>{if(!Jr(i)){e[s]=i;return}Jr(e[s])||(e[s]={}),e[s]=Qe(e[s],i)})}),e}function U1(n={}){const e=[];for(const t in n)if(n.hasOwnProperty(t)){const i=n[t];e.push(i)}return e}function Au(n,e,t,i=!0){const s=a=>Object.defineProperty(n,e,{value:a,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const a=t();return s(a),a}};return i&&(r.set=s),Object.defineProperty(n,e,r)}var a6=Object.freeze({__proto__:null,each:Or,reduce:F1,isObject:An,isPlain:Jr,merge:Qe,values:U1,defineLazyProperty:Au});let Kh=!1,j1=null,Dn=!1,$1,H1=!1,Rr=!1,Mr=!1,kn=!1,Zh=null,Du=null,z1=null,ql=!1,ku=!1,Gl=!1,Iu=!1;const vo=!!(aa()&&("ontouchstart"in P||P.navigator.maxTouchPoints||P.DocumentTouch&&P.document instanceof P.DocumentTouch)),ss=P.navigator&&P.navigator.userAgentData;ss&&ss.platform&&ss.brands&&(Dn=ss.platform==="Android",Rr=!!ss.brands.find(n=>n.brand==="Microsoft Edge"),Mr=!!ss.brands.find(n=>n.brand==="Chromium"),kn=!Rr&&Mr,Zh=Du=(ss.brands.find(n=>n.brand==="Chromium")||{}).version||null,ku=ss.platform==="Windows");if(!Mr){const n=P.navigator&&P.navigator.userAgent||"";Kh=/iPod/i.test(n),j1=function(){const e=n.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Dn=/Android/i.test(n),$1=function(){const e=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),H1=/Firefox/i.test(n),Rr=/Edg/i.test(n),Mr=/Chrome/i.test(n)||/CriOS/i.test(n),kn=!Rr&&Mr,Zh=Du=function(){const e=n.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),z1=function(){const e=/MSIE\s(\d+)\.\d/.exec(n);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(t=11),t}(),ql=/Safari/i.test(n)&&!kn&&!Dn&&!Rr,ku=/Windows/i.test(n),Gl=/iPad/i.test(n)||ql&&vo&&!/iPhone/i.test(n),Iu=/iPhone/i.test(n)&&!Gl}const ti=Iu||Gl||Kh,Pu=(ql||ti)&&!kn;var o6=Object.freeze({__proto__:null,get IS_IPOD(){return Kh},get IOS_VERSION(){return j1},get IS_ANDROID(){return Dn},get ANDROID_VERSION(){return $1},get IS_FIREFOX(){return H1},get IS_EDGE(){return Rr},get IS_CHROMIUM(){return Mr},get IS_CHROME(){return kn},get CHROMIUM_VERSION(){return Zh},get CHROME_VERSION(){return Du},get IE_VERSION(){return z1},get IS_SAFARI(){return ql},get IS_WINDOWS(){return ku},get IS_IPAD(){return Gl},get IS_IPHONE(){return Iu},TOUCH_ENABLED:vo,IS_IOS:ti,IS_ANY_SAFARI:Pu});function Zm(n){return typeof n=="string"&&!!n.trim()}function l6(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function aa(){return Q===P.document}function oa(n){return An(n)&&n.nodeType===1}function V1(){try{return P.parent!==P.self}catch{return!0}}function q1(n){return function(e,t){if(!Zm(e))return Q[n](null);Zm(t)&&(t=Q.querySelector(t));const i=oa(t)?t:Q;return i[n]&&i[n](e)}}function ke(n="div",e={},t={},i){const s=Q.createElement(n);return Object.getOwnPropertyNames(e).forEach(function(r){const a=e[r];r==="textContent"?ws(s,a):(s[r]!==a||r==="tabIndex")&&(s[r]=a)}),Object.getOwnPropertyNames(t).forEach(function(r){s.setAttribute(r,t[r])}),i&&Qh(s,i),s}function ws(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function kd(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function Qa(n,e){return l6(e),n.classList.contains(e)}function Ks(n,...e){return n.classList.add(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n}function Lu(n,...e){return n?(n.classList.remove(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n):(Le.warn("removeClass was called with an element that doesn't exist"),null)}function G1(n,e,t){return typeof t=="function"&&(t=t(n,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(i=>n.classList.toggle(i,t)),n}function W1(n,e){Object.getOwnPropertyNames(e).forEach(function(t){const i=e[t];i===null||typeof i>"u"||i===!1?n.removeAttribute(t):n.setAttribute(t,i===!0?"":i)})}function os(n){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(n&&n.attributes&&n.attributes.length>0){const i=n.attributes;for(let s=i.length-1;s>=0;s--){const r=i[s].name;let a=i[s].value;t.includes(r)&&(a=a!==null),e[r]=a}}return e}function X1(n,e){return n.getAttribute(e)}function ea(n,e,t){n.setAttribute(e,t)}function Ou(n,e){n.removeAttribute(e)}function Y1(){Q.body.focus(),Q.onselectstart=function(){return!1}}function K1(){Q.onselectstart=function(){return!0}}function ta(n){if(n&&n.getBoundingClientRect&&n.parentNode){const e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(ia(n,"height"))),t.width||(t.width=parseFloat(ia(n,"width"))),t}}function bo(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};const e=n.offsetWidth,t=n.offsetHeight;let i=0,s=0;for(;n.offsetParent&&n!==Q[Vl.fullscreenElement];)i+=n.offsetLeft,s+=n.offsetTop,n=n.offsetParent;return{left:i,top:s,width:e,height:t}}function Ru(n,e){const t={x:0,y:0};if(ti){let c=n;for(;c&&c.nodeName.toLowerCase()!=="html";){const h=ia(c,"transform");if(/^matrix/.test(h)){const m=h.slice(7,-1).split(/,\s/).map(Number);t.x+=m[4],t.y+=m[5]}else if(/^matrix3d/.test(h)){const m=h.slice(9,-1).split(/,\s/).map(Number);t.x+=m[12],t.y+=m[13]}c=c.parentNode}}const i={},s=bo(e.target),r=bo(n),a=r.width,o=r.height;let l=e.offsetY-(r.top-s.top),u=e.offsetX-(r.left-s.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-r.left,l=e.changedTouches[0].pageY+r.top,ti&&(u-=t.x,l-=t.y)),i.y=1-Math.max(0,Math.min(1,l/o)),i.x=Math.max(0,Math.min(1,u/a)),i}function Z1(n){return An(n)&&n.nodeType===3}function Mu(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function Q1(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(e=>{if(typeof e=="function"&&(e=e()),oa(e)||Z1(e))return e;if(typeof e=="string"&&/\S/.test(e))return Q.createTextNode(e)}).filter(e=>e)}function Qh(n,e){return Q1(e).forEach(t=>n.appendChild(t)),n}function J1(n,e){return Qh(Mu(n),e)}function To(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0?!0:!(n.button!==0||n.buttons!==1)}const vs=q1("querySelector"),ey=q1("querySelectorAll");function ia(n,e){if(!n||!e)return"";if(typeof P.getComputedStyle=="function"){let t;try{t=P.getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function ty(n){[...Q.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(s=>s.cssText).join(""),i=Q.createElement("style");i.textContent=t,n.document.head.appendChild(i)}catch{const i=Q.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,n.document.head.appendChild(i)}})}var iy=Object.freeze({__proto__:null,isReal:aa,isEl:oa,isInFrame:V1,createEl:ke,textContent:ws,prependTo:kd,hasClass:Qa,addClass:Ks,removeClass:Lu,toggleClass:G1,setAttributes:W1,getAttributes:os,getAttribute:X1,setAttribute:ea,removeAttribute:Ou,blockTextSelection:Y1,unblockTextSelection:K1,getBoundingClientRect:ta,findPosition:bo,getPointerPosition:Ru,isTextNode:Z1,emptyEl:Mu,normalizeContent:Q1,appendContent:Qh,insertContent:J1,isSingleLeftClick:To,$:vs,$$:ey,computedStyle:ia,copyStyleSheetsToWindow:ty});let ny=!1,Id;const u6=function(){if(Id.options.autoSetup===!1)return;const n=Array.prototype.slice.call(Q.getElementsByTagName("video")),e=Array.prototype.slice.call(Q.getElementsByTagName("audio")),t=Array.prototype.slice.call(Q.getElementsByTagName("video-js")),i=n.concat(e,t);if(i&&i.length>0)for(let s=0,r=i.length;s<r;s++){const a=i[s];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&Id(a);else{Pd(1);break}}else ny||Pd(1)};function Pd(n,e){aa()&&(e&&(Id=e),P.setTimeout(u6,n))}function Ld(){ny=!0,P.removeEventListener("load",Ld)}aa()&&(Q.readyState==="complete"?Ld():P.addEventListener("load",Ld));const sy=function(n){const e=Q.createElement("style");return e.className=n,e},ry=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e};var Jt=new WeakMap;const c6=3;let d6=c6;function nn(){return d6++}function Qm(n,e){if(!Jt.has(n))return;const t=Jt.get(n);t.handlers[e].length===0&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Jt.delete(n)}function Jh(n,e,t,i){t.forEach(function(s){n(e,s,i)})}function Bu(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){const i=n||P.event;n={};for(const s in i)s!=="layerX"&&s!=="layerY"&&s!=="keyLocation"&&s!=="webkitMovementX"&&s!=="webkitMovementY"&&s!=="path"&&(s==="returnValue"&&i.preventDefault||(n[s]=i[s]));if(n.target||(n.target=n.srcElement||Q),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){i.preventDefault&&i.preventDefault(),n.returnValue=!1,i.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),n.cancelBubble=!0,i.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,n.clientX!==null&&n.clientX!==void 0){const s=Q.documentElement,r=Q.body;n.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),n.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n.fixed_=!0,n}let dl;const h6=function(){if(typeof dl!="boolean"){dl=!1;try{const n=Object.defineProperty({},"passive",{get(){dl=!0}});P.addEventListener("test",null,n),P.removeEventListener("test",null,n)}catch{}}return dl},f6=["touchstart","touchmove"];function Ii(n,e,t){if(Array.isArray(e))return Jh(Ii,n,e,t);Jt.has(n)||Jt.set(n,{});const i=Jt.get(n);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=nn()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(s,r){if(i.disabled)return;s=Bu(s);const a=i.handlers[s.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!s.isImmediatePropagationStopped();l++)try{o[l].call(n,s,r)}catch(c){Le.error(c)}}}),i.handlers[e].length===1)if(n.addEventListener){let s=!1;h6()&&f6.indexOf(e)>-1&&(s={passive:!0}),n.addEventListener(e,i.dispatcher,s)}else n.attachEvent&&n.attachEvent("on"+e,i.dispatcher)}function qt(n,e,t){if(!Jt.has(n))return;const i=Jt.get(n);if(!i.handlers)return;if(Array.isArray(e))return Jh(qt,n,e,t);const s=function(a,o){i.handlers[o]=[],Qm(a,o)};if(e===void 0){for(const a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&s(n,a);return}const r=i.handlers[e];if(r){if(!t){s(n,e);return}if(t.guid)for(let a=0;a<r.length;a++)r[a].guid===t.guid&&r.splice(a--,1);Qm(n,e)}}function la(n,e,t){const i=Jt.has(n)?Jt.get(n):{},s=n.parentNode||n.ownerDocument;if(typeof e=="string"?e={type:e,target:n}:e.target||(e.target=n),e=Bu(e),i.dispatcher&&i.dispatcher.call(n,e,t),s&&!e.isPropagationStopped()&&e.bubbles===!0)la.call(null,s,e,t);else if(!s&&!e.defaultPrevented&&e.target&&e.target[e.type]){Jt.has(e.target)||Jt.set(e.target,{});const r=Jt.get(e.target);e.target[e.type]&&(r.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function Nu(n,e,t){if(Array.isArray(e))return Jh(Nu,n,e,t);const i=function(){qt(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||nn(),Ii(n,e,i)}function ef(n,e,t){const i=function(){qt(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||nn(),Ii(n,e,i)}var p6=Object.freeze({__proto__:null,fixEvent:Bu,on:Ii,off:qt,trigger:la,one:Nu,any:ef});const $i=30,Je=function(n,e,t){e.guid||(e.guid=nn());const i=e.bind(n);return i.guid=t?t+"_"+e.guid:e.guid,i},In=function(n,e){let t=P.performance.now();return function(...s){const r=P.performance.now();r-t>=e&&(n(...s),t=r)}},ay=function(n,e,t,i=P){let s;const r=()=>{i.clearTimeout(s),s=null},a=function(){const o=this,l=arguments;let u=function(){s=null,u=null,t||n.apply(o,l)};!s&&t&&n.apply(o,l),i.clearTimeout(s),s=i.setTimeout(u,e)};return a.cancel=r,a};var m6=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:$i,bind_:Je,throttle:In,debounce:ay});let Pa;class Hi{on(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Ii(this,e,t),this.addEventListener=i}off(e,t){qt(this,e,t)}one(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Nu(this,e,t),this.addEventListener=i}any(e,t){const i=this.addEventListener;this.addEventListener=()=>{},ef(this,e,t),this.addEventListener=i}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=Bu(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),la(this,e)}queueTrigger(e){Pa||(Pa=new Map);const t=e.type||e;let i=Pa.get(this);i||(i=new Map,Pa.set(this,i));const s=i.get(t);i.delete(t),P.clearTimeout(s);const r=P.setTimeout(()=>{i.delete(t),i.size===0&&(i=null,Pa.delete(this)),this.trigger(e)},0);i.set(t,r)}}Hi.prototype.allowedEvents_={};Hi.prototype.addEventListener=Hi.prototype.on;Hi.prototype.removeEventListener=Hi.prototype.off;Hi.prototype.dispatchEvent=Hi.prototype.trigger;const Fu=n=>typeof n.name=="function"?n.name():typeof n.name=="string"?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,qn=n=>n instanceof Hi||!!n.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof n[e]=="function"),g6=(n,e)=>{qn(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))},Od=n=>typeof n=="string"&&/\S/.test(n)||Array.isArray(n)&&!!n.length,Wl=(n,e,t)=>{if(!n||!n.nodeName&&!qn(n))throw new Error(`Invalid target for ${Fu(e)}#${t}; must be a DOM node or evented object.`)},oy=(n,e,t)=>{if(!Od(n))throw new Error(`Invalid event type for ${Fu(e)}#${t}; must be a non-empty string or array.`)},ly=(n,e,t)=>{if(typeof n!="function")throw new Error(`Invalid listener for ${Fu(e)}#${t}; must be a function.`)},Lc=(n,e,t)=>{const i=e.length<3||e[0]===n||e[0]===n.eventBusEl_;let s,r,a;return i?(s=n.eventBusEl_,e.length>=3&&e.shift(),[r,a]=e):[s,r,a]=e,Wl(s,n,t),oy(r,n,t),ly(a,n,t),a=Je(n,a),{isTargetingSelf:i,target:s,type:r,listener:a}},Ms=(n,e,t,i)=>{Wl(n,n,e),n.nodeName?p6[e](n,t,i):n[e](t,i)},_6={on(...n){const{isTargetingSelf:e,target:t,type:i,listener:s}=Lc(this,n,"on");if(Ms(t,"on",i,s),!e){const r=()=>this.off(t,i,s);r.guid=s.guid;const a=()=>this.off("dispose",r);a.guid=s.guid,Ms(this,"on","dispose",r),Ms(t,"on","dispose",a)}},one(...n){const{isTargetingSelf:e,target:t,type:i,listener:s}=Lc(this,n,"one");if(e)Ms(t,"one",i,s);else{const r=(...a)=>{this.off(t,i,r),s.apply(null,a)};r.guid=s.guid,Ms(t,"one",i,r)}},any(...n){const{isTargetingSelf:e,target:t,type:i,listener:s}=Lc(this,n,"any");if(e)Ms(t,"any",i,s);else{const r=(...a)=>{this.off(t,i,r),s.apply(null,a)};r.guid=s.guid,Ms(t,"any",i,r)}},off(n,e,t){if(!n||Od(n))qt(this.eventBusEl_,n,e);else{const i=n,s=e;Wl(i,this,"off"),oy(s,this,"off"),ly(t,this,"off"),t=Je(this,t),this.off("dispose",t),i.nodeName?(qt(i,s,t),qt(i,"dispose",t)):qn(i)&&(i.off(s,t),i.off("dispose",t))}},trigger(n,e){Wl(this.eventBusEl_,this,"trigger");const t=n&&typeof n!="string"?n.type:n;if(!Od(t))throw new Error(`Invalid event type for ${Fu(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return la(this.eventBusEl_,n,e)}};function tf(n,e={}){const{eventBusKey:t}=e;if(t){if(!n[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);n.eventBusEl_=n[t]}else n.eventBusEl_=ke("span",{className:"vjs-event-bus"});return Object.assign(n,_6),n.eventedCallbacks&&n.eventedCallbacks.forEach(i=>{i()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(i){i&&Jt.has(i)&&Jt.delete(i)}),P.setTimeout(()=>{n.eventBusEl_=null},0)}),n}const y6={state:{},setState(n){typeof n=="function"&&(n=n());let e;return Or(n,(t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t}),e&&qn(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function uy(n,e){return Object.assign(n,y6),n.state=Object.assign({},n.state,e),typeof n.handleStateChanged=="function"&&qn(n)&&n.on("statechanged",n.handleStateChanged),n}const Ja=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toLowerCase())},dt=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},cy=function(n,e){return dt(n)===dt(e)};var v6=Object.freeze({__proto__:null,toLowerCase:Ja,toTitleCase:dt,titleCaseEquals:cy});class V{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Qe({},this.options_),t=this.options_=Qe(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const s=e&&e.id&&e.id()||"no_player";this.id_=`${s}_component_${nn()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(s=>this.addClass(s)),["on","off","one","any","trigger"].forEach(s=>{this[s]=void 0}),t.evented!==!1&&(tf(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),uy(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(i),t.reportTouchActivity!==!1&&this.enableTouchActivity()}on(e,t){}off(e,t){}one(e,t){}any(e,t){}trigger(e,t){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=Qe(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return ke(e,t,i)}localize(e,t,i=e){const s=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[s],o=s&&s.split("-")[0],l=r&&r[o];let u=i;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(c,h){const m=t[h-1];let y=m;return typeof m>"u"&&(y=c),y})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,s)=>i.concat(s),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",s=ke("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=Q.createElementNS(i,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const a=Q.createElementNS(i,"use");return r.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),s.appendChild(r),this.iconIsSet_?t.replaceChild(s,t.querySelector(".vjs-icon-placeholder")):t.appendChild(s),this.iconIsSet_=!0,s}addChild(e,t={},i=this.children_.length){let s,r;if(typeof e=="string"){r=dt(e);const a=t.componentClass||r;t.name=r;const o=V.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;s=new o(this.player_||this,t)}else s=e;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(i,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),r=r||s.name&&dt(s.name()),r&&(this.childNameIndex_[r]=s,this.childNameIndex_[Ja(r)]=s),typeof s.el=="function"&&s.el()){let a=null;this.children_[i+1]&&(this.children_[i+1].el_?a=this.children_[i+1].el_:oa(this.children_[i+1])&&(a=this.children_[i+1])),this.contentEl().insertBefore(s.el(),a)}return s}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let s=this.children_.length-1;s>=0;s--)if(this.children_[s]===e){t=!0,this.children_.splice(s,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[dt(e.name())]=null,this.childNameIndex_[Ja(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,i=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let s;const r=V.getComponent("Tech");Array.isArray(e)?s=e:s=Object.keys(e),s.concat(Object.keys(this.options_).filter(function(a){return!s.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=V.getComponent(a.opts.componentClass||dt(a.name));return o&&!r.isTech(o)}).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return vs(e,t||this.contentEl())}$$(e,t){return ey(e,t||this.contentEl())}hasClass(e){return Qa(this.el_,e)}addClass(...e){Ks(this.el_,...e)}removeClass(...e){Lu(this.el_,...e)}toggleClass(e,t){G1(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return X1(this.el_,e)}setAttribute(e,t){ea(this.el_,e,t)}removeAttribute(e){Ou(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;const s=this.el_.style[e],r=s.indexOf("px");return parseInt(r!==-1?s.slice(0,r):this.el_["offset"+dt(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=ia(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const i=`offset${dt(e)}`;t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(xe.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const i=10,s=200;let r;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=P.performance.now(),r=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)r=!1;else if(t){const l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>i&&(r=!1)}});const a=function(){r=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,r===!0&&P.performance.now()-e<s&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Je(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const i=function(s){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=Je(this,e),this.clearTimersOnDispose_(),i=P.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),P.clearTimeout(e)),e}setInterval(e,t){e=Je(this,e),this.clearTimersOnDispose_();const i=P.setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),P.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=Je(this,e),t=P.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=Je(this,t);const i=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),P.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((i,s)=>this[t](s))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const i=V.getComponent("Tech"),s=i&&i.isTech(t),r=V===t||V.prototype.isPrototypeOf(t.prototype);if(s||!r){let o;throw s?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=dt(e),V.components_||(V.components_={});const a=V.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0&&l.map(u=>o[u]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return V.components_[e]=t,V.components_[Ja(e)]=t,t}static getComponent(e){if(!(!e||!V.components_))return V.components_[e]}}V.registerComponent("Component",V);function b6(n,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${n}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function Jm(n,e,t,i){return b6(n,i,t.length-1),t[i][e]}function Oc(n){let e;return n===void 0||n.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:n.length,start:Jm.bind(null,"start",0,n),end:Jm.bind(null,"end",1,n)},P.Symbol&&P.Symbol.iterator&&(e[P.Symbol.iterator]=()=>(n||[]).values()),e}function Ji(n,e){return Array.isArray(n)?Oc(n):n===void 0||e===void 0?Oc():Oc([[n,e]])}const dy=function(n,e){n=n<0?0:n;let t=Math.floor(n%60),i=Math.floor(n/60%60),s=Math.floor(n/3600);const r=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(s=i=t="-"),s=s>0||a>0?s+":":"",i=((s||r>=10)&&i<10?"0"+i:i)+":",t=t<10?"0"+t:t,s+i+t};let nf=dy;function hy(n){nf=n}function fy(){nf=dy}function sr(n,e=n){return nf(n,e)}var T6=Object.freeze({__proto__:null,createTimeRanges:Ji,createTimeRange:Ji,setFormatTime:hy,resetFormatTime:fy,formatTime:sr});function py(n,e){let t=0,i,s;if(!e)return 0;(!n||!n.length)&&(n=Ji(0,0));for(let r=0;r<n.length;r++)i=n.start(r),s=n.end(r),s>e&&(s=e),t+=s-i;return t/e}function ei(n){if(n instanceof ei)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:An(n)&&(typeof n.code=="number"&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=ei.defaultMessages[this.code]||"")}ei.prototype.code=0;ei.prototype.message="";ei.prototype.status=null;ei.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];ei.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let n=0;n<ei.errorTypes.length;n++)ei[ei.errorTypes[n]]=n,ei.prototype[ei.errorTypes[n]]=n;function eo(n){return n!=null&&typeof n.then=="function"}function gn(n){eo(n)&&n.then(null,e=>{})}const Rd=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,s)=>(n[i]&&(t[i]=n[i]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},x6=function(n){const e=n.$$("track"),t=Array.prototype.map.call(e,s=>s.track);return Array.prototype.map.call(e,function(s){const r=Rd(s.track);return s.src&&(r.src=s.src),r}).concat(Array.prototype.filter.call(n.textTracks(),function(s){return t.indexOf(s)===-1}).map(Rd))},w6=function(n,e){return n.forEach(function(t){const i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(s=>i.addCue(s))}),e.textTracks()};var eg={textTracksToJson:x6,jsonToTextTracks:w6,trackToJson_:Rd};const Rc="vjs-modal-dialog";class ua extends V{constructor(e,t){super(e,t),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=ke("div",{className:`${Rc}-content`},{role:"document"}),this.descEl_=ke("p",{className:`${Rc}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),ws(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Rc} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let i=this.getChild("closeButton");if(t&&!i){const s=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=s,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),i=t.parentNode,s=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),J1(t,e),this.trigger("modalfill"),s?i.insertBefore(t,s):i.appendChild(t);const r=this.getChild("closeButton");r&&i.appendChild(r.el_)}empty(){this.trigger("beforemodalempty"),Mu(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Q.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),xe.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(!xe.isEventKey(e,"Tab"))return;const t=this.focusableEls_(),i=this.el_.querySelector(":focus");let s;for(let r=0;r<t.length;r++)if(i===t[r]){s=r;break}Q.activeElement===this.el_&&(s=0),e.shiftKey&&s===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&s===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof P.HTMLAnchorElement||t instanceof P.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof P.HTMLInputElement||t instanceof P.HTMLSelectElement||t instanceof P.HTMLTextAreaElement||t instanceof P.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof P.HTMLIFrameElement||t instanceof P.HTMLObjectElement||t instanceof P.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}}ua.prototype.options_={pauseOnOpen:!0,temporary:!0};V.registerComponent("ModalDialog",ua);class na extends Hi{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},qn(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,s=this.length;i<s;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,s=this.length;i<s;i++){const r=this[i];if(r.id===e){t=r;break}}return t}}na.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const n in na.prototype.allowedEvents_)na.prototype["on"+n]=null;const Mc=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].enabled=!1)};class S6 extends na{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){Mc(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&Mc(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,Mc(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const Bc=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].selected=!1)};class C6 extends na{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Bc(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&Bc(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Bc(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class my extends na{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class E6{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,s=this.trackElements_.length;i<s;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class Xl{constructor(e){Xl.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let i=0;const s=e.length;this.cues_=e,this.length_=e.length;const r=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<s)for(i=t;i<s;i++)r.call(this,i)}getCueById(e){let t=null;for(let i=0,s=this.length;i<s;i++){const r=this[i];if(r.id===e){t=r;break}}return t}}const A6={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},D6={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},k6={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},tg={disabled:"disabled",hidden:"hidden",showing:"showing"};class sf extends Hi{constructor(e={}){super();const t={id:e.id||"vjs_track_"+nn(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const s in t)Object.defineProperty(this,s,{get(){return t[s]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(s){s!==i&&(i=s,this.trigger("labelchange"))}})}}const rf=function(n){const e=["protocol","hostname","port","pathname","search","hash","host"],t=Q.createElement("a");t.href=n;const i={};for(let s=0;s<e.length;s++)i[e[s]]=t[e[s]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=P.location.protocol),i.host||(i.host=P.location.host),i},gy=function(n){if(!n.match(/^https?:\/\//)){const e=Q.createElement("a");e.href=n,n=e.href}return n},af=function(n){if(typeof n=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n);if(t)return t.pop().toLowerCase()}return""},Uu=function(n,e=P.location){const t=rf(n);return(t.protocol===":"?e.protocol:t.protocol)+t.host!==e.protocol+e.host};var I6=Object.freeze({__proto__:null,parseUrl:rf,getAbsoluteURL:gy,getFileExtension:af,isCrossOrigin:Uu});const ig=function(n,e){const t=new P.WebVTT.Parser(P,P.vttjs,P.WebVTT.StringDecoder()),i=[];t.oncue=function(s){e.addCue(s)},t.onparsingerror=function(s){i.push(s)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(n),i.length>0&&(P.console&&P.console.groupCollapsed&&P.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(s=>Le.error(s)),P.console&&P.console.groupEnd&&P.console.groupEnd()),t.flush()},ng=function(n,e){const t={uri:n},i=Uu(n);i&&(t.cors=i);const s=e.tech_.crossOrigin()==="use-credentials";s&&(t.withCredentials=s),U_(t,Je(this,function(r,a,o){if(r)return Le.error(r,a);e.loaded_=!0,typeof P.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){Le.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return ig(o,e)}):ig(o,e)}))};class Lo extends sf{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=Qe(e,{kind:k6[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=tg[t.mode]||"disabled";const s=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const r=new Xl(this.cues_),a=new Xl(this.activeCues_);let o=!1;this.timeupdateHandler=Je(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return s},set(){}},mode:{get(){return i},set(u){tg[u]&&i!==u&&(i=u,!this.preload_&&i!=="disabled"&&this.cues.length===0&&ng(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let h=0,m=this.cues.length;h<m;h++){const y=this.cues[h];y.startTime<=u&&y.endTime>=u&&c.push(y)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let h=0;h<c.length;h++)this.activeCues_.indexOf(c[h])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&ng(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new P.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const s in e)s in t||(t[s]=e[s]);t.id=e.id,t.originalCue_=e}const i=this.tech_.textTracks();for(let s=0;s<i.length;s++)i[s]!==this&&i[s].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}Lo.prototype.allowedEvents_={cuechange:"cuechange"};class _y extends sf{constructor(e={}){const t=Qe(e,{kind:D6[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(s){typeof s!="boolean"||s===i||(i=s,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class yy extends sf{constructor(e={}){const t=Qe(e,{kind:A6[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(s){typeof s!="boolean"||s===i||(i=s,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Zn extends Hi{constructor(e={}){super();let t;const i=new Lo(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=Zn.NONE,i.addEventListener("loadeddata",()=>{t=Zn.LOADED,this.trigger({type:"load",target:this})})}}Zn.prototype.allowedEvents_={load:"load"};Zn.NONE=0;Zn.LOADING=1;Zn.LOADED=2;Zn.ERROR=3;const Ui={audio:{ListClass:S6,TrackClass:_y,capitalName:"Audio"},video:{ListClass:C6,TrackClass:yy,capitalName:"Video"},text:{ListClass:my,TrackClass:Lo,capitalName:"Text"}};Object.keys(Ui).forEach(function(n){Ui[n].getterName=`${n}Tracks`,Ui[n].privateName=`${n}Tracks_`});const sa={remoteText:{ListClass:my,TrackClass:Lo,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:E6,TrackClass:Zn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Kt=Object.assign({},Ui,sa);sa.names=Object.keys(sa);Ui.names=Object.keys(Ui);Kt.names=[].concat(sa.names).concat(Ui.names);function P6(n,e,t,i,s={}){const r=n.textTracks();s.kind=e,t&&(s.label=t),i&&(s.language=i),s.tech=n;const a=new Kt.text.TrackClass(s);return r.addTrack(a),a}class we extends V{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Kt.names.forEach(i=>{const s=Kt[i];e&&e[s.getterName]&&(this[s.privateName]=e[s.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Kt.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Je(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Ji(0,0)}bufferedPercent(){return py(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Ui.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const i=this[`${t}Tracks`]()||[];let s=i.length;for(;s--;){const r=i[s];t==="text"&&this.removeRemoteTextTrack(r),i.removeTrack(r)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new ei(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Ji(0,0):Ji()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Ui.names.forEach(e=>{const t=Ui[e],i=()=>{this.trigger(`${e}trackchange`)},s=this[t.getterName]();s.addEventListener("removetrack",i),s.addEventListener("addtrack",i),this.on("dispose",()=>{s.removeEventListener("removetrack",i),s.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!P.WebVTT)if(Q.body.contains(this.el())){if(!this.options_["vtt.js"]&&Jr(bm)&&Object.keys(bm).length>0){this.trigger("vttjsloaded");return}const e=Q.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),P.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),i=o=>e.addTrack(o.track),s=o=>e.removeTrack(o.track);t.on("addtrack",i),t.on("removetrack",s),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),a=()=>{r();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",r),l.mode==="showing"&&l.addEventListener("cuechange",r)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",s),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",r)})}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return P6(this,e,t,i)}createRemoteTextTrack(e){const t=Qe(e,{tech:this});return new sa.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const i=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=nn();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return we.canPlayType(e.type)}static isTech(e){return e.prototype instanceof we||e instanceof we||e===we}static registerTech(e,t){if(we.techs_||(we.techs_={}),!we.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!we.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!we.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=dt(e),we.techs_[e]=t,we.techs_[Ja(e)]=t,e!=="Tech"&&we.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(we.techs_&&we.techs_[e])return we.techs_[e];if(e=dt(e),P&&P.videojs&&P.videojs[e])return Le.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),P.videojs[e]}}}Kt.names.forEach(function(n){const e=Kt[n];we.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});we.prototype.featuresVolumeControl=!0;we.prototype.featuresMuteControl=!0;we.prototype.featuresFullscreenResize=!1;we.prototype.featuresPlaybackRate=!1;we.prototype.featuresProgressEvents=!1;we.prototype.featuresSourceset=!1;we.prototype.featuresTimeupdateEvents=!1;we.prototype.featuresNativeTextTracks=!1;we.prototype.featuresVideoFrameCallback=!1;we.withSourceHandlers=function(n){n.registerSourceHandler=function(t,i){let s=n.sourceHandlers;s||(s=n.sourceHandlers=[]),i===void 0&&(i=s.length),s.splice(i,0,t)},n.canPlayType=function(t){const i=n.sourceHandlers||[];let s;for(let r=0;r<i.length;r++)if(s=i[r].canPlayType(t),s)return s;return""},n.selectSourceHandler=function(t,i){const s=n.sourceHandlers||[];let r;for(let a=0;a<s.length;a++)if(r=s[a].canHandleSource(t,i),r)return s[a];return null},n.canPlaySource=function(t,i){const s=n.selectSourceHandler(t,i);return s?s.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){const i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let i=n.selectSourceHandler(t,this.options_);i||(n.nativeSourceHandler?i=n.nativeSourceHandler:Le.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};V.registerComponent("Tech",we);we.registerTech("Tech",we);we.defaultTechOrder_=[];const Zs={},Md={},Yl={};function L6(n,e){Zs[n]=Zs[n]||[],Zs[n].push(e)}function O6(n,e,t){n.setTimeout(()=>Us(e,Zs[e.type],t,n),1)}function R6(n,e){n.forEach(t=>t.setTech&&t.setTech(e))}function M6(n,e,t){return n.reduceRight(of(t),e[t]())}function B6(n,e,t,i){return e[t](n.reduce(of(t),i))}function sg(n,e,t,i=null){const s="call"+dt(t),r=n.reduce(of(s),i),a=r===Yl,o=a?null:e[t](r);return U6(n,t,o,a),o}const N6={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},F6={setCurrentTime:1,setMuted:1,setVolume:1},rg={play:1,pause:1};function of(n){return(e,t)=>e===Yl?Yl:t[n]?t[n](e):e}function U6(n,e,t,i){for(let s=n.length-1;s>=0;s--){const r=n[s];r[e]&&r[e](i,t)}}function j6(n){Md[n.id()]=null}function $6(n,e){const t=Md[n.id()];let i=null;if(t==null)return i=e(n),Md[n.id()]=[[e,i]],i;for(let s=0;s<t.length;s++){const[r,a]=t[s];r===e&&(i=a)}return i===null&&(i=e(n),t.push([e,i])),i}function Us(n={},e=[],t,i,s=[],r=!1){const[a,...o]=e;if(typeof a=="string")Us(n,Zs[a],t,i,s,r);else if(a){const l=$6(i,a);if(!l.setSource)return s.push(l),Us(n,o,t,i,s,r);l.setSource(Object.assign({},n),function(u,c){if(u)return Us(n,o,t,i,s,r);s.push(l),Us(c,n.type===c.type?o:Zs[c.type],t,i,s,r)})}else o.length?Us(n,o,t,i,s,r):r?t(n,s):Us(n,Zs["*"],t,i,s,!0)}const H6={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Kl=function(n=""){const e=af(n);return H6[e.toLowerCase()]||""},z6=(n,e)=>{if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;const t=n.cache_.sources.filter(s=>s.src===e);if(t.length)return t[0].type;const i=n.$$("source");for(let s=0;s<i.length;s++){const r=i[s];if(r.type&&r.src&&r.src===e)return r.type}return Kl(e)},vy=function(n){if(Array.isArray(n)){let e=[];n.forEach(function(t){t=vy(t),Array.isArray(t)?e=e.concat(t):An(t)&&e.push(t)}),n=e}else typeof n=="string"&&n.trim()?n=[ag({src:n})]:An(n)&&typeof n.src=="string"&&n.src&&n.src.trim()?n=[ag(n)]:n=[];return n};function ag(n){if(!n.type){const e=Kl(n.src);e&&(n.type=e)}return n}var V6=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-twitter">
      <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;class q6 extends V{constructor(e,t,i){const s=Qe({createEl:!1},t);if(super(e,s,i),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let r=0,a=t.playerOptions.techOrder;r<a.length;r++){const o=dt(a[r]);let l=we.getTech(o);if(o||(l=V.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}}V.registerComponent("MediaLoader",q6);class ju extends V{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&Le.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;const s=ke(e,t,i);return this.player_.options_.experimentalSvgIcons||s.appendChild(ke("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=ke("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,ws(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){xe.isEventKey(e,"Space")||xe.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}V.registerComponent("ClickableComponent",ju);class Bd extends ju{constructor(e,t){super(e,t),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return ke("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(ke("picture",{className:"vjs-poster",tabIndex:-1},{},ke("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?gn(this.player_.play()):this.player_.pause())}}Bd.prototype.crossorigin=Bd.prototype.crossOrigin;V.registerComponent("PosterImage",Bd);const Ri="#222",og="#ccc",G6={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Nc(n,e){let t;if(n.length===4)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)t=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function La(n,e,t){try{n.style[e]=t}catch{return}}function lg(n){return n?`${n}px`:""}class W6 extends V{constructor(e,t,i){super(e,t,i);const s=a=>this.updateDisplay(a),r=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",s),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(Je(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);const a=P.screen.orientation||P,o=P.screen.orientation?"change":"orientationchange";a.addEventListener(o,r),e.on("dispose",()=>a.removeEventListener(o,r));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let s,r,a;for(let o=0;o<t.length;o++){const l=t[o];i&&i.enabled&&i.language&&i.language===l.language&&l.kind in e?l.kind===i.kind?a=l:a||(a=l):i&&!i.enabled?(a=null,s=null,r=null):l.default&&(l.kind==="descriptions"&&!s?s=l:l.kind in e&&!r&&(r=l))}a?a.mode="showing":r?r.mode="showing":s&&(s.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof P.WebVTT=="function"&&P.WebVTT.processCues(P,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let i=null,s=null,r=e.length;for(;r--;){const a=e[r];a.mode==="showing"&&(a.kind==="descriptions"?i=a:s=a)}s?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!P.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),i=e/t,s=this.player_.videoWidth()/this.player_.videoHeight();let r=0,a=0;Math.abs(i-s)>.1&&(i>s?r=Math.round((e-t*s)/2):a=Math.round((t-e/s)/2)),La(this.el_,"insetInline",lg(r)),La(this.el_,"insetBlock",lg(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),i=e.activeCues;let s=i.length;for(;s--;){const r=i[s];if(!r)continue;const a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&La(a.firstChild,"color",Nc(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&La(a.firstChild,"backgroundColor",Nc(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?La(a,"backgroundColor",Nc(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${Ri}, 2px 2px 4px ${Ri}, 2px 2px 5px ${Ri}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${Ri}, 2px 2px ${Ri}, 3px 3px ${Ri}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${og}, 0 1px ${og}, -1px -1px ${Ri}, 0 -1px ${Ri}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${Ri}, 0 0 4px ${Ri}, 0 0 4px ${Ri}, 0 0 4px ${Ri}`)),t.fontPercent&&t.fontPercent!==1){const o=P.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=G6[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof P.WebVTT!="function"||e.every(i=>!i.activeCues))return;const t=[];for(let i=0;i<e.length;++i){const s=e[i];for(let r=0;r<s.activeCues.length;++r)t.push(s.activeCues[r])}P.WebVTT.processCues(P,t,this.el_);for(let i=0;i<e.length;++i){const s=e[i];for(let r=0;r<s.activeCues.length;++r){const a=s.activeCues[r].displayState;Ks(a,"vjs-text-track-cue","vjs-text-track-cue-"+(s.language?s.language:i)),s.language&&ea(a,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}}V.registerComponent("TextTrackDisplay",W6);class X6 extends V{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=ke("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),s=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return s.appendChild(i),s}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}V.registerComponent("LoadingSpinner",X6);class Di extends ju{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);const s=ke(e,t,i);return this.player_.options_.experimentalSvgIcons||s.appendChild(ke("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}addChild(e,t={}){const i=this.constructor.name;return Le.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),V.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(xe.isEventKey(e,"Space")||xe.isEventKey(e,"Enter")){e.stopPropagation();return}super.handleKeyDown(e)}}V.registerComponent("Button",Di);class by extends Di{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){gn(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const i=this.player_.getChild("controlBar"),s=i&&i.getChild("playToggle");if(!s){this.player_.tech(!0).focus();return}const r=()=>s.focus();eo(t)?t.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}by.prototype.controlText_="Play Video";V.registerComponent("BigPlayButton",by);class Y6 extends Di{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){xe.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}V.registerComponent("CloseButton",Y6);class Ty extends Di{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),t.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?gn(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}Ty.prototype.controlText_="Play";V.registerComponent("PlayToggle",Ty);class ca extends V{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=ke("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(i),this.contentEl_=ke("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=sr(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,Le.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Q.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}ca.prototype.labelText_="Time";ca.prototype.controlText_="Time";V.registerComponent("TimeDisplay",ca);class lf extends ca{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}lf.prototype.labelText_="Current Time";lf.prototype.controlText_="Current Time";V.registerComponent("CurrentTimeDisplay",lf);class uf extends ca{constructor(e,t){super(e,t);const i=s=>this.updateContent(s);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}uf.prototype.labelText_="Duration";uf.prototype.controlText_="Duration";V.registerComponent("DurationDisplay",uf);class K6 extends V{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}}V.registerComponent("TimeDivider",K6);class cf extends ca{constructor(e,t){super(e,t),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(ke("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}}cf.prototype.labelText_="Remaining Time";cf.prototype.controlText_="Remaining Time";V.registerComponent("RemainingTimeDisplay",cf);class Z6 extends V{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ke("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(ke("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(Q.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}V.registerComponent("LiveDisplay",Z6);class xy extends Di{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=ke("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}xy.prototype.controlText_="Seek to live, currently playing live";V.registerComponent("SeekToLive",xy);function Oo(n,e,t){return n=Number(n),Math.min(t,Math.max(e,isNaN(n)?e:n))}var Q6=Object.freeze({__proto__:null,clamp:Oo});class df extends V{constructor(e,t){super(e,t),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!kn&&e.preventDefault(),Y1(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;K1(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Oo(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=Ru(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){xe.isEventKey(e,"Left")||xe.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):xe.isEventKey(e,"Right")||xe.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}V.registerComponent("Slider",df);const Fc=(n,e)=>Oo(n/e*100,0,100).toFixed(2)+"%";class J6 extends V{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=ke("span",{className:"vjs-control-text"}),i=ke("span",{textContent:this.localize("Loaded")}),s=Q.createTextNode(": ");return this.percentageEl_=ke("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(s),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,i=this.player_.buffered(),s=t&&t.isLive()?t.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),a=this.partEls_,o=Fc(r,s);this.percent_!==o&&(this.el_.style.width=o,ws(this.percentageEl_,o),this.percent_=o);for(let l=0;l<i.length;l++){const u=i.start(l),c=i.end(l);let h=a[l];h||(h=this.el_.appendChild(ke()),a[l]=h),!(h.dataset.start===u&&h.dataset.end===c)&&(h.dataset.start=u,h.dataset.end=c,h.style.left=Fc(u,r),h.style.width=Fc(c-u,r))}for(let l=a.length;l>i.length;l--)this.el_.removeChild(a[l-1]);a.length=i.length})}}V.registerComponent("LoadProgressBar",J6);class eD extends V{constructor(e,t){super(e,t),this.update=In(Je(this,this.update),$i)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){const s=bo(this.el_),r=ta(this.player_.el()),a=e.width*t;if(!r||!s)return;const o=e.left-r.left+a,l=e.width-a+(r.right-e.right);let u=s.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>s.width&&(u=s.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(i)}write(e){ws(this.el_,e)}updateTime(e,t,i,s){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let r;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;r=(l<1?"":"-")+sr(l,o)}else r=sr(i,a);this.update(e,t,r),s&&s()})}}V.registerComponent("TimeTooltip",eD);class hf extends V{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=In(Je(this,this.update),$i)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const i=this.getChild("timeTooltip");if(!i)return;const s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,s)}}hf.prototype.options_={children:[]};!ti&&!Dn&&hf.prototype.options_.children.push("timeTooltip");V.registerComponent("PlayProgressBar",hf);class wy extends V{constructor(e,t){super(e,t),this.update=In(Je(this,this.update),$i)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,()=>{this.el_.style.left=`${e.width*t}px`})}}wy.prototype.options_={children:["timeTooltip"]};V.registerComponent("MouseTimeDisplay",wy);const hl=5,ug=12;class ff extends df{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Je(this,this.update),this.update=In(this.update_,$i),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Q&&"visibilityState"in Q&&this.on(Q,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Q.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,$i))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Q.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),s=this.player_.liveTracker;let r=this.player_.duration();s&&s.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==i||this.duration_!==r)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[sr(i,r),sr(r,r)],"{1} of {2}")),this.currentTime_=i,this.duration_=r),this.bar&&this.bar.update(ta(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){To(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!To(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i;const s=this.calculateDistance(e),r=this.player_.liveTracker;if(!r||!r.isLive())i=s*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(s>=.99){r.seekToLiveEdge();return}const a=r.seekableStart(),o=r.liveCurrentTime();if(i=a+s*r.liveWindow(),i>=o&&(i=o),i<=a&&(i=a+.1),i===1/0)return}this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?gn(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+hl)}stepBack(){this.userSeek_(this.player_.currentTime()-hl)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(xe.isEventKey(e,"Space")||xe.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(xe.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(xe.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(xe(e))){e.preventDefault(),e.stopPropagation();const i=(xe.codes[xe(e)]-xe.codes[0])*10/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else xe.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-hl*ug)):xe.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+hl*ug)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Q&&"visibilityState"in Q&&this.off(Q,"visibilitychange",this.toggleVisibility_),super.dispose()}}ff.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!ti&&!Dn&&ff.prototype.options_.children.splice(1,0,"mouseTimeDisplay");V.registerComponent("SeekBar",ff);class Sy extends V{constructor(e,t){super(e,t),this.handleMouseMove=In(Je(this,this.handleMouseMove),$i),this.throttledHandleMouseSeek=In(Je(this,this.handleMouseSeek),$i),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const i=t.getChild("playProgressBar"),s=t.getChild("mouseTimeDisplay");if(!i&&!s)return;const r=t.el(),a=bo(r);let o=Ru(r,e).x;o=Oo(o,0,1),s&&s.update(a,o),i&&i.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&gn(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}Sy.prototype.options_={children:["seekBar"]};V.registerComponent("ProgressControl",Sy);class Cy extends Di{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Q.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in P?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Q.exitPictureInPicture=="function"&&super.show()}}Cy.prototype.controlText_="Picture-in-Picture";V.registerComponent("PictureInPictureToggle",Cy);class Ey extends Di{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),Q[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Ey.prototype.controlText_="Fullscreen";V.registerComponent("FullscreenToggle",Ey);const tD=function(n,e){e.tech_&&!e.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};class iD extends V{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}V.registerComponent("VolumeLevel",iD);class nD extends V{constructor(e,t){super(e,t),this.update=In(Je(this,this.update),$i)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,s){if(!i){const r=ta(this.el_),a=ta(this.player_.el()),o=e.width*t;if(!a||!r)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=r.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>r.width&&(c=r.width),this.el_.style.right=`-${c}px`}this.write(`${s}%`)}write(e){ws(this.el_,e)}updateVolume(e,t,i,s,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,i,s.toFixed(0)),r&&r()})}}V.registerComponent("VolumeLevelTooltip",nD);class Ay extends V{constructor(e,t){super(e,t),this.update=In(Je(this,this.update),$i)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){const s=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,s,()=>{i?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}}Ay.prototype.options_={children:["volumeLevelTooltip"]};V.registerComponent("MouseVolumeLevelDisplay",Ay);class $u extends df{constructor(e,t){super(e,t),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){To(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const i=this.el(),s=ta(i),r=this.vertical();let a=Ru(i,e);a=r?a.y:a.x,a=Oo(a,0,1),t.update(s,a,r)}To(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}$u.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ti&&!Dn&&$u.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");$u.prototype.playerEvent="volumechange";V.registerComponent("VolumeBar",$u);class Dy extends V{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||Jr(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),tD(this,e),this.throttledHandleMouseMove=In(Je(this,this.handleMouseMove),$i),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}Dy.prototype.options_={children:["volumeBar"]};V.registerComponent("VolumeControl",Dy);const sD=function(n,e){e.tech_&&!e.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};class ky extends Di{constructor(e,t){super(e,t),sD(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),i=this.player_.lastVolume_();if(t===0){const s=i<.1?.1:i;this.player_.volume(s),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),ti&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),Lu(this.el_,[0,1,2,3].reduce((i,s)=>i+`${s?" ":""}vjs-vol-${s}`,"")),Ks(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}ky.prototype.controlText_="Mute";V.registerComponent("MuteToggle",ky);class Iy extends V{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||Jr(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){xe.isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Ii(Q,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),qt(Q,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){xe.isEventKey(e,"Esc")&&this.handleMouseOut()}}Iy.prototype.options_={children:["muteToggle","volumeControl"]};V.registerComponent("VolumePanel",Iy);class Py extends Di{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),i=this.player_.liveTracker,s=i&&i.isLive()?i.seekableEnd():this.player_.duration();let r;t+this.skipTime<=s?r=t+this.skipTime:r=s,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}Py.prototype.controlText_="Skip Forward";V.registerComponent("SkipForward",Py);class Ly extends Di{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),i=this.player_.liveTracker,s=i&&i.isLive()&&i.seekableStart();let r;s&&t-this.skipTime<=s?r=s:t>=this.skipTime?r=t-this.skipTime:r=0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Ly.prototype.controlText_="Skip Backward";V.registerComponent("SkipBackward",Ly);class Oy extends V{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof V&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof V&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=ke(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Ii(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Q.activeElement;if(!this.children().some(i=>i.el()===t)){const i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const i=t.filter(s=>s.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){xe.isEventKey(e,"Left")||xe.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(xe.isEventKey(e,"Right")||xe.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}V.registerComponent("Menu",Oy);class pf extends V{constructor(e,t={}){super(e,t),this.menuButton_=new Di(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=Di.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const s=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",s),this.on(this.menuButton_,"click",s),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Ii(Q,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Oy(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=ke("li",{className:"vjs-menu-title",textContent:dt(this.options_.title),tabIndex:-1}),i=new V(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=Di.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),qt(Q,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){xe.isEventKey(e,"Esc")||xe.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),xe.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(xe.isEventKey(e,"Up")||xe.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(xe.isEventKey(e,"Esc")||xe.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(xe.isEventKey(e,"Esc")||xe.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),xe.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ti&&V1())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}V.registerComponent("MenuButton",pf);class mf extends pf{constructor(e,t){const i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;const s=Je(this,this.update);i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),i.addEventListener("labelchange",s),this.player_.on("ready",s),this.player_.on("dispose",function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s),i.removeEventListener("labelchange",s)})}}V.registerComponent("TrackButton",mf);const rD=["Tab","Esc","Up","Down","Right","Left"];class Ro extends ju{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;const s=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i),r=ke("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?s.appendChild(r):s.replaceChild(r,s.querySelector(".vjs-icon-placeholder")),s}handleKeyDown(e){rD.some(t=>xe.isEventKey(e,t))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}V.registerComponent("MenuItem",Ro);class Mo extends Ro{constructor(e,t){const i=t.track,s=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected=i.mode==="showing",super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const r=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],r),s.addEventListener("change",r),s.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],r),s.removeEventListener("change",r),s.removeEventListener("selectedlanguagechange",a)}),s.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof P.Event!="object")try{o=new P.Event("change")}catch{}o||(o=Q.createEvent("Event"),o.initEvent("change",!0,!0)),s.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let s=0;s<i.length;s++){const r=i[s];this.kinds.indexOf(r.kind)!==-1&&(r===t?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}V.registerComponent("TextTrackMenuItem",Mo);class Ry extends Mo{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let i=!0;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let i=!0;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}V.registerComponent("OffTextTrackMenuItem",Ry);class da extends mf{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Mo){let i;this.label_&&(i=`${this.label_} off`),e.push(new Ry(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<s.length;r++){const a=s[r];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}}V.registerComponent("TextTrackButton",da);class My extends Ro{constructor(e,t){const i=t.track,s=t.cue,r=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=s.text,t.selected=s.startTime<=r&&r<s.endTime,super(e,t),this.track=i,this.cue=s}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}V.registerComponent("ChaptersTrackMenuItem",My);class gf extends da{constructor(e,t,i){super(e,t,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(s=>{s.selected(this.track_.activeCues[0]===s.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(dt(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let i=0,s=t.length;i<s;i++){const r=t[i],a=new My(this.player_,{track:this.track_,cue:r});e.push(a)}return e}}gf.prototype.kind_="chapters";gf.prototype.controlText_="Chapters";V.registerComponent("ChaptersButton",gf);class _f extends da{constructor(e,t,i){super(e,t,i),this.setIcon("audio-description");const s=e.textTracks(),r=Je(this,this.handleTracksChange);s.addEventListener("change",r),this.on("dispose",function(){s.removeEventListener("change",r)})}handleTracksChange(e){const t=this.player().textTracks();let i=!1;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a.kind!==this.kind_&&a.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}_f.prototype.kind_="descriptions";_f.prototype.controlText_="Descriptions";V.registerComponent("DescriptionsButton",_f);class yf extends da{constructor(e,t,i){super(e,t,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}yf.prototype.kind_="subtitles";yf.prototype.controlText_="Subtitles";V.registerComponent("SubtitlesButton",yf);class vf extends Mo{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}V.registerComponent("CaptionSettingsMenuItem",vf);class bf extends da{constructor(e,t,i){super(e,t,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new vf(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}bf.prototype.kind_="captions";bf.prototype.controlText_="Captions";V.registerComponent("CaptionsButton",bf);class By extends Mo{createEl(e,t,i){const s=super.createEl(e,t,i),r=s.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",s):r.appendChild(ke("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(ke("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),s}}V.registerComponent("SubsCapsMenuItem",By);class Tf extends da{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(dt(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new vf(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,By),e}}Tf.prototype.kinds_=["captions","subtitles"];Tf.prototype.controlText_="Subtitles";V.registerComponent("SubsCapsButton",Tf);class Ny extends Ro{constructor(e,t){const i=t.track,s=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const r=(...a)=>{this.handleTracksChange.apply(this,a)};s.addEventListener("change",r),this.on("dispose",()=>{s.removeEventListener("change",r)})}createEl(e,t,i){const s=super.createEl(e,t,i),r=s.querySelector(".vjs-menu-item-text");return["main-desc","description"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(ke("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(ke("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),s}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const s=t[i];s!==this.track&&(s.enabled=s===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}V.registerComponent("AudioTrackMenuItem",Ny);class Fy extends mf{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const s=t[i];e.push(new Ny(this.player_,{track:s,selectable:!0,multiSelectable:!1}))}return e}}Fy.prototype.controlText_="Audio Track";V.registerComponent("AudioTrackButton",Fy);class xf extends Ro{constructor(e,t){const i=t.rate,s=parseFloat(i,10);t.label=i,t.selected=s===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=s,this.on(e,"ratechange",r=>this.update(r))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}xf.prototype.contentElType="button";V.registerComponent("PlaybackRateMenuItem",xf);class Uy extends pf{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=ke("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new xf(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}Uy.prototype.controlText_="Playback Rate";V.registerComponent("PlaybackRateMenuButton",Uy);class jy extends V{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}}V.registerComponent("Spacer",jy);class aD extends jy{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}V.registerComponent("CustomControlSpacer",aD);class $y extends V{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}$y.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};V.registerComponent("ControlBar",$y);class Hy extends ua{constructor(e,t){super(e,t),this.on(e,"error",i=>{this.close(),this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}Hy.prototype.options_=Object.assign({},ua.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});V.registerComponent("ErrorDisplay",Hy);const Uc="vjs-text-track-settings",cg=["#000","Black"],dg=["#00F","Blue"],hg=["#0FF","Cyan"],fg=["#0F0","Green"],pg=["#F0F","Magenta"],mg=["#F00","Red"],gg=["#FFF","White"],_g=["#FF0","Yellow"],jc=["1","Opaque"],$c=["0.5","Semi-Transparent"],yg=["0","Transparent"],js={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[cg,gg,mg,fg,dg,_g,pg,hg]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[jc,$c,yg]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[gg,cg,mg,fg,dg,_g,pg,hg]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>n==="1.00"?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[jc,$c]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[yg,$c,jc]}};js.windowColor.options=js.backgroundColor.options;function zy(n,e){if(e&&(n=e(n)),n&&n!=="none")return n}function oD(n,e){const t=n.options[n.options.selectedIndex].value;return zy(t,e)}function lD(n,e,t){if(e){for(let i=0;i<n.options.length;i++)if(zy(n.options[i].value,t)===e){n.selectedIndex=i;break}}}class uD extends ua{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=ke("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),Or(js,i=>{this.on(this.$(i.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",i="label"){const s=js[e],r=s.id.replace("%s",this.id_),a=[t,r].join(" ").trim(),o=`vjs_select_${nn()}`;return[`<${i} id="${r}"${i==="label"?` for="${o}" class="vjs-label"`:""}>`,this.localize(s.label),`</${i}>`,`<select aria-labelledby="${a}" id="${o}">`].concat(s.options.map(l=>{const u=r+"-"+l[1].replace(/\W+/g,"");return[`<option id="${u}" value="${l[0]}" `,`aria-labelledby="${a} ${u}">`,this.localize(l[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return ke("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return ke("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return ke("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return F1(js,(e,t,i)=>{const s=oD(this.$(t.selector),t.parser);return s!==void 0&&(e[i]=s),e},{})}setValues(e){Or(js,(t,i)=>{lD(this.$(t.selector),e[i],t.parser)})}setDefaults(){Or(js,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(P.localStorage.getItem(Uc))}catch(t){Le.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?P.localStorage.setItem(Uc,JSON.stringify(e)):P.localStorage.removeItem(Uc)}catch(t){Le.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()}handleLanguagechange(){this.fill()}}V.registerComponent("TextTrackSettings",uD);class cD extends V{constructor(e,t){let i=t.ResizeObserver||P.ResizeObserver;t.ResizeObserver===null&&(i=!1);const s=Qe({createEl:!i,reportTouchActivity:!1},t);super(e,s),this.ResizeObserver=t.ResizeObserver||P.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=ay(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const r=this.debouncedHandler_;let a=this.unloadListener_=function(){qt(this,"resize",r),qt(this,"unload",a),a=null};Ii(this.el_.contentWindow,"unload",a),Ii(this.el_.contentWindow,"resize",r)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}V.registerComponent("ResizeManager",cD);const dD={trackingThreshold:20,liveTolerance:15};class hD extends V{constructor(e,t){const i=Qe(dD,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=s=>this.handlePlay(s),this.handleFirstTimeupdate_=s=>this.handleFirstTimeupdate(s),this.handleSeeked_=s=>this.handleSeeked(s),this.seekToLiveEdge_=s=>this.seekToLiveEdge(s),this.reset_(),this.on(this.player_,"durationchange",s=>this.handleDurationchange(s)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(P.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;const s=this.liveCurrentTime(),r=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(s-r)>this.options_.liveTolerance;(!this.timeupdateSeen_||s===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,$i),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}V.registerComponent("LiveTracker",hD);class fD extends V{constructor(e,t){super(e,t),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:ke("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${nn()}`}),description:ke("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${nn()}`})},ke("div",{className:"vjs-title-bar"},{},U1(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(s=>{const r=this.state[s],a=this.els[s],o=i[s];Mu(a),r&&ws(a,r),t&&(t.removeAttribute(o),r&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}V.registerComponent("TitleBar",fD);const Nd=n=>{const e=n.el();if(e.hasAttribute("src"))return n.triggerSourceset(e.src),!0;const t=n.$$("source"),i=[];let s="";if(!t.length)return!1;for(let r=0;r<t.length;r++){const a=t[r].src;a&&i.indexOf(a)===-1&&i.push(a)}return i.length?(i.length===1&&(s=i[0]),n.triggerSourceset(s),!0):!1},pD=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){const e=Q.createElement(this.nodeName.toLowerCase());e.innerHTML=n;const t=Q.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",P.Element.prototype.appendChild.call(this,t),this.innerHTML}}),Vy=(n,e)=>{let t={};for(let i=0;i<n.length&&(t=Object.getOwnPropertyDescriptor(n[i],e),!(t&&t.set&&t.get));i++);return t.enumerable=!0,t.configurable=!0,t},mD=n=>Vy([n.el(),P.HTMLMediaElement.prototype,P.Element.prototype,pD],"innerHTML"),vg=function(n){const e=n.el();if(e.resetSourceWatch_)return;const t={},i=mD(n),s=r=>(...a)=>{const o=r.apply(e,a);return Nd(n),o};["append","appendChild","insertAdjacentHTML"].forEach(r=>{e[r]&&(t[r]=e[r],e[r]=s(t[r]))}),Object.defineProperty(e,"innerHTML",Qe(i,{set:s(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(r=>{e[r]=t[r]}),Object.defineProperty(e,"innerHTML",i)},n.one("sourceset",e.resetSourceWatch_)},gD=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?gy(P.Element.prototype.getAttribute.call(this,"src")):""},set(n){return P.Element.prototype.setAttribute.call(this,"src",n),n}}),_D=n=>Vy([n.el(),P.HTMLMediaElement.prototype,gD],"src"),yD=function(n){if(!n.featuresSourceset)return;const e=n.el();if(e.resetSourceset_)return;const t=_D(n),i=e.setAttribute,s=e.load;Object.defineProperty(e,"src",Qe(t,{set:r=>{const a=t.set.call(e,r);return n.triggerSourceset(e.src),a}})),e.setAttribute=(r,a)=>{const o=i.call(e,r,a);return/src/i.test(r)&&n.triggerSourceset(e.src),o},e.load=()=>{const r=s.call(e);return Nd(n)||(n.triggerSourceset(""),vg(n)),r},e.currentSrc?n.triggerSourceset(e.currentSrc):Nd(n)||vg(n),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=s,e.setAttribute=i,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};class ae extends we{constructor(e,t){super(e,t);const i=e.source;let s=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const r=this.el_.childNodes;let a=r.length;const o=[];for(;a--;){const l=r[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!s&&!this.el_.hasAttribute("crossorigin")&&Uu(l.src)&&(s=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&s&&Le.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(vo||Iu)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),ae.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){yD(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const i=()=>{t=[];for(let r=0;r<e.length;r++){const a=e[r];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));const s=()=>{for(let r=0;r<t.length;r++){const a=t[r];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",s)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",s),e.addEventListener("change",s)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",s)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(s=>{this.el()[`${i}Tracks`].removeEventListener(s,this[`${i}TracksListeners_`][s])}),this[`featuresNative${e}Tracks`]=!t,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Ui[e],i=this.el()[t.getterName],s=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!i||!i.addEventListener)return;const r={change:o=>{const l={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(l),e==="text"&&this[sa.remoteText.getterName]().trigger(l)},addtrack(o){s.addTrack(o.track)},removetrack(o){s.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<s.length;l++){let u=!1;for(let c=0;c<i.length;c++)if(i[c]===s[l]){u=!0;break}u||o.push(s[l])}for(;o.length;)s.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=r,Object.keys(r).forEach(o=>{const l=r[o];i.addEventListener(o,l),this.on("dispose",u=>i.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){Ui.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),ae.disposeMediaElement(e),e=i}else{e=Q.createElement("video");const i=this.options_.tag&&os(this.options_.tag),s=Qe({},i);(!vo||this.options_.nativeControlsForTouch!==!0)&&delete s.controls,W1(e,Object.assign(s,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&ea(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){const s=t[i],r=this.options_[s];typeof r<"u"&&(r?ea(e,s,s):Ou(e,s),e[s]=r)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1;const s=function(){i=!0};this.on("loadstart",s);const r=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",r),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",r),i||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Pu?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){Le(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Dn&&kn&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)gn(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}reset(){ae.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Q.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let i=t.length;for(;i--;)(e===t[i]||e===t[i].track)&&this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),P.performance&&(e.creationTime=P.performance.now()),e}}Au(ae,"TEST_VID",function(){if(!aa())return;const n=Q.createElement("video"),e=Q.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n});ae.isSupported=function(){try{ae.TEST_VID.volume=.5}catch{return!1}return!!(ae.TEST_VID&&ae.TEST_VID.canPlayType)};ae.canPlayType=function(n){return ae.TEST_VID.canPlayType(n)};ae.canPlaySource=function(n,e){return ae.canPlayType(n.type)};ae.canControlVolume=function(){try{const n=ae.TEST_VID.volume;ae.TEST_VID.volume=n/2+.1;const e=n!==ae.TEST_VID.volume;return e&&ti?(P.setTimeout(()=>{ae&&ae.prototype&&(ae.prototype.featuresVolumeControl=n!==ae.TEST_VID.volume)}),!1):e}catch{return!1}};ae.canMuteVolume=function(){try{const n=ae.TEST_VID.muted;return ae.TEST_VID.muted=!n,ae.TEST_VID.muted?ea(ae.TEST_VID,"muted","muted"):Ou(ae.TEST_VID,"muted","muted"),n!==ae.TEST_VID.muted}catch{return!1}};ae.canControlPlaybackRate=function(){if(Dn&&kn&&Du<58)return!1;try{const n=ae.TEST_VID.playbackRate;return ae.TEST_VID.playbackRate=n/2+.1,n!==ae.TEST_VID.playbackRate}catch{return!1}};ae.canOverrideAttributes=function(){try{const n=()=>{};Object.defineProperty(Q.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(Q.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(Q.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(Q.createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0};ae.supportsNativeTextTracks=function(){return Pu||ti&&kn};ae.supportsNativeVideoTracks=function(){return!!(ae.TEST_VID&&ae.TEST_VID.videoTracks)};ae.supportsNativeAudioTracks=function(){return!!(ae.TEST_VID&&ae.TEST_VID.audioTracks)};ae.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,e]){Au(ae.prototype,n,()=>ae[e](),!0)});ae.prototype.featuresVolumeControl=ae.canControlVolume();ae.prototype.movingMediaElementInDOM=!ti;ae.prototype.featuresFullscreenResize=!0;ae.prototype.featuresProgressEvents=!0;ae.prototype.featuresTimeupdateEvents=!0;ae.prototype.featuresVideoFrameCallback=!!(ae.TEST_VID&&ae.TEST_VID.requestVideoFrameCallback);ae.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};ae.resetMediaElement=function(n){if(!n)return;const e=n.querySelectorAll("source");let t=e.length;for(;t--;)n.removeChild(e[t]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){ae.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){ae.prototype["set"+dt(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){ae.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){ae.prototype["set"+dt(n)]=function(e){this.el_[n]=e}});["pause","load","play"].forEach(function(n){ae.prototype[n]=function(){return this.el_[n]()}});we.withSourceHandlers(ae);ae.nativeSourceHandler={};ae.nativeSourceHandler.canPlayType=function(n){try{return ae.TEST_VID.canPlayType(n)}catch{return""}};ae.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return ae.nativeSourceHandler.canPlayType(n.type);if(n.src){const t=af(n.src);return ae.nativeSourceHandler.canPlayType(`video/${t}`)}return""};ae.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)};ae.nativeSourceHandler.dispose=function(){};ae.registerSourceHandler(ae.nativeSourceHandler);we.registerTech("Html5",ae);const qy=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Hc={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Fd=["tiny","xsmall","small","medium","large","xlarge","huge"],Sl={};Fd.forEach(n=>{const e=n.charAt(0)==="x"?`x-${n.substring(1)}`:n;Sl[n]=`vjs-layout-${e}`});const vD={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class tt extends V{constructor(e,t,i){if(e.id=e.id||t.id||`vjs_video_${nn()}`,t=Object.assign(tt.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.isFullscreen_=!1,this.log=B1(this.id_),this.fsApi_=Vl,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&os(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=tt.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),tf(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Ii(Q,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const s=Qe(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=s,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new P.DOMParser().parseFromString(V6,"image/svg+xml");if(o.querySelector("parsererror"))Le.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),vo&&this.addClass("vjs-touch-enabled"),ti||this.addClass("vjs-workinghover"),tt.players[this.id_]=this;const r=Ad.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),qt(Q,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),qt(Q,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),tt.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),j6(this),Kt.names.forEach(e=>{const t=Kt[e],i=this[t.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const s=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:s||(t=this.el_=super.createEl("div"));const r=os(e);if(s){for(t=this.el_=e,e=this.tag=Q.createElement("video");t.children.length;)e.appendChild(t.firstChild);Qa(t,"video-js")||Ks(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(o=>{try{e[o]=t[o]}catch{}})}if(e.setAttribute("tabindex","-1"),r.tabindex="-1",kn&&ku&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(o){s&&o==="class"||t.setAttribute(o,r[o]),s&&e.setAttribute(o,r[o])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),P.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=sy("vjs-styles-dimensions");const o=vs(".vjs-styles-defaults"),l=vs("head");l.insertBefore(this.styleEl_,o?o.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const a=e.getElementsByTagName("a");for(let o=0;o<a.length;o++){const l=a.item(o);Ks(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),kd(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){Le.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const i=e+"_";if(t===void 0)return this[i]||0;if(t===""||t==="auto"){this[i]=void 0,this.updateStyleEl_();return}const s=parseFloat(t);if(isNaN(s)){Le.error(`Improper value "${t}" supplied for for ${e}`);return}this[i]=s,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,qn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),g6(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(P.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,i,s;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";const r=i.split(":"),a=r[1]/r[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?s="dimensions-"+this.id():s=this.id()+"-dimensions",this.addClass(s),ry(this.styleEl_,`
      .${s} {
        width: ${e}px;
        height: ${t}px;
      }

      .${s}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const i=dt(e),s=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(we.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);const a={source:t,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${s}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Kt.names.forEach(l=>{const u=Kt[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[s]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=we.getTech(e);if(!o)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(Je(this,this.handleTechReady_),!0),eg.jsonToTextTracks(this.textTracksJson_||[],this.tech_),qy.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${dt(l)}_`](u))}),Object.keys(Hc).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${Hc[l]}_`].bind(this),event:u});return}this[`handleTech${Hc[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&kd(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Kt.names.forEach(e=>{const t=Kt[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=eg.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&Le.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":Ad}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const s=this.muted();this.muted(!0);const r=()=>{this.muted(s)};this.playTerminatedQueue_.push(r);const a=this.play();if(eo(a))return a.catch(o=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let i;if(e==="any"&&!this.muted()?(i=this.play(),eo(i)&&(i=i.catch(t))):e==="muted"&&!this.muted()?i=t():i=this.play(),!!eo(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,i="";typeof t!="string"&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=z6(this,t)),this.cache_.source=Qe({},e,{src:t,type:i});const s=this.cache_.sources.filter(l=>l.src&&l.src===t),r=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=os(a[l]);r.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!s.length?this.cache_.sources=r:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=r=>this.updateSourceCaches_(r);const i=this.currentSource().src,s=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(s)&&(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==i)&&(t=()=>{}),t(s),e.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?gn(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const i=this.el();let s=Q[this.fsApi_.fullscreenElement]===i;!s&&i.matches&&(s=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(s)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in F6)return B6(this.middleware_,this.tech_,e,t);if(e in rg)return sg(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw Le(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in N6)return M6(this.middleware_,this.tech_,e);if(e in rg)return sg(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(Le(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(Le(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(Le(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=gn){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(Pu||ti);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&i&&this.load();return}const s=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),s===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(s)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Ji(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Ji(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=Ji(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return py(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((i,s)=>{function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){r(),i()}function o(u,c){r(),s(c)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(r,r),l.then(i,s))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,i)=>{function s(){e.off("fullscreenerror",a),e.off("fullscreenchange",r)}function r(){s(),t()}function a(l,u){s(),i(u)}e.one("fullscreenchange",r),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(s,s),o.then(t,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Q[this.fsApi_.exitFullscreen]();return e&&gn(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Q.documentElement.style.overflow,Ii(Q,"keydown",this.boundFullWindowOnEscKey_),Q.documentElement.style.overflow="hidden",Ks(Q.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){xe.isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,qt(Q,"keydown",this.boundFullWindowOnEscKey_),Q.documentElement.style.overflow=this.docOrigOverflow,Lu(Q.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&P.documentPictureInPicture){const e=Q.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(ke("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),P.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(ty(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),t.addEventListener("pagehide",i=>{const s=i.target.querySelector(".video-js");e.parentNode.replaceChild(s,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Q&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(P.documentPictureInPicture&&P.documentPictureInPicture.window)return P.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Q)return Q.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(s=>{const r=s.tagName.toLowerCase();if(s.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return r==="input"?a.indexOf(s.type)===-1:["textarea"].indexOf(r)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=a=>xe.isEventKey(a,"f"),muteKey:s=a=>xe.isEventKey(a,"m"),playPauseKey:r=a=>xe.isEventKey(a,"k")||xe.isEventKey(a,"Space")}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const a=V.getComponent("FullscreenToggle");Q[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else s.call(this,e)?(e.preventDefault(),e.stopPropagation(),V.getComponent("MuteToggle").prototype.handleClick.call(this,e)):r.call(this,e)&&(e.preventDefault(),e.stopPropagation(),V.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let i=0,s=this.options_.techOrder;i<s.length;i++){const r=s[i];let a=we.getTech(r);if(a||(a=V.getComponent(r)),!a){Le.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,we.getTech(o)]).filter(([o,l])=>l?l.isSupported():(Le.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(o,l,u){let c;return o.some(h=>l.some(m=>{if(c=u(h,m),c)return!0})),c};let s;const r=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?s=i(e,t,r(a)):s=i(t,e,a),s||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=vy(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),O6(this,i[0],(s,r)=>{if(this.middleware_=r,t||(this.cache_.sources=i),this.updateSourceCaches_(s),this.src_(s)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}R6(r,this.tech_)}),i.length>1){const s=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},r=()=>{this.off("error",s)};this.one("error",s),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",s),this.off("playing",r)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?cy(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();gn(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),qn(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:i,remainingTimeDisplay:s}=this.controlBar||{},{seekBar:r}=i||{};e&&e.updateContent(),t&&t.updateContent(),s&&s.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(ys("beforeerror").forEach(t=>{const i=t(this,e);if(!(An(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new ei(e),this.addClass("vjs-error"),Le.error(`(CODE:${this.error_.code} ${ei.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),ys("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i;const s=Je(this,this.reportUserActivity),r=function(h){(h.screenX!==t||h.screenY!==i)&&(t=h.screenX,i=h.screenY,s())},a=function(){s(),this.clearInterval(e),e=this.setInterval(s,250)},o=function(h){s(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",r),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!ti&&!Dn&&(l.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",s),this.on("keyup",s);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const h=this.options_.inactivityTimeout;h<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach(s=>{s!==t&&s.el_&&!s.hasClass("vjs-hidden")&&(s.hide(),this.audioOnlyCache_.hiddenChildren.push(s))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),qn(this)&&this.trigger("languagechange"))}languages(){return Qe(tt.prototype.options_.languages,this.languages_)}toJSON(){const e=Qe(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let s=t[i];s=Qe(s),s.player=void 0,e.tracks[i]=s}return e}createModal(e,t){t=t||{},t.content=e||"";const i=new ua(this,t);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<Fd.length;i++){const s=Fd[i],r=this.breakpoints_[s];if(t<=r){if(e===s)return;e&&this.removeClass(Sl[e]),this.addClass(Sl[s]),this.breakpoint_=s;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},vD,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Sl[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=Qe(e);const{artist:s,artwork:r,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!r&&o&&(this.cache_.media.artwork=[{src:o,type:Kl(o)}]),i&&this.crossOrigin(i),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(h=>this.addRemoteTextTrack(h,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||s||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),r=>({kind:r.kind,label:r.label,language:r.language,src:r.src})),s={src:t,textTracks:i};return e&&(s.poster=e,s.artwork=[{src:s.poster,type:Kl(s.poster)}]),s}return Qe(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},i=os(e),s=i["data-setup"];if(Qa(e,"vjs-fill")&&(i.fill=!0),Qa(e,"vjs-fluid")&&(i.fluid=!0),s!==null){const[r,a]=n5(s||"{}");r&&Le.error(r),Object.assign(i,a)}if(Object.assign(t,i),e.hasChildNodes()){const r=e.childNodes;for(let a=0,o=r.length;a<o;a++){const l=r[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(os(l)):u==="track"&&t.tracks.push(os(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Kt.names.forEach(function(n){const e=Kt[n];tt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});tt.prototype.crossorigin=tt.prototype.crossOrigin;tt.players={};const Oa=P.navigator;tt.prototype.options_={techOrder:we.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Oa&&(Oa.languages&&Oa.languages[0]||Oa.userLanguage||Oa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,enableSmoothSeeking:!1};qy.forEach(function(n){tt.prototype[`handleTech${dt(n)}_`]=function(){return this.trigger(n)}});V.registerComponent("Player",tt);const Zl="plugin",Br="activePlugins_",Er={},Ql=n=>Er.hasOwnProperty(n),Cl=n=>Ql(n)?Er[n]:void 0,Gy=(n,e)=>{n[Br]=n[Br]||{},n[Br][e]=!0},Jl=(n,e,t)=>{const i=(t?"before":"")+"pluginsetup";n.trigger(i,e),n.trigger(i+":"+e.name,e)},bD=function(n,e){const t=function(){Jl(this,{name:n,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return Gy(this,n),Jl(this,{name:n,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},bg=(n,e)=>(e.prototype.name=n,function(...t){Jl(this,{name:n,plugin:e,instance:null},!0);const i=new e(this,...t);return this[n]=()=>i,Jl(this,i.getEventHash()),i});class hi{constructor(e){if(this.constructor===hi)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),tf(this),delete this.trigger,uy(this,this.constructor.defaultState),Gy(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return la(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Br][e]=!1,this.player=this.state=null,t[e]=bg(e,Er[e])}static isBasic(e){const t=typeof e=="string"?Cl(e):e;return typeof t=="function"&&!hi.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Ql(e))Le.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(tt.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return Er[e]=t,e!==Zl&&(hi.isBasic(t)?tt.prototype[e]=bD(e,t):tt.prototype[e]=bg(e,t)),t}static deregisterPlugin(e){if(e===Zl)throw new Error("Cannot de-register base plugin.");Ql(e)&&(delete Er[e],delete tt.prototype[e])}static getPlugins(e=Object.keys(Er)){let t;return e.forEach(i=>{const s=Cl(i);s&&(t=t||{},t[i]=s)}),t}static getPluginVersion(e){const t=Cl(e);return t&&t.VERSION||""}}hi.getPlugin=Cl;hi.BASE_PLUGIN_NAME=Zl;hi.registerPlugin(Zl,hi);tt.prototype.usingPlugin=function(n){return!!this[Br]&&this[Br][n]===!0};tt.prototype.hasPlugin=function(n){return!!Ql(n)};function TD(n,e){let t=!1;return function(...i){return t||Le.warn(n),t=!0,e.apply(this,i)}}function rn(n,e,t,i){return TD(`${e} is deprecated and will be removed in ${n}.0; please use ${t} instead.`,i)}const Wy=n=>n.indexOf("#")===0?n.slice(1):n;function j(n,e,t){let i=j.getPlayer(n);if(i)return e&&Le.warn(`Player "${n}" is already initialised. Options will not be applied.`),t&&i.ready(t),i;const s=typeof n=="string"?vs("#"+Wy(n)):n;if(!oa(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in s?s.getRootNode()instanceof P.ShadowRoot:!1)?s.getRootNode():s.ownerDocument.body;(!s.ownerDocument.defaultView||!a.contains(s))&&Le.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(s.parentNode&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),ys("beforesetup").forEach(l=>{const u=l(s,Qe(e));if(!An(u)||Array.isArray(u)){Le.error("please return an object in beforesetup hooks");return}e=Qe(e,u)});const o=V.getComponent("Player");return i=new o(s,e,t),ys("setup").forEach(l=>l(i)),i}j.hooks_=Hn;j.hooks=ys;j.hook=i6;j.hookOnce=n6;j.removeHook=M1;if(P.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&aa()){let n=vs(".vjs-styles-defaults");if(!n){n=sy("vjs-styles-defaults");const e=vs("head");e&&e.insertBefore(n,e.firstChild),ry(n,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}Pd(1,j);j.VERSION=Ad;j.options=tt.prototype.options_;j.getPlayers=()=>tt.players;j.getPlayer=n=>{const e=tt.players;let t;if(typeof n=="string"){const i=Wy(n),s=e[i];if(s)return s;t=vs("#"+i)}else t=n;if(oa(t)){const{player:i,playerId:s}=t;if(i||e[s])return i||e[s]}};j.getAllPlayers=()=>Object.keys(tt.players).map(n=>tt.players[n]).filter(Boolean);j.players=tt.players;j.getComponent=V.getComponent;j.registerComponent=(n,e)=>(we.isTech(e)&&Le.warn(`The ${n} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),V.registerComponent.call(V,n,e));j.getTech=we.getTech;j.registerTech=we.registerTech;j.use=L6;Object.defineProperty(j,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(j.middleware,"TERMINATOR",{value:Yl,writeable:!1,enumerable:!0});j.browser=o6;j.obj=a6;j.mergeOptions=rn(9,"videojs.mergeOptions","videojs.obj.merge",Qe);j.defineLazyProperty=rn(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Au);j.bind=rn(9,"videojs.bind","native Function.prototype.bind",Je);j.registerPlugin=hi.registerPlugin;j.deregisterPlugin=hi.deregisterPlugin;j.plugin=(n,e)=>(Le.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),hi.registerPlugin(n,e));j.getPlugins=hi.getPlugins;j.getPlugin=hi.getPlugin;j.getPluginVersion=hi.getPluginVersion;j.addLanguage=function(n,e){return n=(""+n).toLowerCase(),j.options.languages=Qe(j.options.languages,{[n]:e}),j.options.languages[n]};j.log=Le;j.createLogger=B1;j.time=T6;j.createTimeRange=rn(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Ji);j.createTimeRanges=rn(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Ji);j.formatTime=rn(9,"videojs.formatTime","videojs.time.formatTime",sr);j.setFormatTime=rn(9,"videojs.setFormatTime","videojs.time.setFormatTime",hy);j.resetFormatTime=rn(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",fy);j.parseUrl=rn(9,"videojs.parseUrl","videojs.url.parseUrl",rf);j.isCrossOrigin=rn(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Uu);j.EventTarget=Hi;j.any=ef;j.on=Ii;j.one=Nu;j.off=qt;j.trigger=la;j.xhr=U_;j.TextTrack=Lo;j.AudioTrack=_y;j.VideoTrack=yy;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{j[n]=function(){return Le.warn(`videojs.${n}() is deprecated; use videojs.dom.${n}() instead`),iy[n].apply(null,arguments)}});j.computedStyle=rn(9,"videojs.computedStyle","videojs.dom.computedStyle",ia);j.dom=iy;j.fn=m6;j.num=Q6;j.str=v6;j.url=I6;/*! @name videojs-contrib-quality-levels @version 4.0.0 @license Apache-2.0 */class xD{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(i){t.enabled_(i)}}),t}}class eu extends j.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const i=this.levels_.length;return t=new xD(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,s=this.length;i<s;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){const s=this[t];if(s.id===e)return s}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}eu.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const n in eu.prototype.allowedEvents_)eu.prototype["on"+n]=null;var Xy="4.0.0";const wD=function(n,e){const t=n.qualityLevels,i=new eu,s=function(){i.dispose(),n.qualityLevels=t,n.off("dispose",s)};return n.on("dispose",s),n.qualityLevels=()=>i,n.qualityLevels.VERSION=Xy,i},Yy=function(n){return wD(this,j.obj.merge({},n))};j.registerPlugin("qualityLevels",Yy);Yy.VERSION=Xy;/*! @name @videojs/http-streaming @version 3.10.0 @license Apache-2.0 */const ai=bu,tu=(n,e)=>e&&e.responseURL&&n!==e.responseURL?e.responseURL:n,zi=n=>j.log.debug?j.log.debug.bind(j,"VHS:",`${n} >`):function(){};function Fe(...n){const e=j.obj||j;return(e.merge||e.mergeOptions).apply(e,n)}function Ht(...n){const e=j.time||j;return(e.createTimeRanges||e.createTimeRanges).apply(e,n)}const _n=1/30,yn=_n*3,Ky=function(n,e){const t=[];let i;if(n&&n.length)for(i=0;i<n.length;i++)e(n.start(i),n.end(i))&&t.push([n.start(i),n.end(i)]);return Ht(t)},Ar=function(n,e){return Ky(n,function(t,i){return t-yn<=e&&i+yn>=e})},fl=function(n,e){return Ky(n,function(t){return t-_n>=e})},SD=function(n){if(n.length<2)return Ht();const e=[];for(let t=1;t<n.length;t++){const i=n.end(t-1),s=n.start(t);e.push([i,s])}return Ht(e)},CD=function(n,e){let t=null,i=null,s=0;const r=[],a=[];if(!n||!n.length||!e||!e.length)return Ht();let o=n.length;for(;o--;)r.push({time:n.start(o),type:"start"}),r.push({time:n.end(o),type:"end"});for(o=e.length;o--;)r.push({time:e.start(o),type:"start"}),r.push({time:e.end(o),type:"end"});for(r.sort(function(l,u){return l.time-u.time}),o=0;o<r.length;o++)r[o].type==="start"?(s++,s===2&&(t=r[o].time)):r[o].type==="end"&&(s--,s===1&&(i=r[o].time)),t!==null&&i!==null&&(a.push([t,i]),t=null,i=null);return Ht(a)},Zy=n=>{const e=[];if(!n||!n.length)return"";for(let t=0;t<n.length;t++)e.push(n.start(t)+" => "+n.end(t));return e.join(", ")},ED=function(n,e,t=1){return((n.length?n.end(n.length-1):0)-e)/t},zs=n=>{const e=[];for(let t=0;t<n.length;t++)e.push({start:n.start(t),end:n.end(t)});return e},AD=function(n,e){if(n===e)return!1;if(!n&&e||!e&&n||n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n.start(t)!==e.start(t)||n.end(t)!==e.end(t))return!0;return!1},Tg=function(n){if(!(!n||!n.length||!n.end))return n.end(n.length-1)},wf=function(n,e){let t=0;if(!n||!n.length)return t;for(let i=0;i<n.length;i++){const s=n.start(i),r=n.end(i);if(!(e>r)){if(e>s&&e<=r){t+=r-e;continue}t+=r-s}}return t},Sf=(n,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(i){t+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(t+=n.partTargetDuration)}),t},Ud=n=>(n.segments||[]).reduce((e,t,i)=>(t.parts?t.parts.forEach(function(s,r){e.push({duration:s.duration,segmentIndex:i,partIndex:r,part:s,segment:t})}):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e),[]),Qy=n=>{const e=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return e&&e.parts||[]},Jy=({preloadSegment:n})=>{if(!n)return;const{parts:e,preloadHints:t}=n;let i=(t||[]).reduce((s,r)=>s+(r.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},e2=(n,e)=>{if(e.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;const t=Qy(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},DD=function(n,e){let t=0,i=e-n.mediaSequence,s=n.segments[i];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;i--;){if(s=n.segments[i],typeof s.end<"u")return{result:t+s.end,precise:!0};if(t+=Sf(n,s),typeof s.start<"u")return{result:t+s.start,precise:!0}}return{result:t,precise:!1}},kD=function(n,e){let t=0,i,s=e-n.mediaSequence;for(;s<n.segments.length;s++){if(i=n.segments[s],typeof i.start<"u")return{result:i.start-t,precise:!0};if(t+=Sf(n,i),typeof i.end<"u")return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}},t2=function(n,e,t){if(typeof e>"u"&&(e=n.mediaSequence+n.segments.length),e<n.mediaSequence)return 0;const i=DD(n,e);if(i.precise)return i.result;const s=kD(n,e);return s.precise?s.result:i.result+t},i2=function(n,e,t){if(!n)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(n.totalDuration)return n.totalDuration;if(!n.endList)return P.Infinity}return t2(n,e,t)},to=function({defaultDuration:n,durationList:e,startIndex:t,endIndex:i}){let s=0;if(t>i&&([t,i]=[i,t]),t<0){for(let r=t;r<Math.min(0,i);r++)s+=n;t=0}for(let r=t;r<i;r++)s+=e[r].duration;return s},n2=function(n,e,t,i){if(!n||!n.segments)return null;if(n.endList)return i2(n);if(e===null)return null;e=e||0;let s=t2(n,n.mediaSequence+n.segments.length,e);return t&&(i=typeof i=="number"?i:e2(null,n),s-=i),Math.max(0,s)},ID=function(n,e,t){const s=e||0;let r=n2(n,e,!0,t);return r===null?Ht():(r<s&&(r=s),Ht(s,r))},PD=function({playlist:n,currentTime:e,startingSegmentIndex:t,startingPartIndex:i,startTime:s,exactManifestTimings:r}){let a=e-s;const o=Ud(n);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof i=="number"&&typeof c.partIndex=="number"&&i!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,r){if(a<0)continue}else if(a+_n<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:s-to({defaultDuration:n.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=n.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>_n,m=a===0,y=h&&a+_n>=0;if(!((m||y)&&u!==o.length-1)){if(r){if(a>0)continue}else if(a-_n>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:s+to({defaultDuration:n.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},s2=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},Cf=function(n){return n.excludeUntil&&n.excludeUntil===1/0},Hu=function(n){const e=s2(n);return!n.disabled&&!e},LD=function(n){return n.disabled},OD=function(n){for(let e=0;e<n.segments.length;e++)if(n.segments[e].key)return!0;return!1},r2=function(n,e){return e.attributes&&e.attributes[n]},RD=function(n,e,t,i=0){return r2("BANDWIDTH",t)?(n*t.attributes.BANDWIDTH-i*8)/e:NaN},jd=(n,e)=>{if(n.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return n.playlists.filter(i=>Hu(i)?(i.attributes.BANDWIDTH||0)<t:!1).length===0},Ef=(n,e)=>!n&&!e||!n&&e||n&&!e?!1:!!(n===e||n.id&&e.id&&n.id===e.id||n.resolvedUri&&e.resolvedUri&&n.resolvedUri===e.resolvedUri||n.uri&&e.uri&&n.uri===e.uri),xg=function(n,e){const t=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{};let i=!1;for(const s in t){for(const r in t[s])if(i=e(t[s][r]),i)break;if(i)break}return!!i},Bo=n=>{if(!n||!n.playlists||!n.playlists.length)return xg(n,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<n.playlists.length;e++){const t=n.playlists[e],i=t.attributes&&t.attributes.CODECS;if(!(i&&i.split(",").every(r=>q_(r))||xg(n,r=>Ef(t,r))))return!1}return!0};var oi={liveEdgeDelay:e2,duration:i2,seekable:ID,getMediaInfoForTime:PD,isEnabled:Hu,isDisabled:LD,isExcluded:s2,isIncompatible:Cf,playlistEnd:n2,isAes:OD,hasAttribute:r2,estimateSegmentRequestTime:RD,isLowestEnabledRendition:jd,isAudioOnly:Bo,playlistMatch:Ef,segmentDurationWithParts:Sf};const{log:a2}=j,Nr=(n,e)=>`${n}-${e}`,o2=(n,e,t)=>`placeholder-uri-${n}-${e}-${t}`,MD=({onwarn:n,oninfo:e,manifestString:t,customTagParsers:i=[],customTagMappers:s=[],llhls:r})=>{const a=new J5;n&&a.on("warn",n),e&&a.on("info",e),i.forEach(u=>a.addParser(u)),s.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(r||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),n&&n({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=Qy(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);n&&(n({message:`manifest has no partTargetDuration defaulting to ${u}`}),a2.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},ha=(n,e)=>{n.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(n.mediaGroups[t])for(const i in n.mediaGroups[t])for(const s in n.mediaGroups[t][i]){const r=n.mediaGroups[t][i][s];e(r,t,i,s)}})},l2=({playlist:n,uri:e,id:t})=>{n.id=t,n.playlistErrors_=0,e&&(n.uri=e),n.attributes=n.attributes||{}},BD=n=>{let e=n.playlists.length;for(;e--;){const t=n.playlists[e];l2({playlist:t,id:Nr(e,t.uri)}),t.resolvedUri=ai(n.uri,t.uri),n.playlists[t.id]=t,n.playlists[t.uri]=t,t.attributes.BANDWIDTH||a2.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},ND=n=>{ha(n,e=>{e.uri&&(e.resolvedUri=ai(n.uri,e.uri))})},FD=(n,e)=>{const t=Nr(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:P.location.href,resolvedUri:P.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return i.playlists[t]=i.playlists[0],i.playlists[e]=i.playlists[0],i},u2=(n,e,t=o2)=>{n.uri=e;for(let s=0;s<n.playlists.length;s++)if(!n.playlists[s].uri){const r=`placeholder-uri-${s}`;n.playlists[s].uri=r}const i=Bo(n);ha(n,(s,r,a,o)=>{if(!s.playlists||!s.playlists.length){if(i&&r==="AUDIO"&&!s.uri)for(let l=0;l<n.playlists.length;l++){const u=n.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}s.playlists=[Zi({},s)]}s.playlists.forEach(function(l,u){const c=t(r,a,o,l),h=Nr(u,c);l.uri?l.resolvedUri=l.resolvedUri||ai(n.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},n.playlists[l.id]=l,n.playlists[l.uri]=l})}),BD(n),ND(n)};class wg{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,i=t.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((s,r)=>(s.set(r.id,r),s),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((i,s)=>{if(!this.processedDateRanges_.has(s)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),t.push(i),!!i.class))if(e[i.class]){const r=e[i.class].push(i);i.classListIndex=r-1}else e[i.class]=[i],i.classListIndex=0});for(const i of t){const s=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&s[i.classListIndex+1]?i.endTime=s[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,s)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(s)})}}const{EventTarget:UD}=j,jD=(n,e)=>{if(e.endList||!e.serverControl)return n;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:i}=e;let s=e.mediaSequence+e.segments.length;if(i){const r=i.parts||[],a=Jy(e)-1;a>-1&&a!==r.length-1&&(t._HLS_part=a),(a>-1||r.length)&&s--}t._HLS_msn=s}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const i=new P.URL(n);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(s){t.hasOwnProperty(s)&&i.searchParams.set(s,t[s])}),n=i.toString()}return n},$D=(n,e)=>{if(!n)return e;const t=Fe(n,e);if(n.preloadHints&&!e.preloadHints&&delete t.preloadHints,n.parts&&!e.parts)delete t.parts;else if(n.parts&&e.parts)for(let i=0;i<e.parts.length;i++)n.parts&&n.parts[i]&&(t.parts[i]=Fe(n.parts[i],e.parts[i]));return!n.skipped&&e.skipped&&(t.skipped=!1),n.preload&&!e.preload&&(t.preload=!1),t},HD=(n,e,t)=>{const i=n.slice(),s=e.slice();t=t||0;const r=[];let a;for(let o=0;o<s.length;o++){const l=i[o+t],u=s[o];l?(a=l.map||a,r.push($D(l,u))):(a&&!u.map&&(u.map=a),r.push(u))}return r},c2=(n,e)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=ai(e,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=ai(e,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=ai(e,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=ai(e,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=ai(e,t.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=ai(e,t.uri))})},d2=function(n){const e=n.segments||[],t=n.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let i=0;i<t.preloadHints.length;i++)if(t.preloadHints[i].type==="MAP")return e}t.duration=n.targetDuration,t.preload=!0,e.push(t)}return e},h2=(n,e)=>n===e||n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence&&n.preloadSegment===e.preloadSegment,$d=(n,e,t=h2)=>{const i=Fe(n,{}),s=i.playlists[e.id];if(!s||t(s,e))return null;e.segments=d2(e);const r=Fe(s,e);if(r.preloadSegment&&!e.preloadSegment&&delete r.preloadSegment,s.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}r.segments=HD(s.segments,e.segments,e.mediaSequence-s.mediaSequence)}r.segments.forEach(a=>{c2(a,r.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===e.id&&(i.playlists[a]=r);return i.playlists[e.id]=r,i.playlists[e.uri]=r,ha(n,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=r)}),i},Hd=(n,e)=>{const t=n.segments||[],i=t[t.length-1],s=i&&i.parts&&i.parts[i.parts.length-1],r=s&&s.duration||i&&i.duration;return e&&r?r*1e3:(n.partTargetDuration||n.targetDuration||10)*500};class Dr extends UD{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=zi("PlaylistLoader");const{withCredentials:s=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=s,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const r=t.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new wg,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=ai(this.main.uri,e.uri);this.llhls&&(t=jD(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},(i,s)=>{if(this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,i){const{uri:s,id:r}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${s}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return MD({onwarn:({message:i})=>this.logger_(`m3u8-parser warn for ${e}: ${i}`),oninfo:({message:i})=>this.logger_(`m3u8-parser info for ${e}: ${i}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:i,id:s}){this.request=null,this.state="HAVE_METADATA";const r=t||this.parseManifest_({url:i,manifestString:e});r.lastRequest=Date.now(),l2({playlist:r,uri:i,id:s});const a=$d(this.main,r);this.targetDuration=r.partTargetDuration||r.targetDuration,this.pendingMedia_=null,a?(this.main=a,this.media_=this.main.playlists[s]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Hd(this.media(),!!a)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),P.clearTimeout(this.mediaUpdateTimeout),P.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new wg,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(P.clearTimeout(this.finalRenditionTimeout),t){const a=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=P.setTimeout(this.media.bind(this,e,!1),a);return}const i=this.state,s=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Hd(e,!0)),!!s){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(a,o)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=tu(e.resolvedUri,o),a)return this.playlistRequestError(this.request,e,i);this.haveMetadata({playlistString:o.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}pause(){this.mediaUpdateTimeout&&(P.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(P.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const i=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=P.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(P.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=P.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=P.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.src=tu(this.src,t);const i=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,u2(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=d2(i),i.segments.forEach(s=>{c2(s,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||P.location.href;this.main=FD(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const i=this.main,s=e.ID;let r=i.playlists.length;for(;r--;){const a=i.playlists[r];if(a.attributes["PATHWAY-ID"]===s){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=Nr(s,u),h=this.createCloneAttributes_(s,a.attributes),m=this.createClonePlaylist_(a,c,e,h);i.playlists[r]=m,i.playlists[c]=m,i.playlists[u]=m}else i.playlists.splice(r,1);delete i.playlists[l],delete i.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const i=this.main,s=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!i.mediaGroups[r]||!i.mediaGroups[r][s])){for(const a in i.mediaGroups[r])if(a===s){for(const o in i.mediaGroups[r][a])i.mediaGroups[r][a][o].playlists.forEach((u,c)=>{const h=i.playlists[u.id],m=h.id,y=h.resolvedUri;delete i.playlists[m],delete i.playlists[y]});delete i.mediaGroups[r][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const i=this.main,s=i.playlists.length,r=this.createCloneURI_(t.resolvedUri,e),a=Nr(e.ID,r),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);i.playlists[s]=l,i.playlists[a]=l,i.playlists[r]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,i=e["BASE-ID"],s=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!s.mediaGroups[r]||s.mediaGroups[r][t]))for(const a in s.mediaGroups[r]){if(a===i)s.mediaGroups[r][t]={};else continue;for(const o in s.mediaGroups[r][a]){const l=s.mediaGroups[r][a][o];s.mediaGroups[r][t][o]=Zi({},l);const u=s.mediaGroups[r][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,m)=>{const y=s.playlists[h.id],_=o2(r,t,o),b=Nr(t,_);if(y&&!s.playlists[b]){const x=this.createClonePlaylist_(y,b,e),S=x.resolvedUri;s.playlists[b]=x,s.playlists[S]=x}u.playlists[m]=this.createClonePlaylist_(h,b,e)})}}})}createClonePlaylist_(e,t,i,s){const r=this.createCloneURI_(e.resolvedUri,i),a={resolvedUri:r,uri:r,id:t};return e.segments&&(a.segments=[]),s&&(a.attributes=s),Fe(e,a)}createCloneURI_(e,t){const i=new URL(e);i.hostname=t["URI-REPLACEMENT"].HOST;const s=t["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(s))i.searchParams.set(r,s[r]);return i.href}createCloneAttributes_(e,t){const i={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{t[s]&&(i[s]=e)}),i}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const i in e.contentProtection){const s=e.contentProtection[i].attributes.keyId;s&&t.add(s.toLowerCase())}return t}}}const{xhr:zD}=j,zd=function(n,e,t,i){const s=n.responseType==="arraybuffer"?n.response:n.responseText;!e&&s&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=s.byteLength||s.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),t.headers&&(n.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(n.timedout=!0),!e&&!n.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(n&&(s||n.responseText)))),i(e,n)},VD=(n,e)=>{if(!n||!n.size)return;let t=e;return n.forEach(i=>{t=i(t)}),t},qD=(n,e,t,i)=>{!n||!n.size||n.forEach(s=>{s(e,t,i)})},f2=function(){const n=function e(t,i){t=Fe({timeout:45e3},t);const s=e.beforeRequest||j.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||j.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||j.Vhs.xhr._responseCallbackSet;s&&typeof s=="function"&&(j.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(s));const o=j.Vhs.xhr.original===!0?zD:j.Vhs.xhr,l=VD(r,t);r.delete(s);const u=o(l||t,function(h,m){return qD(a,u,h,m),zd(u,h,m,i)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestTime=Date.now(),u};return n.original=!0,n},GD=function(n){let e;const t=n.offset;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=P.BigInt(n.offset)+P.BigInt(n.length)-P.BigInt(1):e=n.offset+n.length-1,"bytes="+t+"-"+e},Vd=function(n){const e={};return n.byterange&&(e.Range=GD(n.byterange)),e},WD=function(n,e){return n.start(e)+"-"+n.end(e)},XD=function(n,e){const t=n.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},YD=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},p2=function(n){const e={};return Object.keys(n).forEach(t=>{const i=n[t];W_(i)?e[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[t]=i}),e},iu=function(n){const e=n.byterange||{length:1/0,offset:0};return[e.length,e.offset,n.resolvedUri].join(",")},m2=function(n){return n.resolvedUri},g2=n=>{const e=Array.prototype.slice.call(n),t=16;let i="",s,r;for(let a=0;a<e.length/t;a++)s=e.slice(a*t,a*t+t).map(XD).join(""),r=e.slice(a*t,a*t+t).map(YD).join(""),i+=s+" "+r+`
`;return i},KD=({bytes:n})=>g2(n),ZD=n=>{let e="",t;for(t=0;t<n.length;t++)e+=WD(n,t)+" ";return e};var QD=Object.freeze({__proto__:null,createTransferableMessage:p2,initSegmentId:iu,segmentKeyId:m2,hexDump:g2,tagDump:KD,textRanges:ZD});const _2=.25,JD=(n,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,s=e.videoTimingInfo.transmuxedPresentationStart+t,r=n-s;return new Date(e.dateTimeObject.getTime()+r*1e3)},ek=n=>n.transmuxedPresentationEnd-n.transmuxedPresentationStart-n.transmuxerPrependedSeconds,tk=(n,e)=>{let t;try{t=new Date(n)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(t<new Date(i.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){i=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const s=e.segments[e.segments.length-1],r=s.dateTimeObject,a=s.videoTimingInfo?ek(s.videoTimingInfo):s.duration+s.duration*_2,o=new Date(r.getTime()+a*1e3);return t>o?null:(t>new Date(r)&&(i=s),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:oi.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},ik=(n,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,i;for(let r=0;r<e.segments.length&&(i=e.segments[r],t=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:t+i.duration,!(n<=t));r++);const s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<n)return null;if(n>t){if(n>t+s.duration*_2)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:t-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},nk=(n,e)=>{let t,i;try{t=new Date(n),i=new Date(e)}catch{}const s=t.getTime();return(i.getTime()-s)/1e3},sk=n=>{if(!n.segments||n.segments.length===0)return!1;for(let e=0;e<n.segments.length;e++)if(!n.segments[e].dateTimeObject)return!1;return!0},rk=({playlist:n,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const i=ik(e,n);if(!i)return t({message:"valid programTime was not found"});if(i.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const s={mediaSeconds:e},r=JD(e,i.segment);return r&&(s.programDateTime=r.toISOString()),t(null,s)},y2=({programTime:n,playlist:e,retryCount:t=2,seekTo:i,pauseAfterSeek:s=!0,tech:r,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof n>"u"||!e||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!r.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!sk(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=tk(n,e);if(!o)return a({message:`${n} was not found in the stream`});const l=o.segment,u=nk(l.dateTimeObject,n);if(o.type==="estimate"){if(t===0)return a({message:`${n} is not buffered yet. Try again`});i(o.estimatedStart+u),r.one("seeked",()=>{y2({programTime:n,playlist:e,retryCount:t-1,seekTo:i,pauseAfterSeek:s,tech:r,callback:a})});return}const c=l.start+u,h=()=>a(null,r.currentTime());r.one("seeked",h),s&&r.pause(),i(c)},zc=(n,e)=>{if(n.readyState===4)return e()},ak=(n,e,t)=>{let i=[],s,r=!1;const a=function(c,h,m,y){return h.abort(),r=!0,t(c,h,m,y)},o=function(c,h){if(r)return;if(c)return a(c,h,"",i);const m=h.responseText.substring(i&&i.byteLength||0,h.responseText.length);if(i=d8(i,X_(m,!0)),s=s||za(i),i.length<10||s&&i.length<s+2)return zc(h,()=>a(c,h,"",i));const y=qh(i);return y==="ts"&&i.length<188?zc(h,()=>a(c,h,"",i)):!y&&i.length<376?zc(h,()=>a(c,h,"",i)):a(null,h,y,i)},u=e({uri:n,beforeSend(c){c.overrideMimeType("text/plain; charset=x-user-defined"),c.addEventListener("progress",function({total:h,loaded:m}){return zd(c,null,{statusCode:c.status},o)})}},function(c,h){return zd(u,c,h,o)});return u},{EventTarget:ok}=j,Sg=function(n,e){if(!h2(n,e)||n.sidx&&e.sidx&&(n.sidx.offset!==e.sidx.offset||n.sidx.length!==e.sidx.length))return!1;if(!n.sidx&&e.sidx||n.sidx&&!e.sidx||n.segments&&!e.segments||!n.segments&&e.segments)return!1;if(!n.segments&&!e.segments)return!0;for(let t=0;t<n.segments.length;t++){const i=n.segments[t],s=e.segments[t];if(i.uri!==s.uri)return!1;if(!i.byterange&&!s.byterange)continue;const r=i.byterange,a=s.byterange;if(r&&!a||!r&&a||r.offset!==a.offset||r.length!==a.length)return!1}return!0},lk=(n,e,t,i)=>{const s=i.attributes.NAME||t;return`placeholder-uri-${n}-${e}-${s}`},uk=({mainXml:n,srcUrl:e,clientOffset:t,sidxMapping:i,previousManifest:s})=>{const r=RA(n,{manifestUri:e,clientOffset:t,sidxMapping:i,previousManifest:s});return u2(r,e,lk),r},ck=(n,e)=>{ha(n,(t,i,s,r)=>{r in e.mediaGroups[i][s]||delete n.mediaGroups[i][s][r]})},dk=(n,e,t)=>{let i=!0,s=Fe(n,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let r=0;r<e.playlists.length;r++){const a=e.playlists[r];if(a.sidx){const l=Su(a.sidx);t&&t[l]&&t[l].sidx&&Hh(a,t[l].sidx,a.sidx.resolvedUri)}const o=$d(s,a,Sg);o&&(s=o,i=!1)}return ha(e,(r,a,o,l)=>{if(r.playlists&&r.playlists.length){const u=r.playlists[0].id,c=$d(s,r.playlists[0],Sg);c&&(s=c,l in s.mediaGroups[a][o]||(s.mediaGroups[a][o][l]=r),s.mediaGroups[a][o][l].playlists[0]=s.playlists[u],i=!1)}}),ck(s,e),e.minimumUpdatePeriod!==n.minimumUpdatePeriod&&(i=!1),i?null:s},hk=(n,e)=>(!n.map&&!e.map||!!(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length,Cg=(n,e)=>{const t={};for(const i in n){const r=n[i].sidx;if(r){const a=Su(r);if(!e[a])break;const o=e[a].sidxInfo;hk(o,r)&&(t[a]=e[a])}}return t},fk=(n,e)=>{let i=Cg(n.playlists,e);return ha(n,(s,r,a,o)=>{if(s.playlists&&s.playlists.length){const l=s.playlists;i=Fe(i,Cg(l,e))}}),i};class qd extends ok{constructor(e,t,i={},s){super(),this.mainPlaylistLoader_=s||this,s||(this.isMain_=!0);const{withCredentials:r=!1}=i;if(this.vhs_=t,this.withCredentials=r,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=zi("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,t,i){const s=e.sidx&&Su(e.sidx);if(!e.sidx||!s||this.mainPlaylistLoader_.sidxMapping_[s]){this.mediaRequest_=P.setTimeout(()=>i(!1),0);return}const r=tu(e.sidx.resolvedUri),a=(o,l)=>{if(this.requestErrored_(o,l,t))return;const u=this.mainPlaylistLoader_.sidxMapping_;let c;try{c=jA(de(l.response).subarray(8))}catch(h){this.requestErrored_(h,l,t);return}return u[s]={sidxInfo:e.sidx,sidx:c},Hh(e,c,e.sidx.resolvedUri),i(!0)};this.request=ak(r,this.vhs_.xhr,(o,l,u,c)=>{if(o)return a(o,l);if(!u||u!=="mp4")return a({status:l.status,message:`Unsupported ${u||"unknown"} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},l);const{offset:h,length:m}=e.sidx.byterange;if(c.length>=m+h)return a(o,{response:c.subarray(h,h+m),status:l.status,uri:l.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",headers:Vd({byterange:e.sidx.byterange})},a)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},P.clearTimeout(this.minimumUpdatePeriodTimeout_),P.clearTimeout(this.mediaRequest_),P.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,s=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),P.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(P.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){P.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const i=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=P.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=P.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(t,i)=>{if(this.requestErrored_(t,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}const s=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=tu(this.mainPlaylistLoader_.srcUrl,i),s){this.handleMain_(),this.syncClientServerClock_(()=>e(i,s));return}return e(i,s)})}syncClientServerClock_(e){const t=MA(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:ai(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},(i,s)=>{if(!this.request)return;if(i)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let r;t.method==="HEAD"?!s.responseHeaders||!s.responseHeaders.date?r=this.mainLoaded_:r=Date.parse(s.responseHeaders.date):r=Date.parse(s.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=uk({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=dk(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(t),!!t}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(P.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=P.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=fk(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const s=()=>{this.media().endList||(this.mediaUpdateTimeout=P.setTimeout(()=>{this.trigger("mediaupdatetimeout"),s()},Hd(this.media(),!!i)))};s()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const i in e.contentProtection){const s=e.contentProtection[i].attributes["cenc:default_KID"];s&&t.add(s.replace(/-/g,"").toLowerCase())}return t}}}var kt={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const pk=n=>{const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer},v2=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},mk=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(n),URL.createObjectURL(t.getBlob())}},b2=function(n){return function(){const e=mk(n),t=v2(new Worker(e));t.objURL=e;const i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},T2=function(n){return`var browserWorkerPolyFill = ${v2.toString()};
browserWorkerPolyFill(self);
`+n},x2=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},gk=T2(x2(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var d={};this.on=function(f,g){d[f]||(d[f]=[]),d[f]=d[f].concat(g)},this.off=function(f,g){var p;return d[f]?(p=d[f].indexOf(g),d[f]=d[f].slice(),d[f].splice(p,1),p>-1):!1},this.trigger=function(f){var g,p,v,T;if(g=d[f],!!g)if(arguments.length===2)for(v=g.length,p=0;p<v;++p)g[p].call(this,arguments[1]);else{for(T=[],p=arguments.length,p=1;p<arguments.length;++p)T.push(arguments[p]);for(v=g.length,p=0;p<v;++p)g[p].apply(this,T)}},this.dispose=function(){d={}}}};e.prototype.pipe=function(d){return this.on("data",function(f){d.push(f)}),this.on("done",function(f){d.flush(f)}),this.on("partialdone",function(f){d.partialFlush(f)}),this.on("endedtimeline",function(f){d.endTimeline(f)}),this.on("reset",function(f){d.reset(f)}),d},e.prototype.push=function(d){this.trigger("data",d)},e.prototype.flush=function(d){this.trigger("done",d)},e.prototype.partialFlush=function(d){this.trigger("partialdone",d)},e.prototype.endTimeline=function(d){this.trigger("endedtimeline",d)},e.prototype.reset=function(d){this.trigger("reset",d)};var t=e,i=Math.pow(2,32),s=function(d){var f=new DataView(d.buffer,d.byteOffset,d.byteLength),g;return f.getBigUint64?(g=f.getBigUint64(0),g<Number.MAX_SAFE_INTEGER?Number(g):g):f.getUint32(0)*i+f.getUint32(4)},r={getUint64:s,MAX_UINT32:i},a=r.MAX_UINT32,o,l,u,c,h,m,y,_,b,x,S,w,A,k,C,R,N,H,M,ie,ee,K,q,J,be,ue,he,pe,vt,Ae,ft,at,jt,Ge,At,X;(function(){var d;if(q={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(d in q)q.hasOwnProperty(d)&&(q[d]=[d.charCodeAt(0),d.charCodeAt(1),d.charCodeAt(2),d.charCodeAt(3)]);J=new Uint8Array([105,115,111,109]),ue=new Uint8Array([97,118,99,49]),be=new Uint8Array([0,0,0,1]),he=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),pe=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),vt={video:he,audio:pe},at=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ft=new Uint8Array([0,0,0,0,0,0,0,0]),jt=new Uint8Array([0,0,0,0,0,0,0,0]),Ge=jt,At=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),X=jt,Ae=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(d){var f=[],g=0,p,v,T;for(p=1;p<arguments.length;p++)f.push(arguments[p]);for(p=f.length;p--;)g+=f[p].byteLength;for(v=new Uint8Array(g+8),T=new DataView(v.buffer,v.byteOffset,v.byteLength),T.setUint32(0,v.byteLength),v.set(d,4),p=0,g=8;p<f.length;p++)v.set(f[p],g),g+=f[p].byteLength;return v},l=function(){return o(q.dinf,o(q.dref,at))},u=function(d){return o(q.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},c=function(){return o(q.ftyp,J,be,J,ue)},R=function(d){return o(q.hdlr,vt[d])},h=function(d){return o(q.mdat,d)},C=function(d){var f=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(f[12]=d.samplerate>>>24&255,f[13]=d.samplerate>>>16&255,f[14]=d.samplerate>>>8&255,f[15]=d.samplerate&255),o(q.mdhd,f)},k=function(d){return o(q.mdia,C(d),R(d.type),y(d))},m=function(d){return o(q.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},y=function(d){return o(q.minf,d.type==="video"?o(q.vmhd,Ae):o(q.smhd,ft),l(),H(d))},_=function(d,f){for(var g=[],p=f.length;p--;)g[p]=ie(f[p]);return o.apply(null,[q.moof,m(d)].concat(g))},b=function(d){for(var f=d.length,g=[];f--;)g[f]=w(d[f]);return o.apply(null,[q.moov,S(4294967295)].concat(g).concat(x(d)))},x=function(d){for(var f=d.length,g=[];f--;)g[f]=ee(d[f]);return o.apply(null,[q.mvex].concat(g))},S=function(d){var f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(q.mvhd,f)},N=function(d){var f=d.samples||[],g=new Uint8Array(4+f.length),p,v;for(v=0;v<f.length;v++)p=f[v].flags,g[v+4]=p.dependsOn<<4|p.isDependedOn<<2|p.hasRedundancy;return o(q.sdtp,g)},H=function(d){return o(q.stbl,M(d),o(q.stts,X),o(q.stsc,Ge),o(q.stsz,At),o(q.stco,jt))},function(){var d,f;M=function(g){return o(q.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),g.type==="video"?d(g):f(g))},d=function(g){var p=g.sps||[],v=g.pps||[],T=[],E=[],D,I;for(D=0;D<p.length;D++)T.push((p[D].byteLength&65280)>>>8),T.push(p[D].byteLength&255),T=T.concat(Array.prototype.slice.call(p[D]));for(D=0;D<v.length;D++)E.push((v[D].byteLength&65280)>>>8),E.push(v[D].byteLength&255),E=E.concat(Array.prototype.slice.call(v[D]));if(I=[q.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(g.width&65280)>>8,g.width&255,(g.height&65280)>>8,g.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(q.avcC,new Uint8Array([1,g.profileIdc,g.profileCompatibility,g.levelIdc,255].concat([p.length],T,[v.length],E))),o(q.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],g.sarRatio){var L=g.sarRatio[0],B=g.sarRatio[1];I.push(o(q.pasp,new Uint8Array([(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255,(B&4278190080)>>24,(B&16711680)>>16,(B&65280)>>8,B&255])))}return o.apply(null,I)},f=function(g){return o(q.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(g.channelcount&65280)>>8,g.channelcount&255,(g.samplesize&65280)>>8,g.samplesize&255,0,0,0,0,(g.samplerate&65280)>>8,g.samplerate&255,0,0]),u(g))}}(),A=function(d){var f=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return o(q.tkhd,f)},ie=function(d){var f,g,p,v,T,E,D;return f=o(q.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),E=Math.floor(d.baseMediaDecodeTime/a),D=Math.floor(d.baseMediaDecodeTime%a),g=o(q.tfdt,new Uint8Array([1,0,0,0,E>>>24&255,E>>>16&255,E>>>8&255,E&255,D>>>24&255,D>>>16&255,D>>>8&255,D&255])),T=92,d.type==="audio"?(p=K(d,T),o(q.traf,f,g,p)):(v=N(d),p=K(d,v.length+T),o(q.traf,f,g,p,v))},w=function(d){return d.duration=d.duration||4294967295,o(q.trak,A(d),k(d))},ee=function(d){var f=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(f[f.length-1]=0),o(q.trex,f)},function(){var d,f,g;g=function(p,v){var T=0,E=0,D=0,I=0;return p.length&&(p[0].duration!==void 0&&(T=1),p[0].size!==void 0&&(E=2),p[0].flags!==void 0&&(D=4),p[0].compositionTimeOffset!==void 0&&(I=8)),[0,0,T|E|D|I,1,(p.length&4278190080)>>>24,(p.length&16711680)>>>16,(p.length&65280)>>>8,p.length&255,(v&4278190080)>>>24,(v&16711680)>>>16,(v&65280)>>>8,v&255]},f=function(p,v){var T,E,D,I,L,B;for(I=p.samples||[],v+=20+16*I.length,D=g(I,v),E=new Uint8Array(D.length+I.length*16),E.set(D),T=D.length,B=0;B<I.length;B++)L=I[B],E[T++]=(L.duration&4278190080)>>>24,E[T++]=(L.duration&16711680)>>>16,E[T++]=(L.duration&65280)>>>8,E[T++]=L.duration&255,E[T++]=(L.size&4278190080)>>>24,E[T++]=(L.size&16711680)>>>16,E[T++]=(L.size&65280)>>>8,E[T++]=L.size&255,E[T++]=L.flags.isLeading<<2|L.flags.dependsOn,E[T++]=L.flags.isDependedOn<<6|L.flags.hasRedundancy<<4|L.flags.paddingValue<<1|L.flags.isNonSyncSample,E[T++]=L.flags.degradationPriority&61440,E[T++]=L.flags.degradationPriority&15,E[T++]=(L.compositionTimeOffset&4278190080)>>>24,E[T++]=(L.compositionTimeOffset&16711680)>>>16,E[T++]=(L.compositionTimeOffset&65280)>>>8,E[T++]=L.compositionTimeOffset&255;return o(q.trun,E)},d=function(p,v){var T,E,D,I,L,B;for(I=p.samples||[],v+=20+8*I.length,D=g(I,v),T=new Uint8Array(D.length+I.length*8),T.set(D),E=D.length,B=0;B<I.length;B++)L=I[B],T[E++]=(L.duration&4278190080)>>>24,T[E++]=(L.duration&16711680)>>>16,T[E++]=(L.duration&65280)>>>8,T[E++]=L.duration&255,T[E++]=(L.size&4278190080)>>>24,T[E++]=(L.size&16711680)>>>16,T[E++]=(L.size&65280)>>>8,T[E++]=L.size&255;return o(q.trun,T)},K=function(p,v){return p.type==="audio"?d(p,v):f(p,v)}}();var z={ftyp:c,mdat:h,moof:_,moov:b,initSegment:function(d){var f=c(),g=b(d),p;return p=new Uint8Array(f.byteLength+g.byteLength),p.set(f),p.set(g,f.byteLength),p}},te=function(d){var f,g,p=[],v=[];for(v.byteLength=0,v.nalCount=0,v.duration=0,p.byteLength=0,f=0;f<d.length;f++)g=d[f],g.nalUnitType==="access_unit_delimiter_rbsp"?(p.length&&(p.duration=g.dts-p.dts,v.byteLength+=p.byteLength,v.nalCount+=p.length,v.duration+=p.duration,v.push(p)),p=[g],p.byteLength=g.data.byteLength,p.pts=g.pts,p.dts=g.dts):(g.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(p.keyFrame=!0),p.duration=g.dts-p.dts,p.byteLength+=g.data.byteLength,p.push(g));return v.length&&(!p.duration||p.duration<=0)&&(p.duration=v[v.length-1].duration),v.byteLength+=p.byteLength,v.nalCount+=p.length,v.duration+=p.duration,v.push(p),v},Z=function(d){var f,g,p=[],v=[];for(p.byteLength=0,p.nalCount=0,p.duration=0,p.pts=d[0].pts,p.dts=d[0].dts,v.byteLength=0,v.nalCount=0,v.duration=0,v.pts=d[0].pts,v.dts=d[0].dts,f=0;f<d.length;f++)g=d[f],g.keyFrame?(p.length&&(v.push(p),v.byteLength+=p.byteLength,v.nalCount+=p.nalCount,v.duration+=p.duration),p=[g],p.nalCount=g.length,p.byteLength=g.byteLength,p.pts=g.pts,p.dts=g.dts,p.duration=g.duration):(p.duration+=g.duration,p.nalCount+=g.length,p.byteLength+=g.byteLength,p.push(g));return v.length&&p.duration<=0&&(p.duration=v[v.length-1].duration),v.byteLength+=p.byteLength,v.nalCount+=p.nalCount,v.duration+=p.duration,v.push(p),v},se=function(d){var f;return!d[0][0].keyFrame&&d.length>1&&(f=d.shift(),d.byteLength-=f.byteLength,d.nalCount-=f.nalCount,d[0][0].dts=f.dts,d[0][0].pts=f.pts,d[0][0].duration+=f.duration),d},me=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},ce=function(d,f){var g=me();return g.dataOffset=f,g.compositionTimeOffset=d.pts-d.dts,g.duration=d.duration,g.size=4*d.length,g.size+=d.byteLength,d.keyFrame&&(g.flags.dependsOn=2,g.flags.isNonSyncSample=0),g},le=function(d,f){var g,p,v,T,E,D=f||0,I=[];for(g=0;g<d.length;g++)for(T=d[g],p=0;p<T.length;p++)E=T[p],v=ce(E,D),D+=v.size,I.push(v);return I},oe=function(d){var f,g,p,v,T,E,D=0,I=d.byteLength,L=d.nalCount,B=I+4*L,U=new Uint8Array(B),ne=new DataView(U.buffer);for(f=0;f<d.length;f++)for(v=d[f],g=0;g<v.length;g++)for(T=v[g],p=0;p<T.length;p++)E=T[p],ne.setUint32(D,E.data.byteLength),D+=4,U.set(E.data,D),D+=E.data.byteLength;return U},Ce=function(d,f){var g,p=f||0,v=[];return g=ce(d,p),v.push(g),v},pt=function(d){var f,g,p=0,v=d.byteLength,T=d.length,E=v+4*T,D=new Uint8Array(E),I=new DataView(D.buffer);for(f=0;f<d.length;f++)g=d[f],I.setUint32(p,g.data.byteLength),p+=4,D.set(g.data,p),p+=g.data.byteLength;return D},Ne={groupNalsIntoFrames:te,groupFramesIntoGops:Z,extendFirstKeyFrame:se,generateSampleTable:le,concatenateNalData:oe,generateSampleTableForFrame:Ce,concatenateNalDataForFrame:pt},Ke=[33,16,5,32,164,27],wt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ge=function(d){for(var f=[];d--;)f.push(0);return f},Dt=function(d){return Object.keys(d).reduce(function(f,g){return f[g]=new Uint8Array(d[g].reduce(function(p,v){return p.concat(v)},[])),f},{})},yi,Ln=function(){if(!yi){var d={96e3:[Ke,[227,64],ge(154),[56]],88200:[Ke,[231],ge(170),[56]],64e3:[Ke,[248,192],ge(240),[56]],48e3:[Ke,[255,192],ge(268),[55,148,128],ge(54),[112]],44100:[Ke,[255,192],ge(268),[55,163,128],ge(84),[112]],32e3:[Ke,[255,192],ge(268),[55,234],ge(226),[112]],24e3:[Ke,[255,192],ge(268),[55,255,128],ge(268),[111,112],ge(126),[224]],16e3:[Ke,[255,192],ge(268),[55,255,128],ge(268),[111,255],ge(269),[223,108],ge(195),[1,192]],12e3:[wt,ge(268),[3,127,248],ge(268),[6,255,240],ge(268),[13,255,224],ge(268),[27,253,128],ge(259),[56]],11025:[wt,ge(268),[3,127,248],ge(268),[6,255,240],ge(268),[13,255,224],ge(268),[27,255,192],ge(268),[55,175,128],ge(108),[112]],8e3:[wt,ge(268),[3,121,16],ge(47),[7]]};yi=Dt(d)}return yi},Pi=9e4,St,Ct,Wt,Vi,qi,an,On;St=function(d){return d*Pi},Ct=function(d,f){return d*f},Wt=function(d){return d/Pi},Vi=function(d,f){return d/f},qi=function(d,f){return St(Vi(d,f))},an=function(d,f){return Ct(Wt(d),f)},On=function(d,f,g){return Wt(g?d:d-f)};var Me={ONE_SECOND_IN_TS:Pi,secondsToVideoTs:St,secondsToAudioTs:Ct,videoTsToSeconds:Wt,audioTsToSeconds:Vi,audioTsToVideoTs:qi,videoTsToAudioTs:an,metadataTsToSeconds:On},Ss=Ln,on=Me,Gi=function(d){var f,g,p=0;for(f=0;f<d.length;f++)g=d[f],p+=g.data.byteLength;return p},O=function(d,f,g,p){var v,T=0,E=0,D=0,I=0,L,B,U;if(f.length&&(v=on.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),T=Math.ceil(on.ONE_SECOND_IN_TS/(d.samplerate/1024)),g&&p&&(E=v-Math.max(g,p),D=Math.floor(E/T),I=D*T),!(D<1||I>on.ONE_SECOND_IN_TS/2))){for(L=Ss()[d.samplerate],L||(L=f[0].data),B=0;B<D;B++)U=f[0],f.splice(0,0,{data:L,dts:U.dts-T,pts:U.pts-T});return d.baseMediaDecodeTime-=Math.floor(on.videoTsToAudioTs(I,d.samplerate)),I}},re=function(d,f,g){return f.minSegmentDts>=g?d:(f.minSegmentDts=1/0,d.filter(function(p){return p.dts>=g?(f.minSegmentDts=Math.min(f.minSegmentDts,p.dts),f.minSegmentPts=f.minSegmentDts,!0):!1}))},Ie=function(d){var f,g,p=[];for(f=0;f<d.length;f++)g=d[f],p.push({size:g.data.byteLength,duration:1024});return p},ze=function(d){var f,g,p=0,v=new Uint8Array(Gi(d));for(f=0;f<d.length;f++)g=d[f],v.set(g.data,p),p+=g.data.byteLength;return v},Ft={prefixWithSilence:O,trimAdtsFramesByEarliestDts:re,generateSampleTable:Ie,concatenateFrameData:ze},ln=Me.ONE_SECOND_IN_TS,ii=function(d,f){typeof f.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=f.pts),d.minSegmentPts===void 0?d.minSegmentPts=f.pts:d.minSegmentPts=Math.min(d.minSegmentPts,f.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=f.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,f.pts)),typeof f.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=f.dts),d.minSegmentDts===void 0?d.minSegmentDts=f.dts:d.minSegmentDts=Math.min(d.minSegmentDts,f.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=f.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,f.dts))},If=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},zu=function(d,f){var g,p,v=d.minSegmentDts;return f||(v-=d.timelineStartInfo.dts),g=d.timelineStartInfo.baseMediaDecodeTime,g+=v,g=Math.max(0,g),d.type==="audio"&&(p=d.samplerate/ln,g*=p,g=Math.floor(g)),g},No={clearDtsInfo:If,calculateTrackBaseMediaDecodeTime:zu,collectDtsInfo:ii},Li=4,Wi=128,ur=function(d){for(var f=0,g={payloadType:-1,payloadSize:0},p=0,v=0;f<d.byteLength&&d[f]!==Wi;){for(;d[f]===255;)p+=255,f++;for(p+=d[f++];d[f]===255;)v+=255,f++;if(v+=d[f++],!g.payload&&p===Li){var T=String.fromCharCode(d[f+3],d[f+4],d[f+5],d[f+6]);if(T==="GA94"){g.payloadType=p,g.payloadSize=v,g.payload=d.subarray(f,f+v);break}else g.payload=void 0}f+=v,p=0,v=0}return g},Cs=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},Es=function(d,f){var g=[],p,v,T,E;if(!(f[0]&64))return g;for(v=f[0]&31,p=0;p<v;p++)T=p*3,E={type:f[T+2]&3,pts:d},f[T+2]&4&&(E.ccData=f[T+3]<<8|f[T+4],g.push(E));return g},cr=function(d){for(var f=d.byteLength,g=[],p=1,v,T;p<f-2;)d[p]===0&&d[p+1]===0&&d[p+2]===3?(g.push(p+2),p+=2):p++;if(g.length===0)return d;v=f-g.length,T=new Uint8Array(v);var E=0;for(p=0;p<v;E++,p++)E===g[0]&&(E++,g.shift()),T[p]=d[E];return T},Pf={parseSei:ur,parseUserData:Cs,parseCaptionPackets:Es,discardEmulationPreventionBytes:cr,USER_DATA_REGISTERED_ITU_T_T35:Li},Vu=t,Fo=Pf,ni=function(d){d=d||{},ni.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new it(0,0),new it(0,1),new it(1,0),new it(1,1)],this.parse708captions_&&(this.cc708Stream_=new We({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(f){f.on("data",this.trigger.bind(this,"data")),f.on("partialdone",this.trigger.bind(this,"partialdone")),f.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ni.prototype=new Vu,ni.prototype.push=function(d){var f,g,p;if(d.nalUnitType==="sei_rbsp"&&(f=Fo.parseSei(d.escapedRBSP),!!f.payload&&f.payloadType===Fo.USER_DATA_REGISTERED_ITU_T_T35&&(g=Fo.parseUserData(f),!!g))){if(d.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(d.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}p=Fo.parseCaptionPackets(d.pts,g),this.captionPackets_=this.captionPackets_.concat(p),this.latestDts_!==d.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=d.dts}},ni.prototype.flushCCStreams=function(d){this.ccStreams_.forEach(function(f){return d==="flush"?f.flush():f.partialFlush()},this)},ni.prototype.flushStream=function(d){if(!this.captionPackets_.length){this.flushCCStreams(d);return}this.captionPackets_.forEach(function(f,g){f.presortIndex=g}),this.captionPackets_.sort(function(f,g){return f.pts===g.pts?f.presortIndex-g.presortIndex:f.pts-g.pts}),this.captionPackets_.forEach(function(f){f.type<2?this.dispatchCea608Packet(f):this.dispatchCea708Packet(f)},this),this.captionPackets_.length=0,this.flushCCStreams(d)},ni.prototype.flush=function(){return this.flushStream("flush")},ni.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ni.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(d){d.reset()})},ni.prototype.dispatchCea608Packet=function(d){this.setsTextOrXDSActive(d)?this.activeCea608Channel_[d.type]=null:this.setsChannel1Active(d)?this.activeCea608Channel_[d.type]=0:this.setsChannel2Active(d)&&(this.activeCea608Channel_[d.type]=1),this.activeCea608Channel_[d.type]!==null&&this.ccStreams_[(d.type<<1)+this.activeCea608Channel_[d.type]].push(d)},ni.prototype.setsChannel1Active=function(d){return(d.ccData&30720)===4096},ni.prototype.setsChannel2Active=function(d){return(d.ccData&30720)===6144},ni.prototype.setsTextOrXDSActive=function(d){return(d.ccData&28928)===256||(d.ccData&30974)===4138||(d.ccData&30974)===6186},ni.prototype.dispatchCea708Packet=function(d){this.parse708captions_&&this.cc708Stream_.push(d)};var iv={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},nv=function(d){var f=iv[d]||d;return d&4096&&d===f?"":String.fromCharCode(f)},Uo=function(d){return 32<=d&&d<=127||160<=d&&d<=255},Rn=function(d){this.windowNum=d,this.reset()};Rn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Rn.prototype.getText=function(){return this.rows.join(`
`)},Rn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Rn.prototype.newLine=function(d){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(d),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Rn.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Rn.prototype.addText=function(d){this.rows[this.rowIdx]+=d},Rn.prototype.backspace=function(){if(!this.isEmpty()){var d=this.rows[this.rowIdx];this.rows[this.rowIdx]=d.substr(0,d.length-1)}};var jo=function(d,f,g){this.serviceNum=d,this.text="",this.currentWindow=new Rn(-1),this.windows=[],this.stream=g,typeof f=="string"&&this.createTextDecoder(f)};jo.prototype.init=function(d,f){this.startPts=d;for(var g=0;g<8;g++)this.windows[g]=new Rn(g),typeof f=="function"&&(this.windows[g].beforeRowOverflow=f)},jo.prototype.setCurrentWindow=function(d){this.currentWindow=this.windows[d]},jo.prototype.createTextDecoder=function(d){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(d)}catch(f){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+d+" encoding. "+f})}};var We=function(d){d=d||{},We.prototype.init.call(this);var f=this,g=d.captionServices||{},p={},v;Object.keys(g).forEach(T=>{v=g[T],/^SERVICE/.test(T)&&(p[T]=v.encoding)}),this.serviceEncodings=p,this.current708Packet=null,this.services={},this.push=function(T){T.type===3?(f.new708Packet(),f.add708Bytes(T)):(f.current708Packet===null&&f.new708Packet(),f.add708Bytes(T))}};We.prototype=new Vu,We.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},We.prototype.add708Bytes=function(d){var f=d.ccData,g=f>>>8,p=f&255;this.current708Packet.ptsVals.push(d.pts),this.current708Packet.data.push(g),this.current708Packet.data.push(p)},We.prototype.push708Packet=function(){var d=this.current708Packet,f=d.data,g=null,p=null,v=0,T=f[v++];for(d.seq=T>>6,d.sizeCode=T&63;v<f.length;v++)T=f[v++],g=T>>5,p=T&31,g===7&&p>0&&(T=f[v++],g=T),this.pushServiceBlock(g,v,p),p>0&&(v+=p-1)},We.prototype.pushServiceBlock=function(d,f,g){var p,v=f,T=this.current708Packet.data,E=this.services[d];for(E||(E=this.initService(d,v));v<f+g&&v<T.length;v++)p=T[v],Uo(p)?v=this.handleText(v,E):p===24?v=this.multiByteCharacter(v,E):p===16?v=this.extendedCommands(v,E):128<=p&&p<=135?v=this.setCurrentWindow(v,E):152<=p&&p<=159?v=this.defineWindow(v,E):p===136?v=this.clearWindows(v,E):p===140?v=this.deleteWindows(v,E):p===137?v=this.displayWindows(v,E):p===138?v=this.hideWindows(v,E):p===139?v=this.toggleWindows(v,E):p===151?v=this.setWindowAttributes(v,E):p===144?v=this.setPenAttributes(v,E):p===145?v=this.setPenColor(v,E):p===146?v=this.setPenLocation(v,E):p===143?E=this.reset(v,E):p===8?E.currentWindow.backspace():p===12?E.currentWindow.clearText():p===13?E.currentWindow.pendingNewLine=!0:p===14?E.currentWindow.clearText():p===141&&v++},We.prototype.extendedCommands=function(d,f){var g=this.current708Packet.data,p=g[++d];return Uo(p)&&(d=this.handleText(d,f,{isExtended:!0})),d},We.prototype.getPts=function(d){return this.current708Packet.ptsVals[Math.floor(d/2)]},We.prototype.initService=function(d,f){var p="SERVICE"+d,g=this,p,v;return p in this.serviceEncodings&&(v=this.serviceEncodings[p]),this.services[d]=new jo(d,v,g),this.services[d].init(this.getPts(f),function(T){g.flushDisplayed(T,g.services[d])}),this.services[d]},We.prototype.handleText=function(d,f,g){var p=g&&g.isExtended,v=g&&g.isMultiByte,T=this.current708Packet.data,E=p?4096:0,D=T[d],I=T[d+1],L=f.currentWindow,B,U;function ne(G){return G.map(fe=>("0"+(fe&255).toString(16)).slice(-2)).join("")}if(v?(U=[D,I],d++):U=[D],f.textDecoder_&&!p)B=f.textDecoder_.decode(new Uint8Array(U));else if(v){const G=ne(U);B=String.fromCharCode(parseInt(G,16))}else B=nv(E|D);return L.pendingNewLine&&!L.isEmpty()&&L.newLine(this.getPts(d)),L.pendingNewLine=!1,L.addText(B),d},We.prototype.multiByteCharacter=function(d,f){var g=this.current708Packet.data,p=g[d+1],v=g[d+2];return Uo(p)&&Uo(v)&&(d=this.handleText(++d,f,{isMultiByte:!0})),d},We.prototype.setCurrentWindow=function(d,f){var g=this.current708Packet.data,p=g[d],v=p&7;return f.setCurrentWindow(v),d},We.prototype.defineWindow=function(d,f){var g=this.current708Packet.data,p=g[d],v=p&7;f.setCurrentWindow(v);var T=f.currentWindow;return p=g[++d],T.visible=(p&32)>>5,T.rowLock=(p&16)>>4,T.columnLock=(p&8)>>3,T.priority=p&7,p=g[++d],T.relativePositioning=(p&128)>>7,T.anchorVertical=p&127,p=g[++d],T.anchorHorizontal=p,p=g[++d],T.anchorPoint=(p&240)>>4,T.rowCount=p&15,p=g[++d],T.columnCount=p&63,p=g[++d],T.windowStyle=(p&56)>>3,T.penStyle=p&7,T.virtualRowCount=T.rowCount+1,d},We.prototype.setWindowAttributes=function(d,f){var g=this.current708Packet.data,p=g[d],v=f.currentWindow.winAttr;return p=g[++d],v.fillOpacity=(p&192)>>6,v.fillRed=(p&48)>>4,v.fillGreen=(p&12)>>2,v.fillBlue=p&3,p=g[++d],v.borderType=(p&192)>>6,v.borderRed=(p&48)>>4,v.borderGreen=(p&12)>>2,v.borderBlue=p&3,p=g[++d],v.borderType+=(p&128)>>5,v.wordWrap=(p&64)>>6,v.printDirection=(p&48)>>4,v.scrollDirection=(p&12)>>2,v.justify=p&3,p=g[++d],v.effectSpeed=(p&240)>>4,v.effectDirection=(p&12)>>2,v.displayEffect=p&3,d},We.prototype.flushDisplayed=function(d,f){for(var g=[],p=0;p<8;p++)f.windows[p].visible&&!f.windows[p].isEmpty()&&g.push(f.windows[p].getText());f.endPts=d,f.text=g.join(`

`),this.pushCaption(f),f.startPts=d},We.prototype.pushCaption=function(d){d.text!==""&&(this.trigger("data",{startPts:d.startPts,endPts:d.endPts,text:d.text,stream:"cc708_"+d.serviceNum}),d.text="",d.startPts=d.endPts)},We.prototype.displayWindows=function(d,f){var g=this.current708Packet.data,p=g[++d],v=this.getPts(d);this.flushDisplayed(v,f);for(var T=0;T<8;T++)p&1<<T&&(f.windows[T].visible=1);return d},We.prototype.hideWindows=function(d,f){var g=this.current708Packet.data,p=g[++d],v=this.getPts(d);this.flushDisplayed(v,f);for(var T=0;T<8;T++)p&1<<T&&(f.windows[T].visible=0);return d},We.prototype.toggleWindows=function(d,f){var g=this.current708Packet.data,p=g[++d],v=this.getPts(d);this.flushDisplayed(v,f);for(var T=0;T<8;T++)p&1<<T&&(f.windows[T].visible^=1);return d},We.prototype.clearWindows=function(d,f){var g=this.current708Packet.data,p=g[++d],v=this.getPts(d);this.flushDisplayed(v,f);for(var T=0;T<8;T++)p&1<<T&&f.windows[T].clearText();return d},We.prototype.deleteWindows=function(d,f){var g=this.current708Packet.data,p=g[++d],v=this.getPts(d);this.flushDisplayed(v,f);for(var T=0;T<8;T++)p&1<<T&&f.windows[T].reset();return d},We.prototype.setPenAttributes=function(d,f){var g=this.current708Packet.data,p=g[d],v=f.currentWindow.penAttr;return p=g[++d],v.textTag=(p&240)>>4,v.offset=(p&12)>>2,v.penSize=p&3,p=g[++d],v.italics=(p&128)>>7,v.underline=(p&64)>>6,v.edgeType=(p&56)>>3,v.fontStyle=p&7,d},We.prototype.setPenColor=function(d,f){var g=this.current708Packet.data,p=g[d],v=f.currentWindow.penColor;return p=g[++d],v.fgOpacity=(p&192)>>6,v.fgRed=(p&48)>>4,v.fgGreen=(p&12)>>2,v.fgBlue=p&3,p=g[++d],v.bgOpacity=(p&192)>>6,v.bgRed=(p&48)>>4,v.bgGreen=(p&12)>>2,v.bgBlue=p&3,p=g[++d],v.edgeRed=(p&48)>>4,v.edgeGreen=(p&12)>>2,v.edgeBlue=p&3,d},We.prototype.setPenLocation=function(d,f){var g=this.current708Packet.data,p=g[d],v=f.currentWindow.penLoc;return f.currentWindow.pendingNewLine=!0,p=g[++d],v.row=p&15,p=g[++d],v.column=p&63,d},We.prototype.reset=function(d,f){var g=this.getPts(d);return this.flushDisplayed(g,f),this.initService(f.serviceNum,d)};var sv={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},$o=function(d){return d===null?"":(d=sv[d]||d,String.fromCharCode(d))},Ho=14,rv=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],As=function(){for(var d=[],f=Ho+1;f--;)d.push({text:"",indent:0,offset:0});return d},it=function(d,f){it.prototype.init.call(this),this.field_=d||0,this.dataChannel_=f||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(g){var p,v,T,E,D;if(p=g.ccData&32639,p===this.lastControlCode_){this.lastControlCode_=null;return}if((p&61440)===4096?this.lastControlCode_=p:p!==this.PADDING_&&(this.lastControlCode_=null),T=p>>>8,E=p&255,p!==this.PADDING_)if(p===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(p===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(g.pts),this.flushDisplayed(g.pts),v=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=v,this.startPts_=g.pts;else if(p===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(g.pts);else if(p===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(g.pts);else if(p===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(g.pts);else if(p===this.CARRIAGE_RETURN_)this.clearFormatting(g.pts),this.flushDisplayed(g.pts),this.shiftRowsUp_(),this.startPts_=g.pts;else if(p===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(p===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(g.pts),this.displayed_=As();else if(p===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=As();else if(p===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(g.pts),this.displayed_=As()),this.mode_="paintOn",this.startPts_=g.pts;else if(this.isSpecialCharacter(T,E))T=(T&3)<<8,D=$o(T|E),this[this.mode_](g.pts,D),this.column_++;else if(this.isExtCharacter(T,E))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),T=(T&3)<<8,D=$o(T|E),this[this.mode_](g.pts,D),this.column_++;else if(this.isMidRowCode(T,E))this.clearFormatting(g.pts),this[this.mode_](g.pts," "),this.column_++,(E&14)===14&&this.addFormatting(g.pts,["i"]),(E&1)===1&&this.addFormatting(g.pts,["u"]);else if(this.isOffsetControlCode(T,E)){const L=E&3;this.nonDisplayed_[this.row_].offset=L,this.column_+=L}else if(this.isPAC(T,E)){var I=rv.indexOf(p&7968);if(this.mode_==="rollUp"&&(I-this.rollUpRows_+1<0&&(I=this.rollUpRows_-1),this.setRollUp(g.pts,I)),I!==this.row_&&(this.clearFormatting(g.pts),this.row_=I),E&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(g.pts,["u"]),(p&16)===16){const L=(p&14)>>1;this.column_=L*4,this.nonDisplayed_[this.row_].indent+=L}this.isColorPAC(E)&&(E&14)===14&&this.addFormatting(g.pts,["i"])}else this.isNormalChar(T)&&(E===0&&(E=null),D=$o(T),D+=$o(E),this[this.mode_](g.pts,D),this.column_+=D.length)}};it.prototype=new Vu,it.prototype.flushDisplayed=function(d){const f=p=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+p+"."})},g=[];this.displayed_.forEach((p,v)=>{if(p&&p.text&&p.text.length){try{p.text=p.text.trim()}catch{f(v)}p.text.length&&g.push({text:p.text,line:v+1,position:10+Math.min(70,p.indent*10)+p.offset*2.5})}else p==null&&f(v)}),g.length&&this.trigger("data",{startPts:this.startPts_,endPts:d,content:g,stream:this.name_})},it.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=As(),this.nonDisplayed_=As(),this.lastControlCode_=null,this.column_=0,this.row_=Ho,this.rollUpRows_=2,this.formatting_=[]},it.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},it.prototype.isSpecialCharacter=function(d,f){return d===this.EXT_&&f>=48&&f<=63},it.prototype.isExtCharacter=function(d,f){return(d===this.EXT_+1||d===this.EXT_+2)&&f>=32&&f<=63},it.prototype.isMidRowCode=function(d,f){return d===this.EXT_&&f>=32&&f<=47},it.prototype.isOffsetControlCode=function(d,f){return d===this.OFFSET_&&f>=33&&f<=35},it.prototype.isPAC=function(d,f){return d>=this.BASE_&&d<this.BASE_+8&&f>=64&&f<=127},it.prototype.isColorPAC=function(d){return d>=64&&d<=79||d>=96&&d<=127},it.prototype.isNormalChar=function(d){return d>=32&&d<=127},it.prototype.setRollUp=function(d,f){if(this.mode_!=="rollUp"&&(this.row_=Ho,this.mode_="rollUp",this.flushDisplayed(d),this.nonDisplayed_=As(),this.displayed_=As()),f!==void 0&&f!==this.row_)for(var g=0;g<this.rollUpRows_;g++)this.displayed_[f-g]=this.displayed_[this.row_-g],this.displayed_[this.row_-g]={text:"",indent:0,offset:0};f===void 0&&(f=this.row_),this.topRow_=f-this.rollUpRows_+1},it.prototype.addFormatting=function(d,f){this.formatting_=this.formatting_.concat(f);var g=f.reduce(function(p,v){return p+"<"+v+">"},"");this[this.mode_](d,g)},it.prototype.clearFormatting=function(d){if(this.formatting_.length){var f=this.formatting_.reverse().reduce(function(g,p){return g+"</"+p+">"},"");this.formatting_=[],this[this.mode_](d,f)}},it.prototype.popOn=function(d,f){var g=this.nonDisplayed_[this.row_].text;g+=f,this.nonDisplayed_[this.row_].text=g},it.prototype.rollUp=function(d,f){var g=this.displayed_[this.row_].text;g+=f,this.displayed_[this.row_].text=g},it.prototype.shiftRowsUp_=function(){var d;for(d=0;d<this.topRow_;d++)this.displayed_[d]={text:"",indent:0,offset:0};for(d=this.row_+1;d<Ho+1;d++)this.displayed_[d]={text:"",indent:0,offset:0};for(d=this.topRow_;d<this.row_;d++)this.displayed_[d]=this.displayed_[d+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},it.prototype.paintOn=function(d,f){var g=this.displayed_[this.row_].text;g+=f,this.displayed_[this.row_].text=g};var Lf={CaptionStream:ni,Cea608Stream:it,Cea708Stream:We},zo={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},av=t,ov=8589934592,lv=4294967296,Of="shared",qu=function(d,f){var g=1;for(d>f&&(g=-1);Math.abs(f-d)>lv;)d+=g*ov;return d},Gu=function(d){var f,g;Gu.prototype.init.call(this),this.type_=d||Of,this.push=function(p){if(p.type==="metadata"){this.trigger("data",p);return}this.type_!==Of&&p.type!==this.type_||(g===void 0&&(g=p.dts),p.dts=qu(p.dts,g),p.pts=qu(p.pts,g),f=p.dts,this.trigger("data",p))},this.flush=function(){g=f,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){g=void 0,f=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Gu.prototype=new av;var Rf={TimestampRolloverStream:Gu,handleRollover:qu},uv=(d,f,g)=>{if(!d)return-1;for(var p=g;p<d.length;p++)if(d[p]===f)return p;return-1},cv={typedArrayIndexOf:uv},Vo=cv.typedArrayIndexOf,qo={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},Mf=function(d,f,g){var p,v="";for(p=f;p<g;p++)v+="%"+("00"+d[p].toString(16)).slice(-2);return v},fa=function(d,f,g){return decodeURIComponent(Mf(d,f,g))},pa=function(d,f,g){return unescape(Mf(d,f,g))},ma=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},ga={APIC:function(d){var f=1,g,p,v="-->";d.data[0]===qo.Utf8&&(g=Vo(d.data,0,f),!(g<0)&&(d.mimeType=pa(d.data,f,g),f=g+1,d.pictureType=d.data[f],f++,p=Vo(d.data,0,f),!(p<0)&&(d.description=fa(d.data,f,p),f=p+1,d.mimeType===v?d.url=pa(d.data,f,d.data.length):d.pictureData=d.data.subarray(f,d.data.length))))},"T*":function(d){d.data[0]===qo.Utf8&&(d.value=fa(d.data,1,d.data.length).replace(/\0*$/,""),d.values=d.value.split("\0"))},TXXX:function(d){var f;d.data[0]===qo.Utf8&&(f=Vo(d.data,0,1),f!==-1&&(d.description=fa(d.data,1,f),d.value=fa(d.data,f+1,d.data.length).replace(/\0*$/,""),d.data=d.value))},"W*":function(d){d.url=pa(d.data,0,d.data.length).replace(/\0.*$/,"")},WXXX:function(d){var f;d.data[0]===qo.Utf8&&(f=Vo(d.data,0,1),f!==-1&&(d.description=fa(d.data,1,f),d.url=pa(d.data,f+1,d.data.length).replace(/\0.*$/,"")))},PRIV:function(d){var f;for(f=0;f<d.data.length;f++)if(d.data[f]===0){d.owner=pa(d.data,0,f);break}d.privateData=d.data.subarray(f+1),d.data=d.privateData}},dv=function(d){var f,g,p=10,v=0,T=[];if(!(d.length<10||d[0]!==73||d[1]!==68||d[2]!==51)){v=ma(d.subarray(6,10)),v+=10;var E=d[5]&64;E&&(p+=4,p+=ma(d.subarray(10,14)),v-=ma(d.subarray(16,20)));do{if(f=ma(d.subarray(p+4,p+8)),f<1)break;g=String.fromCharCode(d[p],d[p+1],d[p+2],d[p+3]);var D={id:g,data:d.subarray(p+10,p+f+10)};D.key=D.id,ga[D.id]?ga[D.id](D):D.id[0]==="T"?ga["T*"](D):D.id[0]==="W"&&ga["W*"](D),T.push(D),p+=10,p+=f}while(p<v);return T}},Bf={parseId3Frames:dv,parseSyncSafeInteger:ma,frameParsers:ga},hv=t,fv=zo,es=Bf,Go;Go=function(d){var f={descriptor:d&&d.descriptor},g=0,p=[],v=0,T;if(Go.prototype.init.call(this),this.dispatchType=fv.METADATA_STREAM_TYPE.toString(16),f.descriptor)for(T=0;T<f.descriptor.length;T++)this.dispatchType+=("00"+f.descriptor[T].toString(16)).slice(-2);this.push=function(E){var D,I,L,B,U,ne;if(E.type==="timed-metadata"){if(E.dataAlignmentIndicator&&(v=0,p.length=0),p.length===0&&(E.data.length<10||E.data[0]!==73||E.data[1]!==68||E.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(p.push(E),v+=E.data.byteLength,p.length===1&&(g=es.parseSyncSafeInteger(E.data.subarray(6,10)),g+=10),!(v<g)){for(D={data:new Uint8Array(g),frames:[],pts:p[0].pts,dts:p[0].dts},U=0;U<g;)D.data.set(p[0].data.subarray(0,g-U),U),U+=p[0].data.byteLength,v-=p[0].data.byteLength,p.shift();I=10,D.data[5]&64&&(I+=4,I+=es.parseSyncSafeInteger(D.data.subarray(10,14)),g-=es.parseSyncSafeInteger(D.data.subarray(16,20)));do{if(L=es.parseSyncSafeInteger(D.data.subarray(I+4,I+8)),L<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(ne=String.fromCharCode(D.data[I],D.data[I+1],D.data[I+2],D.data[I+3]),B={id:ne,data:D.data.subarray(I+10,I+L+10)},B.key=B.id,es.frameParsers[B.id]?es.frameParsers[B.id](B):B.id[0]==="T"?es.frameParsers["T*"](B):B.id[0]==="W"&&es.frameParsers["W*"](B),B.owner==="com.apple.streaming.transportStreamTimestamp"){var G=B.data,fe=(G[3]&1)<<30|G[4]<<22|G[5]<<14|G[6]<<6|G[7]>>>2;fe*=4,fe+=G[7]&3,B.timeStamp=fe,D.pts===void 0&&D.dts===void 0&&(D.pts=B.timeStamp,D.dts=B.timeStamp),this.trigger("timestamp",B)}D.frames.push(B),I+=10,I+=L}while(I<g);this.trigger("data",D)}}}},Go.prototype=new hv;var pv=Go,Wu=t,Xu=Lf,Xi=zo,mv=Rf.TimestampRolloverStream,Wo,_a,Xo,dr=188,Yu=71;Wo=function(){var d=new Uint8Array(dr),f=0;Wo.prototype.init.call(this),this.push=function(g){var p=0,v=dr,T;for(f?(T=new Uint8Array(g.byteLength+f),T.set(d.subarray(0,f)),T.set(g,f),f=0):T=g;v<T.byteLength;){if(T[p]===Yu&&T[v]===Yu){this.trigger("data",T.subarray(p,v)),p+=dr,v+=dr;continue}p++,v++}p<T.byteLength&&(d.set(T.subarray(p),0),f=T.byteLength-p)},this.flush=function(){f===dr&&d[0]===Yu&&(this.trigger("data",d),f=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){f=0,this.trigger("reset")}},Wo.prototype=new Wu,_a=function(){var d,f,g,p;_a.prototype.init.call(this),p=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(v,T){var E=0;T.payloadUnitStartIndicator&&(E+=v[E]+1),T.type==="pat"?f(v.subarray(E),T):g(v.subarray(E),T)},f=function(v,T){T.section_number=v[7],T.last_section_number=v[8],p.pmtPid=(v[10]&31)<<8|v[11],T.pmtPid=p.pmtPid},g=function(v,T){var E,D,I,L;if(v[5]&1){for(p.programMapTable={video:null,audio:null,"timed-metadata":{}},E=(v[1]&15)<<8|v[2],D=3+E-4,I=(v[10]&15)<<8|v[11],L=12+I;L<D;){var B=v[L],U=(v[L+1]&31)<<8|v[L+2];B===Xi.H264_STREAM_TYPE&&p.programMapTable.video===null?p.programMapTable.video=U:B===Xi.ADTS_STREAM_TYPE&&p.programMapTable.audio===null?p.programMapTable.audio=U:B===Xi.METADATA_STREAM_TYPE&&(p.programMapTable["timed-metadata"][U]=B),L+=((v[L+3]&15)<<8|v[L+4])+5}T.programMapTable=p.programMapTable}},this.push=function(v){var T={},E=4;if(T.payloadUnitStartIndicator=!!(v[1]&64),T.pid=v[1]&31,T.pid<<=8,T.pid|=v[2],(v[3]&48)>>>4>1&&(E+=v[E]+1),T.pid===0)T.type="pat",d(v.subarray(E),T),this.trigger("data",T);else if(T.pid===this.pmtPid)for(T.type="pmt",d(v.subarray(E),T),this.trigger("data",T);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([v,E,T]):this.processPes_(v,E,T)},this.processPes_=function(v,T,E){E.pid===this.programMapTable.video?E.streamType=Xi.H264_STREAM_TYPE:E.pid===this.programMapTable.audio?E.streamType=Xi.ADTS_STREAM_TYPE:E.streamType=this.programMapTable["timed-metadata"][E.pid],E.type="pes",E.data=v.subarray(T),this.trigger("data",E)}},_a.prototype=new Wu,_a.STREAM_TYPES={h264:27,adts:15},Xo=function(){var d=this,f=!1,g={data:[],size:0},p={data:[],size:0},v={data:[],size:0},T,E=function(I,L){var B;const U=I[0]<<16|I[1]<<8|I[2];L.data=new Uint8Array,U===1&&(L.packetLength=6+(I[4]<<8|I[5]),L.dataAlignmentIndicator=(I[6]&4)!==0,B=I[7],B&192&&(L.pts=(I[9]&14)<<27|(I[10]&255)<<20|(I[11]&254)<<12|(I[12]&255)<<5|(I[13]&254)>>>3,L.pts*=4,L.pts+=(I[13]&6)>>>1,L.dts=L.pts,B&64&&(L.dts=(I[14]&14)<<27|(I[15]&255)<<20|(I[16]&254)<<12|(I[17]&255)<<5|(I[18]&254)>>>3,L.dts*=4,L.dts+=(I[18]&6)>>>1)),L.data=I.subarray(9+I[8]))},D=function(I,L,B){var U=new Uint8Array(I.size),ne={type:L},G=0,fe=0,ve=!1,Et;if(!(!I.data.length||I.size<9)){for(ne.trackId=I.data[0].pid,G=0;G<I.data.length;G++)Et=I.data[G],U.set(Et.data,fe),fe+=Et.data.byteLength;E(U,ne),ve=L==="video"||ne.packetLength<=I.size,(B||ve)&&(I.size=0,I.data.length=0),ve&&d.trigger("data",ne)}};Xo.prototype.init.call(this),this.push=function(I){({pat:function(){},pes:function(){var L,B;switch(I.streamType){case Xi.H264_STREAM_TYPE:L=g,B="video";break;case Xi.ADTS_STREAM_TYPE:L=p,B="audio";break;case Xi.METADATA_STREAM_TYPE:L=v,B="timed-metadata";break;default:return}I.payloadUnitStartIndicator&&D(L,B,!0),L.data.push(I),L.size+=I.data.byteLength},pmt:function(){var L={type:"metadata",tracks:[]};T=I.programMapTable,T.video!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),f=!0,d.trigger("data",L)}})[I.type]()},this.reset=function(){g.size=0,g.data.length=0,p.size=0,p.data.length=0,this.trigger("reset")},this.flushStreams_=function(){D(g,"video"),D(p,"audio"),D(v,"timed-metadata")},this.flush=function(){if(!f&&T){var I={type:"metadata",tracks:[]};T.video!==null&&I.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&I.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),d.trigger("data",I)}f=!1,this.flushStreams_(),this.trigger("done")}},Xo.prototype=new Wu;var Nf={PAT_PID:0,MP2T_PACKET_LENGTH:dr,TransportPacketStream:Wo,TransportParseStream:_a,ElementaryStream:Xo,TimestampRolloverStream:mv,CaptionStream:Xu.CaptionStream,Cea608Stream:Xu.Cea608Stream,Cea708Stream:Xu.Cea708Stream,MetadataStream:pv};for(var Ku in Xi)Xi.hasOwnProperty(Ku)&&(Nf[Ku]=Xi[Ku]);var gv=Nf,_v=t,yv=Me.ONE_SECOND_IN_TS,Yo,Ff=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Yo=function(d){var f,g=0;Yo.prototype.init.call(this),this.skipWarn_=function(p,v){this.trigger("log",{level:"warn",message:`adts skiping bytes ${p} to ${v} in frame ${g} outside syncword`})},this.push=function(p){var v=0,T,E,D,I,L;if(d||(g=0),p.type==="audio"){f&&f.length?(D=f,f=new Uint8Array(D.byteLength+p.data.byteLength),f.set(D),f.set(p.data,D.byteLength)):f=p.data;for(var B;v+7<f.length;){if(f[v]!==255||(f[v+1]&246)!==240){typeof B!="number"&&(B=v),v++;continue}if(typeof B=="number"&&(this.skipWarn_(B,v),B=null),E=(~f[v+1]&1)*2,T=(f[v+3]&3)<<11|f[v+4]<<3|(f[v+5]&224)>>5,I=((f[v+6]&3)+1)*1024,L=I*yv/Ff[(f[v+2]&60)>>>2],f.byteLength-v<T)break;this.trigger("data",{pts:p.pts+g*L,dts:p.dts+g*L,sampleCount:I,audioobjecttype:(f[v+2]>>>6&3)+1,channelcount:(f[v+2]&1)<<2|(f[v+3]&192)>>>6,samplerate:Ff[(f[v+2]&60)>>>2],samplingfrequencyindex:(f[v+2]&60)>>>2,samplesize:16,data:f.subarray(v+7+E,v+T)}),g++,v+=T}typeof B=="number"&&(this.skipWarn_(B,v),B=null),f=f.subarray(v)}},this.flush=function(){g=0,this.trigger("done")},this.reset=function(){f=void 0,this.trigger("reset")},this.endTimeline=function(){f=void 0,this.trigger("endedtimeline")}},Yo.prototype=new _v;var vv=Yo,Uf;Uf=function(d){var f=d.byteLength,g=0,p=0;this.length=function(){return 8*f},this.bitsAvailable=function(){return 8*f+p},this.loadWord=function(){var v=d.byteLength-f,T=new Uint8Array(4),E=Math.min(4,f);if(E===0)throw new Error("no bytes available");T.set(d.subarray(v,v+E)),g=new DataView(T.buffer).getUint32(0),p=E*8,f-=E},this.skipBits=function(v){var T;p>v?(g<<=v,p-=v):(v-=p,T=Math.floor(v/8),v-=T*8,f-=T,this.loadWord(),g<<=v,p-=v)},this.readBits=function(v){var T=Math.min(p,v),E=g>>>32-T;return p-=T,p>0?g<<=T:f>0&&this.loadWord(),T=v-T,T>0?E<<T|this.readBits(T):E},this.skipLeadingZeros=function(){var v;for(v=0;v<p;++v)if(g&2147483648>>>v)return g<<=v,p-=v,v;return this.loadWord(),v+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var v=this.skipLeadingZeros();return this.readBits(v+1)-1},this.readExpGolomb=function(){var v=this.readUnsignedExpGolomb();return 1&v?1+v>>>1:-1*(v>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var bv=Uf,jf=t,Tv=bv,Ko,ya,$f;ya=function(){var d=0,f,g;ya.prototype.init.call(this),this.push=function(p){var v;g?(v=new Uint8Array(g.byteLength+p.data.byteLength),v.set(g),v.set(p.data,g.byteLength),g=v):g=p.data;for(var T=g.byteLength;d<T-3;d++)if(g[d+2]===1){f=d+5;break}for(;f<T;)switch(g[f]){case 0:if(g[f-1]!==0){f+=2;break}else if(g[f-2]!==0){f++;break}d+3!==f-2&&this.trigger("data",g.subarray(d+3,f-2));do f++;while(g[f]!==1&&f<T);d=f-2,f+=3;break;case 1:if(g[f-1]!==0||g[f-2]!==0){f+=3;break}this.trigger("data",g.subarray(d+3,f-2)),d=f-2,f+=3;break;default:f+=3;break}g=g.subarray(d),f-=d,d=0},this.reset=function(){g=null,d=0,this.trigger("reset")},this.flush=function(){g&&g.byteLength>3&&this.trigger("data",g.subarray(d+3)),g=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ya.prototype=new jf,$f={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ko=function(){var d=new ya,f,g,p,v,T,E,D;Ko.prototype.init.call(this),f=this,this.push=function(I){I.type==="video"&&(g=I.trackId,p=I.pts,v=I.dts,d.push(I))},d.on("data",function(I){var L={trackId:g,pts:p,dts:v,data:I,nalUnitTypeCode:I[0]&31};switch(L.nalUnitTypeCode){case 5:L.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:L.nalUnitType="sei_rbsp",L.escapedRBSP=T(I.subarray(1));break;case 7:L.nalUnitType="seq_parameter_set_rbsp",L.escapedRBSP=T(I.subarray(1)),L.config=E(L.escapedRBSP);break;case 8:L.nalUnitType="pic_parameter_set_rbsp";break;case 9:L.nalUnitType="access_unit_delimiter_rbsp";break}f.trigger("data",L)}),d.on("done",function(){f.trigger("done")}),d.on("partialdone",function(){f.trigger("partialdone")}),d.on("reset",function(){f.trigger("reset")}),d.on("endedtimeline",function(){f.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},D=function(I,L){var B=8,U=8,ne,G;for(ne=0;ne<I;ne++)U!==0&&(G=L.readExpGolomb(),U=(B+G+256)%256),B=U===0?B:U},T=function(I){for(var L=I.byteLength,B=[],U=1,ne,G;U<L-2;)I[U]===0&&I[U+1]===0&&I[U+2]===3?(B.push(U+2),U+=2):U++;if(B.length===0)return I;ne=L-B.length,G=new Uint8Array(ne);var fe=0;for(U=0;U<ne;fe++,U++)fe===B[0]&&(fe++,B.shift()),G[U]=I[fe];return G},E=function(I){var L=0,B=0,U=0,ne=0,G,fe,ve,Et,Oi,Is,mp,gp,_p,oc,yp,gt=[1,1],vp,Ps;if(G=new Tv(I),fe=G.readUnsignedByte(),Et=G.readUnsignedByte(),ve=G.readUnsignedByte(),G.skipUnsignedExpGolomb(),$f[fe]&&(Oi=G.readUnsignedExpGolomb(),Oi===3&&G.skipBits(1),G.skipUnsignedExpGolomb(),G.skipUnsignedExpGolomb(),G.skipBits(1),G.readBoolean()))for(yp=Oi!==3?8:12,Ps=0;Ps<yp;Ps++)G.readBoolean()&&(Ps<6?D(16,G):D(64,G));if(G.skipUnsignedExpGolomb(),Is=G.readUnsignedExpGolomb(),Is===0)G.readUnsignedExpGolomb();else if(Is===1)for(G.skipBits(1),G.skipExpGolomb(),G.skipExpGolomb(),mp=G.readUnsignedExpGolomb(),Ps=0;Ps<mp;Ps++)G.skipExpGolomb();if(G.skipUnsignedExpGolomb(),G.skipBits(1),gp=G.readUnsignedExpGolomb(),_p=G.readUnsignedExpGolomb(),oc=G.readBits(1),oc===0&&G.skipBits(1),G.skipBits(1),G.readBoolean()&&(L=G.readUnsignedExpGolomb(),B=G.readUnsignedExpGolomb(),U=G.readUnsignedExpGolomb(),ne=G.readUnsignedExpGolomb()),G.readBoolean()&&G.readBoolean()){switch(vp=G.readUnsignedByte(),vp){case 1:gt=[1,1];break;case 2:gt=[12,11];break;case 3:gt=[10,11];break;case 4:gt=[16,11];break;case 5:gt=[40,33];break;case 6:gt=[24,11];break;case 7:gt=[20,11];break;case 8:gt=[32,11];break;case 9:gt=[80,33];break;case 10:gt=[18,11];break;case 11:gt=[15,11];break;case 12:gt=[64,33];break;case 13:gt=[160,99];break;case 14:gt=[4,3];break;case 15:gt=[3,2];break;case 16:gt=[2,1];break;case 255:{gt=[G.readUnsignedByte()<<8|G.readUnsignedByte(),G.readUnsignedByte()<<8|G.readUnsignedByte()];break}}gt&&gt[0]/gt[1]}return{profileIdc:fe,levelIdc:ve,profileCompatibility:Et,width:(gp+1)*16-L*2-B*2,height:(2-oc)*(_p+1)*16-U*2-ne*2,sarRatio:gt}}},Ko.prototype=new jf;var xv={H264Stream:Ko,NalByteStream:ya},wv=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Hf=function(d,f){var g=d[f+6]<<21|d[f+7]<<14|d[f+8]<<7|d[f+9],p=d[f+5],v=(p&16)>>4;return g=g>=0?g:0,v?g+20:g+10},zf=function(d,f){return d.length-f<10||d[f]!==73||d[f+1]!==68||d[f+2]!==51?f:(f+=Hf(d,f),zf(d,f))},Sv=function(d){var f=zf(d,0);return d.length>=f+2&&(d[f]&255)===255&&(d[f+1]&240)===240&&(d[f+1]&22)===16},Vf=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Cv=function(d,f,g){var p,v="";for(p=f;p<g;p++)v+="%"+("00"+d[p].toString(16)).slice(-2);return v},Ev=function(d,f,g){return unescape(Cv(d,f,g))},Av=function(d,f){var g=(d[f+5]&224)>>5,p=d[f+4]<<3,v=d[f+3]&6144;return v|p|g},Dv=function(d,f){return d[f]===73&&d[f+1]===68&&d[f+2]===51?"timed-metadata":d[f]&!0&&(d[f+1]&240)===240?"audio":null},kv=function(d){for(var f=0;f+5<d.length;){if(d[f]!==255||(d[f+1]&246)!==240){f++;continue}return wv[(d[f+2]&60)>>>2]}return null},Iv=function(d){var f,g,p,v;f=10,d[5]&64&&(f+=4,f+=Vf(d.subarray(10,14)));do{if(g=Vf(d.subarray(f+4,f+8)),g<1)return null;if(v=String.fromCharCode(d[f],d[f+1],d[f+2],d[f+3]),v==="PRIV"){p=d.subarray(f+10,f+g+10);for(var T=0;T<p.byteLength;T++)if(p[T]===0){var E=Ev(p,0,T);if(E==="com.apple.streaming.transportStreamTimestamp"){var D=p.subarray(T+1),I=(D[3]&1)<<30|D[4]<<22|D[5]<<14|D[6]<<6|D[7]>>>2;return I*=4,I+=D[7]&3,I}break}}f+=10,f+=g}while(f<d.byteLength);return null},Zu={isLikelyAacData:Sv,parseId3TagSize:Hf,parseAdtsSize:Av,parseType:Dv,parseSampleRate:kv,parseAacTimestamp:Iv},Pv=t,qf=Zu,Zo;Zo=function(){var d=new Uint8Array,f=0;Zo.prototype.init.call(this),this.setTimestamp=function(g){f=g},this.push=function(g){var p=0,v=0,T,E,D,I;for(d.length?(I=d.length,d=new Uint8Array(g.byteLength+I),d.set(d.subarray(0,I)),d.set(g,I)):d=g;d.length-v>=3;){if(d[v]===73&&d[v+1]===68&&d[v+2]===51){if(d.length-v<10||(p=qf.parseId3TagSize(d,v),v+p>d.length))break;E={type:"timed-metadata",data:d.subarray(v,v+p)},this.trigger("data",E),v+=p;continue}else if((d[v]&255)===255&&(d[v+1]&240)===240){if(d.length-v<7||(p=qf.parseAdtsSize(d,v),v+p>d.length))break;D={type:"audio",data:d.subarray(v,v+p),pts:f,dts:f},this.trigger("data",D),v+=p;continue}v++}T=d.length-v,T>0?d=d.subarray(v):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},Zo.prototype=new Pv;var Lv=Zo,Ov=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Rv=Ov,Mv=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Bv=Mv,Qo=t,va=z,ba=Ne,Jo=Ft,Yi=No,Mn=gv,el=Me,Gf=vv,Nv=xv.H264Stream,Fv=Lv,Uv=Zu.isLikelyAacData,jv=Me.ONE_SECOND_IN_TS,Qu=Rv,Ju=Bv,Ta,hr,tl,Ds,$v=function(d,f){f.stream=d,this.trigger("log",f)},Wf=function(d,f){for(var g=Object.keys(f),p=0;p<g.length;p++){var v=g[p];v==="headOfPipeline"||!f[v].on||f[v].on("log",$v.bind(d,v))}},Xf=function(d,f){var g;if(d.length!==f.length)return!1;for(g=0;g<d.length;g++)if(d[g]!==f[g])return!1;return!0},ec=function(d,f,g,p,v,T){var E=g-f,D=p-f,I=v-g;return{start:{dts:d,pts:d+E},end:{dts:d+D,pts:d+I},prependedContentDuration:T,baseMediaDecodeTime:d}};hr=function(d,f){var g=[],p,v=0,T=0,E=1/0;f=f||{},p=f.firstSequenceNumber||0,hr.prototype.init.call(this),this.push=function(D){Yi.collectDtsInfo(d,D),d&&Qu.forEach(function(I){d[I]=D[I]}),g.push(D)},this.setEarliestDts=function(D){v=D},this.setVideoBaseMediaDecodeTime=function(D){E=D},this.setAudioAppendStart=function(D){T=D},this.flush=function(){var D,I,L,B,U,ne,G;if(g.length===0){this.trigger("done","AudioSegmentStream");return}D=Jo.trimAdtsFramesByEarliestDts(g,d,v),d.baseMediaDecodeTime=Yi.calculateTrackBaseMediaDecodeTime(d,f.keepOriginalTimestamps),G=Jo.prefixWithSilence(d,D,T,E),d.samples=Jo.generateSampleTable(D),L=va.mdat(Jo.concatenateFrameData(D)),g=[],I=va.moof(p,[d]),B=new Uint8Array(I.byteLength+L.byteLength),p++,B.set(I),B.set(L,I.byteLength),Yi.clearDtsInfo(d),U=Math.ceil(jv*1024/d.samplerate),D.length&&(ne=D.length*U,this.trigger("segmentTimingInfo",ec(el.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),D[0].dts,D[0].pts,D[0].dts+ne,D[0].pts+ne,G||0)),this.trigger("timingInfo",{start:D[0].pts,end:D[0].pts+ne})),this.trigger("data",{track:d,boxes:B}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Yi.clearDtsInfo(d),g=[],this.trigger("reset")}},hr.prototype=new Qo,Ta=function(d,f){var g,p=[],v=[],T,E;f=f||{},g=f.firstSequenceNumber||0,Ta.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(D){Yi.collectDtsInfo(d,D),D.nalUnitType==="seq_parameter_set_rbsp"&&!T&&(T=D.config,d.sps=[D.data],Ju.forEach(function(I){d[I]=T[I]},this)),D.nalUnitType==="pic_parameter_set_rbsp"&&!E&&(E=D.data,d.pps=[D.data]),p.push(D)},this.flush=function(){for(var D,I,L,B,U,ne,G=0,fe,ve;p.length&&p[0].nalUnitType!=="access_unit_delimiter_rbsp";)p.shift();if(p.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(D=ba.groupNalsIntoFrames(p),L=ba.groupFramesIntoGops(D),L[0][0].keyFrame||(I=this.getGopForFusion_(p[0],d),I?(G=I.duration,L.unshift(I),L.byteLength+=I.byteLength,L.nalCount+=I.nalCount,L.pts=I.pts,L.dts=I.dts,L.duration+=I.duration):L=ba.extendFirstKeyFrame(L)),v.length){var Et;if(f.alignGopsAtEnd?Et=this.alignGopsAtEnd_(L):Et=this.alignGopsAtStart_(L),!Et){this.gopCache_.unshift({gop:L.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Yi.clearDtsInfo(d),L=Et}Yi.collectDtsInfo(d,L),d.samples=ba.generateSampleTable(L),U=va.mdat(ba.concatenateNalData(L)),d.baseMediaDecodeTime=Yi.calculateTrackBaseMediaDecodeTime(d,f.keepOriginalTimestamps),this.trigger("processedGopsInfo",L.map(function(Oi){return{pts:Oi.pts,dts:Oi.dts,byteLength:Oi.byteLength}})),fe=L[0],ve=L[L.length-1],this.trigger("segmentTimingInfo",ec(d.baseMediaDecodeTime,fe.dts,fe.pts,ve.dts+ve.duration,ve.pts+ve.duration,G)),this.trigger("timingInfo",{start:L[0].pts,end:L[L.length-1].pts+L[L.length-1].duration}),this.gopCache_.unshift({gop:L.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),B=va.moof(g,[d]),ne=new Uint8Array(B.byteLength+U.byteLength),g++,ne.set(B),ne.set(U,B.byteLength),this.trigger("data",{track:d,boxes:ne}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),p=[],this.gopCache_.length=0,v.length=0,this.trigger("reset")},this.resetStream_=function(){Yi.clearDtsInfo(d),T=void 0,E=void 0},this.getGopForFusion_=function(D){var I=45e3,L=1e4,B=1/0,U,ne,G,fe,ve;for(ve=0;ve<this.gopCache_.length;ve++)fe=this.gopCache_[ve],G=fe.gop,!(!(d.pps&&Xf(d.pps[0],fe.pps[0]))||!(d.sps&&Xf(d.sps[0],fe.sps[0])))&&(G.dts<d.timelineStartInfo.dts||(U=D.dts-G.dts-G.duration,U>=-L&&U<=I&&(!ne||B>U)&&(ne=fe,B=U)));return ne?ne.gop:null},this.alignGopsAtStart_=function(D){var I,L,B,U,ne,G,fe,ve;for(ne=D.byteLength,G=D.nalCount,fe=D.duration,I=L=0;I<v.length&&L<D.length&&(B=v[I],U=D[L],B.pts!==U.pts);){if(U.pts>B.pts){I++;continue}L++,ne-=U.byteLength,G-=U.nalCount,fe-=U.duration}return L===0?D:L===D.length?null:(ve=D.slice(L),ve.byteLength=ne,ve.duration=fe,ve.nalCount=G,ve.pts=ve[0].pts,ve.dts=ve[0].dts,ve)},this.alignGopsAtEnd_=function(D){var I,L,B,U,ne,G;for(I=v.length-1,L=D.length-1,ne=null,G=!1;I>=0&&L>=0;){if(B=v[I],U=D[L],B.pts===U.pts){G=!0;break}if(B.pts>U.pts){I--;continue}I===v.length-1&&(ne=L),L--}if(!G&&ne===null)return null;var fe;if(G?fe=L:fe=ne,fe===0)return D;var ve=D.slice(fe),Et=ve.reduce(function(Oi,Is){return Oi.byteLength+=Is.byteLength,Oi.duration+=Is.duration,Oi.nalCount+=Is.nalCount,Oi},{byteLength:0,duration:0,nalCount:0});return ve.byteLength=Et.byteLength,ve.duration=Et.duration,ve.nalCount=Et.nalCount,ve.pts=ve[0].pts,ve.dts=ve[0].dts,ve},this.alignGopsWith=function(D){v=D}},Ta.prototype=new Qo,Ds=function(d,f){this.numberOfTracks=0,this.metadataStream=f,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ds.prototype.init.call(this),this.push=function(g){if(g.content||g.text)return this.pendingCaptions.push(g);if(g.frames)return this.pendingMetadata.push(g);this.pendingTracks.push(g.track),this.pendingBytes+=g.boxes.byteLength,g.track.type==="video"&&(this.videoTrack=g.track,this.pendingBoxes.push(g.boxes)),g.track.type==="audio"&&(this.audioTrack=g.track,this.pendingBoxes.unshift(g.boxes))}},Ds.prototype=new Qo,Ds.prototype.flush=function(d){var f=0,g={captions:[],captionStreams:{},metadata:[],info:{}},p,v,T,E=0,D;if(this.pendingTracks.length<this.numberOfTracks){if(d!=="VideoSegmentStream"&&d!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(E=this.videoTrack.timelineStartInfo.pts,Ju.forEach(function(I){g.info[I]=this.videoTrack[I]},this)):this.audioTrack&&(E=this.audioTrack.timelineStartInfo.pts,Qu.forEach(function(I){g.info[I]=this.audioTrack[I]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,T=va.initSegment(this.pendingTracks),g.initSegment=new Uint8Array(T.byteLength),g.initSegment.set(T),g.data=new Uint8Array(this.pendingBytes),D=0;D<this.pendingBoxes.length;D++)g.data.set(this.pendingBoxes[D],f),f+=this.pendingBoxes[D].byteLength;for(D=0;D<this.pendingCaptions.length;D++)p=this.pendingCaptions[D],p.startTime=el.metadataTsToSeconds(p.startPts,E,this.keepOriginalTimestamps),p.endTime=el.metadataTsToSeconds(p.endPts,E,this.keepOriginalTimestamps),g.captionStreams[p.stream]=!0,g.captions.push(p);for(D=0;D<this.pendingMetadata.length;D++)v=this.pendingMetadata[D],v.cueTime=el.metadataTsToSeconds(v.pts,E,this.keepOriginalTimestamps),g.metadata.push(v);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),D=0;D<g.captions.length;D++)p=g.captions[D],this.trigger("caption",p);for(D=0;D<g.metadata.length;D++)v=g.metadata[D],this.trigger("id3Frame",v)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ds.prototype.setRemux=function(d){this.remuxTracks=d},tl=function(d){var f=this,g=!0,p,v;tl.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="aac",T.metadataStream=new Mn.MetadataStream,T.aacStream=new Fv,T.audioTimestampRolloverStream=new Mn.TimestampRolloverStream("audio"),T.timedMetadataTimestampRolloverStream=new Mn.TimestampRolloverStream("timed-metadata"),T.adtsStream=new Gf,T.coalesceStream=new Ds(d,T.metadataStream),T.headOfPipeline=T.aacStream,T.aacStream.pipe(T.audioTimestampRolloverStream).pipe(T.adtsStream),T.aacStream.pipe(T.timedMetadataTimestampRolloverStream).pipe(T.metadataStream).pipe(T.coalesceStream),T.metadataStream.on("timestamp",function(E){T.aacStream.setTimestamp(E.timeStamp)}),T.aacStream.on("data",function(E){E.type!=="timed-metadata"&&E.type!=="audio"||T.audioSegmentStream||(v=v||{timelineStartInfo:{baseMediaDecodeTime:f.baseMediaDecodeTime},codec:"adts",type:"audio"},T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new hr(v,d),T.audioSegmentStream.on("log",f.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",f.trigger.bind(f,"audioTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream),f.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!p}))}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),Wf(this,T)},this.setupTsPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="ts",T.metadataStream=new Mn.MetadataStream,T.packetStream=new Mn.TransportPacketStream,T.parseStream=new Mn.TransportParseStream,T.elementaryStream=new Mn.ElementaryStream,T.timestampRolloverStream=new Mn.TimestampRolloverStream,T.adtsStream=new Gf,T.h264Stream=new Nv,T.captionStream=new Mn.CaptionStream(d),T.coalesceStream=new Ds(d,T.metadataStream),T.headOfPipeline=T.packetStream,T.packetStream.pipe(T.parseStream).pipe(T.elementaryStream).pipe(T.timestampRolloverStream),T.timestampRolloverStream.pipe(T.h264Stream),T.timestampRolloverStream.pipe(T.adtsStream),T.timestampRolloverStream.pipe(T.metadataStream).pipe(T.coalesceStream),T.h264Stream.pipe(T.captionStream).pipe(T.coalesceStream),T.elementaryStream.on("data",function(E){var D;if(E.type==="metadata"){for(D=E.tracks.length;D--;)!p&&E.tracks[D].type==="video"?(p=E.tracks[D],p.timelineStartInfo.baseMediaDecodeTime=f.baseMediaDecodeTime):!v&&E.tracks[D].type==="audio"&&(v=E.tracks[D],v.timelineStartInfo.baseMediaDecodeTime=f.baseMediaDecodeTime);p&&!T.videoSegmentStream&&(T.coalesceStream.numberOfTracks++,T.videoSegmentStream=new Ta(p,d),T.videoSegmentStream.on("log",f.getLogTrigger_("videoSegmentStream")),T.videoSegmentStream.on("timelineStartInfo",function(I){v&&!d.keepOriginalTimestamps&&(v.timelineStartInfo=I,T.audioSegmentStream.setEarliestDts(I.dts-f.baseMediaDecodeTime))}),T.videoSegmentStream.on("processedGopsInfo",f.trigger.bind(f,"gopInfo")),T.videoSegmentStream.on("segmentTimingInfo",f.trigger.bind(f,"videoSegmentTimingInfo")),T.videoSegmentStream.on("baseMediaDecodeTime",function(I){v&&T.audioSegmentStream.setVideoBaseMediaDecodeTime(I)}),T.videoSegmentStream.on("timingInfo",f.trigger.bind(f,"videoTimingInfo")),T.h264Stream.pipe(T.videoSegmentStream).pipe(T.coalesceStream)),v&&!T.audioSegmentStream&&(T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new hr(v,d),T.audioSegmentStream.on("log",f.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",f.trigger.bind(f,"audioTimingInfo")),T.audioSegmentStream.on("segmentTimingInfo",f.trigger.bind(f,"audioSegmentTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream)),f.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!p})}}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("id3Frame",function(E){E.dispatchType=T.metadataStream.dispatchType,f.trigger("id3Frame",E)}),T.coalesceStream.on("caption",this.trigger.bind(this,"caption")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),Wf(this,T)},this.setBaseMediaDecodeTime=function(T){var E=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=T),v&&(v.timelineStartInfo.dts=void 0,v.timelineStartInfo.pts=void 0,Yi.clearDtsInfo(v),E.audioTimestampRolloverStream&&E.audioTimestampRolloverStream.discontinuity()),p&&(E.videoSegmentStream&&(E.videoSegmentStream.gopCache_=[]),p.timelineStartInfo.dts=void 0,p.timelineStartInfo.pts=void 0,Yi.clearDtsInfo(p),E.captionStream.reset()),E.timestampRolloverStream&&E.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(T){v&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(T)},this.setRemux=function(T){var E=this.transmuxPipeline_;d.remux=T,E&&E.coalesceStream&&E.coalesceStream.setRemux(T)},this.alignGopsWith=function(T){p&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(T)},this.getLogTrigger_=function(T){var E=this;return function(D){D.stream=T,E.trigger("log",D)}},this.push=function(T){if(g){var E=Uv(T);E&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!E&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),g=!1}this.transmuxPipeline_.headOfPipeline.push(T)},this.flush=function(){g=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},tl.prototype=new Qo;var Hv={Transmuxer:tl,VideoSegmentStream:Ta,AudioSegmentStream:hr,AUDIO_PROPERTIES:Qu,VIDEO_PROPERTIES:Ju,generateSegmentTimingInfo:ec},zv=function(d){return d>>>0},Vv=function(d){return("00"+d.toString(16)).slice(-2)},il={toUnsigned:zv,toHexString:Vv},qv=function(d){var f="";return f+=String.fromCharCode(d[0]),f+=String.fromCharCode(d[1]),f+=String.fromCharCode(d[2]),f+=String.fromCharCode(d[3]),f},Yf=qv,Gv=il.toUnsigned,Wv=Yf,Kf=function(d,f){var g=[],p,v,T,E,D;if(!f.length)return null;for(p=0;p<d.byteLength;)v=Gv(d[p]<<24|d[p+1]<<16|d[p+2]<<8|d[p+3]),T=Wv(d.subarray(p+4,p+8)),E=v>1?p+v:d.byteLength,T===f[0]&&(f.length===1?g.push(d.subarray(p+8,E)):(D=Kf(d.subarray(p+8,E),f.slice(1)),D.length&&(g=g.concat(D)))),p=E;return g},Zf=Kf,Xv=il.toUnsigned,Yv=r.getUint64,Kv=function(d){var f={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return f.version===1?f.baseMediaDecodeTime=Yv(d.subarray(4)):f.baseMediaDecodeTime=Xv(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),f},Qf=Kv,Zv=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},Qv=Zv,Jf=Qv,Jv=function(d){var f={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},g=new DataView(d.buffer,d.byteOffset,d.byteLength),p=f.flags[2]&1,v=f.flags[2]&4,T=f.flags[1]&1,E=f.flags[1]&2,D=f.flags[1]&4,I=f.flags[1]&8,L=g.getUint32(4),B=8,U;for(p&&(f.dataOffset=g.getInt32(B),B+=4),v&&L&&(U={flags:Jf(d.subarray(B,B+4))},B+=4,T&&(U.duration=g.getUint32(B),B+=4),E&&(U.size=g.getUint32(B),B+=4),I&&(f.version===1?U.compositionTimeOffset=g.getInt32(B):U.compositionTimeOffset=g.getUint32(B),B+=4),f.samples.push(U),L--);L--;)U={},T&&(U.duration=g.getUint32(B),B+=4),E&&(U.size=g.getUint32(B),B+=4),D&&(U.flags=Jf(d.subarray(B,B+4)),B+=4),I&&(f.version===1?U.compositionTimeOffset=g.getInt32(B):U.compositionTimeOffset=g.getUint32(B),B+=4),f.samples.push(U);return f},ep=Jv,eb=function(d){var f=new DataView(d.buffer,d.byteOffset,d.byteLength),g={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:f.getUint32(4)},p=g.flags[2]&1,v=g.flags[2]&2,T=g.flags[2]&8,E=g.flags[2]&16,D=g.flags[2]&32,I=g.flags[0]&65536,L=g.flags[0]&131072,B;return B=8,p&&(B+=4,g.baseDataOffset=f.getUint32(12),B+=4),v&&(g.sampleDescriptionIndex=f.getUint32(B),B+=4),T&&(g.defaultSampleDuration=f.getUint32(B),B+=4),E&&(g.defaultSampleSize=f.getUint32(B),B+=4),D&&(g.defaultSampleFlags=f.getUint32(B)),I&&(g.durationIsEmpty=!0),!p&&L&&(g.baseDataOffsetIsMoof=!0),g},tp=eb,xa;typeof window<"u"?xa=window:typeof n<"u"?xa=n:typeof self<"u"?xa=self:xa={};var ip=xa,tb=Pf.discardEmulationPreventionBytes,ib=Lf.CaptionStream,wa=Zf,nb=Qf,sb=ep,rb=tp,np=ip,ab=function(d,f){for(var g=d,p=0;p<f.length;p++){var v=f[p];if(g<v.size)return v;g-=v.size}return null},ob=function(d,f,g){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),v={logs:[],seiNals:[]},T,E,D,I;for(E=0;E+4<d.length;E+=D)if(D=p.getUint32(E),E+=4,!(D<=0))switch(d[E]&31){case 6:var L=d.subarray(E+1,E+1+D),B=ab(E,f);if(T={nalUnitType:"sei_rbsp",size:D,data:L,escapedRBSP:tb(L),trackId:g},B)T.pts=B.pts,T.dts=B.dts,I=B;else if(I)T.pts=I.pts,T.dts=I.dts;else{v.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+E+" for trackId "+g+". See mux.js#223."});break}v.seiNals.push(T);break}return v},lb=function(d,f,g){var p=f,v=g.defaultSampleDuration||0,T=g.defaultSampleSize||0,E=g.trackId,D=[];return d.forEach(function(I){var L=sb(I),B=L.samples;B.forEach(function(U){U.duration===void 0&&(U.duration=v),U.size===void 0&&(U.size=T),U.trackId=E,U.dts=p,U.compositionTimeOffset===void 0&&(U.compositionTimeOffset=0),typeof p=="bigint"?(U.pts=p+np.BigInt(U.compositionTimeOffset),p+=np.BigInt(U.duration)):(U.pts=p+U.compositionTimeOffset,p+=U.duration)}),D=D.concat(B)}),D},ub=function(d,f){var g=wa(d,["moof","traf"]),p=wa(d,["mdat"]),v={},T=[];return p.forEach(function(E,D){var I=g[D];T.push({mdat:E,traf:I})}),T.forEach(function(E){var D=E.mdat,I=E.traf,L=wa(I,["tfhd"]),B=rb(L[0]),U=B.trackId,ne=wa(I,["tfdt"]),G=ne.length>0?nb(ne[0]).baseMediaDecodeTime:0,fe=wa(I,["trun"]),ve,Et;f===U&&fe.length>0&&(ve=lb(fe,G,B),Et=ob(D,ve,U),v[U]||(v[U]={seiNals:[],logs:[]}),v[U].seiNals=v[U].seiNals.concat(Et.seiNals),v[U].logs=v[U].logs.concat(Et.logs))}),v},cb=function(d,f,g){var p;if(f===null)return null;p=ub(d,f);var v=p[f]||{};return{seiNals:v.seiNals,logs:v.logs,timescale:g}},db=function(){var d=!1,f,g,p,v,T,E;this.isInitialized=function(){return d},this.init=function(D){f=new ib,d=!0,E=D?D.isPartial:!1,f.on("data",function(I){I.startTime=I.startPts/v,I.endTime=I.endPts/v,T.captions.push(I),T.captionStreams[I.stream]=!0}),f.on("log",function(I){T.logs.push(I)})},this.isNewInit=function(D,I){return D&&D.length===0||I&&typeof I=="object"&&Object.keys(I).length===0?!1:p!==D[0]||v!==I[p]},this.parse=function(D,I,L){var B;if(this.isInitialized()){if(!I||!L)return null;if(this.isNewInit(I,L))p=I[0],v=L[p];else if(p===null||!v)return g.push(D),null}else return null;for(;g.length>0;){var U=g.shift();this.parse(U,I,L)}return B=cb(D,p,v),B&&B.logs&&(T.logs=T.logs.concat(B.logs)),B===null||!B.seiNals?T.logs.length?{logs:T.logs,captions:[],captionStreams:[]}:null:(this.pushNals(B.seiNals),this.flushStream(),T)},this.pushNals=function(D){if(!this.isInitialized()||!D||D.length===0)return null;D.forEach(function(I){f.push(I)})},this.flushStream=function(){if(!this.isInitialized())return null;E?f.partialFlush():f.flush()},this.clearParsedCaptions=function(){T.captions=[],T.captionStreams={},T.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;f.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){g=[],p=null,v=null,T?this.clearParsedCaptions():T={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},hb=db,fb=function(d){for(var f=0,g=String.fromCharCode(d[f]),p="";g!=="\0";)p+=g,f++,g=String.fromCharCode(d[f]);return p+=g,p},pb={uint8ToCString:fb},nl=pb.uint8ToCString,mb=r.getUint64,gb=function(d){var f=4,g=d[0],p,v,T,E,D,I,L,B;if(g===0){p=nl(d.subarray(f)),f+=p.length,v=nl(d.subarray(f)),f+=v.length;var U=new DataView(d.buffer);T=U.getUint32(f),f+=4,D=U.getUint32(f),f+=4,I=U.getUint32(f),f+=4,L=U.getUint32(f),f+=4}else if(g===1){var U=new DataView(d.buffer);T=U.getUint32(f),f+=4,E=mb(d.subarray(f)),f+=8,I=U.getUint32(f),f+=4,L=U.getUint32(f),f+=4,p=nl(d.subarray(f)),f+=p.length,v=nl(d.subarray(f)),f+=v.length}B=new Uint8Array(d.subarray(f,d.byteLength));var ne={scheme_id_uri:p,value:v,timescale:T||1,presentation_time:E,presentation_time_delta:D,event_duration:I,id:L,message_data:B};return yb(g,ne)?ne:void 0},_b=function(d,f,g,p){return d||d===0?d/f:p+g/f},yb=function(d,f){var g=f.scheme_id_uri!=="\0",p=d===0&&sp(f.presentation_time_delta)&&g,v=d===1&&sp(f.presentation_time)&&g;return!(d>1)&&p||v},sp=function(d){return d!==void 0||d!==null},vb={parseEmsgBox:gb,scaleTime:_b},sl=il.toUnsigned,Sa=il.toHexString,mt=Zf,fr=Yf,tc=vb,bb=tp,Tb=ep,xb=Qf,wb=r.getUint64,rp,ap,op,lp,up,ic,cp,nc=ip,Sb=Bf.parseId3Frames;rp=function(d){var f={},g=mt(d,["moov","trak"]);return g.reduce(function(p,v){var T,E,D,I,L;return T=mt(v,["tkhd"])[0],!T||(E=T[0],D=E===0?12:20,I=sl(T[D]<<24|T[D+1]<<16|T[D+2]<<8|T[D+3]),L=mt(v,["mdia","mdhd"])[0],!L)?null:(E=L[0],D=E===0?12:20,p[I]=sl(L[D]<<24|L[D+1]<<16|L[D+2]<<8|L[D+3]),p)},f)},ap=function(d,f){var g;g=mt(f,["moof","traf"]);var p=g.reduce(function(v,T){var E=mt(T,["tfhd"])[0],D=sl(E[4]<<24|E[5]<<16|E[6]<<8|E[7]),I=d[D]||9e4,L=mt(T,["tfdt"])[0],B=new DataView(L.buffer,L.byteOffset,L.byteLength),U;L[0]===1?U=wb(L.subarray(4,12)):U=B.getUint32(4);let ne;return typeof U=="bigint"?ne=U/nc.BigInt(I):typeof U=="number"&&!isNaN(U)&&(ne=U/I),ne<Number.MAX_SAFE_INTEGER&&(ne=Number(ne)),ne<v&&(v=ne),v},1/0);return typeof p=="bigint"||isFinite(p)?p:0},op=function(d,f){var g=mt(f,["moof","traf"]),p=0,v=0,T;if(g&&g.length){var E=mt(g[0],["tfhd"])[0],D=mt(g[0],["trun"])[0],I=mt(g[0],["tfdt"])[0];if(E){var L=bb(E);T=L.trackId}if(I){var B=xb(I);p=B.baseMediaDecodeTime}if(D){var U=Tb(D);U.samples&&U.samples.length&&(v=U.samples[0].compositionTimeOffset||0)}}var ne=d[T]||9e4;typeof p=="bigint"&&(v=nc.BigInt(v),ne=nc.BigInt(ne));var G=(p+v)/ne;return typeof G=="bigint"&&G<Number.MAX_SAFE_INTEGER&&(G=Number(G)),G},lp=function(d){var f=mt(d,["moov","trak"]),g=[];return f.forEach(function(p){var v=mt(p,["mdia","hdlr"]),T=mt(p,["tkhd"]);v.forEach(function(E,D){var I=fr(E.subarray(8,12)),L=T[D],B,U,ne;I==="vide"&&(B=new DataView(L.buffer,L.byteOffset,L.byteLength),U=B.getUint8(0),ne=U===0?B.getUint32(12):B.getUint32(20),g.push(ne))})}),g},ic=function(d){var f=d[0],g=f===0?12:20;return sl(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3])},up=function(d){var f=mt(d,["moov","trak"]),g=[];return f.forEach(function(p){var v={},T=mt(p,["tkhd"])[0],E,D;T&&(E=new DataView(T.buffer,T.byteOffset,T.byteLength),D=E.getUint8(0),v.id=D===0?E.getUint32(12):E.getUint32(20));var I=mt(p,["mdia","hdlr"])[0];if(I){var L=fr(I.subarray(8,12));L==="vide"?v.type="video":L==="soun"?v.type="audio":v.type=L}var B=mt(p,["mdia","minf","stbl","stsd"])[0];if(B){var U=B.subarray(8);v.codec=fr(U.subarray(4,8));var ne=mt(U,[v.codec])[0],G,fe;ne&&(/^[asm]vc[1-9]$/i.test(v.codec)?(G=ne.subarray(78),fe=fr(G.subarray(4,8)),fe==="avcC"&&G.length>11?(v.codec+=".",v.codec+=Sa(G[9]),v.codec+=Sa(G[10]),v.codec+=Sa(G[11])):v.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(v.codec)?(G=ne.subarray(28),fe=fr(G.subarray(4,8)),fe==="esds"&&G.length>20&&G[19]!==0?(v.codec+="."+Sa(G[19]),v.codec+="."+Sa(G[20]>>>2&63).replace(/^0/,"")):v.codec="mp4a.40.2"):v.codec=v.codec.toLowerCase())}var ve=mt(p,["mdia","mdhd"])[0];ve&&(v.timescale=ic(ve)),g.push(v)}),g},cp=function(d,f=0){var g=mt(d,["emsg"]);return g.map(p=>{var v=tc.parseEmsgBox(new Uint8Array(p)),T=Sb(v.message_data);return{cueTime:tc.scaleTime(v.presentation_time,v.timescale,v.presentation_time_delta,f),duration:tc.scaleTime(v.event_duration,v.timescale),frames:T}})};var sc={findBox:mt,parseType:fr,timescale:rp,startTime:ap,compositionStartTime:op,videoTrackIds:lp,tracks:up,getTimescaleFromMediaHeader:ic,getEmsgID3:cp},rc=zo,dp=function(d){var f=d[1]&31;return f<<=8,f|=d[2],f},rl=function(d){return!!(d[1]&64)},al=function(d){var f=0;return(d[3]&48)>>>4>1&&(f+=d[4]+1),f},Cb=function(d,f){var g=dp(d);return g===0?"pat":g===f?"pmt":f?"pes":null},Eb=function(d){var f=rl(d),g=4+al(d);return f&&(g+=d[g]+1),(d[g+10]&31)<<8|d[g+11]},Ab=function(d){var f={},g=rl(d),p=4+al(d);if(g&&(p+=d[p]+1),!!(d[p+5]&1)){var v,T,E;v=(d[p+1]&15)<<8|d[p+2],T=3+v-4,E=(d[p+10]&15)<<8|d[p+11];for(var D=12+E;D<T;){var I=p+D;f[(d[I+1]&31)<<8|d[I+2]]=d[I],D+=((d[I+3]&15)<<8|d[I+4])+5}return f}},Db=function(d,f){var g=dp(d),p=f[g];switch(p){case rc.H264_STREAM_TYPE:return"video";case rc.ADTS_STREAM_TYPE:return"audio";case rc.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},kb=function(d){var f=rl(d);if(!f)return null;var g=4+al(d);if(g>=d.byteLength)return null;var p=null,v;return v=d[g+7],v&192&&(p={},p.pts=(d[g+9]&14)<<27|(d[g+10]&255)<<20|(d[g+11]&254)<<12|(d[g+12]&255)<<5|(d[g+13]&254)>>>3,p.pts*=4,p.pts+=(d[g+13]&6)>>>1,p.dts=p.pts,v&64&&(p.dts=(d[g+14]&14)<<27|(d[g+15]&255)<<20|(d[g+16]&254)<<12|(d[g+17]&255)<<5|(d[g+18]&254)>>>3,p.dts*=4,p.dts+=(d[g+18]&6)>>>1)),p},ac=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ib=function(d){for(var f=4+al(d),g=d.subarray(f),p=0,v=0,T=!1,E;v<g.byteLength-3;v++)if(g[v+2]===1){p=v+5;break}for(;p<g.byteLength;)switch(g[p]){case 0:if(g[p-1]!==0){p+=2;break}else if(g[p-2]!==0){p++;break}v+3!==p-2&&(E=ac(g[v+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0));do p++;while(g[p]!==1&&p<g.length);v=p-2,p+=3;break;case 1:if(g[p-1]!==0||g[p-2]!==0){p+=3;break}E=ac(g[v+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0),v=p-2,p+=3;break;default:p+=3;break}return g=g.subarray(v),p-=v,v=0,g&&g.byteLength>3&&(E=ac(g[v+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0)),T},Pb={parseType:Cb,parsePat:Eb,parsePmt:Ab,parsePayloadUnitStartIndicator:rl,parsePesType:Db,parsePesTime:kb,videoPacketContainsKeyFrame:Ib},hp=zo,pr=Rf.handleRollover,Ue={};Ue.ts=Pb,Ue.aac=Zu;var ks=Me.ONE_SECOND_IN_TS,Xt=188,un=71,Lb=function(d,f){for(var g=0,p=Xt,v,T;p<d.byteLength;){if(d[g]===un&&d[p]===un){switch(v=d.subarray(g,p),T=Ue.ts.parseType(v,f.pid),T){case"pat":f.pid=Ue.ts.parsePat(v);break;case"pmt":var E=Ue.ts.parsePmt(v);f.table=f.table||{},Object.keys(E).forEach(function(D){f.table[D]=E[D]});break}g+=Xt,p+=Xt;continue}g++,p++}},fp=function(d,f,g){for(var p=0,v=Xt,T,E,D,I,L,B=!1;v<=d.byteLength;){if(d[p]===un&&(d[v]===un||v===d.byteLength)){switch(T=d.subarray(p,v),E=Ue.ts.parseType(T,f.pid),E){case"pes":D=Ue.ts.parsePesType(T,f.table),I=Ue.ts.parsePayloadUnitStartIndicator(T),D==="audio"&&I&&(L=Ue.ts.parsePesTime(T),L&&(L.type="audio",g.audio.push(L),B=!0));break}if(B)break;p+=Xt,v+=Xt;continue}p++,v++}for(v=d.byteLength,p=v-Xt,B=!1;p>=0;){if(d[p]===un&&(d[v]===un||v===d.byteLength)){switch(T=d.subarray(p,v),E=Ue.ts.parseType(T,f.pid),E){case"pes":D=Ue.ts.parsePesType(T,f.table),I=Ue.ts.parsePayloadUnitStartIndicator(T),D==="audio"&&I&&(L=Ue.ts.parsePesTime(T),L&&(L.type="audio",g.audio.push(L),B=!0));break}if(B)break;p-=Xt,v-=Xt;continue}p--,v--}},Ob=function(d,f,g){for(var p=0,v=Xt,T,E,D,I,L,B,U,ne,G=!1,fe={data:[],size:0};v<d.byteLength;){if(d[p]===un&&d[v]===un){switch(T=d.subarray(p,v),E=Ue.ts.parseType(T,f.pid),E){case"pes":if(D=Ue.ts.parsePesType(T,f.table),I=Ue.ts.parsePayloadUnitStartIndicator(T),D==="video"&&(I&&!G&&(L=Ue.ts.parsePesTime(T),L&&(L.type="video",g.video.push(L),G=!0)),!g.firstKeyFrame)){if(I&&fe.size!==0){for(B=new Uint8Array(fe.size),U=0;fe.data.length;)ne=fe.data.shift(),B.set(ne,U),U+=ne.byteLength;if(Ue.ts.videoPacketContainsKeyFrame(B)){var ve=Ue.ts.parsePesTime(B);ve?(g.firstKeyFrame=ve,g.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}fe.size=0}fe.data.push(T),fe.size+=T.byteLength}break}if(G&&g.firstKeyFrame)break;p+=Xt,v+=Xt;continue}p++,v++}for(v=d.byteLength,p=v-Xt,G=!1;p>=0;){if(d[p]===un&&d[v]===un){switch(T=d.subarray(p,v),E=Ue.ts.parseType(T,f.pid),E){case"pes":D=Ue.ts.parsePesType(T,f.table),I=Ue.ts.parsePayloadUnitStartIndicator(T),D==="video"&&I&&(L=Ue.ts.parsePesTime(T),L&&(L.type="video",g.video.push(L),G=!0));break}if(G)break;p-=Xt,v-=Xt;continue}p--,v--}},Rb=function(d,f){if(d.audio&&d.audio.length){var g=f;(typeof g>"u"||isNaN(g))&&(g=d.audio[0].dts),d.audio.forEach(function(T){T.dts=pr(T.dts,g),T.pts=pr(T.pts,g),T.dtsTime=T.dts/ks,T.ptsTime=T.pts/ks})}if(d.video&&d.video.length){var p=f;if((typeof p>"u"||isNaN(p))&&(p=d.video[0].dts),d.video.forEach(function(T){T.dts=pr(T.dts,p),T.pts=pr(T.pts,p),T.dtsTime=T.dts/ks,T.ptsTime=T.pts/ks}),d.firstKeyFrame){var v=d.firstKeyFrame;v.dts=pr(v.dts,p),v.pts=pr(v.pts,p),v.dtsTime=v.dts/ks,v.ptsTime=v.pts/ks}}},Mb=function(d){for(var f=!1,g=0,p=null,v=null,T=0,E=0,D;d.length-E>=3;){var I=Ue.aac.parseType(d,E);switch(I){case"timed-metadata":if(d.length-E<10){f=!0;break}if(T=Ue.aac.parseId3TagSize(d,E),T>d.length){f=!0;break}v===null&&(D=d.subarray(E,E+T),v=Ue.aac.parseAacTimestamp(D)),E+=T;break;case"audio":if(d.length-E<7){f=!0;break}if(T=Ue.aac.parseAdtsSize(d,E),T>d.length){f=!0;break}p===null&&(D=d.subarray(E,E+T),p=Ue.aac.parseSampleRate(D)),g++,E+=T;break;default:E++;break}if(f)return null}if(p===null||v===null)return null;var L=ks/p,B={audio:[{type:"audio",dts:v,pts:v},{type:"audio",dts:v+g*1024*L,pts:v+g*1024*L}]};return B},Bb=function(d){var f={pid:null,table:null},g={};Lb(d,f);for(var p in f.table)if(f.table.hasOwnProperty(p)){var v=f.table[p];switch(v){case hp.H264_STREAM_TYPE:g.video=[],Ob(d,f,g),g.video.length===0&&delete g.video;break;case hp.ADTS_STREAM_TYPE:g.audio=[],fp(d,f,g),g.audio.length===0&&delete g.audio;break}}return g},Nb=function(d,f){var g=Ue.aac.isLikelyAacData(d),p;return g?p=Mb(d):p=Bb(d),!p||!p.audio&&!p.video?null:(Rb(p,f),p)},Fb={inspect:Nb,parseAudioPes_:fp};const Ub=function(d,f){f.on("data",function(g){const p=g.initSegment;g.initSegment={data:p.buffer,byteOffset:p.byteOffset,byteLength:p.byteLength};const v=g.data;g.data=v.buffer,d.postMessage({action:"data",segment:g,byteOffset:v.byteOffset,byteLength:v.byteLength},[g.data])}),f.on("done",function(g){d.postMessage({action:"done"})}),f.on("gopInfo",function(g){d.postMessage({action:"gopInfo",gopInfo:g})}),f.on("videoSegmentTimingInfo",function(g){const p={start:{decode:Me.videoTsToSeconds(g.start.dts),presentation:Me.videoTsToSeconds(g.start.pts)},end:{decode:Me.videoTsToSeconds(g.end.dts),presentation:Me.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:Me.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(p.prependedContentDuration=Me.videoTsToSeconds(g.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:p})}),f.on("audioSegmentTimingInfo",function(g){const p={start:{decode:Me.videoTsToSeconds(g.start.dts),presentation:Me.videoTsToSeconds(g.start.pts)},end:{decode:Me.videoTsToSeconds(g.end.dts),presentation:Me.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:Me.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(p.prependedContentDuration=Me.videoTsToSeconds(g.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:p})}),f.on("id3Frame",function(g){d.postMessage({action:"id3Frame",id3Frame:g})}),f.on("caption",function(g){d.postMessage({action:"caption",caption:g})}),f.on("trackinfo",function(g){d.postMessage({action:"trackinfo",trackInfo:g})}),f.on("audioTimingInfo",function(g){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Me.videoTsToSeconds(g.start),end:Me.videoTsToSeconds(g.end)}})}),f.on("videoTimingInfo",function(g){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Me.videoTsToSeconds(g.start),end:Me.videoTsToSeconds(g.end)}})}),f.on("log",function(g){d.postMessage({action:"log",log:g})})};class pp{constructor(f,g){this.options=g||{},this.self=f,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Hv.Transmuxer(this.options),Ub(this.self,this.transmuxer)}pushMp4Captions(f){this.captionParser||(this.captionParser=new hb,this.captionParser.init());const g=new Uint8Array(f.data,f.byteOffset,f.byteLength),p=this.captionParser.parse(g,f.trackIds,f.timescales);this.self.postMessage({action:"mp4Captions",captions:p&&p.captions||[],logs:p&&p.logs||[],data:g.buffer},[g.buffer])}probeMp4StartTime({timescales:f,data:g}){const p=sc.startTime(f,g);this.self.postMessage({action:"probeMp4StartTime",startTime:p,data:g},[g.buffer])}probeMp4Tracks({data:f}){const g=sc.tracks(f);this.self.postMessage({action:"probeMp4Tracks",tracks:g,data:f},[f.buffer])}probeEmsgID3({data:f,offset:g}){const p=sc.getEmsgID3(f,g);this.self.postMessage({action:"probeEmsgID3",id3Frames:p,emsgData:f},[f.buffer])}probeTs({data:f,baseStartTime:g}){const p=typeof g=="number"&&!isNaN(g)?g*Me.ONE_SECOND_IN_TS:void 0,v=Fb.inspect(f,p);let T=null;v&&(T={hasVideo:v.video&&v.video.length===2||!1,hasAudio:v.audio&&v.audio.length===2||!1},T.hasVideo&&(T.videoStart=v.video[0].ptsTime),T.hasAudio&&(T.audioStart=v.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:T,data:f},[f.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(f){const g=new Uint8Array(f.data,f.byteOffset,f.byteLength);this.transmuxer.push(g)}reset(){this.transmuxer.reset()}setTimestampOffset(f){const g=f.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Me.secondsToVideoTs(g)))}setAudioAppendStart(f){this.transmuxer.setAudioAppendStart(Math.ceil(Me.secondsToVideoTs(f.appendStart)))}setRemux(f){this.transmuxer.setRemux(f.remux)}flush(f){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(f){this.transmuxer.alignGopsWith(f.gopsToAlignWith.slice())}}self.onmessage=function(d){if(d.data.action==="init"&&d.data.options){this.messageHandlers=new pp(self,d.data.options);return}this.messageHandlers||(this.messageHandlers=new pp(self)),d.data&&d.data.action&&d.data.action!=="init"&&this.messageHandlers[d.data.action]&&this.messageHandlers[d.data.action](d.data)}}));var _k=b2(gk);const yk=(n,e,t)=>{const{type:i,initSegment:s,captions:r,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=n.data.segment;e.buffer.push({captions:r,captionStreams:a,metadata:o});const c=n.data.segment.boxes||{data:n.data.segment.data},h={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},vk=({transmuxedData:n,callback:e})=>{n.buffer=[],e(n)},bk=(n,e)=>{e.gopInfo=n.data.gopInfo},w2=n=>{const{transmuxer:e,bytes:t,audioAppendStart:i,gopsToAlignWith:s,remux:r,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:m,onCaptions:y,onDone:_,onEndedTimeline:b,onTransmuxerLog:x,isEndOfTimeline:S}=n,w={buffer:[]};let A=S;const k=C=>{e.currentTransmux===n&&(C.data.action==="data"&&yk(C,w,a),C.data.action==="trackinfo"&&o(C.data.trackInfo),C.data.action==="gopInfo"&&bk(C,w),C.data.action==="audioTimingInfo"&&l(C.data.audioTimingInfo),C.data.action==="videoTimingInfo"&&u(C.data.videoTimingInfo),C.data.action==="videoSegmentTimingInfo"&&c(C.data.videoSegmentTimingInfo),C.data.action==="audioSegmentTimingInfo"&&h(C.data.audioSegmentTimingInfo),C.data.action==="id3Frame"&&m([C.data.id3Frame],C.data.id3Frame.dispatchType),C.data.action==="caption"&&y(C.data.caption),C.data.action==="endedtimeline"&&(A=!1,b()),C.data.action==="log"&&x(C.data.log),C.data.type==="transmuxed"&&(A||(e.onmessage=null,vk({transmuxedData:w,callback:_}),S2(e))))};if(e.onmessage=k,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(s)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof r<"u"&&e.postMessage({action:"setRemux",remux:r}),t.byteLength){const C=t instanceof ArrayBuffer?t:t.buffer,R=t instanceof ArrayBuffer?0:t.byteOffset;e.postMessage({action:"push",data:C,byteOffset:R,byteLength:t.byteLength},[C])}S&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},S2=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),typeof n.currentTransmux=="function"?n.currentTransmux():w2(n.currentTransmux))},Eg=(n,e)=>{n.postMessage({action:e}),S2(n)},C2=(n,e)=>{if(!e.currentTransmux){e.currentTransmux=n,Eg(e,n);return}e.transmuxQueue.push(Eg.bind(null,e,n))},Tk=n=>{C2("reset",n)},xk=n=>{C2("endTimeline",n)},E2=n=>{if(!n.transmuxer.currentTransmux){n.transmuxer.currentTransmux=n,w2(n);return}n.transmuxer.transmuxQueue.push(n)},wk=n=>{const e=new _k;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:n}),e};var Vc={reset:Tk,endTimeline:xk,transmux:E2,createTransmuxer:wk};const io=function(n){const e=n.transmuxer,t=n.endAction||n.action,i=n.callback,s=Zi({},n,{endAction:null,transmuxer:null,callback:null}),r=a=>{a.data.action===t&&(e.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,n.byteOffset||0,n.byteLength||a.data.data.byteLength),n.data&&(n.data=a.data.data)),i(a.data))};if(e.addEventListener("message",r),n.data){const a=n.data instanceof ArrayBuffer;s.byteOffset=a?0:n.data.byteOffset,s.byteLength=n.data.byteLength;const o=[a?n.data:n.data.buffer];e.postMessage(s,o)}else e.postMessage(s)},vn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Gd=n=>{n.forEach(e=>{e.abort()})},Sk=n=>({bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}),Ck=n=>{const e=n.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=n.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},Af=(n,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:vn.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:vn.ABORTED,xhr:e}:n?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:vn.FAILURE,xhr:e}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:vn.FAILURE,xhr:e}:null,Ag=(n,e,t)=>(i,s)=>{const r=s.response,a=Af(i,s);if(a)return t(a,n);if(r.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:vn.FAILURE,xhr:s},n);const o=new DataView(r),l=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]);for(let u=0;u<e.length;u++)e[u].bytes=l;return t(null,n)},A2=(n,e)=>{const t=qh(n.map.bytes);if(t!=="mp4"){const i=n.map.resolvedUri||n.map.uri;return e({internal:!0,message:`Found unsupported ${t||"unknown"} container for initialization segment at URL: ${i}`,code:vn.FAILURE})}io({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:i,data:s})=>(n.map.bytes=s,i.forEach(function(r){n.map.tracks=n.map.tracks||{},!n.map.tracks[r.type]&&(n.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[r.id]=r.timescale))}),e(null))})},Ek=({segment:n,finishProcessingFn:e})=>(t,i)=>{const s=Af(t,i);if(s)return e(s,n);const r=new Uint8Array(i.response);if(n.map.key)return n.map.encryptedBytes=r,e(null,n);n.map.bytes=r,A2(n,function(a){if(a)return a.xhr=i,a.status=i.status,e(a,n);e(null,n)})},Ak=({segment:n,finishProcessingFn:e,responseType:t})=>(i,s)=>{const r=Af(i,s);if(r)return e(r,n);const a=t==="arraybuffer"||!s.responseText?s.response:pk(s.responseText.substring(n.lastReachedChar||0));return n.stats=Sk(s),n.key?n.encryptedBytes=new Uint8Array(a):n.bytes=new Uint8Array(a),e(null,n)},Dk=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m})=>{const y=n.map&&n.map.tracks||{},_=!!(y.audio&&y.video);let b=i.bind(null,n,"audio","start");const x=i.bind(null,n,"audio","end");let S=i.bind(null,n,"video","start");const w=i.bind(null,n,"video","end"),A=()=>E2({bytes:e,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:_,onData:k=>{k.type=k.type==="combined"?"video":k.type,c(n,k)},onTrackInfo:k=>{t&&(_&&(k.isMuxed=!0),t(n,k))},onAudioTimingInfo:k=>{b&&typeof k.start<"u"&&(b(k.start),b=null),x&&typeof k.end<"u"&&x(k.end)},onVideoTimingInfo:k=>{S&&typeof k.start<"u"&&(S(k.start),S=null),w&&typeof k.end<"u"&&w(k.end)},onVideoSegmentTimingInfo:k=>{s(k)},onAudioSegmentTimingInfo:k=>{r(k)},onId3:(k,C)=>{a(n,k,C)},onCaptions:k=>{o(n,[k])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:m,onDone:k=>{h&&(k.type=k.type==="combined"?"video":k.type,h(null,n,k))}});io({action:"probeTs",transmuxer:n.transmuxer,data:e,baseStartTime:n.baseStartTime,callback:k=>{n.bytes=e=k.data;const C=k.result;C&&(t(n,{hasAudio:C.hasAudio,hasVideo:C.hasVideo,isMuxed:_}),t=null),A()}})},D2=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m})=>{let y=new Uint8Array(e);if(t6(y)){n.isFmp4=!0;const{tracks:_}=n.map,b={isFmp4:!0,hasVideo:!!_.video,hasAudio:!!_.audio};_.audio&&_.audio.codec&&_.audio.codec!=="enca"&&(b.audioCodec=_.audio.codec),_.video&&_.video.codec&&_.video.codec!=="encv"&&(b.videoCodec=_.video.codec),_.video&&_.audio&&(b.isMuxed=!0),t(n,b);const x=(S,w)=>{c(n,{data:y,type:b.hasAudio&&!b.isMuxed?"audio":"video"}),w&&w.length&&a(n,w),S&&S.length&&o(n,S),h(null,n,{})};io({action:"probeMp4StartTime",timescales:n.map.timescales,data:y,transmuxer:n.transmuxer,callback:({data:S,startTime:w})=>{e=S.buffer,n.bytes=y=S,b.hasAudio&&!b.isMuxed&&i(n,"audio","start",w),b.hasVideo&&i(n,"video","start",w),io({action:"probeEmsgID3",data:y,transmuxer:n.transmuxer,offset:w,callback:({emsgData:A,id3Frames:k})=>{if(e=A.buffer,n.bytes=y=A,!_.video||!A.byteLength||!n.transmuxer){x(void 0,k);return}io({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:y,timescales:n.map.timescales,trackIds:[_.video.id],callback:C=>{e=C.data.buffer,n.bytes=y=C.data,C.logs.forEach(function(R){m(Fe(R,{stream:"mp4CaptionParser"}))}),x(C.captions,k)}})}})}});return}if(!n.transmuxer){h(null,n,{});return}if(typeof n.container>"u"&&(n.container=qh(y)),n.container!=="ts"&&n.container!=="aac"){t(n,{hasAudio:!1,hasVideo:!1}),h(null,n,{});return}Dk({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m})},k2=function({id:n,key:e,encryptedBytes:t,decryptionWorker:i},s){const r=o=>{if(o.data.source===n){i.removeEventListener("message",r);const l=o.data.decrypted;s(new Uint8Array(l.bytes,l.byteOffset,l.byteLength))}};i.addEventListener("message",r);let a;e.bytes.slice?a=e.bytes.slice():a=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(p2({source:n,encrypted:t,key:a,iv:e.iv}),[t.buffer,a.buffer])},kk=({decryptionWorker:n,segment:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m})=>{k2({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:n},y=>{e.bytes=y,D2({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m})})},Ik=({activeXhrs:n,decryptionWorker:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m})=>{let y=0,_=!1;return(b,x)=>{if(!_){if(b)return _=!0,Gd(n),h(b,x);if(y+=1,y===n.length){const S=function(){if(x.encryptedBytes)return kk({decryptionWorker:e,segment:x,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m});D2({segment:x,bytes:x.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m})};if(x.endOfAllRequests=Date.now(),x.map&&x.map.encryptedBytes&&!x.map.bytes)return k2({decryptionWorker:e,id:x.requestId+"-init",encryptedBytes:x.map.encryptedBytes,key:x.map.key},w=>{x.map.bytes=w,A2(x,A=>{if(A)return Gd(n),h(A,x);S()})});S()}}}},Pk=({loadendState:n,abortFn:e})=>t=>{t.target.aborted&&e&&!n.calledAbortFn&&(e(),n.calledAbortFn=!0)},Lk=({segment:n,progressFn:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return n.stats=Fe(n.stats,Ck(h)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),e(h,n)},Ok=({xhr:n,xhrOptions:e,decryptionWorker:t,segment:i,abortFn:s,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:y,dataFn:_,doneFn:b,onTransmuxerLog:x})=>{const S=[],w=Ik({activeXhrs:S,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:y,dataFn:_,doneFn:b,onTransmuxerLog:x});if(i.key&&!i.key.bytes){const N=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&N.push(i.map.key);const H=Fe(e,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),M=Ag(i,N,w),ie=n(H,M);S.push(ie)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const ee=Fe(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),K=Ag(i,[i.map.key],w),q=n(ee,K);S.push(q)}const H=Fe(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Vd(i.map)}),M=Ek({segment:i,finishProcessingFn:w}),ie=n(H,M);S.push(ie)}const A=Fe(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:Vd(i)}),k=Ak({segment:i,finishProcessingFn:w,responseType:A.responseType}),C=n(A,k);C.addEventListener("progress",Lk({segment:i,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:y,dataFn:_})),S.push(C);const R={};return S.forEach(N=>{N.addEventListener("loadend",Pk({loadendState:R,abortFn:s}))}),()=>Gd(S)},Rk=zi("CodecUtils"),Mk=function(n){const e=n.attributes||{};if(e.CODECS)return hn(e.CODECS)},I2=(n,e)=>{const t=e.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&t.AUDIO&&n.mediaGroups.AUDIO[t.AUDIO]},Bk=(n,e)=>{if(!I2(n,e))return!0;const t=e.attributes||{},i=n.mediaGroups.AUDIO[t.AUDIO];for(const s in i)if(!i[s].uri&&!i[s].playlists)return!0;return!1},nu=function(n){const e={};return n.forEach(({mediaType:t,type:i,details:s})=>{e[t]=e[t]||[],e[t].push(V_(`${i}${s}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){Rk(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},Dg=function(n){let e=0;return n.audio&&e++,n.video&&e++,e},no=function(n,e){const t=e.attributes||{},i=nu(Mk(e)||[]);if(I2(n,e)&&!i.audio&&!Bk(n,e)){const s=nu(t8(n,t.AUDIO)||[]);s.audio&&(i.audio=s.audio)}return i},pl=zi("PlaylistSelector"),kg=function(n){if(!n||!n.playlist)return;const e=n.playlist;return JSON.stringify({id:e.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:e.attributes&&e.attributes.CODECS||""})},su=function(n,e){if(!n)return"";const t=P.getComputedStyle(n);return t?t[e]:""},Fr=function(n,e){const t=n.slice();n.sort(function(i,s){const r=e(i,s);return r===0?t.indexOf(i)-t.indexOf(s):r})},Df=function(n,e){let t,i;return n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH),t=t||P.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||P.Number.MAX_VALUE,t-i},Nk=function(n,e){let t,i;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(t=n.attributes.RESOLUTION.width),t=t||P.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||P.Number.MAX_VALUE,t===i&&n.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?n.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-i};let P2=function(n,e,t,i,s,r){if(!n)return;const a={bandwidth:e,width:t,height:i,limitRenditionByPlayerDimensions:s};let o=n.playlists;oi.isAudioOnly(n)&&(o=r.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(C=>{let R;const N=C.attributes&&C.attributes.RESOLUTION&&C.attributes.RESOLUTION.width,H=C.attributes&&C.attributes.RESOLUTION&&C.attributes.RESOLUTION.height;return R=C.attributes&&C.attributes.BANDWIDTH,R=R||P.Number.MAX_VALUE,{bandwidth:R,width:N,height:H,playlist:C}});Fr(l,(C,R)=>C.bandwidth-R.bandwidth),l=l.filter(C=>!oi.isIncompatible(C.playlist));let u=l.filter(C=>oi.isEnabled(C.playlist));u.length||(u=l.filter(C=>!oi.isDisabled(C.playlist)));const c=u.filter(C=>C.bandwidth*kt.BANDWIDTH_VARIANCE<e);let h=c[c.length-1];const m=c.filter(C=>C.bandwidth===h.bandwidth)[0];if(s===!1){const C=m||u[0]||l[0];if(C&&C.playlist){let R="sortedPlaylistReps";return m&&(R="bandwidthBestRep"),u[0]&&(R="enabledPlaylistReps"),pl(`choosing ${kg(C)} using ${R} with options`,a),C.playlist}return pl("could not choose a playlist with options",a),null}const y=c.filter(C=>C.width&&C.height);Fr(y,(C,R)=>C.width-R.width);const _=y.filter(C=>C.width===t&&C.height===i);h=_[_.length-1];const b=_.filter(C=>C.bandwidth===h.bandwidth)[0];let x,S,w;b||(x=y.filter(C=>C.width>t||C.height>i),S=x.filter(C=>C.width===x[0].width&&C.height===x[0].height),h=S[S.length-1],w=S.filter(C=>C.bandwidth===h.bandwidth)[0]);let A;if(r.leastPixelDiffSelector){const C=y.map(R=>(R.pixelDiff=Math.abs(R.width-t)+Math.abs(R.height-i),R));Fr(C,(R,N)=>R.pixelDiff===N.pixelDiff?N.bandwidth-R.bandwidth:R.pixelDiff-N.pixelDiff),A=C[0]}const k=A||w||b||m||u[0]||l[0];if(k&&k.playlist){let C="sortedPlaylistReps";return A?C="leastPixelDiffRep":w?C="resolutionPlusOneRep":b?C="resolutionBestRep":m?C="bandwidthBestRep":u[0]&&(C="enabledPlaylistReps"),pl(`choosing ${kg(k)} using ${C} with options`,a),k.playlist}return pl("could not choose a playlist with options",a),null};const Ig=function(){const n=this.useDevicePixelRatio&&P.devicePixelRatio||1;return P2(this.playlists.main,this.systemBandwidth,parseInt(su(this.tech_.el(),"width"),10)*n,parseInt(su(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)},Fk=function(n){let e=-1,t=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const i=this.useDevicePixelRatio&&P.devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=n*this.systemBandwidth+(1-n)*e,t=this.systemBandwidth),P2(this.playlists.main,e,parseInt(su(this.tech_.el(),"width"),10)*i,parseInt(su(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},Uk=function(n){const{main:e,currentTime:t,bandwidth:i,duration:s,segmentDuration:r,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=n,u=e.playlists.filter(_=>!oi.isIncompatible(_));let c=u.filter(oi.isEnabled);c.length||(c=u.filter(_=>!oi.isDisabled(_)));const m=c.filter(oi.hasAttribute.bind(null,"BANDWIDTH")).map(_=>{const x=l.getSyncPoint(_,s,o,t)?1:2,w=oi.estimateSegmentRequestTime(r,i,_)*x-a;return{playlist:_,rebufferingImpact:w}}),y=m.filter(_=>_.rebufferingImpact<=0);return Fr(y,(_,b)=>Df(b.playlist,_.playlist)),y.length?y[0]:(Fr(m,(_,b)=>_.rebufferingImpact-b.rebufferingImpact),m[0]||null)},jk=function(){const n=this.playlists.main.playlists.filter(oi.isEnabled);return Fr(n,(t,i)=>Df(t,i)),n.filter(t=>!!no(this.playlists.main,t).video)[0]||null},$k=n=>{let e=0,t;return n.bytes&&(t=new Uint8Array(n.bytes),n.segments.forEach(i=>{t.set(i,e),e+=i.byteLength})),t},Hk=function(n,e,t){if(!n[t]){e.trigger({type:"usage",name:"vhs-608"});let i=t;/^cc708_/.test(t)&&(i="SERVICE"+t.split("_")[1]);const s=e.textTracks().getTrackById(i);if(s)n[t]=s;else{const r=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=r[i];u&&(a=u.label,o=u.language,l=u.default),n[t]=e.addRemoteTextTrack({kind:"captions",id:i,default:l,label:a,language:o},!1).track}}},zk=function({inbandTextTracks:n,captionArray:e,timestampOffset:t}){if(!e)return;const i=P.WebKitDataCue||P.VTTCue;e.forEach(s=>{const r=s.stream;s.content?s.content.forEach(a=>{const o=new i(s.startTime+t,s.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",n[r].addCue(o)}):n[r].addCue(new i(s.startTime+t,s.endTime+t,s.text))})},Vk=function(n){Object.defineProperties(n.frame,{id:{get(){return j.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key}},value:{get(){return j.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data}},privateData:{get(){return j.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data}}})},qk=({inbandTextTracks:n,metadataArray:e,timestampOffset:t,videoDuration:i})=>{if(!e)return;const s=P.WebKitDataCue||P.VTTCue,r=n.metadataTrack_;if(!r||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||P.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(m=>{const y=new s(h,h,m.value||m.url||m.data||"");y.frame=m,y.value=m,Vk(y),r.addCue(y)})}),!r.cues||!r.cues.length))return;const a=r.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const m=c[h.startTime]||[];return m.push(h),c[h.startTime]=m,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const m=l[c],y=isFinite(i)?i:c,_=Number(u[h+1])||y;m.forEach(b=>{b.endTime=_})})},Gk={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Wk=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Xk=({inbandTextTracks:n,dateRanges:e})=>{const t=n.metadataTrack_;if(!t)return;const i=P.WebKitDataCue||P.VTTCue;e.forEach(s=>{for(const r of Object.keys(s)){if(Wk.has(r))continue;const a=new i(s.startTime,s.endTime,"");a.id=s.id,a.type="com.apple.quicktime.HLS",a.value={key:Gk[r],data:s[r]},(r==="scte35Out"||r==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}s.processDateRange()})},Pg=(n,e,t)=>{n.metadataTrack_||(n.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,j.browser.IS_ANY_SAFARI||(n.metadataTrack_.inBandMetadataTrackDispatchType=e))},qa=function(n,e,t){let i,s;if(t&&t.cues)for(i=t.cues.length;i--;)s=t.cues[i],s.startTime>=n&&s.endTime<=e&&t.removeCue(s)},Yk=function(n){const e=n.cues;if(!e)return;const t={};for(let i=e.length-1;i>=0;i--){const s=e[i],r=`${s.startTime}-${s.endTime}-${s.text}`;t[r]?n.removeCue(s):t[r]=s}},Kk=(n,e,t)=>{if(typeof e>"u"||e===null||!n.length)return[];const i=Math.ceil((e-t+3)*Hs.ONE_SECOND_IN_TS);let s;for(s=0;s<n.length&&!(n[s].pts>i);s++);return n.slice(s)},Zk=(n,e,t)=>{if(!e.length)return n;if(t)return e.slice();const i=e[0].pts;let s=0;for(s;s<n.length&&!(n[s].pts>=i);s++);return n.slice(0,s).concat(e)},Qk=(n,e,t,i)=>{const s=Math.ceil((e-i)*Hs.ONE_SECOND_IN_TS),r=Math.ceil((t-i)*Hs.ONE_SECOND_IN_TS),a=n.slice();let o=n.length;for(;o--&&!(n[o].pts<=r););if(o===-1)return a;let l=o+1;for(;l--&&!(n[l].pts<=s););return l=Math.max(l,0),a.splice(l,o-l+1),a},Jk=function(n,e){if(!n&&!e||!n&&e||n&&!e)return!1;if(n===e)return!0;const t=Object.keys(n).sort(),i=Object.keys(e).sort();if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++){const r=t[s];if(r!==i[s]||n[r]!==e[r])return!1}return!0},L2=22,e7=function(n,e,t){e=e||[];const i=[];let s=0;for(let r=0;r<e.length;r++){const a=e[r];if(n===a.timeline&&(i.push(r),s+=a.duration,s>t))return r}return i.length===0?0:i[i.length-1]},Ra=1,t7=500,Lg=n=>typeof n=="number"&&isFinite(n),ml=1/60,i7=(n,e,t)=>n!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,n7=(n,e,t)=>{let i=e-kt.BACK_BUFFER_LENGTH;n.length&&(i=Math.max(i,n.start(0)));const s=e-t;return Math.min(s,i)},Tr=n=>{const{startOfSegment:e,duration:t,segment:i,part:s,playlist:{mediaSequence:r,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=n,h=o.length-1;let m="mediaIndex/partIndex increment";n.getMediaInfoForTime?m=`getMediaInfoForTime (${n.getMediaInfoForTime})`:n.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(m+=` with independent ${n.independent}`);const y=typeof u=="number",_=n.segment.uri?"segment":"pre-segment",b=y?Jy({preloadSegment:i})-1:0;return`${_} [${r+l}/${r+h}]`+(y?` part [${u}/${b}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(y?` part start/end [${s.start} => ${s.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${m}] playlist [${a}]`},Og=n=>`${n}TimingInfo`,s7=({segmentTimeline:n,currentTimeline:e,startOfSegment:t,buffered:i,overrideCheck:s})=>!s&&n===e?null:n<e?t:i.length?i.end(i.length-1):t,Rg=({timelineChangeController:n,currentTimeline:e,segmentTimeline:t,loaderType:i,audioDisabled:s})=>{if(e===t)return!1;if(i==="audio"){const r=n.lastTimelineChange({type:"main"});return!r||r.to!==t}if(i==="main"&&s){const r=n.pendingTimelineChange({type:"audio"});return!(r&&r.to===t)}return!1},r7=n=>{let e=0;return["video","audio"].forEach(function(t){const i=n[`${t}TimingInfo`];if(!i)return;const{start:s,end:r}=i;let a;typeof s=="bigint"||typeof r=="bigint"?a=P.BigInt(r)-P.BigInt(s):typeof s=="number"&&typeof r=="number"&&(a=r-s),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},Mg=({segmentDuration:n,maxDuration:e})=>n?Math.round(n)>e+_n:!1,a7=(n,e)=>{if(e!=="hls")return null;const t=r7({audioTimingInfo:n.audioTimingInfo,videoTimingInfo:n.videoTimingInfo});if(!t)return null;const i=n.playlist.targetDuration,s=Mg({segmentDuration:t,maxDuration:i*2}),r=Mg({segmentDuration:t,maxDuration:i}),a=`Segment with index ${n.mediaIndex} from playlist ${n.playlist.id} has a duration of ${t} when the reported duration is ${n.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||r?{severity:s?"warn":"info",message:a}:null};class Wd extends j.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=zi(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return Vc.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&P.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,P.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Vc.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Ht();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:i,isMuxed:s}=e;if(i&&t&&!this.audioDisabled_&&!s)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const i=iu(e);let s=this.initSegments_[i];return t&&!s&&e.bytes&&(this.initSegments_[i]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),s||e}segmentKey(e,t=!1){if(!e)return null;const i=m2(e);let s=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!s&&e.bytes&&(this.keyCache_[i]=s={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(s||e).resolvedUri};return s&&(r.bytes=s.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const i=this.playlist_,s=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.syncController_.updateMediaSequenceMap(e,this.currentTime_(),this.loaderType_),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}s&&(s.mediaIndex-=a,s.mediaIndex<0?(s.mediaIndex=null,s.partIndex=null):(s.mediaIndex>=0&&(s.segment=e.segments[s.mediaIndex]),s.partIndex>=0&&s.segment.parts&&(s.part=s.segment.parts[s.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(P.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&Vc.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.shouldForceTimestampOffsetAfterResync_=!0,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=()=>{},s=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let r=1;const a=()=>{r--,r===0&&i()};(s||!this.audioDisabled_)&&(r++,this.sourceUpdater_.removeAudio(e,t,a)),(s||this.loaderType_==="main")&&(this.gopBuffer_=Qk(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)qa(e,t,this.inbandTextTracks_[o]);qa(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&P.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=P.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&P.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=P.setTimeout(this.monitorBufferTick_.bind(this),t7)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;const s=typeof e=="number"&&t.segments[e],r=e+1===t.segments.length,a=!s||!s.parts||i+1===s.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&r&&a}chooseNextRequest_(){const e=this.buffered_(),t=Tg(e)||0,i=wf(e,this.currentTime_()),s=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||s||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=e7(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const m=a[this.mediaIndex],y=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=m.end?m.end:t,m.parts&&m.parts[y+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=y+1):o.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:m,startTime:y,partIndex:_}=oi.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,o.mediaIndex=m,o.startOfSegment=y,o.partIndex=_,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&u&&!c&&!u.independent)if(o.partIndex===0){const m=a[o.mediaIndex-1],y=m.parts&&m.parts.length&&m.parts[m.parts.length-1];y&&y.independent&&(o.mediaIndex-=1,o.partIndex=m.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}generateSegmentInfo_(e){const{independent:t,playlist:i,mediaIndex:s,startOfSegment:r,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=i.segments[s],h=typeof o=="number"&&c.parts[o],m={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:s,partIndex:h?o:null,isSyncRequest:a,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},y=typeof l<"u"?l:this.isPendingTimestampOffset_;m.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:y});const _=Tg(this.sourceUpdater_.audioBuffered());return typeof _=="number"&&(m.audioAppendStart=_-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(m.gopsToAlignWith=Kk(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),m}timestampOffsetForSegment_(e){return s7(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),i=e.bandwidth,s=this.pendingSegment_.duration,r=oi.estimateSegmentRequestTime(s,i,this.playlist_,e.bytesReceived),a=ED(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(r<=a)return;const o=Uk({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=r-a-o.rebufferingImpact;let c=.5;a<=_n&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*kt.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Tr(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},Jk(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,t,i,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,a=Og(t);r[a]=r[a]||{},r[a][i]=s,this.logger_(`timinginfo: ${t} - ${i} - ${s}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const s=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach(a=>{r[a.stream]=r[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=r[a.stream];o.startTime=Math.min(o.startTime,a.startTime+s),o.endTime=Math.max(o.endTime,a.endTime+s),o.captions.push(a)}),Object.keys(r).forEach(a=>{const{startTime:o,endTime:l,captions:u}=r[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),Hk(c,this.vhs_.tech_,a),qa(o,l,c[a]),zk({captionArray:u,inbandTextTracks:c,timestampOffset:s})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));return}this.addMetadataToTextTrack(i,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!Rg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:i,hasVideo:s,isMuxed:r}=t;return!(s&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||Rg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,t));return}const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[Og(t.type)].start;else{const s=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&s&&s.hasVideo;let a;r&&(a=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:a,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const s=this.chooseNextRequest_();if(s.mediaIndex!==i.mediaIndex||s.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:s}){if(i){const r=iu(i);if(this.activeInitSegmentId_===r)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=r}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=s,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},s){const r=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+zs(r).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+zs(a).join(", "));const o=r.length?r.start(0):0,l=r.length?r.end(r.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=Ra&&c-u<=Ra){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${zs(r).join(", ")}, video buffer: ${zs(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));const m=this.currentTime_()-Ra;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${m}`),this.remove(0,m,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Ra}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=P.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Ra*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},s){if(s){if(s.code===L2){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(`${t} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:s,bytes:r}){if(!r){const a=[s];let o=s.byteLength;i&&(a.unshift(i),o+=i.byteLength),r=$k({bytes:o,segments:a})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:r}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const s=this.pendingSegment_.segment,r=`${e}TimingInfo`;s[r]||(s[r]={}),s[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,s[r].transmuxedPresentationStart=i.start.presentation,s[r].transmuxedDecodeStart=i.start.decode,s[r].transmuxedPresentationEnd=i.end.presentation,s[r].transmuxedDecodeEnd=i.end.decode,s[r].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){const{type:i,data:s}=t;if(!s||!s.byteLength||i==="audio"&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:s})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{const t=Zi({},e,{forceTimestampOffset:!0});Zi(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),s=this.mediaIndex!==null,r=e.timeline!==this.currentTimeline_&&e.timeline>0,a=i||s&&r;this.logger_(`Requesting ${Tr(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Ok({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${Tr(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)}})}trimBackBuffer_(e){const t=n7(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,i=e.part,s={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?s.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(s.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){const a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);s.key=this.segmentKey(t.key),s.key.iv=a}return t.map&&(s.map=this.initSegmentForMap(t.map)),s}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<ml){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${ml}`);return}this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===vn.ABORTED)return;if(this.pause(),e.code===vn.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,t.stats),s.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=Zk(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(s)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:s,currentVideoTimestampOffset:r,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[i-1];return i===0||!u||typeof u.start>"u"||u.end!==s+r?s:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:i,hasVideo:s,isMuxed:r}=t,a=this.loaderType_==="main"&&s,o=!this.audioDisabled_&&i&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=i7(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),s=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;s&&(e.timingInfo.end=typeof s.end=="number"?s.end:s.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=a7(e,this.sourceType_);if(t&&(t.severity==="warn"?j.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Tr(e)}`);return}this.logger_(`Appended ${Tr(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,s=e.part,r=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,a=s&&s.end&&this.currentTime_()-s.end>e.playlist.partTargetDuration*3;if(r||a){this.logger_(`bad ${r?"segment":"part"} ${Tr(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<ml){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${ml}`);return}const t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,s=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(s-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,i=t.start,s=t.end;if(!Lg(i)||!Lg(s))return;qa(i,s,this.segmentMetadataTrack_);const r=P.WebKitDataCue||P.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:s},o=JSON.stringify(a),l=new r(i,s,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function zn(){}const O2=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},o7=["video","audio"],Xd=(n,e)=>{const t=e[`${n}Buffer`];return t&&t.updating||e.queuePending[n]},l7=(n,e)=>{for(let t=0;t<e.length;t++){const i=e[t];if(i.type==="mediaSource")return null;if(i.type===n)return t}return null},Ur=(n,e)=>{if(e.queue.length===0)return;let t=0,i=e.queue[t];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),Ur("audio",e),Ur("video",e));return}if(n!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||Xd(n,e))){if(i.type!==n){if(t=l7(n,e.queue),t===null)return;i=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[n]=i,i.action(n,e),!i.doneFn){e.queuePending[n]=null,Ur(n,e);return}}},R2=(n,e)=>{const t=e[`${n}Buffer`],i=O2(n);t&&(t.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),t.removeEventListener("error",e[`on${i}Error_`]),e.codecs[n]=null,e[`${n}Buffer`]=null)},fn=(n,e)=>n&&e&&Array.prototype.indexOf.call(n.sourceBuffers,e)!==-1,Ti={appendBuffer:(n,e,t)=>(i,s)=>{const r=s[`${i}Buffer`];if(fn(s.mediaSource,r)){s.logger_(`Appending segment ${e.mediaIndex}'s ${n.length} bytes to ${i}Buffer`);try{r.appendBuffer(n)}catch(a){s.logger_(`Error with code ${a.code} `+(a.code===L2?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),s.queuePending[i]=null,t(a)}}},remove:(n,e)=>(t,i)=>{const s=i[`${t}Buffer`];if(fn(i.mediaSource,s)){i.logger_(`Removing ${n} to ${e} from ${t}Buffer`);try{s.remove(n,e)}catch{i.logger_(`Remove ${n} to ${e} from ${t}Buffer failed`)}}},timestampOffset:n=>(e,t)=>{const i=t[`${e}Buffer`];fn(t.mediaSource,i)&&(t.logger_(`Setting ${e}timestampOffset to ${n}`),i.timestampOffset=n)},callback:n=>(e,t)=>{n()},endOfStream:n=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${n||""})`);try{e.mediaSource.endOfStream(n)}catch(t){j.log.warn("Failed to call media source endOfStream",t)}}},duration:n=>e=>{e.logger_(`Setting mediaSource duration to ${n}`);try{e.mediaSource.duration=n}catch(t){j.log.warn("Failed to set media source duration",t)}},abort:()=>(n,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${n}Buffer`];if(fn(e.mediaSource,t)){e.logger_(`calling abort on ${n}Buffer`);try{t.abort()}catch(i){j.log.warn(`Failed to abort on ${n}Buffer`,i)}}},addSourceBuffer:(n,e)=>t=>{const i=O2(n),s=po(e);t.logger_(`Adding ${n}Buffer with codec ${e} to mediaSource`);const r=t.mediaSource.addSourceBuffer(s);r.addEventListener("updateend",t[`on${i}UpdateEnd_`]),r.addEventListener("error",t[`on${i}Error_`]),t.codecs[n]=e,t[`${n}Buffer`]=r},removeSourceBuffer:n=>e=>{const t=e[`${n}Buffer`];if(R2(n,e),!!fn(e.mediaSource,t)){e.logger_(`Removing ${n}Buffer with codec ${e.codecs[n]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(i){j.log.warn(`Failed to removeSourceBuffer ${n}Buffer`,i)}}},changeType:n=>(e,t)=>{const i=t[`${e}Buffer`],s=po(n);if(fn(t.mediaSource,i)&&t.codecs[e]!==n){t.logger_(`changing ${e}Buffer codec from ${t.codecs[e]} to ${n}`);try{i.changeType(s),t.codecs[e]=n}catch(r){j.log.warn(`Failed to changeType on ${e}Buffer`,r)}}}},xi=({type:n,sourceUpdater:e,action:t,doneFn:i,name:s})=>{e.queue.push({type:n,action:t,doneFn:i,name:s}),Ur(n,e)},Bg=(n,e)=>t=>{if(e.queuePending[n]){const i=e.queuePending[n].doneFn;e.queuePending[n]=null,i&&i(e[`${n}Error_`])}Ur(n,e)};class M2 extends j.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Ur("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=zi("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=Bg("video",this),this.onAudioUpdateEnd_=Bg("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){xi({type:"mediaSource",sourceUpdater:this,action:Ti.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){xi({type:e,sourceUpdater:this,action:Ti.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){j.log.error("removeSourceBuffer is not supported!");return}xi({type:"mediaSource",sourceUpdater:this,action:Ti.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!j.browser.IS_FIREFOX&&P.MediaSource&&P.MediaSource.prototype&&typeof P.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return P.SourceBuffer&&P.SourceBuffer.prototype&&typeof P.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){j.log.error("changeType is not supported!");return}xi({type:e,sourceUpdater:this,action:Ti.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)})}appendBuffer(e,t){const{segmentInfo:i,type:s,bytes:r}=e;if(this.processedAppend_=!0,s==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${r.length} until video append`);return}const a=t;if(xi({type:s,sourceUpdater:this,action:Ti.appendBuffer(r,i||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),s==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return fn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Ht()}videoBuffered(){return fn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Ht()}buffered(){const e=fn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=fn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():CD(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=zn){xi({type:"mediaSource",sourceUpdater:this,action:Ti.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=zn){typeof e!="string"&&(e=void 0),xi({type:"mediaSource",sourceUpdater:this,action:Ti.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=zn){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}xi({type:"audio",sourceUpdater:this,action:Ti.remove(e,t),doneFn:i,name:"remove"})}removeVideo(e,t,i=zn){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}xi({type:"video",sourceUpdater:this,action:Ti.remove(e,t),doneFn:i,name:"remove"})}updating(){return!!(Xd("audio",this)||Xd("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(xi({type:"audio",sourceUpdater:this,action:Ti.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(xi({type:"video",sourceUpdater:this,action:Ti.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&xi({type:"audio",sourceUpdater:this,action:Ti.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&xi({type:"video",sourceUpdater:this,action:Ti.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),o7.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>R2(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const Ng=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),u7=n=>{const e=new Uint8Array(n);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},Fg=new Uint8Array(`

`.split("").map(n=>n.charCodeAt(0)));class c7 extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class d7 extends Wd{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Ht();const e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return Ht([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;const i=iu(e);let s=this.initSegments_[i];if(t&&!s&&e.bytes){const r=Fg.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(Fg,e.bytes.byteLength),this.initSegments_[i]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return s||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){qa(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===vn.TIMEOUT&&this.handleTimeout_(),e.code===vn.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const r=s.segment;if(r.map&&(r.map.bytes=t.map.bytes),s.bytes=t.bytes,typeof P.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}r.requested=!0;try{this.parseVTTCues_(s)}catch(a){this.stopForError({message:a.message});return}if(this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_),s.cues.length?s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}:s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration},s.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}s.byteLength=s.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,s.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new P.VTTCue(a.startTime,a.endTime,a.text):a)}),Yk(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,i=!1;if(typeof P.WebVTT!="function")throw new c7;typeof P.TextDecoder=="function"?t=new P.TextDecoder("utf8"):(t=P.WebVTT.StringDecoder(),i=!0);const s=new P.WebVTT.Parser(P,P.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},s.oncue=e.cues.push.bind(e.cues),s.ontimestampmap=a=>{e.timestampmap=a},s.onparsingerror=a=>{j.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;i&&(a=Ng(a)),s.parse(a)}let r=e.bytes;i&&(r=Ng(r)),s.parse(r),s.flush()}updateTimeMapping_(e,t,i){const s=e.segment;if(!t)return;if(!e.cues.length){s.empty=!0;return}const{MPEGTS:r,LOCAL:a}=e.timestampmap,l=r/Hs.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=r===0?u.startTime+l:this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!i.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(u,c-s.duration)}}}handleRollover_(e,t){if(t===null)return e;let i=e*Hs.ONE_SECOND_IN_TS;const s=t*Hs.ONE_SECOND_IN_TS;let r;for(s<i?r=-8589934592:r=8589934592;Math.abs(i-s)>4294967296;)i+=r;return i/Hs.ONE_SECOND_IN_TS}}const h7=function(n,e){const t=n.cues;for(let i=0;i<t.length;i++){const s=t[i];if(e>=s.adStartTime&&e<=s.adEndTime)return s}return null},f7=function(n,e,t=0){if(!n.segments)return;let i=t,s;for(let r=0;r<n.segments.length;r++){const a=n.segments[r];if(s||(s=h7(e,i+a.duration/2)),s){if("cueIn"in a){s.endTime=i,s.adEndTime=i,i+=a.duration,s=null;continue}if(i<s.endTime){i+=a.duration;continue}s.endTime+=a.duration}else if("cueOut"in a&&(s=new P.VTTCue(i,i+a.duration,a.cueOut),s.adStartTime=i,s.adEndTime=i+parseFloat(a.cueOut),e.addCue(s)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);s=new P.VTTCue(i,i+a.duration,""),s.adStartTime=i-o,s.adEndTime=s.adStartTime+l,e.addCue(s)}i+=a.duration}},p7=86400,qc=[{name:"VOD",run:(n,e,t,i,s)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(n,e,t,i,s,r)=>{if(!r)return null;const a=n.getMediaSequenceMap(r);if(!a||a.size===0||e.mediaSequence===void 0||!Array.isArray(e.segments)||!e.segments.length)return null;let o=e.mediaSequence,l=0;for(const u of e.segments){const c=a.get(o);if(!c)break;if(s>=c.start&&s<c.end){if(Array.isArray(u.parts)&&u.parts.length){let h=c.start,m=0;for(const y of u.parts){const _=h,b=_+y.duration;if(s>=_&&s<b)return{time:c.start,segmentIndex:l,partIndex:m};m++,h=b}}return{time:c.start,segmentIndex:l,partIndex:null}}l++,o++}return null}},{name:"ProgramDateTime",run:(n,e,t,i,s)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let r=null,a=null;const o=Ud(e);s=s||0;for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),c=o[u],h=c.segment,m=n.timelineToDatetimeMappings[h.timeline];if(!m||!h.dateTimeObject)continue;let _=h.dateTimeObject.getTime()/1e3+m;if(h.parts&&typeof c.partIndex=="number")for(let x=0;x<c.partIndex;x++)_+=h.parts[x].duration;const b=Math.abs(s-_);if(a!==null&&(b===0||a<b))break;a=b,r={time:_,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return r}},{name:"Segment",run:(n,e,t,i,s)=>{let r=null,a=null;s=s||0;const o=Ud(e);for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),c=o[u],h=c.segment,m=c.part&&c.part.start||h&&h.start;if(h.timeline===i&&typeof m<"u"){const y=Math.abs(s-m);if(a!==null&&a<y)break;(!r||a===null||a>=y)&&(a=y,r={time:m,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return r}},{name:"Discontinuity",run:(n,e,t,i,s)=>{let r=null;if(s=s||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=n.discontinuities[u];if(c){const h=Math.abs(s-c.time);if(a!==null&&a<h)break;(!r||a===null||a>=h)&&(a=h,r={time:c.time,segmentIndex:l,partIndex:null})}}}return r}},{name:"Playlist",run:(n,e,t,i,s)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class m7 extends j.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.mediaSequenceStorage_=new Map,this.logger_=zi("SyncController")}getMediaSequenceMap(e){return this.mediaSequenceStorage_.get(e)}updateMediaSequenceMap(e,t,i){if(e.mediaSequence===void 0||!Array.isArray(e.segments)||!e.segments.length)return;const s=this.getMediaSequenceMap(i),r=new Map;let a=e.mediaSequence,o;s?s.has(e.mediaSequence)?o=s.get(e.mediaSequence).start:(this.logger_(`MediaSequence sync for ${i} segment loader - received a gap between playlists.
Fallback base time to: ${t}.
Received media sequence: ${a}.
Current map: `,s),o=t):o=0,this.logger_(`MediaSequence sync for ${i} segment loader.
Received media sequence: ${a}.
base time is ${o}
Current map: `,s),e.segments.forEach(l=>{const u=o,c=u+l.duration,h={start:u,end:c};r.set(a,h),a++,o=c}),this.mediaSequenceStorage_.set(i,r)}getSyncPoint(e,t,i,s,r){if(t!==1/0)return qc.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,i,s,r);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const m=e.segments[c],y=h,_=y+m.duration;if(this.logger_(`Strategy: ${u}. Current time: ${s}. selected segment: ${c}. Time: [${y} -> ${_}]}`),s>=y&&s<_)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:s})}getExpiredTime(e,t){if(!e||!e.segments)return null;const i=this.runStrategies_(e,t,e.discontinuitySequence,0,"main");if(!i.length)return null;const s=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return s.segmentIndex>0&&(s.time*=-1),Math.abs(s.time+to({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:s.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,s,r){const a=[];for(let o=0;o<qc.length;o++){const l=qc[o],u=l.run(this,e,t,i,s,r);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let i=e[0].syncPoint,s=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<s&&(s=o,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${r}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,t){const i=t.mediaSequence-e.mediaSequence;if(i>p7){j.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let s=i-1;s>=0;s--){const r=e.segments[s];if(r&&typeof r.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+s,time:r.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),s=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:s.start}));const r=s.dateTimeObject;s.discontinuity&&t&&r&&(this.timelineToDatetimeMappings[s.timeline]=-(r.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){const s=e.segment,r=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return r&&(r.start=o,r.end=l),(!s.start||o<s.start)&&(s.start=o),s.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let s=0;s<t.discontinuityStarts.length;s++){const r=t.discontinuityStarts[s],a=t.discontinuitySequence+s+1,o=r-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=i.start-to({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):u=i.end+to({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class g7 extends j.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const _7=T2(x2(function(){var n=function(){function b(){this.listeners={}}var x=b.prototype;return x.on=function(w,A){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push(A)},x.off=function(w,A){if(!this.listeners[w])return!1;var k=this.listeners[w].indexOf(A);return this.listeners[w]=this.listeners[w].slice(0),this.listeners[w].splice(k,1),k>-1},x.trigger=function(w){var A=this.listeners[w];if(A)if(arguments.length===2)for(var k=A.length,C=0;C<k;++C)A[C].call(this,arguments[1]);else for(var R=Array.prototype.slice.call(arguments,1),N=A.length,H=0;H<N;++H)A[H].apply(this,R)},x.dispose=function(){this.listeners={}},x.pipe=function(w){this.on("data",function(A){w.push(A)})},b}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(b){return b.subarray(0,b.byteLength-b[b.byteLength-1])}/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */const t=function(){const b=[[[],[],[],[],[]],[[],[],[],[],[]]],x=b[0],S=b[1],w=x[4],A=S[4];let k,C,R;const N=[],H=[];let M,ie,ee,K,q,J;for(k=0;k<256;k++)H[(N[k]=k<<1^(k>>7)*283)^k]=k;for(C=R=0;!w[C];C^=M||1,R=H[R]||1)for(K=R^R<<1^R<<2^R<<3^R<<4,K=K>>8^K&255^99,w[C]=K,A[K]=C,ee=N[ie=N[M=N[C]]],J=ee*16843009^ie*65537^M*257^C*16843008,q=N[K]*257^K*16843008,k=0;k<4;k++)x[k][C]=q=q<<24^q>>>8,S[k][K]=J=J<<24^J>>>8;for(k=0;k<5;k++)x[k]=x[k].slice(0),S[k]=S[k].slice(0);return b};let i=null;class s{constructor(x){i||(i=t()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let S,w,A;const k=this._tables[0][4],C=this._tables[1],R=x.length;let N=1;if(R!==4&&R!==6&&R!==8)throw new Error("Invalid aes key size");const H=x.slice(0),M=[];for(this._key=[H,M],S=R;S<4*R+28;S++)A=H[S-1],(S%R===0||R===8&&S%R===4)&&(A=k[A>>>24]<<24^k[A>>16&255]<<16^k[A>>8&255]<<8^k[A&255],S%R===0&&(A=A<<8^A>>>24^N<<24,N=N<<1^(N>>7)*283)),H[S]=H[S-R]^A;for(w=0;S;w++,S--)A=H[w&3?S:S-4],S<=4||w<4?M[w]=A:M[w]=C[0][k[A>>>24]]^C[1][k[A>>16&255]]^C[2][k[A>>8&255]]^C[3][k[A&255]]}decrypt(x,S,w,A,k,C){const R=this._key[1];let N=x^R[0],H=A^R[1],M=w^R[2],ie=S^R[3],ee,K,q;const J=R.length/4-2;let be,ue=4;const he=this._tables[1],pe=he[0],vt=he[1],Ae=he[2],ft=he[3],at=he[4];for(be=0;be<J;be++)ee=pe[N>>>24]^vt[H>>16&255]^Ae[M>>8&255]^ft[ie&255]^R[ue],K=pe[H>>>24]^vt[M>>16&255]^Ae[ie>>8&255]^ft[N&255]^R[ue+1],q=pe[M>>>24]^vt[ie>>16&255]^Ae[N>>8&255]^ft[H&255]^R[ue+2],ie=pe[ie>>>24]^vt[N>>16&255]^Ae[H>>8&255]^ft[M&255]^R[ue+3],ue+=4,N=ee,H=K,M=q;for(be=0;be<4;be++)k[(3&-be)+C]=at[N>>>24]<<24^at[H>>16&255]<<16^at[M>>8&255]<<8^at[ie&255]^R[ue++],ee=N,N=H,H=M,M=ie,ie=ee}}class r extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(x){this.jobs.push(x),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(b){return b<<24|(b&65280)<<8|(b&16711680)>>8|b>>>24},o=function(b,x,S){const w=new Int32Array(b.buffer,b.byteOffset,b.byteLength>>2),A=new s(Array.prototype.slice.call(x)),k=new Uint8Array(b.byteLength),C=new Int32Array(k.buffer);let R,N,H,M,ie,ee,K,q,J;for(R=S[0],N=S[1],H=S[2],M=S[3],J=0;J<w.length;J+=4)ie=a(w[J]),ee=a(w[J+1]),K=a(w[J+2]),q=a(w[J+3]),A.decrypt(ie,ee,K,q,C,J),C[J]=a(C[J]^R),C[J+1]=a(C[J+1]^N),C[J+2]=a(C[J+2]^H),C[J+3]=a(C[J+3]^M),R=ie,N=ee,H=K,M=q;return k};class l{constructor(x,S,w,A){const k=l.STEP,C=new Int32Array(x.buffer),R=new Uint8Array(x.byteLength);let N=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(C.subarray(N,N+k),S,w,R)),N=k;N<C.length;N+=k)w=new Uint32Array([a(C[N-4]),a(C[N-3]),a(C[N-2]),a(C[N-1])]),this.asyncStream_.push(this.decryptChunk_(C.subarray(N,N+k),S,w,R));this.asyncStream_.push(function(){A(null,e(R))})}static get STEP(){return 32e3}decryptChunk_(x,S,w,A){return function(){const k=o(x,S,w);A.set(k,x.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,m=function(x){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(x):x&&x.buffer instanceof ArrayBuffer},y=h.BigInt||Number;y("0x1"),y("0x100"),y("0x10000"),y("0x1000000"),y("0x100000000"),y("0x10000000000"),y("0x1000000000000"),y("0x100000000000000"),y("0x10000000000000000"),function(){var b=new Uint16Array([65484]),x=new Uint8Array(b.buffer,b.byteOffset,b.byteLength);return x[0]===255?"big":x[0]===204?"little":"unknown"}();const _=function(b){const x={};return Object.keys(b).forEach(S=>{const w=b[S];m(w)?x[S]={bytes:w.buffer,byteOffset:w.byteOffset,byteLength:w.byteLength}:x[S]=w}),x};self.onmessage=function(b){const x=b.data,S=new Uint8Array(x.encrypted.bytes,x.encrypted.byteOffset,x.encrypted.byteLength),w=new Uint32Array(x.key.bytes,x.key.byteOffset,x.key.byteLength/4),A=new Uint32Array(x.iv.bytes,x.iv.byteOffset,x.iv.byteLength/4);new l(S,w,A,function(k,C){self.postMessage(_({source:x.source,decrypted:C}),[C.buffer])})}}));var y7=b2(_7);const v7=n=>{let e=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},B2=(n,e)=>{n.abort(),n.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Yd=(n,e)=>{e.activePlaylistLoader=n,n.load()},b7=(n,e)=>()=>{const{segmentLoaders:{[n]:t,main:i},mediaTypes:{[n]:s}}=e,r=s.activeTrack(),a=s.getActiveGroup(),o=s.activePlaylistLoader,l=s.lastGroup_;if(!(a&&l&&a.id===l.id)&&(s.lastGroup_=a,s.lastTrack_=r,B2(t,s),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&i.resetEverything();return}t.resyncLoader(),Yd(a.playlistLoader,s)}},T7=(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:i}}=e;i.lastGroup_=null,t.abort(),t.pause()},x7=(n,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[n]:i,main:s},mediaTypes:{[n]:r}}=e,a=r.activeTrack(),o=r.getActiveGroup(),l=r.activePlaylistLoader,u=r.lastTrack_;if(!(u&&a&&u.id===a.id)&&(r.lastGroup_=o,r.lastTrack_=a,B2(i,r),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;r.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),s.resetEverything(),c.fastQualityChange_(h);return}if(n==="AUDIO"){if(!o.playlistLoader){s.setAudio(!0),s.resetEverything();return}i.setAudio(!0),s.setAudio(!1)}if(l===o.playlistLoader){Yd(o.playlistLoader,r);return}i.track&&i.track(a),i.resetEverything(),Yd(o.playlistLoader,r)}},ru={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:t},excludePlaylist:i}=e,s=t.activeTrack(),r=t.activeGroup(),a=(r.filter(l=>l.default)[0]||r[0]).id,o=t.tracks[a];if(s===o){i({error:{message:"Problem encountered loading the default audio track."}});return}j.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:t}}=e;j.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=t.activeTrack();i&&(i.mode="disabled"),t.onTrackChanged()}},Ug={AUDIO:(n,e,t)=>{if(!e)return;const{tech:i,requestOptions:s,segmentLoaders:{[n]:r}}=t;e.on("loadedmetadata",()=>{const a=e.media();r.playlist(a,s),(!i.paused()||a.endList&&i.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),i.paused()||r.load()}),e.on("error",ru[n](n,t))},SUBTITLES:(n,e,t)=>{const{tech:i,requestOptions:s,segmentLoaders:{[n]:r},mediaTypes:{[n]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();r.playlist(o,s),r.track(a.activeTrack()),(!i.paused()||o.endList&&i.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),i.paused()||r.load()}),e.on("error",ru[n](n,t))}},w7={AUDIO:(n,e)=>{const{vhs:t,sourceType:i,segmentLoaders:{[n]:s},requestOptions:r,main:{mediaGroups:a},mediaTypes:{[n]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=Bo(c.main);(!a[n]||Object.keys(a[n]).length===0)&&(a[n]={main:{default:{default:!0}}},h&&(a[n].main.default.playlists=c.main.playlists));for(const m in a[n]){o[m]||(o[m]=[]);for(const y in a[n][m]){let _=a[n][m][y],b;if(h?(u(`AUDIO group '${m}' label '${y}' is a main playlist`),_.isMainPlaylist=!0,b=null):i==="vhs-json"&&_.playlists?b=new Dr(_.playlists[0],t,r):_.resolvedUri?b=new Dr(_.resolvedUri,t,r):_.playlists&&i==="dash"?b=new qd(_.playlists[0],t,r,c):b=null,_=Fe({id:y,playlistLoader:b},_),Ug[n](n,_.playlistLoader,e),o[m].push(_),typeof l[y]>"u"){const x=new j.AudioTrack({id:y,kind:v7(_),enabled:!1,language:_.language,default:_.default,label:y});l[y]=x}}}s.on("error",ru[n](n,e))},SUBTITLES:(n,e)=>{const{tech:t,vhs:i,sourceType:s,segmentLoaders:{[n]:r},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[n]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[n]){l[h]||(l[h]=[]);for(const m in o[n][h]){if(!i.options_.useForcedSubtitles&&o[n][h][m].forced)continue;let y=o[n][h][m],_;if(s==="hls")_=new Dr(y.resolvedUri,i,a);else if(s==="dash"){if(!y.playlists.filter(x=>x.excludeUntil!==1/0).length)return;_=new qd(y.playlists[0],i,a,c)}else s==="vhs-json"&&(_=new Dr(y.playlists?y.playlists[0]:y.resolvedUri,i,a));if(y=Fe({id:m,playlistLoader:_},y),Ug[n](n,y.playlistLoader,e),l[h].push(y),typeof u[m]>"u"){const b=t.addRemoteTextTrack({id:m,kind:"subtitles",default:y.default&&y.autoselect,language:y.language,label:m},!1).track;u[m]=b}}}r.on("error",ru[n](n,e))},"CLOSED-CAPTIONS":(n,e)=>{const{tech:t,main:{mediaGroups:i},mediaTypes:{[n]:{groups:s,tracks:r}}}=e;for(const a in i[n]){s[a]||(s[a]=[]);for(const o in i[n][a]){const l=i[n][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=Fe(c,u[c.instreamId])),c.default===void 0&&delete c.default,s[a].push(Fe({id:o},l)),typeof r[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;r[o]=h}}}}},N2=(n,e)=>{for(let t=0;t<n.length;t++)if(Ef(e,n[t])||n[t].playlists&&N2(n[t].playlists,e))return!0;return!1},S7=(n,e)=>t=>{const{mainPlaylistLoader:i,mediaTypes:{[n]:{groups:s}}}=e,r=i.media();if(!r)return null;let a=null;r.attributes[n]&&(a=s[r.attributes[n]]);const o=Object.keys(s);if(!a)if(n==="AUDIO"&&o.length>1&&Bo(e.main))for(let l=0;l<o.length;l++){const u=s[o[l]];if(N2(u,r)){a=u;break}}else s.main?a=s.main:o.length===1&&(a=s[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},C7={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const i in t)if(t[i].enabled)return t[i];return null},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const i in t)if(t[i].mode==="showing"||t[i].mode==="hidden")return t[i];return null}},E7=(n,{mediaTypes:e})=>()=>{const t=e[n].activeTrack();return t?e[n].activeGroup(t):null},A7=n=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{w7[u](u,n)});const{mediaTypes:e,mainPlaylistLoader:t,tech:i,vhs:s,segmentLoaders:{["AUDIO"]:r,main:a}}=n;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=S7(u,n),e[u].activeTrack=C7[u](u,n),e[u].onGroupChanged=b7(u,n),e[u].onGroupChanging=T7(u,n),e[u].onTrackChanged=x7(u,n),e[u].getActiveGroup=E7(u,n)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),r.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),s.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const u in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[u])},D7=()=>{const n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:zn,activeTrack:zn,getActiveGroup:zn,onGroupChanged:zn,onTrackChanged:zn,lastTrack_:null,logger_:zi(`MediaGroups[${e}]`)}}),n};class jg{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=ai(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class k7 extends j.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new jg,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=zi("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const i=t.serverUri||t.serverURL;if(!i){this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),this.trigger("error");return}if(i.startsWith("data:")){this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1));return}this.steeringManifest.reloadUri=ai(e,i),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const i=e?t:this.getRequestURI(t);if(!i){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}this.request_=this.xhr_({uri:i},(s,r)=>{if(s){if(r.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),this.excludedSteeringManifestURLs.add(i);return}if(r.status===429){const o=r.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${o} seconds.`),this.startTTLTimeout_(parseInt(o,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}const a=JSON.parse(this.request_.responseText);this.assignSteeringProperties_(a),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new P.URL(e),i=new P.URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(e){const t=JSON.parse(P.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new P.URL(e),i=this.getPathway(),s=this.getBandwidth_();if(i){const r=`_${this.manifestType_}_pathway`;t.searchParams.set(r,i)}if(s){const r=`_${this.manifestType_}_throughput`;t.searchParams.set(r,s)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const i=(s=>{for(const r of s)if(this.availablePathways_.has(r))return r;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=s=>this.excludedSteeringManifestURLs.has(s);if(this.proxyServerUrl_){const s=this.setProxyServerUrl_(e);if(!t(s))return s}const i=this.setSteeringParams_(e);return t(i)?null:i}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=P.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){P.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new jg}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(ai(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const I7=10;let Nn;const P7=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],L7=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]},O7=function({currentPlaylist:n,buffered:e,currentTime:t,nextPlaylist:i,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:a,bufferBasedABR:o,log:l}){if(!i)return j.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${n&&n.id||"null"} -> ${i.id}`;if(!n)return l(`${u} as current playlist is not set`),!0;if(i.id===n.id)return!1;const c=!!Ar(e,t).length;if(!n.endList)return!c&&typeof n.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=wf(e,t),m=o?kt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:kt.MAX_BUFFER_LOW_WATER_LINE;if(a<m)return l(`${u} as duration < max low water line (${a} < ${m})`),!0;const y=i.attributes.BANDWIDTH,_=n.attributes.BANDWIDTH;if(y<_&&(!o||h<r)){let b=`${u} as next bandwidth < current bandwidth (${y} < ${_})`;return o&&(b+=` and forwardBuffer < bufferHighWaterLine (${h} < ${r})`),l(b),!0}if((!o||y>_)&&h>=s){let b=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${s})`;return o&&(b+=` and next bandwidth > current bandwidth (${y} > ${_})`),l(b),!0}return l(`not ${u} as no switching criteria met`),!1};class R7 extends j.EventTarget{constructor(e){super();const{src:t,withCredentials:i,tech:s,bandwidth:r,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:m,leastPixelDiffSelector:y,captionServices:_}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:b}=e;(b===null||typeof b>"u")&&(b=1/0),Nn=a,this.bufferBasedABR=!!m,this.leastPixelDiffSelector=!!y,this.withCredentials=i,this.tech_=s,this.vhs_=s.vhs,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=b,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:b,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=D7(),this.mediaSource=new P.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=Ht(),this.hasPlayed_=!1,this.syncController_=new m7(e),this.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new y7,this.sourceUpdater_=new M2(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new g7,this.keyStatusMap_=new Map;const x={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new qd(t,this.vhs_,Fe(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Dr(t,this.vhs_,Fe(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Wd(Fe(x,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Wd(Fe(x,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new d7(Fe(x,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((A,k)=>{function C(){s.off("vttjserror",R),A()}function R(){s.off("vttjsloaded",C),k()}s.one("vttjsloaded",C),s.one("vttjserror",R),s.addWebVttScript_()})}),e);const S=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new k7(this.vhs_.xhr,S),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),P7.forEach(A=>{this[A+"_"]=L7.bind(this,A)}),this.logger_=zi("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const w=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(w,()=>{const A=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-A,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){const s=this.media(),r=s&&(s.id||s.uri),a=e&&(e.id||e.uri);r&&r!==a&&(this.logger_(`switch media ${r} -> ${a} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],i=t?t.activeGroup():null,s=this.contentSteeringController_.getPathway();if(i&&s){const a=(i.length?i[0].playlists:i.playlists).filter(o=>o.attributes.serviceLocation===s);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=P.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(P.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const i=e.mediaGroups.AUDIO,s=Object.keys(i);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const o=i.main||s.length&&i[s[0]];for(const l in o)if(o[l].default){r={label:l};break}}if(!r)return t;const a=[];for(const o in i)if(i[o][r.label]){const l=i[o][r.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),t=e.targetDuration*1.5*1e3;jd(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),A7({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let t;if(this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t)||(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),t=e.targetDuration*1.5*1e3;jd(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();if(e.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const i=e.mediaGroups||{};let s=!0;const r=Object.keys(i.AUDIO);for(const a in i.AUDIO)for(const o in i.AUDIO[a])i.AUDIO[a][o].uri||(s=!1);s&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Nn.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),s=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),a=this.tech_.buffered();return O7({buffered:a,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const t=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",t=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:I7}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const t=this.getCodecsOrExclude_();t&&this.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const i=t.end(0);let s=i;if(e.start){const r=e.start.timeOffset;r<0?s=Math.max(i+r,t.start(0)):s=Math.min(i,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(s)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;const s=Nn.Playlist.playlistEnd(e,i),r=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return s-r<=yn;const o=a.end(a.length-1);return o-r<=yn&&s-o<=yn}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const s=this.mainPlaylistLoader_.main.playlists,r=s.filter(Hu),a=r.length===1&&r[0]===e;if(s.length===1&&i!==1/0)return j.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const _=this.pathwayAttribute_(e),b=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(_),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(_)},b);return}let y=!1;s.forEach(_=>{if(_===e)return;const b=_.excludeUntil;typeof b<"u"&&b!==1/0&&(y=!0,delete _.excludeUntil)}),y&&(j.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+i*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:j.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,m=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||m)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const i=[],s=e==="all";(s||e==="main")&&i.push(this.mainPlaylistLoader_);const r=[];(s||e==="audio")&&r.push("AUDIO"),(s||e==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&i.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&i.push(o)}),i.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=Ar(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Nn.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let i=this.syncController_.getExpiredTime(t,this.duration());if(i===null)return;const s=this.mainPlaylistLoader_.main,r=Nn.Playlist.seekable(t,i,Nn.Playlist.liveEdgeDelay(s,t));if(r.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),i=this.syncController_.getExpiredTime(t,this.duration()),i===null||(e=Nn.Playlist.seekable(t,i,Nn.Playlist.liveEdgeDelay(s,t)),e.length===0)))return;let a,o;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=Ht([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)&&(this.logger_(`seekable updated [${Zy(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}const t=this.tech_.buffered();let i=Nn.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const i in t)t[i].forEach(s=>{s.playlistLoader&&s.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=no(this.main(),t),s={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(s.video=i.video||e.main.videoCodec||n8),e.main.isMuxed&&(s.video+=`,${i.audio||e.main.audioCodec||Sm}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(s.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||Sm,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!s.audio&&!s.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?xl(c):kc(c),o={};let l;if(["video","audio"].forEach(function(u){if(s.hasOwnProperty(u)&&!a(e[u].isFmp4,s[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(s[u]),u==="audio"&&(l=c)}}),r&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${s.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(hn(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,m=(hn(s[c]||"")[0]||{}).type;h&&m&&h.toLowerCase()!==m.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${s[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return s}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(i=>{const s=e[i];if(t.indexOf(s.id)!==-1)return;t.push(s.id);const r=no(this.main,s),a=[];r.audio&&!kc(r.audio)&&!xl(r.audio)&&a.push(`audio codec ${r.audio}`),r.video&&!kc(r.video)&&!xl(r.video)&&a.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&a.push(`text codec ${r.text}`),a.length&&(s.excludeUntil=1/0,this.logger_(`excluding ${s.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],i=this.main().playlists,s=nu(hn(e)),r=Dg(s),a=s.video&&hn(s.video)[0]||null,o=s.audio&&hn(s.audio)[0]||null;Object.keys(i).forEach(l=>{const u=i[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=no(this.mainPlaylistLoader_.main,u),m=Dg(h);if(!(!h.audio&&!h.video)){if(m!==r&&c.push(`codec count "${m}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const y=h.video&&hn(h.video)[0]||null,_=h.audio&&hn(h.audio)[0]||null;y&&a&&y.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${y.type}" !== "${a.type}"`),_&&o&&_.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${_.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const i=this.seekable();i.length&&(t=i.start(0)),f7(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=kt.GOAL_BUFFER_LENGTH,i=kt.GOAL_BUFFER_LENGTH_RATE,s=Math.max(t,kt.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,s)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=kt.BUFFER_LOW_WATER_LINE,i=kt.BUFFER_LOW_WATER_LINE_RATE,s=Math.max(t,kt.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,kt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?r:s)}bufferHighWaterLine(){return kt.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){Pg(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Xk({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,i){const s=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Pg(this.inbandTextTracks_,e,this.tech_),qk({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:s,videoDuration:i})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const e=this.main();(this.contentSteeringController_.didDASHTagChange(e.uri,e.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),r=[];for(const a of e.playlists){const o=a.attributes.serviceLocation;if(o&&(r.push(o),!s.has(o)))return!0}return!!(!r.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const i=this.main().playlists,s=new Set;let r=!1;Object.keys(i).forEach(a=>{const o=i[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,r=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!s.has(o.id)&&u&&h&&(s.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,s=this.contentSteeringController_.nextPathwayClones;if(i&&i.size||s&&s.size){for(const[a,o]of i.entries())s.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of s.entries()){const l=i.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...s])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const i=e["URI-REPLACEMENT"].PARAMS,s=t["URI-REPLACEMENT"].PARAMS;for(const r in i)if(i[r]!==s[r])return!1;for(const r in s)if(i[r]!==s[r])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=this.mainPlaylistLoader_.getKeyIdSet(i);!s||!s.size||s.forEach(r=>{const a="usable",o=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===a,l=i.lastExcludeReason_===t&&i.excludeUntil===1/0;o?o&&l&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${r} is ${a}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==t&&(i.excludeUntil=1/0,i.lastExcludeReason_=t,this.logger_(`excluding playlist ${i.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,r=i.excludeUntil===1/0&&i.lastExcludeReason_===t;s&&r&&(delete i.excludeUntil,j.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const r=(typeof e=="string"?e:u7(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${r} added to the keyStatusMap`),this.keyStatusMap_.set(r,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const M7=(n,e,t)=>i=>{const s=n.main.playlists[e],r=Cf(s),a=Hu(s);return typeof i>"u"?a:(i?delete s.disabled:s.disabled=!0,i!==a&&!r&&(t(),i?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),i)};class B7{constructor(e,t,i){const{playlistController_:s}=e,r=s.fastQualityChange_.bind(s);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=no(s.main(),t),this.playlist=t,this.id=i,this.enabled=M7(e.playlists,t.id,r)}}const N7=function(n){n.representations=()=>{const e=n.playlistController_.main(),t=Bo(e)?n.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(i=>!Cf(i)).map((i,s)=>new B7(n,i,i.id)):[]}},$g=["seeking","seeked","pause","playing","error"];class F7{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=zi("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),s=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on($g,r),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",s),this.tech_.off($g,r),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&P.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&P.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=P.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,i=t[`${e}SegmentLoader_`],s=i.buffered_(),r=AD(this[`${e}Buffered_`],s);if(this[`${e}Buffered_`]=s,r){this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:zs(s)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+yn>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),i=this.tech_.currentTime(),s=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let r;if(s&&(r=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){const _=t.start(0);r=_+(_===t.end(0)?0:yn)}if(typeof r<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${Zy(t)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-_n)*2,m=[l,u];for(let _=0;_<m.length;_++){if(!m[_])continue;if(wf(m[_],i)<h)return!1}const y=fl(o,i);return y.length===0?!1:(r=y.start(0)+yn,this.logger_(`Buffered region starts (${y.start(0)})  just beyond seek point (${i}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),i=Ar(t,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,s=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=fl(s,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,i,s=!1){if(!e.length)return!1;let r=e.end(e.length-1)+yn;const a=!i.endList,o=typeof i.partTargetDuration=="number";return a&&(o||s)&&(r=e.end(e.length-1)+i.targetDuration*3),t>r}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let s;if(e.length&&t.length){const r=Ar(e,i-3),a=Ar(e,i),o=Ar(t,i);o.length&&!a.length&&r.length&&(s={start:r.end(0),end:o.end(0)})}else fl(e,i).length||(s=this.gapFromVideoUnderflow_(e,i));return s?(this.logger_(`Encountered a gap in video from ${s.start} to ${s.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),i=this.tech_.currentTime(),s=fl(t,i);this.resetTimeUpdate_(),!(s.length===0||i!==e)&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+_n),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const i=SD(e);for(let s=0;s<i.length;s++){const r=i.start(s),a=i.end(s);if(t-r<4&&t-r>2)return{start:r,end:a}}return null}}const U7={errorInterval:30,getSource(n){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return n(t)}},F2=function(n,e){let t=0,i=0;const s=Fe(U7,e);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const r=function(){i&&n.currentTime(i)},a=function(c){c!=null&&(i=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",r),n.src(c),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},o=function(){if(Date.now()-t<s.errorInterval*1e3){n.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){j.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),s.getSource.call(n,a)},l=function(){n.off("loadedmetadata",r),n.off("error",o),n.off("dispose",l)},u=function(c){l(),F2(n,c)};n.on("error",o),n.on("dispose",l),n.reloadSourceOnError=u},j7=function(n){F2(this,n)};var U2="3.10.0",$7="7.0.2",H7="1.3.0",z7="7.1.0",V7="4.0.1";const ut={PlaylistLoader:Dr,Playlist:oi,utils:QD,STANDARD_PLAYLIST_SELECTOR:Ig,INITIAL_PLAYLIST_SELECTOR:jk,lastBandwidthSelector:Ig,movingAverageBandwidthSelector:Fk,comparePlaylistBandwidth:Df,comparePlaylistResolution:Nk,xhr:f2()};Object.keys(kt).forEach(n=>{Object.defineProperty(ut,n,{get(){return j.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),kt[n]},set(e){if(j.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){j.log.warn(`value of Vhs.${n} must be greater than or equal to 0`);return}kt[n]=e}})});const j2="videojs-vhs",$2=function(n,e){const t=e.media();let i=-1;for(let s=0;s<n.length;s++)if(n[s].id===t.id){i=s;break}n.selectedIndex_=i,n.trigger({selectedIndex:i,type:"change"})},q7=function(n,e){e.representations().forEach(t=>{n.addQualityLevel(t)}),$2(n,e.playlists)};ut.canPlaySource=function(){return j.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const G7=(n,e,t)=>{if(!n)return n;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=nu(hn(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(i.audio=t.attributes.CODECS);const s=po(i.video),r=po(i.audio),a={};for(const o in n)a[o]={},r&&(a[o].audioContentType=r),s&&(a[o].videoContentType=s),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof n[o]=="string"&&(a[o].url=n[o]);return Fe(n,a)},W7=(n,e)=>n.reduce((t,i)=>{if(!i.contentProtection)return t;const s=e.reduce((r,a)=>{const o=i.contentProtection[a];return o&&o.pssh&&(r[a]={pssh:o.pssh}),r},{});return Object.keys(s).length&&t.push(s),t},[]),X7=({player:n,sourceKeySystems:e,audioMedia:t,mainPlaylists:i})=>{if(!n.eme.initializeMediaKeys)return Promise.resolve();const s=t?i.concat([t]):i,r=W7(s,Object.keys(e)),a=[],o=[];return r.forEach(l=>{o.push(new Promise((u,c)=>{n.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{n.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Y7=({player:n,sourceKeySystems:e,media:t,audioMedia:i})=>{const s=G7(e,t,i);return s?(n.currentSource().keySystems=s,s&&!n.eme?(j.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},H2=()=>{if(!P.localStorage)return null;const n=P.localStorage.getItem(j2);if(!n)return null;try{return JSON.parse(n)}catch{return null}},K7=n=>{if(!P.localStorage)return!1;let e=H2();e=e?Fe(e,n):n;try{P.localStorage.setItem(j2,JSON.stringify(e))}catch{return!1}return e},Z7=n=>n.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(n.substring(n.indexOf(",")+1)):n,z2=(n,e)=>{n._requestCallbackSet||(n._requestCallbackSet=new Set),n._requestCallbackSet.add(e)},V2=(n,e)=>{n._responseCallbackSet||(n._responseCallbackSet=new Set),n._responseCallbackSet.add(e)},q2=(n,e)=>{n._requestCallbackSet&&(n._requestCallbackSet.delete(e),n._requestCallbackSet.size||delete n._requestCallbackSet)},G2=(n,e)=>{n._responseCallbackSet&&(n._responseCallbackSet.delete(e),n._responseCallbackSet.size||delete n._responseCallbackSet)};ut.supportsNativeHls=function(){if(!Q||!Q.createElement)return!1;const n=Q.createElement("video");return j.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))}):!1}();ut.supportsNativeDash=function(){return!Q||!Q.createElement||!j.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Q.createElement("video").canPlayType("application/dash+xml"))}();ut.supportsTypeNatively=n=>n==="hls"?ut.supportsNativeHls:n==="dash"?ut.supportsNativeDash:!1;ut.isSupported=function(){return j.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};ut.xhr.onRequest=function(n){z2(ut.xhr,n)};ut.xhr.onResponse=function(n){V2(ut.xhr,n)};ut.xhr.offRequest=function(n){q2(ut.xhr,n)};ut.xhr.offResponse=function(n){G2(ut.xhr,n)};const Q7=j.getComponent("Component");class W2 extends Q7{constructor(e,t,i){if(super(t,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=zi("VhsHandler"),t.options_&&t.options_.playerId){const s=j.getPlayer(t.options_.playerId);this.player_=s}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Q,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],s=>{const r=Q.fullscreenElement||Q.webkitFullscreenElement||Q.mozFullScreenElement||Q.msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Fe(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const t=H2();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=kt.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===kt.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(t=>{typeof this.source_[t]<"u"&&(this.options_[t]=this.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=Z7(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ut,this.options_.sourceType=G_(t),this.options_.seekTo=r=>{this.tech_.setCurrentTime(r)},this.playlistController_=new R7(this.options_);const i=Fe({liveRangeSafeTimeDelta:yn},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new F7(i),this.playlistController_.on("error",()=>{const r=j.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),r.error(a)});const s=this.options_.bufferBasedABR?ut.movingAverageBandwidthSelector(.55):ut.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.playlistController_.selectInitialPlaylist=ut.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(r){this.playlistController_.selectPlaylist=r.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(r){this.playlistController_.mainSegmentLoader_.throughput.rate=r,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let r=this.playlistController_.mainSegmentLoader_.bandwidth;const a=P.navigator.connection||P.navigator.mozConnection||P.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&r>=o?r=Math.max(r,l):r=l}return r},set(r){this.playlistController_.mainSegmentLoader_.bandwidth=r,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const r=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(r+a))},set(){j.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>zs(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>zs(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&K7({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{N7(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=P.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),X7({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Y7({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=j.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{q7(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{$2(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":U2,"mux.js":$7,"mpd-parser":H7,"m3u8-parser":z7,"aes-decrypter":V7}}version(){return this.constructor.version()}canChangeType(){return M2.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&P.URL.revokeObjectURL&&(P.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return rk({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,s=2){return y2({programTime:e,playlist:this.playlistController_.media(),retryCount:s,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{z2(this.xhr,e)},this.xhr.onResponse=e=>{V2(this.xhr,e)},this.xhr.offRequest=e=>{q2(this.xhr,e)},this.xhr.offResponse=e=>{G2(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}}const au={name:"videojs-http-streaming",VERSION:U2,canHandleSource(n,e={}){const t=Fe(j.options,e);return au.canPlayType(n.type,t)},handleSource(n,e,t={}){const i=Fe(j.options,t);return e.vhs=new W2(n,e,i),e.vhs.xhr=f2(),e.vhs.setupXhrHooks_(),e.vhs.src(n.src,n.type),e.vhs},canPlayType(n,e){const t=G_(n);if(!t)return"";const i=au.getOverrideNative(e);return!ut.supportsTypeNatively(t)||i?"maybe":""},getOverrideNative(n={}){const{vhs:e={}}=n,t=!(j.browser.IS_ANY_SAFARI||j.browser.IS_IOS),{overrideNative:i=t}=e;return i}},J7=()=>xl("avc1.4d400d,mp4a.40.2");J7()&&j.getTech("Html5").registerSourceHandler(au,0);j.VhsHandler=W2;j.VhsSourceHandler=au;j.Vhs=ut;j.use||j.registerComponent("Vhs",ut);j.options.vhs=j.options.vhs||{};(!j.getPlugin||!j.getPlugin("reloadSourceOnError"))&&j.registerPlugin("reloadSourceOnError",j7);const e9=Se({__name:"Video",props:{options:{default:{}}},setup(n){const e=n,t=Be(),i=Be();return Ot(()=>{i.value=j(t.value,e.options),i.value.on("play",()=>{i.value.isFullscreen()||i.value.requestFullscreen()}),console.log("video options:",e.options)}),sn(()=>{i.value&&i.value.dispose()}),(s,r)=>($(),Y("video",{ref_key:"videoRef",ref:t,class:"video-js vjs-default-skin vjs-show-big-play-button-on-pause"},null,512))}}),t9={class:"title"},i9={class:"video"},n9={class:"description"},s9=Se({__name:"LayerModal",props:{title:{},video:{},description:{},points:{}},setup(n){const e=n,t=Be(),i=Be();function s(r){if(!i.value)return;const a=r.getBoundingClientRect().top,o=i.value.getBoundingClientRect().top*1.2,l=a-o+i.value.scrollTop;setTimeout(()=>{i.value&&i.value.scrollTo({top:l,behavior:"smooth"})},100)}return(r,a)=>($(),Y("div",{class:"layer-modal",ref_key:"modalRef",ref:t},[F("div",t9,Ve(e.title),1),F("div",{class:"scrollable",ref_key:"scrollRef",ref:i},[F("div",i9,[De(e9,{options:{sources:[{src:`${e.video}`,type:" video/mp4"}],preload:"auto",controls:!0}},null,8,["options"])]),F("div",n9,Ve(e.description),1),($(!0),Y(Lt,null,en(e.points,o=>($(),Te(X4,{name:o.name,description:o.description,video:o.video,onExpand:s},null,8,["name","description","video"]))),256))],512)],512))}}),Gc=_e(s9,[["__scopeId","data-v-5acf8a0d"]]),Mi={energy:{title:"SMART ENERGY",video:"/video/test.mp4",description:`Under the national goal of "carbon peak and carbon neutrality", Beijing will play a leading role in energy transformation. Leveraging its geographical advantages, the proportion of renewable energy like wind and solar power in Beijing's energy mix will significantly increase. By 2035, the city will achieve coal-free, and the share of renewable energy consumption is expected to rise to 30%. In new urban areas, microgrid systems will gradually be established. All urban operational vehicles will be fully transitioned to new energy sources, and new public buildings will meet zero-carbon standards.`,points:[{name:"Coal-free",description:'By integrating major platforms such as the transportation big data center and transportation information platform, a digital twin system for city transportation is developed. A traffic information sharing platform is built to intelligently assist in achieving a 1-hour "door-to-door" commuting circle, efficiently integrating multimodal transportation networks like rail, road, water, etc.'},{name:"Zero-carbon Power System",description:"A dedicated autonomous driving road is set up on Beijing's core ring roads, mainly serving autonomous private cars, logistics traffic, and public transport vehicles. In conjunction with bus stops, this ensures that surface public transport is as smooth as rail transport."},{name:"Microgrid",description:"Beijing's new types of unmanned public transport vehicles, such as taxis and buses, will initially scale up, gradually perfecting the responsibility system. This is expected to further reduce traffic accidents, alleviate congestion, and provide more intelligent, efficient, environmentally friendly and safe travel options."},{name:"New Energy Vehicles",description:"Under the overall logistics goal of delivering within one day domestically, two days to neighboring countries, and three days to major global cities, urban logistics will preliminarily realize unmanned delivery from warehouses to doors. There will also be pilot projects for drone delivery."},{name:"Green Building",description:"Promote green travel in central city, including walking, cycling, and electric vehicles, to achieve a 100% green travel ratio."}]},transportation:{title:"SMART TRANSPORTATION",video:"/video/transportation.mp4",description:"In terms of transportation, by 2035, a comprehensive smart transportation system integrating diverse modes of transportation information will gradually be established. The total length of the rail transit bus network will exceed 2600 kilometers. In addition, every aspect of logistics transportation will further undergo unmanned automation, contributing to Beijing's logistics goal of achieving delivery within three days to major cities globally. Green commuting and regional transportation are also key development directions, with the green commuting share in the central urban area exceeding 90% by 2035",points:[{name:"Smart System",description:'By integrating major platforms such as the transportation big data center and transportation information platform, a digital twin system for city transportation is developed. A traffic information sharing platform is built to intelligently assist in achieving a 1-hour "door-to-door" commuting circle, efficiently integrating multimodal transportation networks like rail, road, water, etc.'},{name:"Autonomous Driving",description:"A dedicated autonomous driving road is set up on Beijing's core ring roads, mainly serving autonomous private cars, logistics traffic, and public transport vehicles. In conjunction with bus stops, this ensures that surface public transport is as smooth as rail transport."},{name:"Unmanned Public Transport",description:"Beijing's new types of unmanned public transport vehicles, such as taxis and buses, will initially scale up, gradually perfecting the responsibility system. This is expected to further reduce traffic accidents, alleviate congestion, and provide more intelligent, efficient, environmentally friendly and safe travel options."},{name:"Unmanned Urban Logistics",description:"Under the overall logistics goal of delivering within one day domestically, two days to neighboring countries, and three days to major global cities, urban logistics will preliminarily realize unmanned delivery from warehouses to doors. There will also be pilot projects for drone delivery."},{name:"Green Travel",description:"Promote green travel in central city, including walking, cycling, and electric vehicles, to achieve a 100% green travel ratio."},{name:"Regional Transportation",description:"Based on rail transit, a multi-level intercity transportation system is constructed around key hubs like Beijing MC, Lize, and Dongzhimen, forming a 40-minute Beijing-Tianjin-Hebei transportation circle. Relying on multiple international aviation hubs such as the Capital International Airport and Daxing International Airport, as well as railway hub nodes, a multi-level international passenger and freight flow system is constructed.",video:"/video/test.mp4"}]},management:{title:"SMART MANAGEMENT",video:"/video/test.mp4",description:"Green commuting and regional transportation are also key development directions, with the green commuting share in the central urban area exceeding 90% by 2035",points:[{name:"Smart System",description:'By integrating major platforms such as the transportation big data center and transportation information platform, a digital twin system for city transportation is developed. A traffic information sharing platform is built to intelligently assist in achieving a 1-hour "door-to-door" commuting circle, efficiently integrating multimodal transportation networks like rail, road, water, etc.'},{name:"Autonomous Driving",description:"A dedicated autonomous driving road is set up on Beijing's core ring roads, mainly serving autonomous private cars, logistics traffic, and public transport vehicles. In conjunction with bus stops, this ensures that surface public transport is as smooth as rail transport."},{name:"Unmanned Public Transport",description:"Beijing's new types of unmanned public transport vehicles, such as taxis and buses, will initially scale up, gradually perfecting the responsibility system. This is expected to further reduce traffic accidents, alleviate congestion, and provide more intelligent, efficient, environmentally friendly and safe travel options."},{name:"Unmanned Urban Logistics",description:"Under the overall logistics goal of delivering within one day domestically, two days to neighboring countries, and three days to major global cities, urban logistics will preliminarily realize unmanned delivery from warehouses to doors. There will also be pilot projects for drone delivery."},{name:"Green Travel",description:"Promote green travel in central city, including walking, cycling, and electric vehicles, to achieve a 100% green travel ratio."},{name:"Regional Transportation",description:"Based on rail transit, a multi-level intercity transportation system is constructed around key hubs like Beijing MC, Lize, and Dongzhimen, forming a 40-minute Beijing-Tianjin-Hebei transportation circle. Relying on multiple international aviation hubs such as the Capital International Airport and Daxing International Airport, as well as railway hub nodes, a multi-level international passenger and freight flow system is constructed.",video:"/video/test.mp4"}]}},Wc={major:[{name:"Beijing Central Axis",subtitle:"",cnName:"中轴线",type:[],image:"",description:""},{name:"Beijing E-town",subtitle:"",cnName:"亦庄新城",type:["transportation","energy"],image:"",description:""},{name:"Beijing Municipal Administrative Center",subtitle:"",cnName:"北京城市副中心",type:["transportation","energy"],image:"",description:""},{name:"Beijing Old City",subtitle:"",cnName:"北京老城",type:["management"],image:"",description:""},{name:"Daxing International Airport Aerotropolis",subtitle:"",cnName:"大兴临空经济区",type:["transportation"],image:"",description:""},{name:"Huairou Science City",subtitle:"",cnName:"怀柔科学城",type:["energy"],image:"",description:""}],minor:[{name:"Beijing Central Business District",subtitle:"A Future Global Business Center",type:["energy","transportation"],image:"/images/areas/CBD1.jpg",description:`Beijing Cental Business District (CBD), located at the intersection of Chang'an Avenue and East 3rd Ring Road, is home to the headquarters of many renowned financial institutions and Beijing's tallest building, the CITIC Tower.

By 2035, after nearly 35 years of planning, design, and construction, the core area of CBD has been fully developed, becoming the area of the most skyscrapers in Beijing. This area is more than just a business district. The central park, commercial spaces connecting all office buildings underground, along with cultural institutions like art galleries and theaters, keep it vibrant both on weekdays and weekends. Two newly opened subway lines have also strengthened the connection between the CBD and key areas such as Beijing MC and E-town.

In tandem with the new construction, low-carbon renovations are undertaken on older office buildings. Buildings like the Zhongfu Building, among Beijing's first generation of skyscrapers, now aged 40 to 50 years, have been retrofitted using active and passive carbon reduction technologies like BIPV.

In the past, the massive Guomao overpass at the center of the CBD was a persistent issue, cutting through several areas of CBD and causing traffic congestion. By 2035, with the advancement of Beijing's intelligent transportation system, particularly the autonomous driving modifications on ring roads, the pressure on the overpass has lessened. A substantial amount of space under the overpass has been released and integrated with the surrounding public spaces.`},{name:"Beijing Pilot Free Trade Zone (Shunyi)",subtitle:"From Digital Manufacturing to Seamless Autonomous Mobility",type:["transportation"],image:"/images/areas/Pilot Free Trade Zone.png",description:`The Pilot Free Trade Zone (Shunyi) is located around the Capital Airport, encompassing the Tianzhu Comprehensive Bonded Zone, Airport Economic Demonstration Zone, Sino-German International Cooperation Industrial Park, and the New International Exhibition Center, among other functional areas.

By 2035, the Tianzhu Comprehensive Bonded Zone and the Airport Economic Demonstration Zone are expected to achieve full integration of the airport with the city. Due to policy advantages such as bonded areas and transit visa exemptions, this area has attracted industries like cultural trade and cross-border e-commerce, and has built a number of international talent apartments, high-end hotels, and globalized shops. The Sino-German International Cooperation Industrial Park, over the past nearly 15 years, has gathered hundreds of German companies, accumulating extensive collaborative achievements in fields such as new energy vehicles, intelligent equipment, and industrial internet.

Additionally, the industrial and commercial spaces, smart connected road systems, and the airport within the region are all integrated, forming a unified service system. This integration has realized seamless boarding processes, autonomous driving, smart parking, and intelligent public transit services.`},{name:"Miyun Life and Health Science Town",subtitle:"The green waters and mountains cultivate new industries in life and health",type:[],image:"/images/areas/Miyun Life and Health Science Town.png",description:`Miyun District, with its scenic beauty and proximity to mountains and water, is Beijing's most important water conservation area. By 2035, the Life and Health Science Town will be established here.

Firstly, favorable policies will encourage life and health enterprises to settle in Miyun, focusing on the development of biopharmaceuticals, medical device manufacturing, sports equipment manufacturing, and health product logistics. Simultaneously, Peking University Health Science Center will establish a medical center in Miyun to develop innovative medical technologies, train high-end international talents, and construct a research-oriented smart hospital.

The Life and Health Science Town will not only develop industries but also leverage its unique environmental advantages to become the preferred destination for rehabilitation and convalescence in Beijing. Hospitals, rehabilitation centers, and resorts will meet various recuperation needs, and specialized real estate and tourism will also flourish here.`},{name:"Lize Financial Business District",subtitle:'The "Guest Reception Hall" in South Beijing',type:["transportation"],image:"/images/areas/Dongzhimen.png",description:`Lize Financial Business District is located in Fengtai District, covering an area of about 9 square kilometers. It is the last large-scale, concentrated developed area adjacent to Beijing's 2nd Ring Road, making it the focus of much attention.

Due to its advantageous location, by 2035, Lize will be one of the most important transportation hubs in Beijing's Central City. It boasts Beijing's first subway station where five lines intersect, as well as an urban airport terminal. Here, passengers can complete check-in services and reach Daxing International Airport within half an hour for their flights. This transportation hub has made it Beijing's "living room," where people come for business negotiations or to shop and dine during their travels.

Lize Business District has always regarded itself as "Beijing's Second Financial Street." By 2035, this slogan has become a reality. Financial infrastructure such as trading centers, big data centers, and a blockchain network have been successively established, establish complementary development with Beijing Financial Street.

In addition, the rich ecological and cultural resources of the Lize will be reactivated in 2035. The flood storage capacity of the Lianhua River and Fengcao River has been enhanced, providing an open space for leisure. Furthermore, after years of archaeological excavation and site preservation, the Jurchen Zhongdu City Wall Relics Park has finally opened to the public, offering a place for visitors to experience Beijing's early history.`},{name:"The Fourth Embassy Area",subtitle:"A new hub for culture exchange",type:["management"],image:"/images/areas/The fourth embassy area.png",description:`From the 1950s to the 1990s, Beijing successively established its First to Third Embassy Zones. By 2035, the Fourth Embassy Zone, located in the eastern part of Chaoyang District near the Second Airport Expressway in Dongba area, is gradually being developed. The Fourth Embassy Zone can accommodate dozens of embassies and international organizations' offices, along with office buildings, diplomatic apartments, international schools, international hospitals, and various service facilities. The beautiful environments along Ba River and Beixiao River provide a series of public spaces, offering venues for cultural and sports activities — the importance of waterfront spaces has already been proven in Beijing with the Liangma River in the Second and Third Embassy Zones. Similar to the previous embassy zones, the Fourth Embassy Zone also has a catalytic effect on the surrounding areas. It is not a closed area; instead, by attracting diverse businesses and activities, it transforms the surrounding areas into a international and multifunctional neighborhood, drawing in citizens for work, shopping, and leisure. It's no wonder that the Fourth Embassy Zone is referred to as the "new Sanlitun" (Sanlitun is Beijing's most fashionable district, developed due to the Second Embassy Zone).`},{name:"Xueyuan Road Universities",subtitle:"The center of innovation and higer educatioin",type:["management"],image:["/images/areas/Xueyuan Road Universities 1.png","/images/areas/Xueyuan Road Universities 2.png"],description:"Xueyuan Road, located in Haidian District, refers not only to a road but also to an area that houses many of China's top universities, such as Tsinghua University, Peking University, and Renmin University of China. By 2035, this area will undergo a subtle transformation. Over the past 20 years, many universities on Xueyuan Road have established branch campuses in places like the Shahe University Town in Changping District and Xiong'an New Area, freeing up space on their main campuses. These newly vacated spaces are expected to evolve into mixed-use communities for industry, research, and services, rather than just remaining as purely academic spaces as in the past. This mixed-use model is considered more conducive to innovation. It also presents an opportunity for originally enclosed campuses to open up to the city."},{name:"Daxing Biomedical Industry Base",subtitle:"Integrated High-Tech Biomedical Hub",type:["energy"],image:"/images/areas/Daxing Biomedical Industry Base.png",description:`The Daxing Biomedical Base is located in the southwest of Daxing New City, approximately 20 kilometers away from both the South 2nd Ring Road and Daxing International Airport. As the name suggests, its main industry is biomedicine, particularly in the manufacturing of drugs and medical devices. Although predominantly manufacturing-oriented, by 2035, it has also developed into a comprehensive industrial area integrating production, education, research, and service. This includes manufacturing plants, incubators, universities (Capital Medical University), research institutes, research hospitals, regulatory agencies, and exhibition facilities. About 80,000 people live here, and approximately 200,000 people work in the area.

As a typical emerging industrial district, the Daxing Biomedical Base has a high level of intelligence and low-carbon development. For example, by 2035, autonomous driving has been implemented throughout the area, and it also serves as a demonstration zone for Beijing's renewable energy heating systems.`},{name:"Fengtai Railway Station",subtitle:"Asia's LargestPassenger Railway Hub",type:["transportation"],image:["/images/areas/Fengtai Railway Station 1.jpg","/images/areas/Fengtai Railway Station 2.png"],description:"Fengtai Station, Beijing's earliest railway station, was completely rebuilt in 2022. After completion, it became one of the stations in China with the most departure and arrival lines, especially in terms of its connection with the Xiong'an New Area. However, due to the adoption of a stacked layout for high-speed and regular railways (a first among China's major passenger stations), the architectural space is very compact, laying the foundation for the integration of the station with the city. Unlike other Beijing railway stations that are relatively isolated from the surrounding areas, Fengtai Station truly achieves seamless integration of a transportation hub with urban public spaces, avoiding the division of the city by transportation facilities. By 2035, the development and urban renewal around the railway station have been largely completed. Fengtai Station has driven the development of business, technology, and tourism industries in the surrounding area, bringing people and investments and turning the Fengtai Station area into a new vibrant center in the southern part of the city."},{name:"Guanting Reservoir",subtitle:`Ecological Restoration and
Water Management`,type:["energy","management"],image:["/images/areas/Guanting Reservoir 1.png","/images/areas/Guanting Reservoir 2.png"],description:`The Guanting Reservoir, located on the border between Beijing and Hebei, is the first reservoir built in the People's Republic of China. By 2035, it plays a crucial role in the water network system of Beijing.

Beijing is often perceived as a city lacking water, but in reality, its water network is not scarce, just distant from the populace. By 2035, Beijing's rivers and lakes are more prominent, giving the impression of a "water-friendly city." Among these, the ecological restoration of Guanting Reservoir, an upstream source of the Yongding River, which is one of the five major water systems, is highly significant.

Once ceased to be used as a source of drinking water due to water quality degradation, the Guanting Reservoir, after ecological restoration by 2035, resumes its function as a drinking water source, alongside Miyun Reservoir, becoming one of Beijing's two major surface water sources. The Guanting Reservoir is also an essential part of the "western route" among Beijing's four external water source channels.

Spanning across Beijing and Hebei, the management of Guanting Reservoir, and by extension the Yongding River, serves as a prime example of Beijing's regional coordinated development. Moreover, taking advantage of its high altitude and unobstructed location, the Guanting Reservoir has been developed into Beijing's largest centralized wind power plant.`},{name:"Olympic District",subtitle:`The center for sport and
culture events`,type:[],image:"/images/areas/CBD1.jpg",description:`The Olympic Central District, having hosted one Asian Games and two Olympic Games, possesses a unique sports heritage. In the post-Olympic era, numerous national-level cultural venues and international exchange facilities were built here, including the China Science and Technology Museum and the China National Convention Center. By 2035, all the infrastructure in this area has been completed, welcoming a batch of new significant public buildings such as the new venue of the National Art Museum of China.

The impression this area gives is similar to the National Mall in Washington, D.C., but with more diverse functions (sports, culture, conferences, tourism, business, etc.) and a larger scale. Consequently, by 2035, a series of small and medium-scale space renovation projects have been implemented here, making the entire area more livable while maintaining its majestic order.`},{name:"The Forbidden City",subtitle:"From the Forbidden City to the Open City",type:[],image:["/images/areas/The Forbidden City 1.png","/images/areas/The Forbidden City 2.png"],description:`The Forbidden City, the ancient imperial palace of Beijing with over 600 years of history, was listed as a UNESCO World Heritage Site in 1985. Now, it serves as a museum, housing 1.8 million artifacts. In the past, researching, preserving, and exhibiting such a vast collection was a challenge. However, by 2035, this massive collection has become material for AI learning. With AI's assistance, the research team at the Forbidden City has made numerous new discoveries, overturning many old views. AI is also used in exhibitions. Previously, human-curated exhibitions could only select a tiny fraction from millions of artifacts for a fixed display, but by 2035, AI-generated exhibitions have become more common, customizing exhibitions to suit each visitor's interests, allowing more artifacts to be seen. Of course, this relies on advanced display technology. By 2035, light field technology and holographic projection have greatly advanced, making virtual exhibits indistinguishable from the real objects, and in some cases, even offering a better experience. Additionally, the efficiency of restoring artifacts and ancient buildings has significantly increased due to the involvement of robots, with restoration robots themselves representing a major technological breakthrough at the Forbidden City.

Lastly, it's worth mentioning that the North Section of the Forbidden City was completed in 2025. Together with the branches in Shenyang, Hong Kong, and Taipei, the viewing experience at the Forbidden City in 2035 is exceptionally rich.`},{name:"Shougang Park",subtitle:"the afterlife of the largest steel industry park",type:["energy"],image:"/images/areas/CBD1.jpg",description:`Shougang Park, located in Fengtai District, Beijing, covers an area of approximately 20 square kilometers and was once the birthplace of China's steel industry. Evolving with the times, it has undergone urban transformation and redevelopment, now emerging as an area that seamlessly integrates industrial heritage, modern innovation, cultural arts, and urban commercial spaces.

Looking ahead to the future plans in 2035, the development of both the North and South regions of the park will be further completed. Once finished, the area is poised to become a hub for employment and commerce in the western part of Beijing, showcasing the application of green energy in urban spaces. The planning for the North and South regions prioritizes environmental sustainability and the use of renewable energy, creating a livable urban zone equipped with modern housing, commercial facilities, and public services for residents. Additionally, the future plans for the park include a focus on cultural and innovative development. With the guidance of art centers, cultural districts, and innovation incubators, it aims to attract artists, entrepreneurs, and culture enthusiasts to gather, injecting more cultural vibrancy into Shougang Park, making it a community with youthful energy and innovative spirit.`},{name:"Yanqi Lake",subtitle:"A Hub for Global Events and International Lifestyle",type:["energy"],image:["/images/areas/Yanqi Lake 1.png","/images/areas/Yanqi Lake 2.png"],description:`Yanqi Lake is located at the foot of the Yanshan Mountains in Huairou District, featuring a central island and water-land areas covering 21 square kilometers. The planning and construction started in 2010. Major conference facilities, including the Yanqi Island Conference Center, Sunrise Kempinski Hotel, and the International Convention and Exhibition Center, have been completed. It has hosted various high-end conferences and large business exhibitions, such as the 2014 Asia-Pacific Economic Cooperation (APEC) Leaders' Informal Meeting and the Belt and Road International Cooperation Summit Forum, making it Beijing's "International Conference Capital" for strengthening international exchanges.

In 2035, the Yanqi Lake area will expand its functions around hosting important state events throughout the entire process, enhancing its status as an international conference hub and adding high-end top-level exhibition display functions. The core island, the west-side Yanqi group, and the south-side sports park will collectively serve as the core functional group. With a 17-kilometer lakeside and mountain-view double-loop landscape belt formed by the surrounding lake road, a green public transit micro-loop corridor will be established. Additionally, the northwest group, the Qihu group, and seven other lakeside groups will gradually be completed, complementing the core functions. The Yanqi Lake area will attract more international high-end brand activities, such as scientific releases, new technology displays, achievement transactions, academic forums, etc. Furthermore, the surrounding Yanqi Town International Community, consisting of three sections, is gradually being completed. It aims to attract more top scientists, entrepreneurs, and investors from both domestic and international arenas through an internationalized high-quality living community, high-end health and wellness medical care, and ecological residences. The community will introduce high-end hotels and international schools, and through the "Yanqi Plan," provide competitive talent gathering policies and more considerate public services for talents, establishing an international talent innovation and entrepreneurship ecosystem.

The future development plan for the year 2035 aims to transform the Olympic area into a modern, multifunctional, and sustainable urban public space. In addition to the National Art Museum currently under construction, more cultural facilities such as libraries and innovation incubators will be built to meet the growing cultural and innovation demands, providing residents and visitors with a diversified urban public life experience. This area will continue to play a significant role after the Olympics, further enhancing its status as a hub for urban life and culture, becoming a modern and well-rounded public activity area.`},{name:"Yongding River",subtitle:"The Mother River of Beijing",type:["energy","management"],image:"/images/areas/CBD1.jpg",description:`Yongding River, one of the five major water systems in Beijing, is the largest and oldest river in the city, hence it is also known as Beijing's "Mother River."

Historically not flowing through the city center and often dry, Yongding River used to give an impression of being marginalized. However, by 2035, nearly two decades of ecological restoration efforts along the river have borne fruit. Not only has the upstream Guanting Reservoir restored its capacity as a source of drinking water, but the entire river also achieves year-round flow. Streams, lakes, and wetlands along the river have been connected, along with extensive forests on both banks, forming an ecological corridor. This provides breeding and migration habitats for fish and migratory birds, attracting residents back to Yongding River for leisure and travel. The annual fireworks display by the river during the Spring Festival has become a must-see attraction in Beijing.

The name Yongding means "forever stable," and as extreme weather becomes more frequent, flood control along the river becomes more important. By 2035, in addition to constructing a new large reservoir (Chenjiazhuang Reservoir) for flood storage, a multi-tiered flood control system comprising small and medium-sized reservoirs, water plants, rivers, and wetlands will be working. The main urban areas along the river will upgrade their drainage systems and increase the proportion of sponge city development. Smart methods will also be employed in flood control; digital twins of hydraulic projects and flash flood runoff simulation sites will be used for flood simulation and monitoring. Intelligent rainwater management, traffic management, and early warning measures will minimize the impact of heavy rain on the city.`},{name:"Moat",subtitle:"Reappearance of the Historical Landscape",type:["transportation"],image:["/images/areas/moat1.png","/images/areas/moat2.png","/images/areas/moat3.png","/images/areas/moat4.png","/images/areas/moat5.png","/images/areas/moat6.png"],description:`Beijing's moat, built 600 years ago, once encircled the outer city wall (roughly corresponding to the current 2nd Ring Road), with an additional moat outside the inner city wall near Qiansanmen ("Front Three Gates"). During the process of urban modernization, part of the moat was transformed into riverside parks, while other sections were converted into underground channels, including the Qiansanmen moat that runs through the city center.

There have been calls for the restoration of the Qiansanmen moat for many years, but due to the extensive demolition required, it had never officially commenced. However, by 2035, with the residential buildings constructed above the river reaching the end of their lifespan, the historic river course has finally been restored, adding a 7-kilometer linear park to the very center of Beijing. The restored Qiansanmen moat, now connected with other rivers and featuring ferry routes, allows tourists to explore World Cultural heritage sites like the Summer Palace, the Central Axis, and the Grand Canal by boat, offering a new way to discover Beijing. While the city walls and gates are difficult to restore like the moat, they can be recreated with XR technology, allowing visitors to immerse themselves in history. Finally, the restoration of the moat also helps improve the city's flood control and drainage capacity, directing rainwater during the flood season to the downstream Tonghui River.`},{name:"Zhongguancun",subtitle:"World-Leading Innovation Hub",type:["transportation","energy"],image:"/images/areas/Zhongguancun.png",description:`Zhongguancun, located in Haidian District and near top universities like Tsinghua University and Peking University, is one of China's most renowned high-tech hubs, often referred to as the "Silicon Valley of China." By 2035, Zhongguancun Science Park has expanded beyond its original location to encompass a technology park system covering 16 districts in Beijing, as well as regions in Tianjin, Hebei, and Xiong'an New Area.

The technology industry in Zhongguancun is diverse, encompassing not only core industries like information technology and biomedicine but also advanced manufacturing, modern transportation, new energy, and new materials. Modern transportation primarily refers to communication technology and intelligent traffic management, while new energy represents a sector with immense potential for growth in the context of China's "Dual Carbon" goals.

With the rise of more global technology centers and the prevalence of remote work and distributed teams, Zhongguancun faces challenges in its development by 2035. However, considering Zhongguancun's traditional status in China's technology field, its proximity to top academic institutions, and China's somewhat top-down approach to technological planning, Zhongguancun will continue to be at the forefront of technological development in Beijing and China as a whole.`},{name:"Fintech Demonstration Zone",subtitle:"A New Employment Hub in Financial Innovation",type:["management"],image:"/images/areas/Fintech Demonstration Zone.png",description:`Fintech Demonstration Zone (FDZ) is located close to the West 2nd Ring Road. Geographically situated between Beijing Financial Street and Zhongguancun, its function is a combination of the two - fintech. The construction of FDZ officially began in 2018, with a core area of 0.67 km2 and office space over 1 million ㎡.

By 2035, FDZ will be fully developed, becoming a new employment hub in the center of Beijing. Given China's developmental advantages and policy characteristics in the fintech sector, FDZ will have a certain influence globally, especially in the areas of financial regulation, financial security, risk management, and other technological research and standard-setting. This will lead to a series of innovative products and service models for the global market.

An important use case for these products and services from FDZ is smart cities. Under the influence of FDZ, by 2035, Beijing will have a plethora of fintech applications, many of which are tailor-made and globally leading. The sectors that might be affected include fraud detection, regulatory compliance, financial inclusion, Banking as a Service (BaaS), data-driven decision making, revenue collection, etc., enhancing the convenience and safety of urban operations and residents' lives.

One of the most crucial initiatives is the eastward expansion of the CBD, broadening the scope of the business district, adding infrastructure and commercial support services to meet the growing business demands. Simultaneously, the plan emphasizes the sustainable development of urban space and environmental protection, closely integrating high-density development with green spaces. The eastward expansion plan will further solidify the CBD's position as a global business hub, improve the quality of life, and attract more businesses and investors.`},{name:"Xinfadi Agricultural Wholesale Market",subtitle:"The Future of Agricultural Product Distribution Centers",type:["transportation","energy"],image:["/images/areas/Xinfadi1.png","/images/areas/Xinfadi2.png"],description:`The Xinfadi Agricultural Wholesale Market, established in 1988 and located near the Jingkai Expressway, is Beijing's largest agricultural wholesale market, handling up to 90% of the city's supply of agricultural products during its peak. By 2035, in line with the strategy of reduction development, Beijing's agricultural product wholesale distribution will shift from being centered solely around Xinfadi to a multi-center approach, with one primary wholesale market established in each of the southwest, southeast, northeast, and northwest directions. Xinfadi will be the market in the southwest, remaining as Beijing’s most important agricultural trade market, but with a reduced and more compact scale.

The Xinfadi of 2035 will strive for low-carbon and smart operations. The reduced scale of the market will facilitate the optimization of the transportation network, and the use of clean energy trucks will achieve green logistics. Moreover, the integration of the Internet of Things, big data analysis, and AI will enable more accurate market predictions and inventory management, enhancing supply chain efficiency and reducing carbon emissions from transportation and storage. Additionally, located in the southwest of Beijing, near the local farms of Daxing and Fangshan Districts, Xinfadi will have an advantage over the other three primary agricultural wholesale markets in supporting local production. This proximity minimizes distribution stages and maximizes the farm-to-table concept.`},{name:"Large Residential Areas such as Tiantongyuan",subtitle:`Age-Friendly Renewal
of Old Residential Areas`,type:["energy"],image:["/images/areas/Tiantongyuan1.png","/images/areas/Tiantongyuan2.png"],description:`During the rapid expansion of the city, Beijing constructed a vast number of residential buildings to accommodate millions of new residents. By 2035, there is scarcely any new residential construction, but most of the old residential areas have already surpassed 30 years of age, with some even reaching 50 or 60 years. Meanwhile, Beijing's population is aging, and social structures have changed, making the renovation of old residential areas a big topic.

Take Tiantongyuan, once known as the largest community in Asia, built around the turn of the century and housing 700,000 residents at its peak. By 2035, the young people who initially settled here have aged, and their residences no longer meet new needs.

In this context, residential areas will first undergo aging-friendly renovations. Buildings constructed around 2000 were designed barrier-free, so improvements are more about services, such as establishing community health monitoring centers to provide nearby medical services. Considering many elderly people are proficient in digital technology, online mutual aid platforms will also play a role.

Decarbonization is another aspect of the renovation. Upgrading insulation materials and constructing distributed photovoltaic systems and other measures will be gradually popularized in Beijing's residential communities, and there's even the potential to explore zero-carbon renovation models for old communities.

Undoubtedly, by 2035, robots will be widely present in residential areas. Besides basic tasks like logistics and cleaning, they will also assist the elderly both physically and psychologically to live better.

Furthermore, due to the prevalence of remote work and the diversification of team organization models, what were once purely residential areas in 2035 will also show a trend towards mixed functions.`},{name:"Recreational Business District（RBD）",subtitle:"A Leisure and Business Hub Integrating Winter Sports, Cultural Exhibitions, and Innovation",type:["transportation"],image:["/images/areas/RBD2.png"],description:`The Recreational Business District (RBD), located in Yanqing District, has been the site of events like the Expo 2019 and the Beijing 2022 Winter Olympics, leaving behind facilities such as sports venues and the Expo Park. It's just a half-hour high-speed train ride from the center of Beijing. By 2035, the goal is to attract 80,000 residents and 40,000 workers, fostering a positive interaction between leisure and business.

For leisure industry, the RBD aims to attract tourists and outdoor enthusiasts from Beijing and surrounding provinces by leveraging its natural setting near mountains and water, along with the legacy of the Expo and Winter Olympics, and its proximity to the Great Wall. Especially targeted are winter sports and water sports. For business, the Zhongguancun (Yanqing) Science Park within the RBD will be developed into a "garden-like office area," focusing on fields like modern horticulture, sports technology, drones, new energy, and the energy internet, taking advantage of the area's strengths. To attract talent and businesses, the RBD will also build apartments, improve service facilities, and offer support in terms of land, financial, and tax incentives.`},{name:"Mafang Logistics Base",subtitle:"Beijing Material Security and 'the Vegetable Basket'",type:["transportation","energy"],image:["/images/areas/mafang1.png","/images/areas/mafang2.png"],description:`The Mafang Logistics Base, located in Pinggu District at the junction of the Beijing-Tianjin-Hebei region, is well-positioned for multimodal transportation including road, rail, water, and air. By 2035, the Mafang Logistics Base, along with the Pinggu Railway Mafang Station and Pinggu Station has been fully built, transitioning the focus from road transportation to a logistics system that integrates multiple modes of transport:

In terms of railways, the Mafang logistics hub will connect to domestic railway mainlines and will also launch special trains to Europe, Central Asia, and ASEAN countries. Additionally, a sea-rail intermodal train service between Tianjin Port and Mafang will be initiated, making it a logistics hub directly connecting inland areas with ports. The connection between Mafang and Beijing's Central City will primarily be through new energy heavy trucks; meanwhile, the newly built subway line connecting Beijing's urban area, sub-center, and the urban area of Pinggu will explore a new model of passenger and freight sharing.

The logistics of 2035 will also be more intelligent. The Mafang Logistics Base will utilize the Internet of Things, employing sensors and connected devices to achieve real-time tracking, monitoring, and management of goods and vehicles. AI will be widely used for logistics data analysis and transportation route optimization, while the extensive use of robots within the base will significantly enhance the efficiency of goods sorting, stacking, and transportation.`},{name:"Three Hills and Five Gardens",subtitle:"Reappearance of the Historical Landscape",type:["management"],image:["/images/areas/Three Hills and Five Gardens 1.png","/images/areas/Three Hills and Five Gardens 2.png"],description:`Three Hills and Five Gardens, the collective term for cultural heritage represented by the Qing Dynasty royal gardens located in the northwest suburbs of Beijing, is best known for sites like the Summer Palace, Old Summer Palace, and Fragrant Hills. Throughout history, many of these gardens have been destroyed and only ruins remain. Some have been turned into public parks, others are used by universities and institutions, and still others have become urban villages amidst the influx of residents.

By 2035, the Three Hills and Five Gardens area has completely cleared the urban villages, restored historical water systems, and recreated landscapes that combine hills, gardens, and rice fields. Newly constructed parks blend with the original historical gardens, using interconnected waterways and green paths to form a boundaryless mega-park. For sites that could not be rebuilt, new technologies like XR and holographic projections are widely used, allowing visitors to immerse themselves in the grandeur of history — all backed by a comprehensive database. Over the past few decades, multimodal data such as text, images, sounds, and textures from cultural relics, heritage trees, and intangible cultural heritage items have been continuously accumulated and integrated with other urban data like traffic and weather, essentially forming a kind of metaverse of this area.

Furthermore, as the "green heart" of Haidian District, the Three Hills and Five Gardens area boasts a pleasant walking and cycling system. Combined with the autonomous new energy vehicles in the scenic spots and parks, this area leads the city in the proportion of green transportation.`},{name:"Beijing Future Science City",subtitle:"The future of state-guided innovation",type:["energy"],image:["/images/areas/Future Science City 1.png","/images/areas/Future Science City 2.png"],description:'The Future Science City, located in Changping District, is one of the three science cities in Beijing. Unlike the other two, it focuses on new energy, advanced manufacturing, and the pharmaceutical and health sectors. By 2035, the three districts (East, West, and the Green Heart) of the Future Science City have largely taken shape. The "Energy Valley" in the East District has gathered a large number of research institutions specializing in energy internet, new energy, and advanced energy storage technologies. The West District is centered around Zhongguancun Life Science Park and Shahe University Town, with the former focusing on the R&D of biopharmaceuticals, high-end medical equipment, and smart healthcare, while the latter hosts around 10 university campuses relocated from the central city area. Between these two districts lies the "Ecological Green Heart," directly aligned with the northward extension of Beijing Central Axis, serving as a concentrated display area for low-carbon energy technologies.'}]},kf=n=>(Bt("data-v-39c0070a"),n=n(),Nt(),n),r9={class:"map-ui"},a9={class:"layer-modal-container"},o9={class:"right"},l9=kf(()=>F("div",{class:"spacer"},null,-1)),u9=kf(()=>F("span",{class:"read-more-label"},"READ MORE",-1)),c9=kf(()=>F("span",{class:"read-more-double-arrow"},null,-1)),d9=[u9,c9],h9=Se({__name:"MapUI",props:{showMajorModal:{type:Boolean},showMinorModal:{type:Boolean},showControlTip:{type:Boolean},activedMajorPoint:{},activedMinorPoint:{}},emits:["close-major-modal","close-minor-modal","jump-to-detail","click-layer","click-area"],setup(n,{emit:e}){const t=n,i=e,s=xt({layerType:null,leftHeight:"fit-content",secondaryModalShapeSize:{width:0,height:0},useMobileSecondaryModal:!1,majorModalContent:null,minorModalContent:null}),r=Be(null);function a(x,S){return x===null?null:Wc[S?"major":"minor"].find(w=>w.name===x)||null}function o(){i("close-major-modal")}function l(){i("close-minor-modal")}function u(x){s.layerType!==x?s.layerType=x:s.layerType=null,i("click-layer",s.layerType)}function c(x){x&&s.layerType!==null&&(s.layerType=null,i("click-layer",s.layerType))}function h(x){const{width:S,height:w}=x;s.secondaryModalShapeSize={width:S,height:w}}function m(){r.value?.startRippleAnimation()}function y(){r.value?.startRippleAnimation(!0)}ls(()=>t.showMinorModal,()=>{t.showMinorModal?m():y()});let _;ls(()=>s.layerType,()=>{clearTimeout(_),s.layerType!==null?s.leftHeight="":_=setTimeout(()=>{s.leftHeight="fit-content"},300)}),ls(()=>t.activedMajorPoint,()=>{const x=a(t.activedMajorPoint,!0);x!==null?s.majorModalContent={title:x.name,subtitle:x.subtitle,image:x.image,description:x.description,type:x.type}:console.error(`Major point "${t.activedMajorPoint}" not found`)}),ls(()=>t.activedMinorPoint,()=>{const x=a(t.activedMinorPoint,!1);x!==null?s.minorModalContent={title:x.name,subtitle:x.subtitle,image:x.image,description:x.description,type:x.type}:console.error(`Minor point "${t.activedMinorPoint}" not found`)});function b(){s.useMobileSecondaryModal=screen.width<=1100}return Ot(()=>{b(),window.addEventListener("resize",b)}),sn(()=>{window.removeEventListener("resize",b)}),(x,S)=>($(),Y("div",r9,[F("div",{class:"left",style:pi({height:s.leftHeight}),onClick:S[2]||(S[2]=()=>{s.useMobileSecondaryModal&&l()})},[De(j4,{ref:"menu","active-layer-type":s.layerType,"major-points":Re(Wc).major,"minor-points":Re(Wc).minor,onClickLayer:u,onClickArea:S[0]||(S[0]=(w,A,k)=>i("click-area",{name:w,type:A,isMajor:k})),onClickBackToIntro:S[1]||(S[1]=()=>x.$router.back()),onMenuExpandStateChanged:c},null,8,["active-layer-type","major-points","minor-points"]),F("div",a9,[De(Js,{mode:"out-in",name:"layer-modal"},{default:fi(()=>[s.layerType==="energy"?($(),Te(Gc,{key:0,title:Re(Mi)[s.layerType].title,video:Re(Mi)[s.layerType].video,description:Re(Mi)[s.layerType].description,points:Re(Mi)[s.layerType].points},null,8,["title","video","description","points"])):s.layerType==="transportation"?($(),Te(Gc,{key:1,title:Re(Mi)[s.layerType].title,video:Re(Mi)[s.layerType].video,description:Re(Mi)[s.layerType].description,points:Re(Mi)[s.layerType].points},null,8,["title","video","description","points"])):s.layerType==="management"?($(),Te(Gc,{key:2,title:Re(Mi)[s.layerType].title,video:Re(Mi)[s.layerType].video,description:Re(Mi)[s.layerType].description,points:Re(Mi)[s.layerType].points},null,8,["title","video","description","points"])):Pe("",!0)]),_:1})])],4),F("div",o9,[De(vd,{class:"logo"}),l9,s.useMobileSecondaryModal?Pe("",!0):($(),Te(xc,{key:0,class:"secondary-modal",ref_key:"secondaryModalRef",ref:r,"use-ripple-effect":"","keep-dom":"",title:s.minorModalContent?.title,subtitle:s.minorModalContent?.subtitle,image:s.minorModalContent?.image,content:s.minorModalContent?.description,tags:s.minorModalContent?.type,visible:t.showMinorModal&&s.minorModalContent!==null,"ripple-size":s.secondaryModalShapeSize.height*2,"animation-duration":600,onClose:l,onSizeChanged:h},null,8,["title","subtitle","image","content","tags","visible","ripple-size"])),s.useMobileSecondaryModal?Pe("",!0):($(),Te(rE,{key:1,id:"dialog-box-shape",width:s.secondaryModalShapeSize.width,height:s.secondaryModalShapeSize.height,"triangle-width":18,radius:20},null,8,["width","height"]))]),De(xc,{class:"primary-modal","transition-name":"primary-modal","use-big-title":"","show-close-in-footer":"",title:s.majorModalContent?.title,subtitle:s.majorModalContent?.subtitle,image:s.majorModalContent?.image,content:s.majorModalContent?.description,tags:s.majorModalContent?.type,visible:t.showMajorModal&&s.majorModalContent!==null,onClose:o},{default:fi(()=>[F("div",{class:"read-more",onClick:S[3]||(S[3]=()=>i("jump-to-detail"))},d9)]),_:1},8,["title","subtitle","image","content","tags","visible"]),s.useMobileSecondaryModal?($(),Te(xc,{key:0,class:"secondary-modal-mobile","transition-name":"secondary-modal-mobile",title:s.minorModalContent?.title,subtitle:s.minorModalContent?.subtitle,image:s.minorModalContent?.image,content:s.minorModalContent?.description,tags:s.minorModalContent?.type,visible:t.showMinorModal,onClose:l},null,8,["title","subtitle","image","content","tags","visible"])):Pe("",!0),De(o4,{class:"control-tip",visible:t.showControlTip},null,8,["visible"])]))}}),f9=_e(h9,[["__scopeId","data-v-39c0070a"]]),hs={dpr:self.devicePixelRatio||1,width:self.innerWidth,height:self.innerHeight,axes:{x:new ye(1,0,0)},shp:{boundingBox:new eT(new ye(-83.7189712524414,-0,-127.5303955078125),new ye(96.13094329833984,0,53.660400390625)),center:new ye(116.39033126831055,39.920570373535156,0).negate(),scale:new ye(86,112,112),enableLayer:!0,layer:1,visibleDistance:4},cityCenter:new ye(-6.205986022949219,0,36.93499755859375).negate()},Hg={type:"change"},Xc={type:"start"},zg={type:"end"},gl=new tT,Vg=new iT,p9=Math.cos(70*so.DEG2RAD);class m9 extends wo{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ye,this.cursor=new ye,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableZoomPhi=!1,this.zoomSpeedPhi=.01,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:jn.ROTATE,MIDDLE:jn.DOLLY,RIGHT:jn.PAN},this.touches={ONE:rs.ROTATE,TWO:rs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(O){O.addEventListener("keydown",Vi),this._domElementKeyEvents=O},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Vi),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Hg),i.update(),r=s.NONE},this.update=function(){const O=new ye,re=new Tp().setFromUnitVectors(e.up,new ye(0,1,0)),Ie=re.clone().invert(),ze=new ye,Ft=new Tp,ln=new ye,ii=2*Math.PI;return function(zu=null){const No=i.object.position;O.copy(No).sub(i.target),O.applyQuaternion(re),o.setFromVector3(O),i.autoRotate&&r===s.NONE&&K(ie(zu)),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let Li=i.minAzimuthAngle,Wi=i.maxAzimuthAngle;isFinite(Li)&&isFinite(Wi)&&(Li<-Math.PI?Li+=ii:Li>Math.PI&&(Li-=ii),Wi<-Math.PI?Wi+=ii:Wi>Math.PI&&(Wi-=ii),Li<=Wi?o.theta=Math.max(Li,Math.min(Wi,o.theta)):o.theta=o.theta>(Li+Wi)/2?Math.max(Li,o.theta):Math.min(Wi,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(c,i.dampingFactor):i.target.add(c),i.target.sub(i.cursor),i.target.clampLength(i.minTargetRadius,i.maxTargetRadius),i.target.add(i.cursor),i.zoomToCursor&&R||i.object.isOrthographicCamera?o.radius=Ae(o.radius):o.radius=Ae(o.radius*u),O.setFromSpherical(o),O.applyQuaternion(Ie),No.copy(i.target).add(O),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,c.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),c.set(0,0,0));let ur=!1;if(i.zoomToCursor&&R){let Cs=null;if(i.object.isPerspectiveCamera){const Es=O.length();Cs=Ae(Es*u);const cr=Es-Cs;i.object.position.addScaledVector(k,cr),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Es=new ye(C.x,C.y,0);Es.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/u)),i.object.updateProjectionMatrix(),ur=!0;const cr=new ye(C.x,C.y,0);cr.unproject(i.object),i.object.position.sub(cr).add(Es),i.object.updateMatrixWorld(),Cs=O.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Cs!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Cs).add(i.object.position):(gl.origin.copy(i.object.position),gl.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(gl.direction))<p9?e.lookAt(i.target):(Vg.setFromNormalAndCoplanarPoint(i.object.up,i.target),gl.intersectPlane(Vg,i.target))))}else i.object.isOrthographicCamera&&(ur=u!==1,ur&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/u)),i.object.updateProjectionMatrix()));return u=1,R=!1,ur||ze.distanceToSquared(i.object.position)>a||8*(1-Ft.dot(i.object.quaternion))>a||ln.distanceToSquared(i.target)>a?(i.dispatchEvent(Hg),ze.copy(i.object.position),Ft.copy(i.object.quaternion),ln.copy(i.target),!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",On),i.domElement.removeEventListener("pointerdown",wt),i.domElement.removeEventListener("pointercancel",Dt),i.domElement.removeEventListener("wheel",Pi),i.domElement.removeEventListener("pointermove",ge),i.domElement.removeEventListener("pointerup",Dt),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",Vi),i._domElementKeyEvents=null)};const i=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=s.NONE;const a=1e-6,o=new xp,l=new xp;let u=1;const c=new ye,h=new $e,m=new $e,y=new $e,_=new $e,b=new $e,x=new $e,S=new $e,w=new $e,A=new $e,k=new ye,C=new $e;let R=!1;const N=[],H={};let M=!1;function ie(O){return O!==null?2*Math.PI/60*i.autoRotateSpeed*O:2*Math.PI/60/60*i.autoRotateSpeed}function ee(O){const re=Math.abs(O*.01);return Math.pow(.95,i.zoomSpeed*re)}function K(O){l.theta-=O}function q(O){l.phi-=O}const J=function(){const O=new ye;return function(Ie,ze){O.setFromMatrixColumn(ze,0),O.multiplyScalar(-Ie),c.add(O)}}(),be=function(){const O=new ye;return function(Ie,ze){i.screenSpacePanning===!0?O.setFromMatrixColumn(ze,1):(O.setFromMatrixColumn(ze,0),O.crossVectors(i.object.up,O)),O.multiplyScalar(Ie),c.add(O)}}(),ue=function(){const O=new ye;return function(Ie,ze){const Ft=i.domElement;if(i.object.isPerspectiveCamera){const ln=i.object.position;O.copy(ln).sub(i.target);let ii=O.length();ii*=Math.tan(i.object.fov/2*Math.PI/180),J(2*Ie*ii/Ft.clientHeight,i.object.matrix),be(2*ze*ii/Ft.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(J(Ie*(i.object.right-i.object.left)/i.object.zoom/Ft.clientWidth,i.object.matrix),be(ze*(i.object.top-i.object.bottom)/i.object.zoom/Ft.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function he(O){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?u/=O:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function pe(O){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?u*=O:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function vt(O,re){if(!i.zoomToCursor)return;R=!0;const Ie=i.domElement.getBoundingClientRect(),ze=O-Ie.left,Ft=re-Ie.top,ln=Ie.width,ii=Ie.height;C.x=ze/ln*2-1,C.y=-(Ft/ii)*2+1,k.set(C.x,C.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ae(O){return Math.max(i.minDistance,Math.min(i.maxDistance,O))}function ft(O){h.set(O.clientX,O.clientY)}function at(O){vt(O.clientX,O.clientX),S.set(O.clientX,O.clientY)}function jt(O){_.set(O.clientX,O.clientY)}function Ge(O){m.set(O.clientX,O.clientY),y.subVectors(m,h).multiplyScalar(i.rotateSpeed);const re=i.domElement;K(2*Math.PI*y.x/re.clientHeight),q(2*Math.PI*y.y/re.clientHeight),h.copy(m),i.update()}function At(O){w.set(O.clientX,O.clientY),A.subVectors(w,S),A.y>0?(he(ee(A.y)),i.enableZoomPhi&&q(i.zoomSpeedPhi)):A.y<0&&(pe(ee(A.y)),i.enableZoomPhi&&q(-i.zoomSpeedPhi)),S.copy(w),i.update()}function X(O){b.set(O.clientX,O.clientY),x.subVectors(b,_).multiplyScalar(i.panSpeed),ue(x.x,x.y),_.copy(b),i.update()}function z(O){vt(O.clientX,O.clientY),O.deltaY<0?(pe(ee(O.deltaY)),i.enableZoomPhi&&q(-i.zoomSpeedPhi)):O.deltaY>0&&(he(ee(O.deltaY)),i.enableZoomPhi&&q(i.zoomSpeedPhi)),i.update()}function te(O){let re=!1;switch(O.code){case i.keys.UP:O.ctrlKey||O.metaKey||O.shiftKey?q(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ue(0,i.keyPanSpeed),re=!0;break;case i.keys.BOTTOM:O.ctrlKey||O.metaKey||O.shiftKey?q(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ue(0,-i.keyPanSpeed),re=!0;break;case i.keys.LEFT:O.ctrlKey||O.metaKey||O.shiftKey?K(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ue(i.keyPanSpeed,0),re=!0;break;case i.keys.RIGHT:O.ctrlKey||O.metaKey||O.shiftKey?K(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ue(-i.keyPanSpeed,0),re=!0;break}re&&(O.preventDefault(),i.update())}function Z(O){if(N.length===1)h.set(O.pageX,O.pageY);else{const re=Gi(O),Ie=.5*(O.pageX+re.x),ze=.5*(O.pageY+re.y);h.set(Ie,ze)}}function se(O){if(N.length===1)_.set(O.pageX,O.pageY);else{const re=Gi(O),Ie=.5*(O.pageX+re.x),ze=.5*(O.pageY+re.y);_.set(Ie,ze)}}function me(O){const re=Gi(O),Ie=O.pageX-re.x,ze=O.pageY-re.y,Ft=Math.sqrt(Ie*Ie+ze*ze);S.set(0,Ft)}function ce(O){i.enableZoom&&me(O),i.enablePan&&se(O)}function le(O){i.enableZoom&&me(O),i.enableRotate&&Z(O)}function oe(O){if(N.length==1)m.set(O.pageX,O.pageY);else{const Ie=Gi(O),ze=.5*(O.pageX+Ie.x),Ft=.5*(O.pageY+Ie.y);m.set(ze,Ft)}y.subVectors(m,h).multiplyScalar(i.rotateSpeed);const re=i.domElement;K(2*Math.PI*y.x/re.clientHeight),q(2*Math.PI*y.y/re.clientHeight),h.copy(m)}function Ce(O){if(N.length===1)b.set(O.pageX,O.pageY);else{const re=Gi(O),Ie=.5*(O.pageX+re.x),ze=.5*(O.pageY+re.y);b.set(Ie,ze)}x.subVectors(b,_).multiplyScalar(i.panSpeed),ue(x.x,x.y),_.copy(b)}function pt(O){const re=Gi(O),Ie=O.pageX-re.x,ze=O.pageY-re.y,Ft=Math.sqrt(Ie*Ie+ze*ze);w.set(0,Ft),A.set(0,Math.pow(w.y/S.y,i.zoomSpeed)),he(A.y),S.copy(w);const ln=(O.pageX+re.x)*.5,ii=(O.pageY+re.y)*.5;vt(ln,ii)}function Ne(O){i.enableZoom&&pt(O),i.enablePan&&Ce(O)}function Ke(O){i.enableZoom&&pt(O),i.enableRotate&&oe(O)}function wt(O){i.enabled!==!1&&(N.length===0&&(i.domElement.setPointerCapture(O.pointerId),i.domElement.addEventListener("pointermove",ge),i.domElement.addEventListener("pointerup",Dt)),Me(O),O.pointerType==="touch"?qi(O):yi(O))}function ge(O){i.enabled!==!1&&(O.pointerType==="touch"?an(O):Ln(O))}function Dt(O){switch(Ss(O),N.length){case 0:i.domElement.releasePointerCapture(O.pointerId),i.domElement.removeEventListener("pointermove",ge),i.domElement.removeEventListener("pointerup",Dt),i.dispatchEvent(zg),r=s.NONE;break;case 1:const re=N[0],Ie=H[re];qi({pointerId:re,pageX:Ie.x,pageY:Ie.y});break}}function yi(O){let re;switch(O.button){case 0:re=i.mouseButtons.LEFT;break;case 1:re=i.mouseButtons.MIDDLE;break;case 2:re=i.mouseButtons.RIGHT;break;default:re=-1}switch(re){case jn.DOLLY:if(i.enableZoom===!1)return;at(O),r=s.DOLLY;break;case jn.ROTATE:if(O.ctrlKey||O.metaKey||O.shiftKey){if(i.enablePan===!1)return;jt(O),r=s.PAN}else{if(i.enableRotate===!1)return;ft(O),r=s.ROTATE}break;case jn.PAN:if(O.ctrlKey||O.metaKey||O.shiftKey){if(i.enableRotate===!1)return;ft(O),r=s.ROTATE}else{if(i.enablePan===!1)return;jt(O),r=s.PAN}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(Xc)}function Ln(O){switch(r){case s.ROTATE:if(i.enableRotate===!1)return;Ge(O);break;case s.DOLLY:if(i.enableZoom===!1)return;At(O);break;case s.PAN:if(i.enablePan===!1)return;X(O);break}}function Pi(O){i.enabled===!1||i.enableZoom===!1||r!==s.NONE||(O.preventDefault(),i.dispatchEvent(Xc),z(St(O)),i.dispatchEvent(zg))}function St(O){const re=O.deltaMode,Ie={clientX:O.clientX,clientY:O.clientY,deltaY:O.deltaY};switch(re){case 1:Ie.deltaY*=16;break;case 2:Ie.deltaY*=100;break}return O.ctrlKey&&!M&&(Ie.deltaY*=10),Ie}function Ct(O){O.key==="Control"&&(M=!0,document.addEventListener("keyup",Wt,{passive:!0,capture:!0}))}function Wt(O){O.key==="Control"&&(M=!1,document.removeEventListener("keyup",Wt,{passive:!0,capture:!0}))}function Vi(O){i.enabled===!1||i.enablePan===!1||te(O)}function qi(O){switch(on(O),N.length){case 1:switch(i.touches.ONE){case rs.ROTATE:if(i.enableRotate===!1)return;Z(O),r=s.TOUCH_ROTATE;break;case rs.PAN:if(i.enablePan===!1)return;se(O),r=s.TOUCH_PAN;break;default:r=s.NONE}break;case 2:switch(i.touches.TWO){case rs.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ce(O),r=s.TOUCH_DOLLY_PAN;break;case rs.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;le(O),r=s.TOUCH_DOLLY_ROTATE;break;default:r=s.NONE}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(Xc)}function an(O){switch(on(O),r){case s.TOUCH_ROTATE:if(i.enableRotate===!1)return;oe(O),i.update();break;case s.TOUCH_PAN:if(i.enablePan===!1)return;Ce(O),i.update();break;case s.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ne(O),i.update();break;case s.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ke(O),i.update();break;default:r=s.NONE}}function On(O){i.enabled!==!1&&O.preventDefault()}function Me(O){N.push(O.pointerId)}function Ss(O){delete H[O.pointerId];for(let re=0;re<N.length;re++)if(N[re]==O.pointerId){N.splice(re,1);return}}function on(O){let re=H[O.pointerId];re===void 0&&(re=new $e,H[O.pointerId]=re),re.set(O.pageX,O.pageY)}function Gi(O){const re=O.pointerId===N[0]?N[1]:N[0];return H[re]}i.domElement.addEventListener("contextmenu",On),i.domElement.addEventListener("pointerdown",wt),i.domElement.addEventListener("pointercancel",Dt),i.domElement.addEventListener("wheel",Pi,{passive:!1}),document.addEventListener("keydown",Ct,{passive:!0,capture:!0}),this.update()}}const qg=()=>{};class g9 extends e0{height;constructor(e=0){super(),this.height=e}}class ct extends nT{info={Point:0,MultiPoint:0,LineString:0,MultiLineString:0,Polygon:0,MultiPolygon:0,GeometryCollection:0};fileName="";shapes=[];shape3ds=[];next_positions_index=0;vertices=[];indices=[];constructor(e){super(e)}load(e,t=qg,i,s=qg){e.startsWith("http")===!1&&(e=`${location.origin}${e}`),e.endsWith(".zip")?TT(e).then(r=>{this.parse(r),t(this)}).catch(r=>s(r)):e.endsWith(".json")?fetch(e).then(r=>r.json()).then(r=>{this.parse(r),t(this)}).catch(r=>s(r)):s(new Error("unknow file type"))}parse(e){Array.isArray(e)?e.forEach(t=>this.parseGeoJson(t)):this.parseGeoJson(e)}parseGeoJson(e){this.fileName=e?.fileName||"";const t=e.features;for(let i=0,s=t.length;i<s;i++){const r=t[i],{type:a}=r.geometry;a==="Polygon"?this.parsePolygon(r):a==="MultiPolygon"?this.parseMultiPolygon(r):a==="LineString"?this.parseLineString(r.geometry):a==="MultiLineString"&&this.parseMultiLineString(r.geometry)}}parsePolygon(e){const t=e.geometry,s=e.properties?.height;if(s&&s>0){const a=new g9(s);r(a),this.shape3ds.push(a)}else{const a=new e0;r(a),this.shapes.push(a)}function r(a){for(let o=0,l=t.coordinates.length;o<l;o++){const u=t.coordinates[o];for(let c=0,h=u.length;c<h;c++){const[m,y]=u[c];c===0?a.moveTo(m,y):a.lineTo(m,y)}}}}parseMultiPolygon(e){const i=e.geometry.coordinates;for(let s=0,r=i.length;s<r;s++){const o={type:"Feature",geometry:{type:"Polygon",coordinates:[i[s][0]]},properties:null};this.parsePolygon(o)}}parseLineString(e){const{vertices:t,indices:i}=this,s=e.coordinates;for(let r=0,a=s.length;r<a;r++){const[o,l]=s[r];if(t.push(o,l,0),a===2)i.push(this.next_positions_index);else if(a>2){if(r<=1)i.push(this.next_positions_index);else if(r>1){const u=this.next_positions_index-1;i.push(u,this.next_positions_index)}}this.next_positions_index++}}parseMultiLineString(e){const t=e.coordinates;for(let i=0,s=t.length;i<s;i++){const r=t[i];this.parseLineString({type:"LineString",coordinates:r})}}}function Yc(n,e,t=hs.shp.scale){n.translate(e.x,e.y,e.z),n.scale(t.x,t.y,t.z),n.rotateX(-Math.PI/2)}var _9=0;function X2(n,e){var t=e.data;if(!(!Array.isArray(t)||t.length<2)){var i=t[0],s=t[1],r=t[2],a=n._callbacks[i];a&&(delete n._callbacks[i],a(s,r))}}function Y2(n){var e=this;e._worker=n,e._callbacks={},n.addEventListener("message",function(t){X2(e,t)})}Y2.prototype.postMessage=function(n){var e=this,t=_9++,i=[t,n];return new Promise(function(s,r){if(e._callbacks[t]=function(o,l){if(o)return r(new Error(o.message));s(l)},typeof e._worker.controller<"u"){var a=new MessageChannel;a.port1.onmessage=function(o){X2(e,o)},e._worker.controller.postMessage(i,[a.port2])}else e._worker.postMessage(i)})};var y9=Y2;const v9=Qn(y9);function b9(n){return new Worker(""+new URL("worker-m0qHJnF3.js",import.meta.url).href,{name:n?.name})}const T9=new Zd;class x9{camera;frustum;constructor(e){this.camera=e,this.frustum=new sT}update(){const{camera:e,frustum:t}=this;t.setFromProjectionMatrix(T9.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse))}intersectsBox(e){return this.update(),this.frustum.intersectsBox(e)}}const w9=`
uniform float radius;
uniform vec3 target;
uniform vec3 offset;
float noise(vec2 p) {
  vec2 ip = floor(p);
  vec2 u = fract(p);
  u = u * u * (3.0 - 2.0 * u);
  float res = mix(mix(rand(ip), rand(ip + vec2(1.0, 0.0)), u.x), mix(rand(ip + vec2(0.0, 1.0)), rand(ip + vec2(1.0, 1.0)), u.x), u.y);
  return res * res;
}
`,S9=`
float r = distance(transformed, target + offset) / radius; 
// float r = length( (modelMatrix * vec4( transformed, 1. ) ).xyz ) / radius;
r = 1. - smoothstep(.6, .75, r + .5 * (noise(transformed.xz * 0.01) - noise(transformed.xz * 0.0001)));
transformed.y *= min(1., r);
`,{shp:{visibleDistance:C9}}=hs;class E9{frustumCamera;scene;queryCache={};fetchCache={};isFetching;render;controls;constructor(e,t,i,s){this.frustumCamera=new x9(e),this.controls=s,this.scene=t,this.isFetching=!1,this.render=i}getObjectByNameWithCache(e){const{queryCache:t,scene:i}=this;if(t[e])return{object:t[e],isCache:!0};const s=i.getObjectByName(e);return s&&(t[e]=s),{object:s,isCache:!1}}intersectsBox(e){return this.frustumCamera.intersectsBox(e)}fetchShp(e,t,i){const s=new b9({name:"three-worker"}),r=new v9(s);return r.postMessage("ping").then(a=>{console.log("three.vue: ",a)}).catch(a=>{console.error(a)}),r.postMessage({type:"fetch-shp",configs:e,center:t,scale:i}).then(a=>{console.log("three.vue: ",a);const{geometries:o}=a,l=new rT({color:Ee.building}),{controls:u}=this,c={radius:{value:1.5},target:{value:u.target},offset:{value:new ye(0,0,-.55)}};return l.onBeforeCompile=m=>{const y="#include <common>",_="#include <displacementmap_vertex>";m.uniforms=Object.assign(m.uniforms,c);let b=m.vertexShader;b=b.replace(y,y+w9),b=b.replace(_,_+S9),m.vertexShader=b},o.map(m=>{const y=new Jd,_=new _l(m.attributes.position.array,3),b=new _l(m.attributes.normal.array,3),x=new _l(m.attributes.uv.array,2);y.setAttribute("position",_),y.setAttribute("normal",b),y.setAttribute("uv",x);const S=new qe(y,l);return S.name=m.name,S})}).catch(a=>{console.error(a)}).finally(()=>{s.terminate()})}getObjectByName(e){const t=this.getObjectByNameWithCache(e),{object:i}=t;if(i instanceof qe){const{controls:s}=this;if(s.getDistance()>C9)return i.dispatchEvent({type:"invisible",mesh:i}),t;i.geometry.boundingBox===null&&i.geometry.computeBoundingBox();const a=i.geometry.boundingBox;a&&(this.intersectsBox(a)?i.dispatchEvent({type:"visible",mesh:i}):i.dispatchEvent({type:"invisible",mesh:i}))}return t}}const A9=`<svg width="61" height="96" viewBox="0 0 61 96" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_1783_3292)">
  <ellipse cx="30.5" cy="79" rx="20.5" ry="7" fill="#53565A" fill-opacity="0.5"/>
</g>
<rect x="6" width="50" height="63" fill="#E35205"/>
<path d="M31 81L13.6795 61.5L48.3205 61.5L31 81Z" fill="#E35205"/>
<path d="M39.6854 21.2197V16.8787C39.6854 16.3866 39.2988 16 38.8067 16H32.9895C32.4974 16 32.1108 16.3866 32.1108 16.8787V21.2197H23.1477C20.8629 21.2197 19 23.0826 19 25.3673V41.8348C19 44.1195 20.8629 46 23.1477 46H39.5624C41.8471 46 43.71 44.1195 43.71 41.8348V25.3673C43.71 23.1178 41.9174 21.29 39.6854 21.2197ZM33.8682 17.7575H37.928V32.2039H33.8682V17.7575ZM37.5589 33.9613L35.9068 38.4429L34.2373 33.9613H37.5589ZM41.9525 41.8348C41.9525 43.1529 40.8805 44.2425 39.5624 44.2425H23.1477C21.8296 44.2425 20.7575 43.1529 20.7575 41.8348V25.3673C20.7575 24.0492 21.8296 22.9772 23.1477 22.9772H32.1108V33.0826C32.1108 33.1705 32.1283 33.2583 32.1635 33.3462C32.1635 33.3638 32.1635 33.3638 32.1635 33.3814L32.181 33.4165L35.0808 41.29C35.2038 41.6239 35.5378 41.8524 35.9068 41.8524C36.2583 41.8524 36.5923 41.6239 36.7153 41.29L39.6151 33.4165L39.6327 33.3814C39.6327 33.3638 39.6327 33.3638 39.6327 33.3462C39.6679 33.2583 39.6854 33.1705 39.6854 33.0826V22.9947C40.9508 23.0474 41.9525 24.0844 41.9525 25.3673V41.8348Z" fill="#FAFAFA"/>
<path d="M28.982 28.4956H25.2034C24.7114 28.4956 24.3247 28.109 24.3247 27.6169C24.3247 27.1248 24.7114 26.7382 25.2034 26.7382H28.982C29.4741 26.7382 29.8608 27.1248 29.8608 27.6169C29.8608 28.109 29.4741 28.4956 28.982 28.4956Z" fill="#FAFAFA"/>
<path d="M28.982 34.0141H25.2034C24.7114 34.0141 24.3247 33.6274 24.3247 33.1353C24.3247 32.6432 24.7114 32.2566 25.2034 32.2566H28.982C29.4741 32.2566 29.8608 32.6432 29.8608 33.1353C29.8608 33.6274 29.4741 34.0141 28.982 34.0141Z" fill="#FAFAFA"/>
<path d="M30.5638 39.5501H25.2034C24.7114 39.5501 24.3247 39.1634 24.3247 38.6713C24.3247 38.1792 24.7114 37.7926 25.2034 37.7926H30.5638C31.0558 37.7926 31.4425 38.1792 31.4425 38.6713C31.4425 39.1634 31.0383 39.5501 30.5638 39.5501Z" fill="#FAFAFA"/>
<defs>
  <filter id="filter0_f_1783_3292" x="0" y="62" width="61" height="34" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
    <feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_1783_3292"/>
  </filter>
</defs>
</svg>`,D9=`<svg width="61" height="96" viewBox="0 0 61 96" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_1783_3293)">
  <ellipse cx="30.5" cy="79" rx="20.5" ry="7" fill="#53565A" fill-opacity="0.5"/>
</g>
<rect x="6" width="50" height="63" fill="#E35205"/>
<path d="M31 81L13.6795 61.5L48.3205 61.5L31 81Z" fill="#E35205"/>
<path d="M31.6673 51C31.5861 51 31.5212 50.9838 31.44 50.9675C31.099 50.8701 30.8555 50.5454 30.8555 50.1882V38.725H18.8078C18.5155 38.725 18.2557 38.5626 18.1096 38.3191C17.9635 38.0593 17.9635 37.7508 18.1096 37.5072L28.6798 19.4032C28.8584 19.0785 29.248 18.9323 29.589 19.0298C29.9462 19.1272 30.1898 19.4519 30.1898 19.8091V31.2885H43.3416C43.6338 31.2885 43.9099 31.4509 44.056 31.7107C44.2021 31.9705 44.1859 32.2952 44.0235 32.5388L32.3493 50.6103C32.2031 50.8701 31.9433 51 31.6673 51ZM20.2366 37.1013H31.6673C32.122 37.1013 32.4792 37.4585 32.4792 37.9132V47.4441L41.8478 32.9285H29.3779C28.9233 32.9285 28.5661 32.5712 28.5661 32.1166V22.8129L20.2366 37.1013Z" fill="#FAFAFA"/>
<defs>
  <filter id="filter0_f_1783_3293" x="0" y="62" width="61" height="34" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
    <feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_1783_3293"/>
  </filter>
</defs>
</svg>`,k9=`<svg width="61" height="96" viewBox="0 0 61 96" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_1783_3294)">
  <ellipse cx="30.5" cy="79" rx="20.5" ry="7" fill="#53565A" fill-opacity="0.5"/>
</g>
<rect x="6" width="50" height="63" fill="#E35205"/>
<path d="M31 81L13.6795 61.5L48.3205 61.5L31 81Z" fill="#E35205"/>
<path d="M45.0288 41.8153H43.4081V40.1271H45.0288C45.7378 40.1271 46.3118 39.5531 46.3118 38.8441V35.0288C46.3118 33.5094 45.0794 32.277 43.5601 32.277H18.4399C16.9206 32.277 15.6882 33.5094 15.6882 35.0288V38.8441C15.6882 39.5531 16.2622 40.1271 16.9712 40.1271H18.575V41.8153H16.9712C15.3337 41.8153 14 40.4816 14 38.8441V35.0288C14 32.5809 15.9921 30.5889 18.4399 30.5889H43.5601C46.0079 30.5889 48 32.5809 48 35.0288V38.8441C48 40.4816 46.6663 41.8153 45.0288 41.8153Z" fill="#FAFAFA"/>
<path d="M34.4773 40.1271H27.522V41.8153H34.4773V40.1271Z" fill="#FAFAFA"/>
<path d="M43.7793 32.277H18.2202L21.3603 23.0089C21.8836 21.7597 23.0484 21 24.3314 21H37.6681C38.9511 21 40.116 21.7597 40.6224 22.9414L43.7793 32.277ZM20.5668 30.5889H41.4158L39.0355 23.5491C38.8161 23.0427 38.2758 22.6882 37.6681 22.6882H24.3314C23.7237 22.6882 23.1666 23.0427 22.9303 23.6167L20.5668 30.5889Z" fill="#FAFAFA"/>
<path d="M23.0488 46.2887C20.1113 46.2887 17.731 43.9084 17.731 40.971C17.731 38.0335 20.1113 35.6532 23.0488 35.6532C25.9862 35.6532 28.3665 38.0335 28.3665 40.971C28.3665 43.9084 25.9862 46.2887 23.0488 46.2887ZM23.0488 37.3414C21.0398 37.3414 19.4191 38.962 19.4191 40.971C19.4191 42.9799 21.0398 44.6006 23.0488 44.6006C25.0577 44.6006 26.6784 42.9799 26.6784 40.971C26.6784 38.962 25.0408 37.3414 23.0488 37.3414Z" fill="#FAFAFA"/>
<path d="M38.9345 46.2887C35.9971 46.2887 33.6167 43.9084 33.6167 40.971C33.6167 38.0335 35.9971 35.6532 38.9345 35.6532C41.8719 35.6532 44.2523 38.0335 44.2523 40.971C44.2523 43.9084 41.8719 46.2887 38.9345 46.2887ZM38.9345 37.3414C36.9256 37.3414 35.3049 38.962 35.3049 40.971C35.3049 42.9799 36.9256 44.6006 38.9345 44.6006C40.9434 44.6006 42.5641 42.9799 42.5641 40.971C42.5641 38.962 40.9434 37.3414 38.9345 37.3414Z" fill="#FAFAFA"/>
<path d="M31.8439 22.2324H30.1558V31.4499H31.8439V22.2324Z" fill="#FAFAFA"/>
<defs>
  <filter id="filter0_f_1783_3294" x="0" y="62" width="61" height="34" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
    <feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_1783_3294"/>
  </filter>
</defs>
</svg>`,Ma=`<svg width="61" height="96" viewBox="0 0 61 96" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_1785_3760)">
  <ellipse cx="30.5" cy="79" rx="20.5" ry="7" fill="#53565A" fill-opacity="0.5"/>
</g>
<rect x="6" width="50" height="63" fill="currentColor"/>
<path d="M31 81L13.6795 61.5L48.3205 61.5L31 81Z" fill="currentColor"/>
<defs>
  <filter id="filter0_f_1785_3760" x="0" y="62" width="61" height="34" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
    <feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_1785_3760"/>
  </filter>
</defs>
</svg>`,I9=`<svg width="54" height="78" viewBox="0 0 54 78" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_1791_2967)">
  <ellipse cx="27" cy="62" rx="17" ry="6" fill="#53565A" fill-opacity="0.5"/>
</g>
<circle cx="27" cy="20" r="20" fill="#E35205"/>
<path d="M27.0002 56.5L44.3208 29.5H9.67974L27.0002 56.5Z" fill="#E35205"/>
<circle cx="27" cy="20" r="16" fill="white"/>
<path d="M33.0781 12.4343V9.28263C33.0781 8.92536 32.7974 8.64465 32.4402 8.64465H28.2167C27.8595 8.64465 27.5788 8.92536 27.5788 9.28263V12.4343H21.0713C19.4126 12.4343 18.0601 13.7868 18.0601 15.4455V27.4013C18.0601 29.06 19.4126 30.4253 21.0713 30.4253H32.9888C34.6476 30.4253 36.0001 29.06 36.0001 27.4013V15.4455C36.0001 13.8123 34.6986 12.4853 33.0781 12.4343ZM28.8547 9.92061H31.8022V20.409H28.8547V9.92061ZM31.5342 21.685L30.3348 24.9387L29.1227 21.685H31.5342ZM34.7241 27.4013C34.7241 28.3582 33.9458 29.1493 32.9888 29.1493H21.0713C20.1144 29.1493 19.336 28.3582 19.336 27.4013V15.4455C19.336 14.4886 20.1144 13.7102 21.0713 13.7102H27.5788V21.047C27.5788 21.1108 27.5915 21.1746 27.617 21.2384C27.617 21.2511 27.617 21.2511 27.617 21.2639L27.6298 21.2894L29.7351 27.0057C29.8244 27.2482 30.0668 27.414 30.3348 27.414C30.59 27.414 30.8324 27.2482 30.9218 27.0057L33.0271 21.2894L33.0399 21.2639C33.0399 21.2511 33.0399 21.2511 33.0399 21.2384C33.0654 21.1746 33.0781 21.1108 33.0781 21.047V13.723C33.9968 13.7612 34.7241 14.5141 34.7241 15.4455V27.4013Z" fill="#E35205"/>
<path d="M25.3071 17.7168H22.5638C22.2065 17.7168 21.9258 17.436 21.9258 17.0788C21.9258 16.7215 22.2065 16.4408 22.5638 16.4408H25.3071C25.6644 16.4408 25.9451 16.7215 25.9451 17.0788C25.9451 17.436 25.6644 17.7168 25.3071 17.7168Z" fill="#E35205"/>
<path d="M25.3071 21.7232H22.5638C22.2065 21.7232 21.9258 21.4425 21.9258 21.0852C21.9258 20.728 22.2065 20.4473 22.5638 20.4473H25.3071C25.6644 20.4473 25.9451 20.728 25.9451 21.0852C25.9451 21.4425 25.6644 21.7232 25.3071 21.7232Z" fill="#E35205"/>
<path d="M26.4555 25.7426H22.5638C22.2065 25.7426 21.9258 25.4619 21.9258 25.1047C21.9258 24.7474 22.2065 24.4667 22.5638 24.4667H26.4555C26.8127 24.4667 27.0934 24.7474 27.0934 25.1047C27.0934 25.4619 26.8 25.7426 26.4555 25.7426Z" fill="#E35205"/>
<defs>
  <filter id="filter0_f_1791_2967" x="0" y="46" width="54" height="32" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
    <feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_1791_2967"/>
  </filter>
</defs>
</svg>`,P9=`<svg width="54" height="78" viewBox="0 0 54 78" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_1791_2972)">
  <ellipse cx="27" cy="62" rx="17" ry="6" fill="#53565A" fill-opacity="0.5"/>
</g>
<circle cx="27" cy="20" r="20" fill="#E35205"/>
<path d="M27.0002 56.5L44.3208 29.5H9.67974L27.0002 56.5Z" fill="#E35205"/>
<circle cx="27" cy="20" r="16" fill="white"/>
<path d="M27.4506 32C27.3885 32 27.3388 31.9878 27.2767 31.9756C27.016 31.9026 26.8298 31.659 26.8298 31.3911V22.7937H17.6177C17.3942 22.7937 17.1955 22.672 17.0838 22.4893C16.9721 22.2945 16.9721 22.0631 17.0838 21.8804L25.1662 8.30241C25.3027 8.05885 25.6007 7.94926 25.8614 8.02233C26.1345 8.09539 26.3208 8.33894 26.3208 8.60685V17.2164H36.3771C36.6006 17.2164 36.8117 17.3382 36.9234 17.533C37.0351 17.7279 37.0227 17.9714 36.8986 18.1541L27.972 31.7077C27.8603 31.9026 27.6616 32 27.4506 32ZM18.7102 21.576H27.4506C27.7982 21.576 28.0713 21.8439 28.0713 22.1849V29.3331L35.2349 18.4463H25.7C25.3524 18.4463 25.0792 18.1784 25.0792 17.8375V10.8597L18.7102 21.576Z" fill="#E35205"/>
<defs>
  <filter id="filter0_f_1791_2972" x="0" y="46" width="54" height="32" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
    <feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_1791_2972"/>
  </filter>
</defs>
</svg>`,L9=`<svg width="54" height="78" viewBox="0 0 54 78" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_1791_2973)">
  <ellipse cx="27" cy="62" rx="17" ry="6" fill="#53565A" fill-opacity="0.5"/>
</g>
<circle cx="27" cy="20" r="20" fill="#E35205"/>
<path d="M27.0002 56.5L44.3208 29.5H9.67974L27.0002 56.5Z" fill="#E35205"/>
<circle cx="27" cy="20" r="16" fill="white"/>
<path d="M36.915 25.2239H35.7777V24.0392H36.915C37.4126 24.0392 37.8154 23.6364 37.8154 23.1388V20.4614C37.8154 19.3951 36.9506 18.5303 35.8843 18.5303H18.2559C17.1897 18.5303 16.3248 19.3951 16.3248 20.4614V23.1388C16.3248 23.6364 16.7277 24.0392 17.2252 24.0392H18.3507V25.2239H17.2252C16.0761 25.2239 15.1401 24.288 15.1401 23.1388V20.4614C15.1401 18.7435 16.5381 17.3456 18.2559 17.3456H35.8843C37.6022 17.3456 39.0001 18.7435 39.0001 20.4614V23.1388C39.0001 24.288 38.0642 25.2239 36.915 25.2239Z" fill="#E35205"/>
<path d="M29.5104 24.0392H24.6294V25.2239H29.5104V24.0392Z" fill="#E35205"/>
<path d="M36.0385 18.5304H18.1021L20.3056 12.0264C20.6729 11.1497 21.4903 10.6166 22.3907 10.6166H31.7499C32.6503 10.6166 33.4677 11.1497 33.8231 11.979L36.0385 18.5304ZM19.7488 17.3457H34.3799L32.7095 12.4055C32.5555 12.0501 32.1764 11.8013 31.7499 11.8013H22.3907C21.9642 11.8013 21.5732 12.0501 21.4074 12.4529L19.7488 17.3457Z" fill="#E35205"/>
<path d="M21.4902 28.3634C19.4288 28.3634 17.7583 26.693 17.7583 24.6316C17.7583 22.5702 19.4288 20.8998 21.4902 20.8998C23.5515 20.8998 25.222 22.5702 25.222 24.6316C25.222 26.693 23.5515 28.3634 21.4902 28.3634ZM21.4902 22.0845C20.0804 22.0845 18.943 23.2218 18.943 24.6316C18.943 26.0414 20.0804 27.1787 21.4902 27.1787C22.9 27.1787 24.0373 26.0414 24.0373 24.6316C24.0373 23.2218 22.8881 22.0845 21.4902 22.0845Z" fill="#E35205"/>
<path d="M32.6381 28.3634C30.5767 28.3634 28.9062 26.693 28.9062 24.6316C28.9062 22.5702 30.5767 20.8998 32.6381 20.8998C34.6995 20.8998 36.3699 22.5702 36.3699 24.6316C36.3699 26.693 34.6995 28.3634 32.6381 28.3634ZM32.6381 22.0845C31.2283 22.0845 30.091 23.2218 30.091 24.6316C30.091 26.0414 31.2283 27.1787 32.6381 27.1787C34.0479 27.1787 35.1852 26.0414 35.1852 24.6316C35.1852 23.2218 34.0479 22.0845 32.6381 22.0845Z" fill="#E35205"/>
<path d="M27.6622 11.4814H26.4775V17.9499H27.6622V11.4814Z" fill="#E35205"/>
<defs>
  <filter id="filter0_f_1791_2973" x="0" y="46" width="54" height="32" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
    <feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_1791_2973"/>
  </filter>
</defs>
</svg>`,Bs=`<svg width="54" height="78" viewBox="0 0 54 78" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_1790_2960)">
  <ellipse cx="27" cy="62" rx="17" ry="6" fill="#53565A" fill-opacity="0.5"/>
</g>
<circle cx="27" cy="20" r="20" fill="currentColor"/>
<path d="M27.0002 56.5L44.3208 29.5H9.67974L27.0002 56.5Z" fill="currentColor"/>
<circle cx="27" cy="20" r="16" fill="white"/>
<defs>
  <filter id="filter0_f_1790_2960" x="0" y="46" width="54" height="32" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
    <feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_1790_2960"/>
  </filter>
</defs>
</svg>`,O9=(n=0)=>`<svg width="46" height="66" viewBox="0 0 46 66" xmlns="http://www.w3.org/2000/svg"><path d="M24.2772 5.21343L23 3.13947L21.7228 5.21343L7.86637 27.7134L6.45821 30H9.14359H36.8564H39.5418L38.1336 27.7134L24.2772 5.21343Z" fill="#53565A" stroke="#FAFAFA" stroke-width="3"/><circle cx="23" cy="43" r="21.5" fill="#53565A" stroke="#FAFAFA" stroke-width="3"/><text x="23" y="45" fill="white" font-size="25" font-weight="700" text-anchor="middle" dominant-baseline="middle" transform-origin="23 43">${n}</text></svg>`;class R9{scene;array=[];majors=[];minors=[];constructor(e){this.scene=e}invisible(){this.array.forEach(e=>e.visible=!1)}visible(){this.array.forEach(e=>e.visible=!0)}createMajorLabel(e){const{position:t=new ye,center:i=new $e,html:s="",className:r}=e||{},{scene:a,array:o,majors:l}=this,u=document.createElement("div");u.style.pointerEvents="auto",r&&(u.className=r),u.innerHTML=s;const c=new td(u);return c.position.set(t.x,t.y,t.z),c.center.set(i.x,i.y),a.add(c),o.push(c),l.push(c),{div:u,label:c}}createMinorLabel(e){const{position:t=new ye,center:i=new $e,html:s="",className:r}=e||{},{scene:a,array:o,minors:l}=this,u=document.createElement("div");u.style.pointerEvents="auto",r&&(u.className=r),u.innerHTML=s;const c=new td(u);return c.position.set(t.x,t.y,t.z),c.center.set(i.x,i.y),a.add(c),o.push(c),l.push(c),{div:u,label:c}}createSign(e,t){const{scene:i,array:s}=this,r=document.createElement("div");r.style.pointerEvents="auto",r.className="label-tag",r.innerHTML=t;const{x:a,y:o,z:l}=e,u=new Kx(r);return u.position.set(a,o,l),i.add(u),s.push(u),{div:r,label:u}}changeMajorAll(e){this.majors.forEach(t=>{t.element.classList.remove("highlight"),t.element.innerHTML=e})}changeMinorAll(e){this.minors.forEach(t=>{t.element.classList.remove("highlight"),t.element.innerHTML=e})}changeMajorByType(e,t){this.majors.forEach(i=>{i.element.classList.remove("highlight");const{energy:s=!1,management:r=!1,transportation:a=!1}=i.userData;(e==="energy"&&s||e==="management"&&r||e==="transportation"&&a)&&(i.element.classList.add("highlight"),i.element.innerHTML=t)})}changeMinorByType(e,t){this.minors.forEach(i=>{i.element.classList.remove("highlight");const{energy:s=!1,management:r=!1,transportation:a=!1}=i.userData;(e==="energy"&&s||e==="management"&&r||e==="transportation"&&a)&&(i.element.classList.add("highlight"),i.element.innerHTML=t)})}dispose(){this.array=[],this.majors=[],this.minors=[]}}const K2=Math.min(window.innerWidth,window.innerHeight),Z2=g0?4:8,Ba=Math.round(K2/Z2),Na=Math.round(K2/Z2);class M9 extends wo{controls;domElement;renderer;scene;camera;tracker=new lh;line;intersectPlane;onPointerDown;constructor(e){super(),this.controls=e;const t=document.createElement("div");this.domElement=t,this.initDomElement();const i=new So({antialias:!0,alpha:!0});this.renderer=i,i.setPixelRatio(window.devicePixelRatio),i.setSize(Ba,Na),t.appendChild(i.domElement);const s=new rr;this.scene=s,this.initPlane(),this.initIntersectPlane();const r=Ba/Na,l=2*Math.atan(200/(2*220))*(180/Math.PI),u=new ar(l,r);this.camera=u,u.position.set(0,200,0),u.lookAt(0,0,0),this.render(),this.initEvents()}initDomElement(){const{domElement:e}=this;e.id="mini-map",e.style.zIndex="900",e.style.position="absolute",e.style.bottom="32px",e.style.right="50px",e.style.width=`${Ba}px`,e.style.height=`${Na}px`;const t="./svg/map.svg";e.style.background=`url(${t})`,e.style.backgroundSize="100% 100%"}initEvents(){const{renderer:e,camera:t}=this,i=new xo,s=new $e,r=this;function a(h){s.x=h.offsetX/Ba*2-1,s.y=-(h.offsetY/Na)*2+1}function o(){if(i.setFromCamera(s,t),r.intersectPlane){const h=i.intersectObject(r.intersectPlane);if(h.length>0){const y=h[0].point;r.line&&(r.line.position.x=y.x,r.line.position.z=y.z),r.render(),r.dispatchEvent({type:"change",point:y})}}}function l(h){a(h),o(),e.domElement.addEventListener("pointermove",u),e.domElement.addEventListener("pointerup",c),window.addEventListener("pointerup",c)}this.onPointerDown=l;function u(h){a(h),o()}function c(h){e.domElement.removeEventListener("pointermove",u),e.domElement.removeEventListener("pointerup",c),window.removeEventListener("pointerup",c)}e.domElement.addEventListener("pointerdown",l)}initIntersectPlane(){const{scene:e}=this,i=hs.shp.boundingBox.getSize(new ye),s=new aT(i.x,i.z);s.rotateX(-Math.PI/2);const r=new et({transparent:!0,opacity:0}),a=new qe(s,r);this.intersectPlane=a,e.add(a)}initPlane(){const{scene:e,controls:t}=this,i=t.object.aspect,s=10,r=s*i,a=s,o=r/2,l=a/2,u=[-o,0,-l,o,0,-l,o,0,l,-o,0,l,-o,0,-l],c=new wT;c.setPositions(u);const h=new ST({color:Ee.primary,linewidth:2,worldUnits:!0,resolution:new $e(Ba,Na),alphaToCoverage:!0}),m=new xT(c,h);this.line=m,e.add(m)}update(){const{controls:e,line:t}=this;t!==void 0&&(t.position.x=e.target.x,t.position.y=e.object.position.y,t.position.z=e.target.z,this.render())}render(){const{renderer:e,scene:t,camera:i}=this;e.render(t,i)}dispose(){const{renderer:e,tracker:t,scene:i}=this;this.onPointerDown&&e.domElement.removeEventListener("pointerdown",this.onPointerDown),t.track(i),t.dispose(),e.dispose(),e.forceContextLoss()}}function B9(){return new Yb.ShaderMaterial({uniforms:{maxSurfaceId:{value:1}},vertexShader:`void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,fragmentShader:`void main() {
  gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
}`,vertexColors:!0})}class N9 extends OT{constructor(e,t,i){super(),this.renderScene=t,this.renderCamera=i,this.resolution=new $e(e.x,e.y),this.fsQuad=new RT(null),this.fsQuad.material=this.createOutlinePostProcessMaterial();const s=new t0(this.resolution.x,this.resolution.y);s.texture.format=oT,s.texture.type=lT,s.texture.minFilter=wp,s.texture.magFilter=wp,s.texture.generateMipmaps=!1,s.stencilBuffer=!1,this.surfaceBuffer=s,this.normalOverrideMaterial=new uT,this.surfaceIdOverrideMaterial=B9()}dispose(){this.surfaceBuffer.dispose(),this.fsQuad.dispose()}updateMaxSurfaceId(e){this.surfaceIdOverrideMaterial.uniforms.maxSurfaceId.value=e}setSize(e,t){this.surfaceBuffer.setSize(e,t),this.resolution.set(e,t),this.fsQuad.material.uniforms.screenSize.value.set(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}render(e,t,i){const s=t.depthBuffer;t.depthBuffer=!1,e.setRenderTarget(this.surfaceBuffer);const r=this.renderScene.overrideMaterial;this.renderScene.overrideMaterial=this.surfaceIdOverrideMaterial,e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=r,this.fsQuad.material.uniforms.depthBuffer.value=i.depthTexture,this.fsQuad.material.uniforms.surfaceBuffer.value=this.surfaceBuffer.texture,this.fsQuad.material.uniforms.sceneColorBuffer.value=i.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),t.depthBuffer=s}get vertexShader(){return`varying vec2 vUv;
			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
			}`}get fragmentShader(){return`#include <packing>
			// The above include imports "perspectiveDepthToViewZ"
			// and other GLSL functions from ThreeJS we need for reading depth.
			uniform sampler2D sceneColorBuffer;
			uniform sampler2D depthBuffer;
			uniform sampler2D surfaceBuffer;
			uniform float cameraNear;
			uniform float cameraFar;
			uniform vec4 screenSize;
			uniform vec3 outlineColor;
			uniform vec2 multiplierParameters;

			varying vec2 vUv;

			// Helper functions for reading from depth buffer.
			float readDepth (sampler2D depthSampler, vec2 coord) {
				float fragCoordZ = texture2D(depthSampler, coord).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );
			}
			float getLinearDepth(vec3 pos) {
				return -(viewMatrix * vec4(pos, 1.0)).z;
			}

			float getLinearScreenDepth(sampler2D map) {
					vec2 uv = gl_FragCoord.xy * screenSize.zw;
					return readDepth(map,uv);
			}
			// Helper functions for reading normals and depth of neighboring pixels.
			float getPixelDepth(int x, int y) {
				// screenSize.zw is pixel size 
				// vUv is current position
				return readDepth(depthBuffer, vUv + screenSize.zw * vec2(x, y));
			}
			// "surface value" is either the normal or the "surfaceID"
			vec3 getSurfaceValue(int x, int y) {
				vec3 val = texture2D(surfaceBuffer, vUv + screenSize.zw * vec2(x, y)).rgb;
				return val;
			}

			float saturateValue(float num) {
				return clamp(num, 0.0, 1.0);
			}

			float getSufaceIdDiff(vec3 surfaceValue) {
				float surfaceIdDiff = 0.0;
				surfaceIdDiff += distance(surfaceValue, getSurfaceValue(1, 0));
				surfaceIdDiff += distance(surfaceValue, getSurfaceValue(0, 1));
				surfaceIdDiff += distance(surfaceValue, getSurfaceValue(0, 1));
				surfaceIdDiff += distance(surfaceValue, getSurfaceValue(0, -1));

				surfaceIdDiff += distance(surfaceValue, getSurfaceValue(1, 1));
				surfaceIdDiff += distance(surfaceValue, getSurfaceValue(1, -1));
				surfaceIdDiff += distance(surfaceValue, getSurfaceValue(-1, 1));
				surfaceIdDiff += distance(surfaceValue, getSurfaceValue(-1, -1));
				return surfaceIdDiff;
			}

			void main() {
				vec4 sceneColor = texture2D(sceneColorBuffer, vUv);
				float depth = getPixelDepth(0, 0);
				vec3 surfaceValue = getSurfaceValue(0, 0);

				// Get the difference between depth of neighboring pixels and current.
				float depthDiff = 0.0;
				depthDiff += abs(depth - getPixelDepth(1, 0));
				depthDiff += abs(depth - getPixelDepth(-1, 0));
				depthDiff += abs(depth - getPixelDepth(0, 1));
				depthDiff += abs(depth - getPixelDepth(0, -1));

				// Get the difference between surface values of neighboring pixels
				// and current
				float surfaceValueDiff = getSufaceIdDiff(surfaceValue);
				
				// Apply multiplier & bias to each 
				float depthBias = multiplierParameters.x;
				float depthMultiplier = multiplierParameters.y;

				depthDiff = depthDiff * depthMultiplier;
				depthDiff = saturateValue(depthDiff);
				depthDiff = pow(depthDiff, depthBias);

				if (surfaceValueDiff != 0.0) surfaceValueDiff = 1.0;

				float outline = saturateValue(surfaceValueDiff + depthDiff);
			
				// Combine outline with scene color.
				vec4 outlineColor = vec4(outlineColor, 1.0);
				gl_FragColor = vec4(mix(sceneColor, outlineColor, outline));
			}
			`}createOutlinePostProcessMaterial(){return new cT({uniforms:{sceneColorBuffer:{},depthBuffer:{},surfaceBuffer:{},outlineColor:{value:new Xe(Ee.primary)},multiplierParameters:{value:new $e(.9,20)},cameraNear:{value:this.renderCamera.near},cameraFar:{value:this.renderCamera.far},screenSize:{value:new dT(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:this.vertexShader,fragmentShader:this.fragmentShader})}}class F9 extends ET{outlineScene;lights;disabled;enabled;constructor(e,t,i,s){const r=hs.width*hs.dpr,a=hs.height*hs.dpr,o={stencilBuffer:!1},l=new t0(r,a,o);super(e,l),this.outlineScene=s;const u=16777215;this.lights=[new eh(u,1),new th(u,u,1),new ih(u,1)];const c=new CT,h=new Sp(t,i),m=new Sp(s,i);m.clear=!1;const y=new AT(s,i);y.inverse=!0;const _=new DT,b=document.createElement("canvas");b.width=1,b.height=1;const x=b.getContext("2d");x.fillStyle="black",x.fillRect(0,0,1,1);const S=new hT(b);S.colorSpace=fT;const w=new PT(S);w.opacity=.5;const A=new $e(r,a),k=new N9(A,s,i),C=new IT(LT),R=new kT(r,a);this.disabled=()=>{this.outlineScene.clear(),this.passes=[]},this.enabled=()=>{this.outlineScene.add(...this.lights),this.passes=[],this.addPass(c),this.addPass(h),this.addPass(y),this.addPass(w),this.addPass(_),this.addPass(m),this.addPass(k),this.addPass(C),this.addPass(R)}}}const Gg=.1,Wg=3500,Xg="keyarea-5",U9=Se({__name:"Three",emits:["click","test1","test2"],setup(n,{expose:e,emit:t}){const i=t;e({layer:s});function s(X){X==="energy"?(J.changeMajorAll(Ma),J.changeMajorByType("energy",D9),J.changeMinorAll(Bs),J.changeMinorByType("energy",P9)):X==="transportation"?(J.changeMajorAll(Ma),J.changeMajorByType("transportation",k9),J.changeMinorAll(Bs),J.changeMinorByType("transportation",L9)):X==="management"?(J.changeMajorAll(Ma),J.changeMajorByType("management",A9),J.changeMinorAll(Bs),J.changeMinorByType("management",I9)):(J.changeMajorAll(Ma),J.changeMinorAll(Bs))}const r=new sh,a=new nh;a.setDecoderPath("/libs/draco/"),r.setDRACOLoader(a);const{axes:o,shp:l,shp:{enableLayer:u,layer:c,visibleDistance:h}}=hs,m=new y0;function y(){m.render()}const _=m.renderer,b=m.labelRenderer,x=m.requestIdleCallbacks,S=m.tracker,w=S.track.bind(S),A=window.innerWidth,k=window.innerHeight,C=new ar(50,A/k,Gg,Wg),R=new Qd(-A/2,A/2,k/2,-k/2,Gg,Wg),N=new ye(0,20,20),H=new ye(0,0,0);C.position.copy(N),R.position.copy(N),C.lookAt(H),R.lookAt(H);const M=new m9(C,_.domElement);M.addEventListener("change",y),M.mouseButtons.LEFT=jn.PAN,M.touches.ONE=rs.PAN,M.enableRotate=!1,M.screenSpacePanning=!1,M.minDistance=1,M.maxDistance=20,M.minPolarAngle=so.degToRad(30),M.maxPolarAngle=so.degToRad(60),M.enableZoomPhi=!0,M.target.set(0,0,0);const ie=new v_({controls:M,perspectiveCamera:C,orthographicCamera:R}),ee=new rr,K=ie.scene,q=new F9(_,K,C,ee);ie.effectComposer=q,ie.controls=M,m.addStage(ie);const J=new R9(K),be=new M9(M);{const X=new ye;be.addEventListener("change",z=>{const{x:te,z:Z}=z.point,se=X.copy(C.position).sub(M.target);M.target.x=te,M.target.z=Z,C.position.x=M.target.x+se.x,C.position.z=M.target.z+se.z,y()})}M.addEventListener("change",()=>{const X=M.getDistance();X>h?u===!0&&C.layers.disable(c):X<=h&&u===!0&&C.layers.enable(c),y(),be.update()});const ue={[Xg]:["/shp/building/centerline-a-xicheng.zip","/shp/building/centerline-b-dongcheng.zip","/shp/building/centerline-c-zhaoyang.zip","/shp/building/centerline-d-haidian.zip","/shp/building/centerline-e-changping.zip","/shp/building/centerline-f-fengtai.zip","/shp/building/centerline-g-daxing.zip"]},he=new E9(C,K,y,M);x.add(()=>{const{object:X,isCache:z}=he.getObjectByName(Xg);if(z!==!0&&X){let te=function(ce){const le=ce.mesh;le.children.length>0&&(le.children.forEach(oe=>{se.track(oe)}),se.dispose(),console.log("dispose",le)),Z=!1},Z=!1;const se=new lh;async function me(ce){if((M.getDistance()<=h&&u===!0)===!1)return;const Ce=ce.mesh,pt=ue[Ce.name];if(pt){if(Z===!0)return;Z=!0;const{center:Ne,offset:Ke,scale:wt}=Ce.geometry.userData,ge=await he.fetchShp(pt,Ne.clone().add(Ke),wt).catch(Dt=>console.error(Dt));ge&&ge.length>0&&(ge.forEach(Dt=>{u===!0&&(Dt.layers.disable(0),Dt.layers.enable(c))}),Ce.add(...ge),y())}}X.addEventListener("visible",me),X.addEventListener("invisible",te)}});function pe(X,z=new Xe){const{shapes:te,vertices:Z,indices:se,fileName:me}=X;if(te.length>0){const ce=rh(te.map(Ce=>new Zc(Ce)));Yc(ce,l.center,l.scale);const le=new Jg({color:z}),oe=new qe(ce,le);return oe.name=me,oe}if(Z.length>0){const ce=new Jd,le=new _l(Z,3);ce.setIndex(se),ce.setAttribute("position",le),Yc(ce,l.center,l.scale);const oe=new pT({color:z}),Ce=new mT(ce,oe);return Ce.name=me,Ce}throw new Error("No shapes or vertices")}function vt(X){const{shapes:z,fileName:te}=X;if(z.length>0){let Z=function(ce,le){const oe=`${te}-${le}`;ce.computeBoundingBox();const Ce=ce.boundingBox.getCenter(new ye).negate();ce.userData.center=Ce.clone(),ce.userData.scale=l.scale.clone(),Yc(ce,Ce,l.scale);const pt=new et({color:Ee.primary,transparent:!0,opacity:0}),Ne=new qe(ce,pt);Ne.name=oe;const Ke=new ye().copy(Ce).sub(l.center).multiply(l.scale).applyAxisAngle(o.x,-Math.PI/2).negate();Ne.geometry.translate(Ke.x,Ke.y,Ke.z),ce.userData.offset=Ke.clone().applyAxisAngle(o.x,Math.PI/2).divide(l.scale),se.add(Ne)};const se=new gT;se.name=te;const me=z[9];return Z(new Zc(me),5),se}throw new Error("No shapes")}function Ae(X){return K.add(X),y(),X}const ft=[new ct().loadAsync("/shp/basic/beijing.zip").then(X=>pe(X,new Xe(Ee.ground))).then(X=>(X.name="北京市",X.position.y=-.01,K.add(X),y(),X)),new ct().loadAsync("/shp/basic/beijing-green.zip").then(X=>pe(X,new Xe(Ee.grass))).then(X=>(X.position.y=-.002,K.add(X),y(),X)),new ct().loadAsync("/shp/basic/beijing-water.zip").then(X=>pe(X,new Xe(Ee.water))).then(X=>(X.position.y=-.001,K.add(X),y(),X)),new ct().loadAsync("/shp/building/keyarea.zip").then(X=>(X.fileName="keyarea",vt(X))).then(Ae),new ct().loadAsync("/shp/basic/beijing-subway.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/basic/beijing-railway.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/changping.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/zhaoyang.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/daxing.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/dongcheng.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/fangshan.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/fengtai.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/haidian.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/huairou.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/mentougou.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/miyun.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/pinggu.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/shijingshan.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/shunyi.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/tongzhou.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/xicheng.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae),new ct().loadAsync("/shp/road/yanqing.zip").then(X=>pe(X,new Xe(Ee.road))).then(Ae)];async function at(){const X=new Xe(Ee.white);K.add(new eh(X,1)),K.add(new th(X,X,1)),K.add(new ih(X,1)),Promise.all(ft).finally(()=>{jt()});{const{div:me,label:ce}=J.createMinorLabel({position:new ye(4,0,5),center:new $e(.5,.75),html:Bs,className:"label-tag"});ce.name="test-tag",me.addEventListener("click",()=>{i("test1",{type:"label-icon",name:"label-tag"})})}{const{div:me,label:ce}=J.createMinorLabel({position:new ye(5,0,5),center:new $e(.5,.75),html:Bs,className:"label-tag"});ce.name="test-tag",me.addEventListener("click",()=>{i("test2",{type:"label-icon",name:"label-tag"})})}const z=[],te=[],Z=[],se=[];r.loadAsync("/glb/minor.glb").then(me=>{se.push(...me.scene.children),me.scene.children.forEach(ce=>{const le=ce;if(!le.userData.name)return;le.position.y=.05,le.position.x*=l.scale.x,le.position.z*=l.scale.z,le.geometry.scale(l.scale.x,l.scale.y,l.scale.z),le.material=new et({color:Ee.primary}),le.updateWorldMatrix(!0,!0),le.visible=!1,le.geometry.computeBoundingBox();const oe=le.geometry.boundingBox;oe.applyMatrix4(le.matrixWorld);const Ce=oe.getCenter(new ye);pt(le,Ce);function pt(Ne,Ke){const{div:wt,label:ge}=J.createMinorLabel({position:Ke.clone(),center:new $e(.5,.75),html:Bs,className:"label-tag"}),{energy:Dt=!1,management:yi=!1,transportation:Ln=!1}=Ne.userData;ge.userData={energy:Dt,management:yi,transportation:Ln},Z.push(wt);function Pi(St){St.stopPropagation();const{x:Ct,y:Wt,z:Vi}=Ke,qi=M.target,an={x:qi.x,y:qi.y,z:qi.z},On={x:Ct,y:Wt,z:Vi},Me=1e3,Ss=M.target.clone().sub(M.object.position);new yl.Tween(an).to(On,Me).onUpdate(O=>{M.target.set(O.x,O.y,O.z),M.object.position.copy(M.target).sub(Ss)}).start(),y(),Z.forEach(O=>O.classList.remove("clicked")),z.forEach(O=>O.classList.remove("clicked")),wt.classList.add("clicked");const Gi={major:null,minor:Ne.userData.name};i("click",Gi)}wt.addEventListener("pointerenter",()=>{wt.addEventListener("click",Pi),Z.forEach(St=>St.classList.remove("hovered")),z.forEach(St=>St.classList.remove("hovered")),wt.classList.add("hovered"),se.forEach(St=>St.visible=!1),te.forEach(St=>St.visible=!1),Ne.visible=!0,y()})}}),K.add(...me.scene.children),y()}),r.loadAsync("/glb/major.glb").then(me=>{te.push(...me.scene.children),me.scene.children.forEach((ce,le)=>{const oe=ce;oe.position.y=.05,oe.position.x*=l.scale.x,oe.position.z*=l.scale.z,oe.geometry.scale(l.scale.x,l.scale.y,l.scale.z),oe.material=new et({color:Ee.primary}),oe.updateWorldMatrix(!0,!0),oe.visible=!1,oe.geometry.computeBoundingBox();const Ce=oe.geometry.boundingBox;Ce.applyMatrix4(oe.matrixWorld);const pt=Ce.getCenter(new ye);Ne(oe,pt);{const{div:Ke}=J.createSign(pt.clone(),O9(le+1)),{x:wt,y:ge,z:Dt}=pt;Ke.addEventListener("click",()=>{const yi=M.target,Ln={x:yi.x,y:yi.y,z:yi.z},Pi={x:wt,y:ge,z:Dt},St=1e3,Ct=M.target.clone().sub(M.object.position);new yl.Tween(Ln).to(Pi,St).onUpdate(Wt=>{M.target.set(Wt.x,Wt.y,Wt.z),M.object.position.copy(M.target).sub(Ct)}).start(),y()})}function Ne(Ke,wt){const{div:ge,label:Dt}=J.createMajorLabel({position:wt.clone(),center:new $e(.5,.75),html:Ma,className:"label-bookmark"}),{energy:yi=!1,management:Ln=!1,transportation:Pi=!1}=Ke.userData;Dt.userData={energy:yi,management:Ln,transportation:Pi},z.push(ge);function St(Ct){Ct.stopPropagation();const{x:Wt,y:Vi,z:qi}=wt,an=M.target,On={x:an.x,y:an.y,z:an.z},Me={x:Wt,y:Vi,z:qi},Ss=1e3,on=M.target.clone().sub(M.object.position);new yl.Tween(On).to(Me,Ss).onUpdate(re=>{M.target.set(re.x,re.y,re.z),M.object.position.copy(M.target).sub(on)}).start(),y(),z.forEach(re=>re.classList.remove("clicked")),Z.forEach(re=>re.classList.remove("clicked")),ge.classList.add("clicked");const O={major:Ke.userData.name,minor:null};i("click",O)}ge.addEventListener("pointerenter",()=>{ge.addEventListener("click",St),z.forEach(Ct=>Ct.classList.remove("hovered")),Z.forEach(Ct=>Ct.classList.remove("hovered")),ge.classList.add("hovered"),te.forEach(Ct=>Ct.visible=!1),se.forEach(Ct=>Ct.visible=!1),Ke.visible=!0,y()})}}),K.add(...me.scene.children),y()})}at();function jt(){new bT().setPath("./textures/hdr/").load("puresky_1k.hdr",X=>{X.mapping=_T,K.background=X,K.backgroundBlurriness=.35,w(X),y()})}const Ge=Be(null),At=m0(m.resize.bind(m));return Ot(()=>{Ge.value?.appendChild(_.domElement),Ge.value?.appendChild(b.domElement),Ge.value?.appendChild(be.domElement),M.listenToKeyEvents(window),window.addEventListener("resize",At)}),El(()=>{window.removeEventListener("resize",At),M.stopListenToKeyEvents(),J.dispose(),m.dispose(),Ge.value?.removeChild(be.domElement),Ge.value?.removeChild(b.domElement),Ge.value?.removeChild(_.domElement)}),(X,z)=>($(),Y("div",{ref_key:"domRef",ref:Ge},null,512))}}),j9={class:"container"},$9=Se({__name:"Map",setup(n){const e=Be(),t=xt({showMajorModal:!1,showMinorModal:!1,showControlTip:!0,majorPointName:null,minorPointName:null}),i=du();function s(h){console.log("onClickIcon: ",h);const{major:m,minor:y}=h||{};m?(t.majorPointName=m,t.showMajorModal=!0,t.showMinorModal=!1):y&&(t.minorPointName=y,t.showMajorModal=!1,t.showMinorModal=!0)}function r(){i.push("/detail?target=0")}function a(){i.push("/detail?target=0&test=1")}function o(){i.push("/detail?target=0&test=2")}function l(h){console.log(h),e.value?.layer(h)}function u(h){console.log(h),h.isMajor?(t.majorPointName=h.name,t.showMajorModal=!0,t.showMinorModal=!1):(t.minorPointName=h.name,t.showMajorModal=!1,t.showMinorModal=!0)}function c(){t.showControlTip=!1,window.removeEventListener("pointerdown",c),window.removeEventListener("wheel",c)}return Ot(()=>{window.addEventListener("pointerdown",c),window.addEventListener("wheel",c)}),sn(()=>{window.removeEventListener("pointerdown",c),window.removeEventListener("wheel",c)}),(h,m)=>($(),Y("div",j9,[F("div",{class:"map",onClick:m[0]||(m[0]=()=>{t.showMinorModal=!1})},[De(U9,{ref_key:"ThreeRef",ref:e,onClick:s,onTest1:a,onTest2:o},null,512)]),De(f9,{"show-major-modal":t.showMajorModal,"show-minor-modal":t.showMinorModal,"show-control-tip":t.showControlTip,"actived-major-point":t.majorPointName,"actived-minor-point":t.minorPointName,onCloseMajorModal:m[1]||(m[1]=()=>{t.showMajorModal=!1}),onCloseMinorModal:m[2]||(m[2]=()=>{t.showMinorModal=!1}),onJumpToDetail:r,onClickLayer:l,onClickArea:u},null,8,["show-major-modal","show-minor-modal","show-control-tip","actived-major-point","actived-minor-point"])]))}}),H9=_e($9,[["__scopeId","data-v-7f809d49"]]),Yg=[{title:`BEIJING'S URBAN
SUB-CENTER`,subtitle:"IMMERSIVE EXPERIENCE THROUGH TIME & SPACE",content:`In a bustling world, the pursuit of a tranquil water-city living space has become a coveted desire for many. "Harmonious Water-City Living Space" represents not just a location for homes, but a manifestation of a lifestyle, embodying a natural, harmonious, and inclusive way of life.

Firstly, the environment where the HARMONIOUS WATER-CITY LIVING SPACE resides is invariably connected with water. It might be a city built along waterways or a place blessed with clear lakes and serene rivers. Water is the soul of this realm, imparting a unique ambiance and vitality to the city. The morning mist rises from the lake's surface, creating a picturesque scene in the early light. The evening sun casts its glow upon the buildings, reflecting off the water's surface like a captivating canvas.

This living space is more than just physical structures; it's a community woven together by shared values and respect for nature. Parks and promenades along the waterfront offer residents a serene escape, fostering a sense of belonging and connection with the environment. The city's architecture seamlessly integrates with the water elements, creating a harmonious blend of modernity and natural beauty.
Moreover, the residents' lifestyles revolve around this harmonious coexistence with water. Activities like boating, leisurely walks by the riverbanks, or enjoying a cup of tea while gazing at the shimmering reflections become cherished daily rituals. The water's presence isn't just visual; it's a part of their lives, influencing their pace, habits, and appreciation for tranquility.

In a bustling world, the pursuit of a tranquil water-city living space has become a coveted desire for many. "Harmonious Water-City Living Space" represents not just a location for homes, but a manifestation of a lifestyle, embodying a natural, harmonious, and inclusive way of life.

Firstly, the environment where the HARMONIOUS WATER-CITY LIVING SPACE resides is invariably connected with water. It might be a city built along waterways or a place blessed with clear lakes and serene rivers. Water is the soul of this realm, imparting a unique ambiance and vitality to the city. The morning mist rises from the lake's surface, creating a picturesque scene in the early light. The evening sun casts its glow upon the buildings, reflecting off the water's surface like a captivating canvas.

This living space is more than just physical structures; it's a community woven together by shared values and respect for nature. Parks and promenades along the waterfront offer residents a serene escape, fostering a sense of belonging and connection with the environment. The city's architecture seamlessly integrates with the water elements, creating a harmonious blend of modernity and natural beauty.
Moreover, the residents' lifestyles revolve around this harmonious coexistence with water. Activities like boating, leisurely walks by the riverbanks, or enjoying a cup of tea while gazing at the shimmering reflections become cherished daily rituals. The water's presence isn't just visual; it's a part of their lives, influencing their pace, habits, and appreciation for tranquility.`,image:"/images/beijing_urban_subcenter.png",tags:[{icon:"",label:"ENERGY"},{icon:"",label:"TRANSPORTATION"},{icon:"",label:"MANAGEMENT"}],fragments:[{type:"default",title:`HARMONIOUS
WATER-CITY LIVING SPACE`,content:`In a bustling world, the pursuit of a tranquil water-city living space has become a coveted desire for many. "Harmonious Water-City Living Space" represents not just a location for homes, but a manifestation of a lifestyle, embodying a natural, harmonious, and inclusive way of life.

Firstly, the environment where the HARMONIOUS WATER-CITY LIVING SPACE resides is invariably connected with water. It might be a city built along waterways or a place blessed with clear lakes and serene rivers. Water is the soul of this realm, imparting a unique ambiance and vitality to the city. The morning mist rises from the lake's surface, creating a picturesque scene in the early light. The evening sun casts its glow upon the buildings, reflecting off the water's surface like a captivating canvas.

This living space is more than just physical structures; it's a community woven together by shared values and respect for nature. Parks and promenades along the waterfront offer residents a serene escape, fostering a sense of belonging and connection with the environment. The city's architecture seamlessly integrates with the water elements, creating a harmonious blend of modernity and natural beauty.

Moreover, the residents' lifestyles revolve around this harmonious coexistence with water. Activities like boating, leisurely walks by the riverbanks, or enjoying a cup of tea while gazing at the shimmering reflections become cherished daily rituals. The water's presence isn't just visual; it's a part of their lives, influencing their pace, habits, and appreciation for tranquility.

In conclusion, "Harmonious Water-City Living Space" isn't just a physical location; it's an embodiment of a lifestyle where the symphony of water and urban living harmonizes, creating a haven of tranquility and unity amidst the bustling world.`,image:"/images/beijing_detail.jpg",backgroundColor:"#f9f3e8",titleAlign:"end"},{type:"video",title:`BEIJING'S URBAN
SUB-CENTER`,video:"/video/test.mp4"}]}],z9=["data-primary","data-with-padding"],V9={class:"head-left"},q9={class:"title"},G9={class:"subtitle"},W9={class:"tags"},X9={class:"tag"},Y9={key:0,class:"tag-icon"},K9={class:"tag-label"},Z9={key:0,title:"Back to map"},Q9={class:"primary"},J9={class:"title"},eI={class:"subtitle"},tI={class:"head-right"},iI=Se({__name:"DetailHead",props:{title:{},subtitle:{},tags:{},primary:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},withPadding:{type:Boolean,default:!0}},emits:["click-close"],setup(n,{emit:e}){const t=n,i=e;return(s,r)=>($(),Y("div",{class:"head","data-primary":t.primary,"data-with-padding":t.withPadding},[F("div",V9,[F("div",q9,Ve(t.title),1),F("div",G9,Ve(t.subtitle),1),F("div",W9,[($(!0),Y(Lt,null,en(t.tags,a=>($(),Y("div",X9,[a.icon?($(),Y("span",Y9,Ve(a.icon),1)):Pe("",!0),F("span",K9,Ve(a.label),1)]))),256))]),De(Js,{name:"fade"},{default:fi(()=>[t.showClose?($(),Y("div",Z9,[De(yd,{class:"close",onClick:r[0]||(r[0]=()=>i("click-close"))})])):Pe("",!0)]),_:1}),F("div",Q9,[F("div",J9,Ve(t.title),1),F("div",eI,Ve(t.subtitle),1)])]),F("div",tI,[De(vd,{primary:!1}),De(vd,{class:"primary-logo",primary:!0})])],8,z9))}}),Kg=_e(iI,[["__scopeId","data-v-eea38bb8"]]),nI={class:"fragment-video"},sI={class:"video"},rI=["src"],aI=["data-play"],oI={class:"title-container"},lI={class:"title-primary"},uI={class:"title-container-clip"},cI={class:"title"},dI=Se({__name:"FragmentVideo",props:{title:{},video:{}},setup(n){const e=n,t=xt({play:!1}),i=Be(null),s=Be(null);let r=!1;function a(){if(r||i.value===null||s.value===null)return;const u=i.value,c=document.createElement("canvas");c.width=u.videoWidth,c.height=u.videoHeight,c.getContext("2d")?.drawImage(u,0,0,u.videoWidth,u.videoHeight),s.value.style.backgroundImage=`url(${c.toDataURL()})`,s.value.style.opacity="1",r=!0}function o(){t.play?i.value?.play():i.value?.pause()}function l(){t.play=!1}return ls(()=>t.play,o),Ot(()=>{i.value!==null&&(i.value?.addEventListener("canplay",a),i.value?.addEventListener("ended",l))}),sn(()=>{i.value!==null&&(i.value?.removeEventListener("canplay",a),i.value?.removeEventListener("ended",l))}),(u,c)=>($(),Y("div",nI,[F("div",{class:"background",ref_key:"backgroundRef",ref:s},null,512),F("div",sI,[F("video",{ref_key:"videoRef",ref:i,preload:"auto"},[F("source",{src:`${e.video}#t=1`,type:"video/mp4"},null,8,rI)],512),F("div",{class:"play-pause","data-play":t.play,onClick:c[0]||(c[0]=()=>{t.play=!t.play})},null,8,aI)]),F("div",oI,[F("div",lI,Ve(e.title),1)]),F("div",uI,[F("div",cI,Ve(e.title),1)])]))}}),hI=_e(dI,[["__scopeId","data-v-b6504f48"]]),fI=Se({__name:"ScrollableContent",setup(n){let e=null,t=0,i=0;function s(l){const u=l.target,c=u.getBoundingClientRect().height;u.scrollHeight>=c&&l.stopPropagation()}function r(l){t=l.target.scrollTop,i=l.touches[0].clientY}function a(l){if(e===null){const u=l.target,c=l.touches[0].clientY-i,h=u.scrollHeight-u.getBoundingClientRect().height;Math.abs(h)<1?e=!1:e=t===0&&c<0||Math.abs(t-h)<1&&c>0||t>0&&Math.abs(t-h)>1}e&&l.stopPropagation()}function o(){e=null}return(l,u)=>($(),Y("div",{class:"scrollable",onWheel:s,onTouchstart:r,onTouchmove:a,onTouchend:o},[Kd(l.$slots,"default",{},void 0,!0)],32))}}),Q2=_e(fI,[["__scopeId","data-v-5c5bb255"]]),pI={class:"body"},mI={key:0,class:"image"},gI=["src"],_I=Se({__name:"FragmentDefault",props:{title:{},content:{},image:{},backgroundColor:{},titleAlign:{}},setup(n){const e=n;return(t,i)=>($(),Y("div",{class:"container",style:pi({backgroundColor:e.backgroundColor})},[F("div",{class:"title",style:pi(`text-align: ${e.titleAlign}`)},Ve(e.title),5),F("div",pI,[e.image?($(),Y("div",mI,[F("img",{src:e.image},null,8,gI)])):Pe("",!0),De(Q2,{class:"content"},{default:fi(()=>[ms(Ve(e.content),1)]),_:1})])],4))}}),yI=_e(_I,[["__scopeId","data-v-9aa2257e"]]),vI={class:"container"},bI=Se({__name:"FragmentLast",emits:["back-to-top","back-to-map"],setup(n,{emit:e}){const t=e;return(i,s)=>($(),Y("div",vI,[F("div",{onClick:s[0]||(s[0]=()=>t("back-to-top"))},"Back to top"),F("div",{onClick:s[1]||(s[1]=()=>t("back-to-map"))},"Back to map")]))}}),TI=_e(bI,[["__scopeId","data-v-bc3aa0f0"]]),J2=n=>(Bt("data-v-4a39c056"),n=n(),Nt(),n),xI=J2(()=>F("div",{class:"title"},"Title",-1)),wI=J2(()=>F("div",{class:"text"},"Text",-1)),SI=[xI,wI],CI=Se({__name:"Panoramic",setup(n){const e=xt({top:0,left:0,display:"none"}),t=window.innerWidth,i=window.innerHeight,s=new rr,r=new ar(50,t/i);r.position.z=5;const a=new So({antialias:!0});a.setPixelRatio(window.devicePixelRatio),a.setSize(t,i);const o=new lu(r,a.domElement);o.addEventListener("change",y),o.mouseButtons.RIGHT=jn.ROTATE,o.mouseButtons.MIDDLE=jn.ROTATE,o.touches.TWO=rs.DOLLY_ROTATE,o.enablePan=!1,o.enableZoom=!1,o.screenSpacePanning=!1,o.autoRotateSpeed=1,o.minPolarAngle=so.degToRad(60),o.maxPolarAngle=so.degToRad(120);const l=[];{const b=new ou(.4,.5),x=new et({transparent:!0,opacity:1,color:14962944});x.userData.opacity=x.opacity;const S=new qe(b,x);S.position.set(0,0,-30),s.add(S);const w=new er(.4),A=new et({transparent:!0,opacity:.6,color:14962944});A.userData.opacity=A.opacity;const k=new qe(w,A);k.position.set(0,0,-30),s.add(k),l.push(S),l.push(k)}const u=new xo,c=new $e;window.addEventListener("pointermove",b=>{c.x=b.clientX/window.innerWidth*2-1,c.y=-(b.clientY/window.innerHeight)*2+1,u.setFromCamera(c,r),u.intersectObjects(l).length>0?(a.setAnimationLoop(null),l.forEach(S=>{const w=S;w.material.opacity=0}),y(),e.display="flex",e.top=b.clientY,e.left=b.clientX):(a.setAnimationLoop(m),l.forEach(S=>{const w=S;w.material.opacity=w.material.userData.opacity}),e.display="none")});async function h(){{const b=new i0(10);b.scale(10,10,-10);const x=await new n0().loadAsync("/textures/sphere/2.jpg"),S=new et({map:x}),w=new qe(b,S);s.add(w)}o.autoRotate=!0,y(),a.setAnimationLoop(m)}h();function m(){o.update(),y()}y();function y(){a.render(s,r)}window.addEventListener("resize",()=>{r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),y()});const _=Be(null);return Ot(()=>{_.value?.appendChild(a.domElement)}),sn(()=>{_.value?.removeChild(a.domElement)}),(b,x)=>($(),Y("div",null,[F("div",{ref_key:"domRef",ref:_},null,512),F("div",{class:"tips",style:pi({top:e.top+"px",left:e.left+"px",display:e.display})},SI,4)]))}}),EI=_e(CI,[["__scopeId","data-v-4a39c056"]]),ev=n=>(Bt("data-v-d1c3c740"),n=n(),Nt(),n),AI=ev(()=>F("div",{class:"title"},"Title",-1)),DI=ev(()=>F("div",{class:"text"},"Text",-1)),kI=[AI,DI],II=Se({__name:"Test1",setup(n){const e=xt({top:0,left:0,display:"none"}),t=window.innerWidth,i=window.innerHeight,s=new rr,r=new ar(50,t/i);r.position.z=5;const a=new So({antialias:!0});a.setPixelRatio(window.devicePixelRatio),a.setSize(t,i);const o=new lu(r,a.domElement);o.addEventListener("change",m),o.enablePan=!1,o.autoRotate=!0;const l=[];{const _=new ou(.4,.5),b=new et({transparent:!0,opacity:1,color:14962944});b.userData.opacity=b.opacity;const x=new qe(_,b);x.position.set(0,0,-30),s.add(x);const S=new er(.4),w=new et({transparent:!0,opacity:.6,color:14962944});w.userData.opacity=w.opacity;const A=new qe(S,w);A.position.set(0,0,-30),s.add(A),l.push(x),l.push(A)}const u=new xo,c=new $e;window.addEventListener("pointermove",_=>{c.x=_.clientX/window.innerWidth*2-1,c.y=-(_.clientY/window.innerHeight)*2+1,u.setFromCamera(c,r),u.intersectObjects(l).length>0?(a.setAnimationLoop(null),l.forEach(x=>{const S=x;S.material.opacity=0}),m(),e.display="flex",e.top=_.clientY,e.left=_.clientX):(a.setAnimationLoop(h),l.forEach(x=>{const S=x;S.material.opacity=S.material.userData.opacity}),e.display="none")});{const _=new i0(10);_.scale(10,10,-10);const b=new n0().load("/textures/sphere/2.jpg",()=>{m()}),x=new et({map:b}),S=new qe(_,x);s.add(S)}function h(){o.update(),m()}a.setAnimationLoop(h),m();function m(){a.render(s,r)}window.addEventListener("resize",()=>{r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),m()});const y=Be(null);return Ot(()=>{y.value?.appendChild(a.domElement)}),sn(()=>{y.value?.removeChild(a.domElement)}),(_,b)=>($(),Y(Lt,null,[F("div",{ref_key:"domRef",ref:y},null,512),F("div",{class:"tips",style:pi({top:e.top+"px",left:e.left+"px",display:e.display})},kI,4)],64))}}),PI=_e(II,[["__scopeId","data-v-d1c3c740"]]),tv=n=>(Bt("data-v-fd729937"),n=n(),Nt(),n),LI=tv(()=>F("div",{class:"title"},"Title",-1)),OI=tv(()=>F("div",{class:"text"},"Text",-1)),RI=[LI,OI],MI=Se({__name:"Test2",setup(n){const e=xt({top:0,left:0,display:"none"}),t=window.innerWidth,i=window.innerHeight,s=new rr,r=new ar(50,t/i);r.position.z=5;const a=new So({antialias:!0});a.setPixelRatio(window.devicePixelRatio),a.setSize(t,i);const o=new lu(r,a.domElement);o.addEventListener("change",m),o.enablePan=!1,o.autoRotate=!0;const l=[];{const _=new ou(.4,.5),b=new et({transparent:!0,opacity:1,color:14962944});b.userData.opacity=b.opacity;const x=new qe(_,b);x.position.set(0,0,-30),s.add(x);const S=new er(.4),w=new et({transparent:!0,opacity:.6,color:14962944});w.userData.opacity=w.opacity;const A=new qe(S,w);A.position.set(0,0,-30),s.add(A),l.push(x),l.push(A)}const u=new xo,c=new $e;window.addEventListener("pointermove",_=>{c.x=_.clientX/window.innerWidth*2-1,c.y=-(_.clientY/window.innerHeight)*2+1,u.setFromCamera(c,r),u.intersectObjects(l).length>0?(a.setAnimationLoop(null),l.forEach(x=>{const S=x;S.material.opacity=0}),m(),e.display="flex",e.top=_.clientY,e.left=_.clientX):(a.setAnimationLoop(h),l.forEach(x=>{const S=x;S.material.opacity=S.material.userData.opacity}),e.display="none")});{const _=["/textures/cube/yz/right.jpg","/textures/cube/yz/left.jpg","/textures/cube/yz/top.jpg","/textures/cube/yz/bottom.jpg","/textures/cube/yz/front.jpg","/textures/cube/yz/back.jpg"],b=new yT().load(_,()=>{m()});s.background=b}function h(){o.update(),m()}a.setAnimationLoop(h),m();function m(){a.render(s,r)}window.addEventListener("resize",()=>{r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),m()});const y=Be(null);return Ot(()=>{y.value?.appendChild(a.domElement)}),sn(()=>{y.value?.removeChild(a.domElement)}),(_,b)=>($(),Y(Lt,null,[F("div",{ref_key:"domRef",ref:y},null,512),F("div",{class:"tips",style:pi({top:e.top+"px",left:e.left+"px",display:e.display})},RI,4)],64))}}),BI=_e(MI,[["__scopeId","data-v-fd729937"]]),NI={class:"container"},FI={key:"0",class:"fragment","data-without-padding":"true"},UI={class:"panoramic-view"},jI={key:"1",class:"fragment"},$I={class:"detail-body"},HI={class:"image"},zI=["src"],VI=300,qI=Se({__name:"Detail",setup(n){const e=du(),t=p0(),i=Number(t.query.target),s=Number(t.query.test),r=Number(t.query.fragment),a=Number.isNaN(i)?Yg[0]:Yg[i],o=xt({fragmentIndex:Number.isNaN(r)?0:r,transition:"slide-up",backToMap:!1}),l=a.fragments.length+2;function u(){o.fragmentIndex<l&&(o.fragmentIndex+=1,o.transition="slide-up",e.replace({path:"/detail",query:{...t.query,fragment:o.fragmentIndex}}))}function c(){o.fragmentIndex>0&&(o.fragmentIndex-=1,o.transition="slide-down",e.replace({path:"/detail",query:{...t.query,fragment:o.fragmentIndex}}))}function h(){o.fragmentIndex=0,o.transition="slide-down",e.replace({path:"/detail",query:{...t.query,fragment:o.fragmentIndex}})}function m(){o.backToMap=!0,e.back()}return A_(u,c,VI*2),(y,_)=>($(),Y("div",NI,[De(Gb,{name:o.transition},{default:fi(()=>[o.fragmentIndex===0?($(),Y("div",FI,[F("div",UI,[Re(s)===1?($(),Te(PI,{key:0})):Re(s)===2?($(),Te(BI,{key:1})):($(),Te(EI,{key:2}))])])):Pe("",!0),o.fragmentIndex===1?($(),Y("div",jI,[De(Kg,{class:"hidden",primary:"",title:Re(a).title,subtitle:Re(a).subtitle,tags:Re(a).tags},null,8,["title","subtitle","tags"]),F("div",$I,[F("div",HI,[F("img",{src:Re(a).image},null,8,zI)]),De(Q2,{class:"content"},{default:fi(()=>[ms(Ve(Re(a).content),1)]),_:1})])])):Pe("",!0),($(!0),Y(Lt,null,en(Re(a).fragments,(b,x)=>($(),Y(Lt,null,[o.fragmentIndex===x+2?($(),Y("div",{key:x+2,class:"fragment"},[b.type==="default"?($(),Te(yI,{key:0,title:b.title,content:b.content,image:b.image,"background-color":b.backgroundColor,titleAlign:b.titleAlign},null,8,["title","content","image","background-color","titleAlign"])):b.type==="video"?($(),Te(hI,{key:1,title:b.title,video:b.video},null,8,["title","video"])):Pe("",!0)])):Pe("",!0)],64))),256)),o.fragmentIndex===l?($(),Te(TI,{key:2,onBackToTop:h,onBackToMap:m})):Pe("",!0)]),_:1},8,["name"]),Al(De(Kg,{class:"fixed","data-slide-up":o.fragmentIndex>1,primary:o.fragmentIndex>=1,"show-close":o.fragmentIndex===0,"with-padding":!1,title:Re(a).title,subtitle:Re(a).subtitle,tags:Re(a).tags,onClickClose:m},null,8,["data-slide-up","primary","show-close","title","subtitle","tags"]),[[Dl,!o.backToMap||o.fragmentIndex===0]])]))}}),GI=_e(qI,[["__scopeId","data-v-f50a787d"]]),WI=[{path:"/",component:eE},{path:"/map",component:H9},{path:"/detail",component:GI}],XI=Nx({history:JT(),routes:WI});Wb(Ux).use(XI).mount("#app");
