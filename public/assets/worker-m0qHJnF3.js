(function(){"use strict";var Pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Jn(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var s=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return i[r]}})}),e}var Be={},Pi={};Pi.byteLength=Vn,Pi.toByteArray=Qn,Pi.fromByteArray=ea;for(var ne=[],Xt=[],Hn=typeof Uint8Array<"u"?Uint8Array:Array,fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Te=0,Xn=fr.length;Te<Xn;++Te)ne[Te]=fr[Te],Xt[fr.charCodeAt(Te)]=Te;Xt[45]=62,Xt[95]=63;function ss(i){var t=i.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=i.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function Vn(i){var t=ss(i),e=t[0],r=t[1];return(e+r)*3/4-r}function Yn(i,t,e){return(t+e)*3/4-e}function Qn(i){var t,e=ss(i),r=e[0],s=e[1],n=new Hn(Yn(i,r,s)),o=0,a=s>0?r-4:r,h;for(h=0;h<a;h+=4)t=Xt[i.charCodeAt(h)]<<18|Xt[i.charCodeAt(h+1)]<<12|Xt[i.charCodeAt(h+2)]<<6|Xt[i.charCodeAt(h+3)],n[o++]=t>>16&255,n[o++]=t>>8&255,n[o++]=t&255;return s===2&&(t=Xt[i.charCodeAt(h)]<<2|Xt[i.charCodeAt(h+1)]>>4,n[o++]=t&255),s===1&&(t=Xt[i.charCodeAt(h)]<<10|Xt[i.charCodeAt(h+1)]<<4|Xt[i.charCodeAt(h+2)]>>2,n[o++]=t>>8&255,n[o++]=t&255),n}function Kn(i){return ne[i>>18&63]+ne[i>>12&63]+ne[i>>6&63]+ne[i&63]}function ta(i,t,e){for(var r,s=[],n=t;n<e;n+=3)r=(i[n]<<16&16711680)+(i[n+1]<<8&65280)+(i[n+2]&255),s.push(Kn(r));return s.join("")}function ea(i){for(var t,e=i.length,r=e%3,s=[],n=16383,o=0,a=e-r;o<a;o+=n)s.push(ta(i,o,o+n>a?a:o+n));return r===1?(t=i[e-1],s.push(ne[t>>2]+ne[t<<4&63]+"==")):r===2&&(t=(i[e-2]<<8)+i[e-1],s.push(ne[t>>10]+ne[t>>4&63]+ne[t<<2&63]+"=")),s.join("")}var dr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */dr.read=function(i,t,e,r,s){var n,o,a=s*8-r-1,h=(1<<a)-1,u=h>>1,c=-7,f=e?s-1:0,p=e?-1:1,l=i[t+f];for(f+=p,n=l&(1<<-c)-1,l>>=-c,c+=a;c>0;n=n*256+i[t+f],f+=p,c-=8);for(o=n&(1<<-c)-1,n>>=-c,c+=r;c>0;o=o*256+i[t+f],f+=p,c-=8);if(n===0)n=1-u;else{if(n===h)return o?NaN:(l?-1:1)*(1/0);o=o+Math.pow(2,r),n=n-u}return(l?-1:1)*o*Math.pow(2,n-r)},dr.write=function(i,t,e,r,s,n){var o,a,h,u=n*8-s-1,c=(1<<u)-1,f=c>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:n-1,m=r?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+f>=1?t+=p/h:t+=p*Math.pow(2,1-f),t*h>=2&&(o++,h/=2),o+f>=c?(a=0,o=c):o+f>=1?(a=(t*h-1)*Math.pow(2,s),o=o+f):(a=t*Math.pow(2,f-1)*Math.pow(2,s),o=0));s>=8;i[e+l]=a&255,l+=m,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;i[e+l]=o&255,l+=m,o/=256,u-=8);i[e+l-m]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const t=Pi,e=dr,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=a,i.SlowBuffer=S,i.INSPECT_MAX_BYTES=50;const s=2147483647;i.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=n(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function n(){try{const E=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(E,d),E.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(E){if(E>s)throw new RangeError('The value "'+E+'" is invalid for option "size"');const d=new Uint8Array(E);return Object.setPrototypeOf(d,a.prototype),d}function a(E,d,x){if(typeof E=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(E)}return h(E,d,x)}a.poolSize=8192;function h(E,d,x){if(typeof E=="string")return p(E,d);if(ArrayBuffer.isView(E))return m(E);if(E==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);if(B(E,ArrayBuffer)||E&&B(E.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(B(E,SharedArrayBuffer)||E&&B(E.buffer,SharedArrayBuffer)))return y(E,d,x);if(typeof E=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=E.valueOf&&E.valueOf();if(I!=null&&I!==E)return a.from(I,d,x);const N=v(E);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof E[Symbol.toPrimitive]=="function")return a.from(E[Symbol.toPrimitive]("string"),d,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E)}a.from=function(E,d,x){return h(E,d,x)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(E){if(typeof E!="number")throw new TypeError('"size" argument must be of type number');if(E<0)throw new RangeError('The value "'+E+'" is invalid for option "size"')}function c(E,d,x){return u(E),E<=0?o(E):d!==void 0?typeof x=="string"?o(E).fill(d,x):o(E).fill(d):o(E)}a.alloc=function(E,d,x){return c(E,d,x)};function f(E){return u(E),o(E<0?0:M(E)|0)}a.allocUnsafe=function(E){return f(E)},a.allocUnsafeSlow=function(E){return f(E)};function p(E,d){if((typeof d!="string"||d==="")&&(d="utf8"),!a.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const x=C(E,d)|0;let I=o(x);const N=I.write(E,d);return N!==x&&(I=I.slice(0,N)),I}function l(E){const d=E.length<0?0:M(E.length)|0,x=o(d);for(let I=0;I<d;I+=1)x[I]=E[I]&255;return x}function m(E){if(B(E,Uint8Array)){const d=new Uint8Array(E);return y(d.buffer,d.byteOffset,d.byteLength)}return l(E)}function y(E,d,x){if(d<0||E.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(E.byteLength<d+(x||0))throw new RangeError('"length" is outside of buffer bounds');let I;return d===void 0&&x===void 0?I=new Uint8Array(E):x===void 0?I=new Uint8Array(E,d):I=new Uint8Array(E,d,x),Object.setPrototypeOf(I,a.prototype),I}function v(E){if(a.isBuffer(E)){const d=M(E.length)|0,x=o(d);return x.length===0||E.copy(x,0,0,d),x}if(E.length!==void 0)return typeof E.length!="number"||R(E.length)?o(0):l(E);if(E.type==="Buffer"&&Array.isArray(E.data))return l(E.data)}function M(E){if(E>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return E|0}function S(E){return+E!=E&&(E=0),a.alloc(+E)}a.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==a.prototype},a.compare=function(d,x){if(B(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),B(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(d)||!a.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===x)return 0;let I=d.length,N=x.length;for(let $=0,X=Math.min(I,N);$<X;++$)if(d[$]!==x[$]){I=d[$],N=x[$];break}return I<N?-1:N<I?1:0},a.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(d,x){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return a.alloc(0);let I;if(x===void 0)for(x=0,I=0;I<d.length;++I)x+=d[I].length;const N=a.allocUnsafe(x);let $=0;for(I=0;I<d.length;++I){let X=d[I];if(B(X,Uint8Array))$+X.length>N.length?(a.isBuffer(X)||(X=a.from(X)),X.copy(N,$)):Uint8Array.prototype.set.call(N,X,$);else if(a.isBuffer(X))X.copy(N,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=X.length}return N};function C(E,d){if(a.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||B(E,ArrayBuffer))return E.byteLength;if(typeof E!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);const x=E.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&x===0)return 0;let N=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return _(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return z(E).length;default:if(N)return I?-1:_(E).length;d=(""+d).toLowerCase(),N=!0}}a.byteLength=C;function T(E,d,x){let I=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,d>>>=0,x<=d))return"";for(E||(E="utf8");;)switch(E){case"hex":return K(this,d,x);case"utf8":case"utf-8":return A(this,d,x);case"ascii":return Q(this,d,x);case"latin1":case"binary":return pt(this,d,x);case"base64":return Z(this,d,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,d,x);default:if(I)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),I=!0}}a.prototype._isBuffer=!0;function F(E,d,x){const I=E[d];E[d]=E[x],E[x]=I}a.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<d;x+=2)F(this,x,x+1);return this},a.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<d;x+=4)F(this,x,x+3),F(this,x+1,x+2);return this},a.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<d;x+=8)F(this,x,x+7),F(this,x+1,x+6),F(this,x+2,x+5),F(this,x+3,x+4);return this},a.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?A(this,0,d):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(d){if(!a.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:a.compare(this,d)===0},a.prototype.inspect=function(){let d="";const x=i.INSPECT_MAX_BYTES;return d=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(d+=" ... "),"<Buffer "+d+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(d,x,I,N,$){if(B(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(x===void 0&&(x=0),I===void 0&&(I=d?d.length:0),N===void 0&&(N=0),$===void 0&&($=this.length),x<0||I>d.length||N<0||$>this.length)throw new RangeError("out of range index");if(N>=$&&x>=I)return 0;if(N>=$)return-1;if(x>=I)return 1;if(x>>>=0,I>>>=0,N>>>=0,$>>>=0,this===d)return 0;let X=$-N,xt=I-x;const Ct=Math.min(X,xt),_t=this.slice(N,$),kt=d.slice(x,I);for(let St=0;St<Ct;++St)if(_t[St]!==kt[St]){X=_t[St],xt=kt[St];break}return X<xt?-1:xt<X?1:0};function L(E,d,x,I,N){if(E.length===0)return-1;if(typeof x=="string"?(I=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,R(x)&&(x=N?0:E.length-1),x<0&&(x=E.length+x),x>=E.length){if(N)return-1;x=E.length-1}else if(x<0)if(N)x=0;else return-1;if(typeof d=="string"&&(d=a.from(d,I)),a.isBuffer(d))return d.length===0?-1:U(E,d,x,I,N);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(E,d,x):Uint8Array.prototype.lastIndexOf.call(E,d,x):U(E,[d],x,I,N);throw new TypeError("val must be string, number or Buffer")}function U(E,d,x,I,N){let $=1,X=E.length,xt=d.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(E.length<2||d.length<2)return-1;$=2,X/=2,xt/=2,x/=2}function Ct(kt,St){return $===1?kt[St]:kt.readUInt16BE(St*$)}let _t;if(N){let kt=-1;for(_t=x;_t<X;_t++)if(Ct(E,_t)===Ct(d,kt===-1?0:_t-kt)){if(kt===-1&&(kt=_t),_t-kt+1===xt)return kt*$}else kt!==-1&&(_t-=_t-kt),kt=-1}else for(x+xt>X&&(x=X-xt),_t=x;_t>=0;_t--){let kt=!0;for(let St=0;St<xt;St++)if(Ct(E,_t+St)!==Ct(d,St)){kt=!1;break}if(kt)return _t}return-1}a.prototype.includes=function(d,x,I){return this.indexOf(d,x,I)!==-1},a.prototype.indexOf=function(d,x,I){return L(this,d,x,I,!0)},a.prototype.lastIndexOf=function(d,x,I){return L(this,d,x,I,!1)};function V(E,d,x,I){x=Number(x)||0;const N=E.length-x;I?(I=Number(I),I>N&&(I=N)):I=N;const $=d.length;I>$/2&&(I=$/2);let X;for(X=0;X<I;++X){const xt=parseInt(d.substr(X*2,2),16);if(R(xt))return X;E[x+X]=xt}return X}function W(E,d,x,I){return k(_(d,E.length-x),E,x,I)}function J(E,d,x,I){return k(w(d),E,x,I)}function et(E,d,x,I){return k(z(d),E,x,I)}function P(E,d,x,I){return k(b(d,E.length-x),E,x,I)}a.prototype.write=function(d,x,I,N){if(x===void 0)N="utf8",I=this.length,x=0;else if(I===void 0&&typeof x=="string")N=x,I=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(I)?(I=I>>>0,N===void 0&&(N="utf8")):(N=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-x;if((I===void 0||I>$)&&(I=$),d.length>0&&(I<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let X=!1;for(;;)switch(N){case"hex":return V(this,d,x,I);case"utf8":case"utf-8":return W(this,d,x,I);case"ascii":case"latin1":case"binary":return J(this,d,x,I);case"base64":return et(this,d,x,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,d,x,I);default:if(X)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),X=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Z(E,d,x){return d===0&&x===E.length?t.fromByteArray(E):t.fromByteArray(E.slice(d,x))}function A(E,d,x){x=Math.min(E.length,x);const I=[];let N=d;for(;N<x;){const $=E[N];let X=null,xt=$>239?4:$>223?3:$>191?2:1;if(N+xt<=x){let Ct,_t,kt,St;switch(xt){case 1:$<128&&(X=$);break;case 2:Ct=E[N+1],(Ct&192)===128&&(St=($&31)<<6|Ct&63,St>127&&(X=St));break;case 3:Ct=E[N+1],_t=E[N+2],(Ct&192)===128&&(_t&192)===128&&(St=($&15)<<12|(Ct&63)<<6|_t&63,St>2047&&(St<55296||St>57343)&&(X=St));break;case 4:Ct=E[N+1],_t=E[N+2],kt=E[N+3],(Ct&192)===128&&(_t&192)===128&&(kt&192)===128&&(St=($&15)<<18|(Ct&63)<<12|(_t&63)<<6|kt&63,St>65535&&St<1114112&&(X=St))}}X===null?(X=65533,xt=1):X>65535&&(X-=65536,I.push(X>>>10&1023|55296),X=56320|X&1023),I.push(X),N+=xt}return lt(I)}const H=4096;function lt(E){const d=E.length;if(d<=H)return String.fromCharCode.apply(String,E);let x="",I=0;for(;I<d;)x+=String.fromCharCode.apply(String,E.slice(I,I+=H));return x}function Q(E,d,x){let I="";x=Math.min(E.length,x);for(let N=d;N<x;++N)I+=String.fromCharCode(E[N]&127);return I}function pt(E,d,x){let I="";x=Math.min(E.length,x);for(let N=d;N<x;++N)I+=String.fromCharCode(E[N]);return I}function K(E,d,x){const I=E.length;(!d||d<0)&&(d=0),(!x||x<0||x>I)&&(x=I);let N="";for(let $=d;$<x;++$)N+=Y[E[$]];return N}function ct(E,d,x){const I=E.slice(d,x);let N="";for(let $=0;$<I.length-1;$+=2)N+=String.fromCharCode(I[$]+I[$+1]*256);return N}a.prototype.slice=function(d,x){const I=this.length;d=~~d,x=x===void 0?I:~~x,d<0?(d+=I,d<0&&(d=0)):d>I&&(d=I),x<0?(x+=I,x<0&&(x=0)):x>I&&(x=I),x<d&&(x=d);const N=this.subarray(d,x);return Object.setPrototypeOf(N,a.prototype),N};function q(E,d,x){if(E%1!==0||E<0)throw new RangeError("offset is not uint");if(E+d>x)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(d,x,I){d=d>>>0,x=x>>>0,I||q(d,x,this.length);let N=this[d],$=1,X=0;for(;++X<x&&($*=256);)N+=this[d+X]*$;return N},a.prototype.readUintBE=a.prototype.readUIntBE=function(d,x,I){d=d>>>0,x=x>>>0,I||q(d,x,this.length);let N=this[d+--x],$=1;for(;x>0&&($*=256);)N+=this[d+--x]*$;return N},a.prototype.readUint8=a.prototype.readUInt8=function(d,x){return d=d>>>0,x||q(d,1,this.length),this[d]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(d,x){return d=d>>>0,x||q(d,2,this.length),this[d]|this[d+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(d,x){return d=d>>>0,x||q(d,2,this.length),this[d]<<8|this[d+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(d,x){return d=d>>>0,x||q(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(d,x){return d=d>>>0,x||q(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},a.prototype.readBigUInt64LE=D(function(d){d=d>>>0,st(d,"offset");const x=this[d],I=this[d+7];(x===void 0||I===void 0)&&g(d,this.length-8);const N=x+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,$=this[++d]+this[++d]*2**8+this[++d]*2**16+I*2**24;return BigInt(N)+(BigInt($)<<BigInt(32))}),a.prototype.readBigUInt64BE=D(function(d){d=d>>>0,st(d,"offset");const x=this[d],I=this[d+7];(x===void 0||I===void 0)&&g(d,this.length-8);const N=x*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],$=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+I;return(BigInt(N)<<BigInt(32))+BigInt($)}),a.prototype.readIntLE=function(d,x,I){d=d>>>0,x=x>>>0,I||q(d,x,this.length);let N=this[d],$=1,X=0;for(;++X<x&&($*=256);)N+=this[d+X]*$;return $*=128,N>=$&&(N-=Math.pow(2,8*x)),N},a.prototype.readIntBE=function(d,x,I){d=d>>>0,x=x>>>0,I||q(d,x,this.length);let N=x,$=1,X=this[d+--N];for(;N>0&&($*=256);)X+=this[d+--N]*$;return $*=128,X>=$&&(X-=Math.pow(2,8*x)),X},a.prototype.readInt8=function(d,x){return d=d>>>0,x||q(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},a.prototype.readInt16LE=function(d,x){d=d>>>0,x||q(d,2,this.length);const I=this[d]|this[d+1]<<8;return I&32768?I|4294901760:I},a.prototype.readInt16BE=function(d,x){d=d>>>0,x||q(d,2,this.length);const I=this[d+1]|this[d]<<8;return I&32768?I|4294901760:I},a.prototype.readInt32LE=function(d,x){return d=d>>>0,x||q(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},a.prototype.readInt32BE=function(d,x){return d=d>>>0,x||q(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},a.prototype.readBigInt64LE=D(function(d){d=d>>>0,st(d,"offset");const x=this[d],I=this[d+7];(x===void 0||I===void 0)&&g(d,this.length-8);const N=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(I<<24);return(BigInt(N)<<BigInt(32))+BigInt(x+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),a.prototype.readBigInt64BE=D(function(d){d=d>>>0,st(d,"offset");const x=this[d],I=this[d+7];(x===void 0||I===void 0)&&g(d,this.length-8);const N=(x<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(N)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+I)}),a.prototype.readFloatLE=function(d,x){return d=d>>>0,x||q(d,4,this.length),e.read(this,d,!0,23,4)},a.prototype.readFloatBE=function(d,x){return d=d>>>0,x||q(d,4,this.length),e.read(this,d,!1,23,4)},a.prototype.readDoubleLE=function(d,x){return d=d>>>0,x||q(d,8,this.length),e.read(this,d,!0,52,8)},a.prototype.readDoubleBE=function(d,x){return d=d>>>0,x||q(d,8,this.length),e.read(this,d,!1,52,8)};function j(E,d,x,I,N,$){if(!a.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>N||d<$)throw new RangeError('"value" argument is out of bounds');if(x+I>E.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(d,x,I,N){if(d=+d,x=x>>>0,I=I>>>0,!N){const xt=Math.pow(2,8*I)-1;j(this,d,x,I,xt,0)}let $=1,X=0;for(this[x]=d&255;++X<I&&($*=256);)this[x+X]=d/$&255;return x+I},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(d,x,I,N){if(d=+d,x=x>>>0,I=I>>>0,!N){const xt=Math.pow(2,8*I)-1;j(this,d,x,I,xt,0)}let $=I-1,X=1;for(this[x+$]=d&255;--$>=0&&(X*=256);)this[x+$]=d/X&255;return x+I},a.prototype.writeUint8=a.prototype.writeUInt8=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,1,255,0),this[x]=d&255,x+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,2,65535,0),this[x]=d&255,this[x+1]=d>>>8,x+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,2,65535,0),this[x]=d>>>8,this[x+1]=d&255,x+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,4,4294967295,0),this[x+3]=d>>>24,this[x+2]=d>>>16,this[x+1]=d>>>8,this[x]=d&255,x+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,4,4294967295,0),this[x]=d>>>24,this[x+1]=d>>>16,this[x+2]=d>>>8,this[x+3]=d&255,x+4};function ft(E,d,x,I,N){rt(d,I,N,E,x,7);let $=Number(d&BigInt(4294967295));E[x++]=$,$=$>>8,E[x++]=$,$=$>>8,E[x++]=$,$=$>>8,E[x++]=$;let X=Number(d>>BigInt(32)&BigInt(4294967295));return E[x++]=X,X=X>>8,E[x++]=X,X=X>>8,E[x++]=X,X=X>>8,E[x++]=X,x}function ht(E,d,x,I,N){rt(d,I,N,E,x,7);let $=Number(d&BigInt(4294967295));E[x+7]=$,$=$>>8,E[x+6]=$,$=$>>8,E[x+5]=$,$=$>>8,E[x+4]=$;let X=Number(d>>BigInt(32)&BigInt(4294967295));return E[x+3]=X,X=X>>8,E[x+2]=X,X=X>>8,E[x+1]=X,X=X>>8,E[x]=X,x+8}a.prototype.writeBigUInt64LE=D(function(d,x=0){return ft(this,d,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=D(function(d,x=0){return ht(this,d,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(d,x,I,N){if(d=+d,x=x>>>0,!N){const Ct=Math.pow(2,8*I-1);j(this,d,x,I,Ct-1,-Ct)}let $=0,X=1,xt=0;for(this[x]=d&255;++$<I&&(X*=256);)d<0&&xt===0&&this[x+$-1]!==0&&(xt=1),this[x+$]=(d/X>>0)-xt&255;return x+I},a.prototype.writeIntBE=function(d,x,I,N){if(d=+d,x=x>>>0,!N){const Ct=Math.pow(2,8*I-1);j(this,d,x,I,Ct-1,-Ct)}let $=I-1,X=1,xt=0;for(this[x+$]=d&255;--$>=0&&(X*=256);)d<0&&xt===0&&this[x+$+1]!==0&&(xt=1),this[x+$]=(d/X>>0)-xt&255;return x+I},a.prototype.writeInt8=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,1,127,-128),d<0&&(d=255+d+1),this[x]=d&255,x+1},a.prototype.writeInt16LE=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,2,32767,-32768),this[x]=d&255,this[x+1]=d>>>8,x+2},a.prototype.writeInt16BE=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,2,32767,-32768),this[x]=d>>>8,this[x+1]=d&255,x+2},a.prototype.writeInt32LE=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,4,2147483647,-2147483648),this[x]=d&255,this[x+1]=d>>>8,this[x+2]=d>>>16,this[x+3]=d>>>24,x+4},a.prototype.writeInt32BE=function(d,x,I){return d=+d,x=x>>>0,I||j(this,d,x,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[x]=d>>>24,this[x+1]=d>>>16,this[x+2]=d>>>8,this[x+3]=d&255,x+4},a.prototype.writeBigInt64LE=D(function(d,x=0){return ft(this,d,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=D(function(d,x=0){return ht(this,d,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function nt(E,d,x,I,N,$){if(x+I>E.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function Et(E,d,x,I,N){return d=+d,x=x>>>0,N||nt(E,d,x,4),e.write(E,d,x,I,23,4),x+4}a.prototype.writeFloatLE=function(d,x,I){return Et(this,d,x,!0,I)},a.prototype.writeFloatBE=function(d,x,I){return Et(this,d,x,!1,I)};function Mt(E,d,x,I,N){return d=+d,x=x>>>0,N||nt(E,d,x,8),e.write(E,d,x,I,52,8),x+8}a.prototype.writeDoubleLE=function(d,x,I){return Mt(this,d,x,!0,I)},a.prototype.writeDoubleBE=function(d,x,I){return Mt(this,d,x,!1,I)},a.prototype.copy=function(d,x,I,N){if(!a.isBuffer(d))throw new TypeError("argument should be a Buffer");if(I||(I=0),!N&&N!==0&&(N=this.length),x>=d.length&&(x=d.length),x||(x=0),N>0&&N<I&&(N=I),N===I||d.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),d.length-x<N-I&&(N=d.length-x+I);const $=N-I;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,I,N):Uint8Array.prototype.set.call(d,this.subarray(I,N),x),$},a.prototype.fill=function(d,x,I,N){if(typeof d=="string"){if(typeof x=="string"?(N=x,x=0,I=this.length):typeof I=="string"&&(N=I,I=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(d.length===1){const X=d.charCodeAt(0);(N==="utf8"&&X<128||N==="latin1")&&(d=X)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(x<0||this.length<x||this.length<I)throw new RangeError("Out of range index");if(I<=x)return this;x=x>>>0,I=I===void 0?this.length:I>>>0,d||(d=0);let $;if(typeof d=="number")for($=x;$<I;++$)this[$]=d;else{const X=a.isBuffer(d)?d:a.from(d,N),xt=X.length;if(xt===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for($=0;$<I-x;++$)this[$+x]=X[$%xt]}return this};const mt={};function gt(E,d,x){mt[E]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${E}]`,this.stack,delete this.name}get code(){return E}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${E}]: ${this.message}`}}}gt("ERR_BUFFER_OUT_OF_BOUNDS",function(E){return E?`${E} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),gt("ERR_INVALID_ARG_TYPE",function(E,d){return`The "${E}" argument must be of type number. Received type ${typeof d}`},TypeError),gt("ERR_OUT_OF_RANGE",function(E,d,x){let I=`The value of "${E}" is out of range.`,N=x;return Number.isInteger(x)&&Math.abs(x)>2**32?N=wt(String(x)):typeof x=="bigint"&&(N=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(N=wt(N)),N+="n"),I+=` It must be ${d}. Received ${N}`,I},RangeError);function wt(E){let d="",x=E.length;const I=E[0]==="-"?1:0;for(;x>=I+4;x-=3)d=`_${E.slice(x-3,x)}${d}`;return`${E.slice(0,x)}${d}`}function vt(E,d,x){st(d,"offset"),(E[d]===void 0||E[d+x]===void 0)&&g(d,E.length-(x+1))}function rt(E,d,x,I,N,$){if(E>x||E<d){const X=typeof d=="bigint"?"n":"";let xt;throw $>3?d===0||d===BigInt(0)?xt=`>= 0${X} and < 2${X} ** ${($+1)*8}${X}`:xt=`>= -(2${X} ** ${($+1)*8-1}${X}) and < 2 ** ${($+1)*8-1}${X}`:xt=`>= ${d}${X} and <= ${x}${X}`,new mt.ERR_OUT_OF_RANGE("value",xt,E)}vt(I,N,$)}function st(E,d){if(typeof E!="number")throw new mt.ERR_INVALID_ARG_TYPE(d,"number",E)}function g(E,d,x){throw Math.floor(E)!==E?(st(E,x),new mt.ERR_OUT_OF_RANGE(x||"offset","an integer",E)):d<0?new mt.ERR_BUFFER_OUT_OF_BOUNDS:new mt.ERR_OUT_OF_RANGE(x||"offset",`>= ${x?1:0} and <= ${d}`,E)}const G=/[^+/0-9A-Za-z-_]/g;function O(E){if(E=E.split("=")[0],E=E.trim().replace(G,""),E.length<2)return"";for(;E.length%4!==0;)E=E+"=";return E}function _(E,d){d=d||1/0;let x;const I=E.length;let N=null;const $=[];for(let X=0;X<I;++X){if(x=E.charCodeAt(X),x>55295&&x<57344){if(!N){if(x>56319){(d-=3)>-1&&$.push(239,191,189);continue}else if(X+1===I){(d-=3)>-1&&$.push(239,191,189);continue}N=x;continue}if(x<56320){(d-=3)>-1&&$.push(239,191,189),N=x;continue}x=(N-55296<<10|x-56320)+65536}else N&&(d-=3)>-1&&$.push(239,191,189);if(N=null,x<128){if((d-=1)<0)break;$.push(x)}else if(x<2048){if((d-=2)<0)break;$.push(x>>6|192,x&63|128)}else if(x<65536){if((d-=3)<0)break;$.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((d-=4)<0)break;$.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return $}function w(E){const d=[];for(let x=0;x<E.length;++x)d.push(E.charCodeAt(x)&255);return d}function b(E,d){let x,I,N;const $=[];for(let X=0;X<E.length&&!((d-=2)<0);++X)x=E.charCodeAt(X),I=x>>8,N=x%256,$.push(N),$.push(I);return $}function z(E){return t.toByteArray(O(E))}function k(E,d,x,I){let N;for(N=0;N<I&&!(N+x>=d.length||N>=E.length);++N)d[N+x]=E[N];return N}function B(E,d){return E instanceof d||E!=null&&E.constructor!=null&&E.constructor.name!=null&&E.constructor.name===d.name}function R(E){return E!==E}const Y=function(){const E="0123456789abcdef",d=new Array(256);for(let x=0;x<16;++x){const I=x*16;for(let N=0;N<16;++N)d[I+N]=E[x]+E[N]}return d}();function D(E){return typeof BigInt>"u"?at:E}function at(){throw new Error("BigInt not supported")}})(Be),typeof self.global>"u"&&(self.global=self,global.Buffer=Be.Buffer);function ia(i){return!!i&&(typeof i=="object"||typeof i=="function")&&typeof i.then=="function"}function ra(i){function t(n,o,a,h){function u(c){typeof self.postMessage!="function"?n.ports[0].postMessage(c):self.postMessage(c)}a?(typeof console<"u"&&"error"in console&&console.error("Worker caught an error:",a),u([o,{message:a.message}])):u([o,null,h])}function e(n,o){try{return{res:n(o)}}catch(a){return{err:a}}}function r(n,o,a,h){var u=e(o,h);u.err?t(n,a,u.err):ia(u.res)?u.res.then(function(c){t(n,a,null,c)},function(c){t(n,a,c)}):t(n,a,null,u.res)}function s(n){var o=n.data;if(!(!Array.isArray(o)||o.length!==2)){var a=o[0],h=o[1];typeof i!="function"?t(n,a,new Error("Please pass a function into register().")):r(n,i,a,h)}}self.addEventListener("message",s)}var sa=ra,na=rs(sa);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ns="161",as=300,os=1e3,Ni=1001,hs=1002,us=1003,aa=1006,oa=1008,ha=1009,ua=1014,la=1015,ca=1020,fa=1023,pr=1026,ls=1027,da=3e3,mr=3001,yr="",xr="srgb",pa=515,cs=35044,Oi=2e3,fs=2001;class gr{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(e)===-1&&r[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const r=this._listeners[t.type];if(r!==void 0){t.target=this;const s=r.slice(0);for(let n=0,o=s.length;n<o;n++)s[n].call(this,t);t.target=null}}}const Lt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function ii(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Lt[i&255]+Lt[i>>8&255]+Lt[i>>16&255]+Lt[i>>24&255]+"-"+Lt[t&255]+Lt[t>>8&255]+"-"+Lt[t>>16&15|64]+Lt[t>>24&255]+"-"+Lt[e&63|128]+Lt[e>>8&255]+"-"+Lt[e>>16&255]+Lt[e>>24&255]+Lt[r&255]+Lt[r>>8&255]+Lt[r>>16&255]+Lt[r>>24&255]).toLowerCase()}function Qt(i,t,e){return Math.max(t,Math.min(e,i))}function ri(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Gt(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}class dt{constructor(t=0,e=0){dt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,r=this.y,s=t.elements;return this.x=s[0]*e+s[3]*r+s[6],this.y=s[1]*e+s[4]*r+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const r=this.dot(t)/e;return Math.acos(Qt(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,r=this.y-t.y;return e*e+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const r=Math.cos(e),s=Math.sin(e),n=this.x-t.x,o=this.y-t.y;return this.x=n*r-o*s+t.x,this.y=n*s+o*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Fe{constructor(t,e,r,s,n,o,a,h,u){Fe.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,r,s,n,o,a,h,u)}set(t,e,r,s,n,o,a,h,u){const c=this.elements;return c[0]=t,c[1]=s,c[2]=a,c[3]=e,c[4]=n,c[5]=h,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}extractBasis(t,e,r){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,s=e.elements,n=this.elements,o=r[0],a=r[3],h=r[6],u=r[1],c=r[4],f=r[7],p=r[2],l=r[5],m=r[8],y=s[0],v=s[3],M=s[6],S=s[1],C=s[4],T=s[7],F=s[2],L=s[5],U=s[8];return n[0]=o*y+a*S+h*F,n[3]=o*v+a*C+h*L,n[6]=o*M+a*T+h*U,n[1]=u*y+c*S+f*F,n[4]=u*v+c*C+f*L,n[7]=u*M+c*T+f*U,n[2]=p*y+l*S+m*F,n[5]=p*v+l*C+m*L,n[8]=p*M+l*T+m*U,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-r*n*c+r*a*h+s*n*u-s*o*h}invert(){const t=this.elements,e=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=t[8],f=c*o-a*u,p=a*h-c*n,l=u*n-o*h,m=e*f+r*p+s*l;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/m;return t[0]=f*y,t[1]=(s*u-c*r)*y,t[2]=(a*r-s*o)*y,t[3]=p*y,t[4]=(c*e-s*h)*y,t[5]=(s*n-a*e)*y,t[6]=l*y,t[7]=(r*h-u*e)*y,t[8]=(o*e-r*n)*y,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,r,s,n,o,a){const h=Math.cos(n),u=Math.sin(n);return this.set(r*h,r*u,-r*(h*o+u*a)+o+t,-s*u,s*h,-s*(-u*o+h*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(vr.makeScale(t,e)),this}rotate(t){return this.premultiply(vr.makeRotation(-t)),this}translate(t,e){return this.premultiply(vr.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,r,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,r=t.elements;for(let s=0;s<9;s++)if(e[s]!==r[s])return!1;return!0}fromArray(t,e=0){for(let r=0;r<9;r++)this.elements[r]=t[r+e];return this}toArray(t=[],e=0){const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const vr=new Fe;function ma(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function ds(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}const ps={};function Ri(i){i in ps||(ps[i]=!0,console.warn(i))}function _r(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}let Pe;class ya{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Pe===void 0&&(Pe=ds("canvas")),Pe.width=t.width,Pe.height=t.height;const r=Pe.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=Pe}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=ds("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const s=r.getImageData(0,0,t.width,t.height),n=s.data;for(let o=0;o<n.length;o++)n[o]=_r(n[o]/255)*255;return r.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let r=0;r<e.length;r++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[r]=Math.floor(_r(e[r]/255)*255):e[r]=_r(e[r]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let xa=0;class ga{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:xa++}),this.uuid=ii(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let n;if(Array.isArray(s)){n=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?n.push(wr(s[o].image)):n.push(wr(s[o]))}else n=wr(s);r.url=n}return e||(t.images[this.uuid]=r),r}}function wr(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?ya.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let va=0;class pe extends gr{constructor(t=pe.DEFAULT_IMAGE,e=pe.DEFAULT_MAPPING,r=Ni,s=Ni,n=aa,o=oa,a=fa,h=ha,u=pe.DEFAULT_ANISOTROPY,c=yr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:va++}),this.uuid=ii(),this.name="",this.source=new ga(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=n,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=h,this.offset=new dt(0,0),this.repeat=new dt(1,1),this.center=new dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fe,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(Ri("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===mr?xr:yr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),e||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==as)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case os:t.x=t.x-Math.floor(t.x);break;case Ni:t.x=t.x<0?0:1;break;case hs:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case os:t.y=t.y-Math.floor(t.y);break;case Ni:t.y=t.y<0?0:1;break;case hs:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Ri("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===xr?mr:da}set encoding(t){Ri("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===mr?xr:yr}}pe.DEFAULT_IMAGE=null,pe.DEFAULT_MAPPING=as,pe.DEFAULT_ANISOTROPY=1;class si{constructor(t=0,e=0,r=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=r,this._w=s}static slerpFlat(t,e,r,s,n,o,a){let h=r[s+0],u=r[s+1],c=r[s+2],f=r[s+3];const p=n[o+0],l=n[o+1],m=n[o+2],y=n[o+3];if(a===0){t[e+0]=h,t[e+1]=u,t[e+2]=c,t[e+3]=f;return}if(a===1){t[e+0]=p,t[e+1]=l,t[e+2]=m,t[e+3]=y;return}if(f!==y||h!==p||u!==l||c!==m){let v=1-a;const M=h*p+u*l+c*m+f*y,S=M>=0?1:-1,C=1-M*M;if(C>Number.EPSILON){const F=Math.sqrt(C),L=Math.atan2(F,M*S);v=Math.sin(v*L)/F,a=Math.sin(a*L)/F}const T=a*S;if(h=h*v+p*T,u=u*v+l*T,c=c*v+m*T,f=f*v+y*T,v===1-a){const F=1/Math.sqrt(h*h+u*u+c*c+f*f);h*=F,u*=F,c*=F,f*=F}}t[e]=h,t[e+1]=u,t[e+2]=c,t[e+3]=f}static multiplyQuaternionsFlat(t,e,r,s,n,o){const a=r[s],h=r[s+1],u=r[s+2],c=r[s+3],f=n[o],p=n[o+1],l=n[o+2],m=n[o+3];return t[e]=a*m+c*f+h*l-u*p,t[e+1]=h*m+c*p+u*f-a*l,t[e+2]=u*m+c*l+a*p-h*f,t[e+3]=c*m-a*f-h*p-u*l,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,r,s){return this._x=t,this._y=e,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const r=t._x,s=t._y,n=t._z,o=t._order,a=Math.cos,h=Math.sin,u=a(r/2),c=a(s/2),f=a(n/2),p=h(r/2),l=h(s/2),m=h(n/2);switch(o){case"XYZ":this._x=p*c*f+u*l*m,this._y=u*l*f-p*c*m,this._z=u*c*m+p*l*f,this._w=u*c*f-p*l*m;break;case"YXZ":this._x=p*c*f+u*l*m,this._y=u*l*f-p*c*m,this._z=u*c*m-p*l*f,this._w=u*c*f+p*l*m;break;case"ZXY":this._x=p*c*f-u*l*m,this._y=u*l*f+p*c*m,this._z=u*c*m+p*l*f,this._w=u*c*f-p*l*m;break;case"ZYX":this._x=p*c*f-u*l*m,this._y=u*l*f+p*c*m,this._z=u*c*m-p*l*f,this._w=u*c*f+p*l*m;break;case"YZX":this._x=p*c*f+u*l*m,this._y=u*l*f+p*c*m,this._z=u*c*m-p*l*f,this._w=u*c*f-p*l*m;break;case"XZY":this._x=p*c*f-u*l*m,this._y=u*l*f-p*c*m,this._z=u*c*m+p*l*f,this._w=u*c*f+p*l*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const r=e/2,s=Math.sin(r);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,r=e[0],s=e[4],n=e[8],o=e[1],a=e[5],h=e[9],u=e[2],c=e[6],f=e[10],p=r+a+f;if(p>0){const l=.5/Math.sqrt(p+1);this._w=.25/l,this._x=(c-h)*l,this._y=(n-u)*l,this._z=(o-s)*l}else if(r>a&&r>f){const l=2*Math.sqrt(1+r-a-f);this._w=(c-h)/l,this._x=.25*l,this._y=(s+o)/l,this._z=(n+u)/l}else if(a>f){const l=2*Math.sqrt(1+a-r-f);this._w=(n-u)/l,this._x=(s+o)/l,this._y=.25*l,this._z=(h+c)/l}else{const l=2*Math.sqrt(1+f-r-a);this._w=(o-s)/l,this._x=(n+u)/l,this._y=(h+c)/l,this._z=.25*l}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let r=t.dot(e)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Qt(this.dot(t),-1,1)))}rotateTowards(t,e){const r=this.angleTo(t);if(r===0)return this;const s=Math.min(1,e/r);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const r=t._x,s=t._y,n=t._z,o=t._w,a=e._x,h=e._y,u=e._z,c=e._w;return this._x=r*c+o*a+s*u-n*h,this._y=s*c+o*h+n*a-r*u,this._z=n*c+o*u+r*h-s*a,this._w=o*c-r*a-s*h-n*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const r=this._x,s=this._y,n=this._z,o=this._w;let a=o*t._w+r*t._x+s*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=r,this._y=s,this._z=n,this;const h=1-a*a;if(h<=Number.EPSILON){const l=1-e;return this._w=l*o+e*this._w,this._x=l*r+e*this._x,this._y=l*s+e*this._y,this._z=l*n+e*this._z,this.normalize(),this}const u=Math.sqrt(h),c=Math.atan2(u,a),f=Math.sin((1-e)*c)/u,p=Math.sin(e*c)/u;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=s*f+this._y*p,this._z=n*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,e,r){return this.copy(t).slerp(e,r)}random(){const t=Math.random(),e=Math.sqrt(1-t),r=Math.sqrt(t),s=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(e*Math.cos(s),r*Math.sin(n),r*Math.cos(n),e*Math.sin(s))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class tt{constructor(t=0,e=0,r=0){tt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=r}set(t,e,r){return r===void 0&&(r=this.z),this.x=t,this.y=e,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(ms.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(ms.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,r=this.y,s=this.z,n=t.elements;return this.x=n[0]*e+n[3]*r+n[6]*s,this.y=n[1]*e+n[4]*r+n[7]*s,this.z=n[2]*e+n[5]*r+n[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,r=this.y,s=this.z,n=t.elements,o=1/(n[3]*e+n[7]*r+n[11]*s+n[15]);return this.x=(n[0]*e+n[4]*r+n[8]*s+n[12])*o,this.y=(n[1]*e+n[5]*r+n[9]*s+n[13])*o,this.z=(n[2]*e+n[6]*r+n[10]*s+n[14])*o,this}applyQuaternion(t){const e=this.x,r=this.y,s=this.z,n=t.x,o=t.y,a=t.z,h=t.w,u=2*(o*s-a*r),c=2*(a*e-n*s),f=2*(n*r-o*e);return this.x=e+h*u+o*f-a*c,this.y=r+h*c+a*u-n*f,this.z=s+h*f+n*c-o*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,r=this.y,s=this.z,n=t.elements;return this.x=n[0]*e+n[4]*r+n[8]*s,this.y=n[1]*e+n[5]*r+n[9]*s,this.z=n[2]*e+n[6]*r+n[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this.z=t.z+(e.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const r=t.x,s=t.y,n=t.z,o=e.x,a=e.y,h=e.z;return this.x=s*h-n*a,this.y=n*o-r*h,this.z=r*a-s*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const r=t.dot(this)/e;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return Mr.copy(this).projectOnVector(t),this.sub(Mr)}reflect(t){return this.sub(Mr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const r=this.dot(t)/e;return Math.acos(Qt(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,r=this.y-t.y,s=this.z-t.z;return e*e+r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,r){const s=Math.sin(e)*t;return this.x=s*Math.sin(r),this.y=Math.cos(e)*t,this.z=s*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,r){return this.x=t*Math.sin(e),this.y=r,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,r=Math.sqrt(1-t**2);return this.x=r*Math.cos(e),this.y=r*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Mr=new tt,ms=new si;class Ne{constructor(t=new tt(1/0,1/0,1/0),e=new tt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,r=t.length;e<r;e+=3)this.expandByPoint(Kt.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,r=t.count;e<r;e++)this.expandByPoint(Kt.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const r=Kt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const r=t.geometry;if(r!==void 0){const n=r.getAttribute("position");if(e===!0&&n!==void 0&&t.isInstancedMesh!==!0)for(let o=0,a=n.count;o<a;o++)t.isMesh===!0?t.getVertexPosition(o,Kt):Kt.fromBufferAttribute(n,o),Kt.applyMatrix4(t.matrixWorld),this.expandByPoint(Kt);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Li.copy(t.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Li.copy(r.boundingBox)),Li.applyMatrix4(t.matrixWorld),this.union(Li)}const s=t.children;for(let n=0,o=s.length;n<o;n++)this.expandByObject(s[n],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Kt),Kt.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ni),Ui.subVectors(this.max,ni),Oe.subVectors(t.a,ni),Re.subVectors(t.b,ni),Le.subVectors(t.c,ni),me.subVectors(Re,Oe),ye.subVectors(Le,Re),Ae.subVectors(Oe,Le);let e=[0,-me.z,me.y,0,-ye.z,ye.y,0,-Ae.z,Ae.y,me.z,0,-me.x,ye.z,0,-ye.x,Ae.z,0,-Ae.x,-me.y,me.x,0,-ye.y,ye.x,0,-Ae.y,Ae.x,0];return!br(e,Oe,Re,Le,Ui)||(e=[1,0,0,0,1,0,0,0,1],!br(e,Oe,Re,Le,Ui))?!1:(Di.crossVectors(me,ye),e=[Di.x,Di.y,Di.z],br(e,Oe,Re,Le,Ui))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Kt).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Kt).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ce[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ce[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ce[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ce[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ce[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ce[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ce[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ce[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ce),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const ce=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt],Kt=new tt,Li=new Ne,Oe=new tt,Re=new tt,Le=new tt,me=new tt,ye=new tt,Ae=new tt,ni=new tt,Ui=new tt,Di=new tt,Ee=new tt;function br(i,t,e,r,s){for(let n=0,o=i.length-3;n<=o;n+=3){Ee.fromArray(i,n);const a=s.x*Math.abs(Ee.x)+s.y*Math.abs(Ee.y)+s.z*Math.abs(Ee.z),h=t.dot(Ee),u=e.dot(Ee),c=r.dot(Ee);if(Math.max(-Math.max(h,u,c),Math.min(h,u,c))>a)return!1}return!0}const _a=new Ne,ai=new tt,Ar=new tt;class wa{constructor(t=new tt,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const r=this.center;e!==void 0?r.copy(e):_a.setFromPoints(t).getCenter(r);let s=0;for(let n=0,o=t.length;n<o;n++)s=Math.max(s,r.distanceToSquared(t[n]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const r=this.center.distanceToSquared(t);return e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ai.subVectors(t,this.center);const e=ai.lengthSq();if(e>this.radius*this.radius){const r=Math.sqrt(e),s=(r-this.radius)*.5;this.center.addScaledVector(ai,s/r),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Ar.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ai.copy(t.center).add(Ar)),this.expandByPoint(ai.copy(t.center).sub(Ar))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}class te{constructor(t,e,r,s,n,o,a,h,u,c,f,p,l,m,y,v){te.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,r,s,n,o,a,h,u,c,f,p,l,m,y,v)}set(t,e,r,s,n,o,a,h,u,c,f,p,l,m,y,v){const M=this.elements;return M[0]=t,M[4]=e,M[8]=r,M[12]=s,M[1]=n,M[5]=o,M[9]=a,M[13]=h,M[2]=u,M[6]=c,M[10]=f,M[14]=p,M[3]=l,M[7]=m,M[11]=y,M[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new te().fromArray(this.elements)}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}copyPosition(t){const e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,r=t.elements,s=1/Ue.setFromMatrixColumn(t,0).length(),n=1/Ue.setFromMatrixColumn(t,1).length(),o=1/Ue.setFromMatrixColumn(t,2).length();return e[0]=r[0]*s,e[1]=r[1]*s,e[2]=r[2]*s,e[3]=0,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=0,e[8]=r[8]*o,e[9]=r[9]*o,e[10]=r[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,r=t.x,s=t.y,n=t.z,o=Math.cos(r),a=Math.sin(r),h=Math.cos(s),u=Math.sin(s),c=Math.cos(n),f=Math.sin(n);if(t.order==="XYZ"){const p=o*c,l=o*f,m=a*c,y=a*f;e[0]=h*c,e[4]=-h*f,e[8]=u,e[1]=l+m*u,e[5]=p-y*u,e[9]=-a*h,e[2]=y-p*u,e[6]=m+l*u,e[10]=o*h}else if(t.order==="YXZ"){const p=h*c,l=h*f,m=u*c,y=u*f;e[0]=p+y*a,e[4]=m*a-l,e[8]=o*u,e[1]=o*f,e[5]=o*c,e[9]=-a,e[2]=l*a-m,e[6]=y+p*a,e[10]=o*h}else if(t.order==="ZXY"){const p=h*c,l=h*f,m=u*c,y=u*f;e[0]=p-y*a,e[4]=-o*f,e[8]=m+l*a,e[1]=l+m*a,e[5]=o*c,e[9]=y-p*a,e[2]=-o*u,e[6]=a,e[10]=o*h}else if(t.order==="ZYX"){const p=o*c,l=o*f,m=a*c,y=a*f;e[0]=h*c,e[4]=m*u-l,e[8]=p*u+y,e[1]=h*f,e[5]=y*u+p,e[9]=l*u-m,e[2]=-u,e[6]=a*h,e[10]=o*h}else if(t.order==="YZX"){const p=o*h,l=o*u,m=a*h,y=a*u;e[0]=h*c,e[4]=y-p*f,e[8]=m*f+l,e[1]=f,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=l*f+m,e[10]=p-y*f}else if(t.order==="XZY"){const p=o*h,l=o*u,m=a*h,y=a*u;e[0]=h*c,e[4]=-f,e[8]=u*c,e[1]=p*f+y,e[5]=o*c,e[9]=l*f-m,e[2]=m*f-l,e[6]=a*c,e[10]=y*f+p}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ma,t,ba)}lookAt(t,e,r){const s=this.elements;return Zt.subVectors(t,e),Zt.lengthSq()===0&&(Zt.z=1),Zt.normalize(),xe.crossVectors(r,Zt),xe.lengthSq()===0&&(Math.abs(r.z)===1?Zt.x+=1e-4:Zt.z+=1e-4,Zt.normalize(),xe.crossVectors(r,Zt)),xe.normalize(),qi.crossVectors(Zt,xe),s[0]=xe.x,s[4]=qi.x,s[8]=Zt.x,s[1]=xe.y,s[5]=qi.y,s[9]=Zt.y,s[2]=xe.z,s[6]=qi.z,s[10]=Zt.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,s=e.elements,n=this.elements,o=r[0],a=r[4],h=r[8],u=r[12],c=r[1],f=r[5],p=r[9],l=r[13],m=r[2],y=r[6],v=r[10],M=r[14],S=r[3],C=r[7],T=r[11],F=r[15],L=s[0],U=s[4],V=s[8],W=s[12],J=s[1],et=s[5],P=s[9],Z=s[13],A=s[2],H=s[6],lt=s[10],Q=s[14],pt=s[3],K=s[7],ct=s[11],q=s[15];return n[0]=o*L+a*J+h*A+u*pt,n[4]=o*U+a*et+h*H+u*K,n[8]=o*V+a*P+h*lt+u*ct,n[12]=o*W+a*Z+h*Q+u*q,n[1]=c*L+f*J+p*A+l*pt,n[5]=c*U+f*et+p*H+l*K,n[9]=c*V+f*P+p*lt+l*ct,n[13]=c*W+f*Z+p*Q+l*q,n[2]=m*L+y*J+v*A+M*pt,n[6]=m*U+y*et+v*H+M*K,n[10]=m*V+y*P+v*lt+M*ct,n[14]=m*W+y*Z+v*Q+M*q,n[3]=S*L+C*J+T*A+F*pt,n[7]=S*U+C*et+T*H+F*K,n[11]=S*V+C*P+T*lt+F*ct,n[15]=S*W+C*Z+T*Q+F*q,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[4],s=t[8],n=t[12],o=t[1],a=t[5],h=t[9],u=t[13],c=t[2],f=t[6],p=t[10],l=t[14],m=t[3],y=t[7],v=t[11],M=t[15];return m*(+n*h*f-s*u*f-n*a*p+r*u*p+s*a*l-r*h*l)+y*(+e*h*l-e*u*p+n*o*p-s*o*l+s*u*c-n*h*c)+v*(+e*u*f-e*a*l-n*o*f+r*o*l+n*a*c-r*u*c)+M*(-s*a*c-e*h*f+e*a*p+s*o*f-r*o*p+r*h*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,r){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=r),this}invert(){const t=this.elements,e=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=t[8],f=t[9],p=t[10],l=t[11],m=t[12],y=t[13],v=t[14],M=t[15],S=f*v*u-y*p*u+y*h*l-a*v*l-f*h*M+a*p*M,C=m*p*u-c*v*u-m*h*l+o*v*l+c*h*M-o*p*M,T=c*y*u-m*f*u+m*a*l-o*y*l-c*a*M+o*f*M,F=m*f*h-c*y*h-m*a*p+o*y*p+c*a*v-o*f*v,L=e*S+r*C+s*T+n*F;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/L;return t[0]=S*U,t[1]=(y*p*n-f*v*n-y*s*l+r*v*l+f*s*M-r*p*M)*U,t[2]=(a*v*n-y*h*n+y*s*u-r*v*u-a*s*M+r*h*M)*U,t[3]=(f*h*n-a*p*n-f*s*u+r*p*u+a*s*l-r*h*l)*U,t[4]=C*U,t[5]=(c*v*n-m*p*n+m*s*l-e*v*l-c*s*M+e*p*M)*U,t[6]=(m*h*n-o*v*n-m*s*u+e*v*u+o*s*M-e*h*M)*U,t[7]=(o*p*n-c*h*n+c*s*u-e*p*u-o*s*l+e*h*l)*U,t[8]=T*U,t[9]=(m*f*n-c*y*n-m*r*l+e*y*l+c*r*M-e*f*M)*U,t[10]=(o*y*n-m*a*n+m*r*u-e*y*u-o*r*M+e*a*M)*U,t[11]=(c*a*n-o*f*n-c*r*u+e*f*u+o*r*l-e*a*l)*U,t[12]=F*U,t[13]=(c*y*s-m*f*s+m*r*p-e*y*p-c*r*v+e*f*v)*U,t[14]=(m*a*s-o*y*s-m*r*h+e*y*h+o*r*v-e*a*v)*U,t[15]=(o*f*s-c*a*s+c*r*h-e*f*h-o*r*p+e*a*p)*U,this}scale(t){const e=this.elements,r=t.x,s=t.y,n=t.z;return e[0]*=r,e[4]*=s,e[8]*=n,e[1]*=r,e[5]*=s,e[9]*=n,e[2]*=r,e[6]*=s,e[10]*=n,e[3]*=r,e[7]*=s,e[11]*=n,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,s))}makeTranslation(t,e,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const r=Math.cos(e),s=Math.sin(e),n=1-r,o=t.x,a=t.y,h=t.z,u=n*o,c=n*a;return this.set(u*o+r,u*a-s*h,u*h+s*a,0,u*a+s*h,c*a+r,c*h-s*o,0,u*h-s*a,c*h+s*o,n*h*h+r,0,0,0,0,1),this}makeScale(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,e,r,s,n,o){return this.set(1,r,n,0,t,1,o,0,e,s,1,0,0,0,0,1),this}compose(t,e,r){const s=this.elements,n=e._x,o=e._y,a=e._z,h=e._w,u=n+n,c=o+o,f=a+a,p=n*u,l=n*c,m=n*f,y=o*c,v=o*f,M=a*f,S=h*u,C=h*c,T=h*f,F=r.x,L=r.y,U=r.z;return s[0]=(1-(y+M))*F,s[1]=(l+T)*F,s[2]=(m-C)*F,s[3]=0,s[4]=(l-T)*L,s[5]=(1-(p+M))*L,s[6]=(v+S)*L,s[7]=0,s[8]=(m+C)*U,s[9]=(v-S)*U,s[10]=(1-(p+y))*U,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,r){const s=this.elements;let n=Ue.set(s[0],s[1],s[2]).length();const o=Ue.set(s[4],s[5],s[6]).length(),a=Ue.set(s[8],s[9],s[10]).length();this.determinant()<0&&(n=-n),t.x=s[12],t.y=s[13],t.z=s[14],ee.copy(this);const u=1/n,c=1/o,f=1/a;return ee.elements[0]*=u,ee.elements[1]*=u,ee.elements[2]*=u,ee.elements[4]*=c,ee.elements[5]*=c,ee.elements[6]*=c,ee.elements[8]*=f,ee.elements[9]*=f,ee.elements[10]*=f,e.setFromRotationMatrix(ee),r.x=n,r.y=o,r.z=a,this}makePerspective(t,e,r,s,n,o,a=Oi){const h=this.elements,u=2*n/(e-t),c=2*n/(r-s),f=(e+t)/(e-t),p=(r+s)/(r-s);let l,m;if(a===Oi)l=-(o+n)/(o-n),m=-2*o*n/(o-n);else if(a===fs)l=-o/(o-n),m=-o*n/(o-n);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return h[0]=u,h[4]=0,h[8]=f,h[12]=0,h[1]=0,h[5]=c,h[9]=p,h[13]=0,h[2]=0,h[6]=0,h[10]=l,h[14]=m,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(t,e,r,s,n,o,a=Oi){const h=this.elements,u=1/(e-t),c=1/(r-s),f=1/(o-n),p=(e+t)*u,l=(r+s)*c;let m,y;if(a===Oi)m=(o+n)*f,y=-2*f;else if(a===fs)m=n*f,y=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return h[0]=2*u,h[4]=0,h[8]=0,h[12]=-p,h[1]=0,h[5]=2*c,h[9]=0,h[13]=-l,h[2]=0,h[6]=0,h[10]=y,h[14]=-m,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(t){const e=this.elements,r=t.elements;for(let s=0;s<16;s++)if(e[s]!==r[s])return!1;return!0}fromArray(t,e=0){for(let r=0;r<16;r++)this.elements[r]=t[r+e];return this}toArray(t=[],e=0){const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}}const Ue=new tt,ee=new te,Ma=new tt(0,0,0),ba=new tt(1,1,1),xe=new tt,qi=new tt,Zt=new tt,ys=new te,xs=new si;class ji{constructor(t=0,e=0,r=0,s=ji.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,r,s=this._order){return this._x=t,this._y=e,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,r=!0){const s=t.elements,n=s[0],o=s[4],a=s[8],h=s[1],u=s[5],c=s[9],f=s[2],p=s[6],l=s[10];switch(e){case"XYZ":this._y=Math.asin(Qt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._z=Math.atan2(-o,n)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Qt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,l),this._z=Math.atan2(h,u)):(this._y=Math.atan2(-f,n),this._z=0);break;case"ZXY":this._x=Math.asin(Qt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,l),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(h,n));break;case"ZYX":this._y=Math.asin(-Qt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,l),this._z=Math.atan2(h,n)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Qt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,n)):(this._x=0,this._y=Math.atan2(a,l));break;case"XZY":this._z=Math.asin(-Qt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-c,l),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,r){return ys.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ys,e,r)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return xs.setFromEuler(this),this.setFromQuaternion(xs,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ji.DEFAULT_ORDER="XYZ";class Aa{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Ea=0;const gs=new tt,De=new si,fe=new te,Gi=new tt,oi=new tt,Sa=new tt,Ca=new si,vs=new tt(1,0,0),_s=new tt(0,1,0),ws=new tt(0,0,1),ka={type:"added"},za={type:"removed"};class ge extends gr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ea++}),this.uuid=ii(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ge.DEFAULT_UP.clone();const t=new tt,e=new ji,r=new si,s=new tt(1,1,1);function n(){r.setFromEuler(e,!1)}function o(){e.setFromQuaternion(r,void 0,!1)}e._onChange(n),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new te},normalMatrix:{value:new Fe}}),this.matrix=new te,this.matrixWorld=new te,this.matrixAutoUpdate=ge.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ge.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Aa,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return De.setFromAxisAngle(t,e),this.quaternion.multiply(De),this}rotateOnWorldAxis(t,e){return De.setFromAxisAngle(t,e),this.quaternion.premultiply(De),this}rotateX(t){return this.rotateOnAxis(vs,t)}rotateY(t){return this.rotateOnAxis(_s,t)}rotateZ(t){return this.rotateOnAxis(ws,t)}translateOnAxis(t,e){return gs.copy(t).applyQuaternion(this.quaternion),this.position.add(gs.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(vs,t)}translateY(t){return this.translateOnAxis(_s,t)}translateZ(t){return this.translateOnAxis(ws,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(fe.copy(this.matrixWorld).invert())}lookAt(t,e,r){t.isVector3?Gi.copy(t):Gi.set(t,e,r);const s=this.parent;this.updateWorldMatrix(!0,!1),oi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fe.lookAt(oi,Gi,this.up):fe.lookAt(Gi,oi,this.up),this.quaternion.setFromRotationMatrix(fe),s&&(fe.extractRotation(s.matrixWorld),De.setFromRotationMatrix(fe),this.quaternion.premultiply(De.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ka)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(za)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),fe.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),fe.multiply(t.parent.matrixWorld)),t.applyMatrix4(fe),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectByProperty(t,e);if(o!==void 0)return o}}getObjectsByProperty(t,e,r=[]){this[t]===e&&r.push(this);const s=this.children;for(let n=0,o=s.length;n<o;n++)s[n].getObjectsByProperty(t,e,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oi,t,Sa),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oi,Ca,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let r=0,s=e.length;r<s;r++)e[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let r=0,s=e.length;r<s;r++)e[r].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let r=0,s=e.length;r<s;r++){const n=e[r];(n.matrixWorldAutoUpdate===!0||t===!0)&&n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const r=this.parent;if(t===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const s=this.children;for(let n=0,o=s.length;n<o;n++){const a=s[n];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=t===void 0||typeof t=="string",r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function n(a,h){return a[h.uuid]===void 0&&(a[h.uuid]=h.toJSON(t)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=n(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const h=a.shapes;if(Array.isArray(h))for(let u=0,c=h.length;u<c;u++){const f=h[u];n(t.shapes,f)}else n(t.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let h=0,u=this.material.length;h<u;h++)a.push(n(t.materials,this.material[h]));s.material=a}else s.material=n(t.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const h=this.animations[a];s.animations.push(n(t.animations,h))}}if(e){const a=o(t.geometries),h=o(t.materials),u=o(t.textures),c=o(t.images),f=o(t.shapes),p=o(t.skeletons),l=o(t.animations),m=o(t.nodes);a.length>0&&(r.geometries=a),h.length>0&&(r.materials=h),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),l.length>0&&(r.animations=l),m.length>0&&(r.nodes=m)}return r.object=s,r;function o(a){const h=[];for(const u in a){const c=a[u];delete c.metadata,h.push(c)}return h}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let r=0;r<t.children.length;r++){const s=t.children[r];this.add(s.clone())}return this}}ge.DEFAULT_UP=new tt(0,1,0),ge.DEFAULT_MATRIX_AUTO_UPDATE=!0,ge.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ft=new tt,Wi=new dt;class Se{constructor(t,e,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=r,this.usage=cs,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=la,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return Ri("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,r){t*=this.itemSize,r*=e.itemSize;for(let s=0,n=this.itemSize;s<n;s++)this.array[t+s]=e.array[r+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,r=this.count;e<r;e++)Wi.fromBufferAttribute(this,e),Wi.applyMatrix3(t),this.setXY(e,Wi.x,Wi.y);else if(this.itemSize===3)for(let e=0,r=this.count;e<r;e++)Ft.fromBufferAttribute(this,e),Ft.applyMatrix3(t),this.setXYZ(e,Ft.x,Ft.y,Ft.z);return this}applyMatrix4(t){for(let e=0,r=this.count;e<r;e++)Ft.fromBufferAttribute(this,e),Ft.applyMatrix4(t),this.setXYZ(e,Ft.x,Ft.y,Ft.z);return this}applyNormalMatrix(t){for(let e=0,r=this.count;e<r;e++)Ft.fromBufferAttribute(this,e),Ft.applyNormalMatrix(t),this.setXYZ(e,Ft.x,Ft.y,Ft.z);return this}transformDirection(t){for(let e=0,r=this.count;e<r;e++)Ft.fromBufferAttribute(this,e),Ft.transformDirection(t),this.setXYZ(e,Ft.x,Ft.y,Ft.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let r=this.array[t*this.itemSize+e];return this.normalized&&(r=ri(r,this.array)),r}setComponent(t,e,r){return this.normalized&&(r=Gt(r,this.array)),this.array[t*this.itemSize+e]=r,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ri(e,this.array)),e}setX(t,e){return this.normalized&&(e=Gt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ri(e,this.array)),e}setY(t,e){return this.normalized&&(e=Gt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ri(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Gt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ri(e,this.array)),e}setW(t,e){return this.normalized&&(e=Gt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,r){return t*=this.itemSize,this.normalized&&(e=Gt(e,this.array),r=Gt(r,this.array)),this.array[t+0]=e,this.array[t+1]=r,this}setXYZ(t,e,r,s){return t*=this.itemSize,this.normalized&&(e=Gt(e,this.array),r=Gt(r,this.array),s=Gt(s,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=s,this}setXYZW(t,e,r,s,n){return t*=this.itemSize,this.normalized&&(e=Gt(e,this.array),r=Gt(r,this.array),s=Gt(s,this.array),n=Gt(n,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=s,this.array[t+3]=n,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==cs&&(t.usage=this.usage),t}}class Ia extends Se{constructor(t,e,r){super(new Uint16Array(t),e,r)}}class Ba extends Se{constructor(t,e,r){super(new Uint32Array(t),e,r)}}class Ce extends Se{constructor(t,e,r){super(new Float32Array(t),e,r)}}let Ta=0;const Vt=new te,Er=new ge,qe=new tt,Jt=new Ne,hi=new Ne,Nt=new tt;class je extends gr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ta++}),this.uuid=ii(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ma(t)?Ba:Ia)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,r=0){this.groups.push({start:t,count:e,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const n=new Fe().getNormalMatrix(t);r.applyNormalMatrix(n),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Vt.makeRotationFromQuaternion(t),this.applyMatrix4(Vt),this}rotateX(t){return Vt.makeRotationX(t),this.applyMatrix4(Vt),this}rotateY(t){return Vt.makeRotationY(t),this.applyMatrix4(Vt),this}rotateZ(t){return Vt.makeRotationZ(t),this.applyMatrix4(Vt),this}translate(t,e,r){return Vt.makeTranslation(t,e,r),this.applyMatrix4(Vt),this}scale(t,e,r){return Vt.makeScale(t,e,r),this.applyMatrix4(Vt),this}lookAt(t){return Er.lookAt(t),Er.updateMatrix(),this.applyMatrix4(Er.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(qe).negate(),this.translate(qe.x,qe.y,qe.z),this}setFromPoints(t){const e=[];for(let r=0,s=t.length;r<s;r++){const n=t[r];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Ce(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ne);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new tt(-1/0,-1/0,-1/0),new tt(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let r=0,s=e.length;r<s;r++){const n=e[r];Jt.setFromBufferAttribute(n),this.morphTargetsRelative?(Nt.addVectors(this.boundingBox.min,Jt.min),this.boundingBox.expandByPoint(Nt),Nt.addVectors(this.boundingBox.max,Jt.max),this.boundingBox.expandByPoint(Nt)):(this.boundingBox.expandByPoint(Jt.min),this.boundingBox.expandByPoint(Jt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wa);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new tt,1/0);return}if(t){const r=this.boundingSphere.center;if(Jt.setFromBufferAttribute(t),e)for(let n=0,o=e.length;n<o;n++){const a=e[n];hi.setFromBufferAttribute(a),this.morphTargetsRelative?(Nt.addVectors(Jt.min,hi.min),Jt.expandByPoint(Nt),Nt.addVectors(Jt.max,hi.max),Jt.expandByPoint(Nt)):(Jt.expandByPoint(hi.min),Jt.expandByPoint(hi.max))}Jt.getCenter(r);let s=0;for(let n=0,o=t.count;n<o;n++)Nt.fromBufferAttribute(t,n),s=Math.max(s,r.distanceToSquared(Nt));if(e)for(let n=0,o=e.length;n<o;n++){const a=e[n],h=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Nt.fromBufferAttribute(a,u),h&&(qe.fromBufferAttribute(t,u),Nt.add(qe)),s=Math.max(s,r.distanceToSquared(Nt))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.array,s=e.position.array,n=e.normal.array,o=e.uv.array,a=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Se(new Float32Array(4*a),4));const h=this.getAttribute("tangent").array,u=[],c=[];for(let J=0;J<a;J++)u[J]=new tt,c[J]=new tt;const f=new tt,p=new tt,l=new tt,m=new dt,y=new dt,v=new dt,M=new tt,S=new tt;function C(J,et,P){f.fromArray(s,J*3),p.fromArray(s,et*3),l.fromArray(s,P*3),m.fromArray(o,J*2),y.fromArray(o,et*2),v.fromArray(o,P*2),p.sub(f),l.sub(f),y.sub(m),v.sub(m);const Z=1/(y.x*v.y-v.x*y.y);isFinite(Z)&&(M.copy(p).multiplyScalar(v.y).addScaledVector(l,-y.y).multiplyScalar(Z),S.copy(l).multiplyScalar(y.x).addScaledVector(p,-v.x).multiplyScalar(Z),u[J].add(M),u[et].add(M),u[P].add(M),c[J].add(S),c[et].add(S),c[P].add(S))}let T=this.groups;T.length===0&&(T=[{start:0,count:r.length}]);for(let J=0,et=T.length;J<et;++J){const P=T[J],Z=P.start,A=P.count;for(let H=Z,lt=Z+A;H<lt;H+=3)C(r[H+0],r[H+1],r[H+2])}const F=new tt,L=new tt,U=new tt,V=new tt;function W(J){U.fromArray(n,J*3),V.copy(U);const et=u[J];F.copy(et),F.sub(U.multiplyScalar(U.dot(et))).normalize(),L.crossVectors(V,et);const Z=L.dot(c[J])<0?-1:1;h[J*4]=F.x,h[J*4+1]=F.y,h[J*4+2]=F.z,h[J*4+3]=Z}for(let J=0,et=T.length;J<et;++J){const P=T[J],Z=P.start,A=P.count;for(let H=Z,lt=Z+A;H<lt;H+=3)W(r[H+0]),W(r[H+1]),W(r[H+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Se(new Float32Array(e.count*3),3),this.setAttribute("normal",r);else for(let p=0,l=r.count;p<l;p++)r.setXYZ(p,0,0,0);const s=new tt,n=new tt,o=new tt,a=new tt,h=new tt,u=new tt,c=new tt,f=new tt;if(t)for(let p=0,l=t.count;p<l;p+=3){const m=t.getX(p+0),y=t.getX(p+1),v=t.getX(p+2);s.fromBufferAttribute(e,m),n.fromBufferAttribute(e,y),o.fromBufferAttribute(e,v),c.subVectors(o,n),f.subVectors(s,n),c.cross(f),a.fromBufferAttribute(r,m),h.fromBufferAttribute(r,y),u.fromBufferAttribute(r,v),a.add(c),h.add(c),u.add(c),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(y,h.x,h.y,h.z),r.setXYZ(v,u.x,u.y,u.z)}else for(let p=0,l=e.count;p<l;p+=3)s.fromBufferAttribute(e,p+0),n.fromBufferAttribute(e,p+1),o.fromBufferAttribute(e,p+2),c.subVectors(o,n),f.subVectors(s,n),c.cross(f),r.setXYZ(p+0,c.x,c.y,c.z),r.setXYZ(p+1,c.x,c.y,c.z),r.setXYZ(p+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,r=t.count;e<r;e++)Nt.fromBufferAttribute(t,e),Nt.normalize(),t.setXYZ(e,Nt.x,Nt.y,Nt.z)}toNonIndexed(){function t(a,h){const u=a.array,c=a.itemSize,f=a.normalized,p=new u.constructor(h.length*c);let l=0,m=0;for(let y=0,v=h.length;y<v;y++){a.isInterleavedBufferAttribute?l=h[y]*a.data.stride+a.offset:l=h[y]*c;for(let M=0;M<c;M++)p[m++]=u[l++]}return new Se(p,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new je,r=this.index.array,s=this.attributes;for(const a in s){const h=s[a],u=t(h,r);e.setAttribute(a,u)}const n=this.morphAttributes;for(const a in n){const h=[],u=n[a];for(let c=0,f=u.length;c<f;c++){const p=u[c],l=t(p,r);h.push(l)}e.morphAttributes[a]=h}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,h=o.length;a<h;a++){const u=o[a];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const u in h)h[u]!==void 0&&(t[u]=h[u]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const r=this.attributes;for(const h in r){const u=r[h];t.data.attributes[h]=u.toJSON(t.data)}const s={};let n=!1;for(const h in this.morphAttributes){const u=this.morphAttributes[h],c=[];for(let f=0,p=u.length;f<p;f++){const l=u[f];c.push(l.toJSON(t.data))}c.length>0&&(s[h]=c,n=!0)}n&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const r=t.index;r!==null&&this.setIndex(r.clone(e));const s=t.attributes;for(const u in s){const c=s[u];this.setAttribute(u,c.clone(e))}const n=t.morphAttributes;for(const u in n){const c=[],f=n[u];for(let p=0,l=f.length;p<l;p++)c.push(f[p].clone(e));this.morphAttributes[u]=c}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fa extends pe{constructor(t,e,r,s,n,o,a,h,u,c){if(c=c!==void 0?c:pr,c!==pr&&c!==ls)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===pr&&(r=ua),r===void 0&&c===ls&&(r=ca),super(null,s,n,o,a,h,c,r,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:us,this.minFilter=h!==void 0?h:us,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}const Pa=new Fa(1,1);Pa.compareFunction=pa;class ae{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const r=this.getUtoTmapping(t);return this.getPoint(r,e)}getPoints(t=5){const e=[];for(let r=0;r<=t;r++)e.push(this.getPoint(r/t));return e}getSpacedPoints(t=5){const e=[];for(let r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let r,s=this.getPoint(0),n=0;e.push(0);for(let o=1;o<=t;o++)r=this.getPoint(o/t),n+=r.distanceTo(s),e.push(n),s=r;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const r=this.getLengths();let s=0;const n=r.length;let o;e?o=e:o=t*r[n-1];let a=0,h=n-1,u;for(;a<=h;)if(s=Math.floor(a+(h-a)/2),u=r[s]-o,u<0)a=s+1;else if(u>0)h=s-1;else{h=s;break}if(s=h,r[s]===o)return s/(n-1);const c=r[s],p=r[s+1]-c,l=(o-c)/p;return(s+l)/(n-1)}getTangent(t,e){let s=t-1e-4,n=t+1e-4;s<0&&(s=0),n>1&&(n=1);const o=this.getPoint(s),a=this.getPoint(n),h=e||(o.isVector2?new dt:new tt);return h.copy(a).sub(o).normalize(),h}getTangentAt(t,e){const r=this.getUtoTmapping(t);return this.getTangent(r,e)}computeFrenetFrames(t,e){const r=new tt,s=[],n=[],o=[],a=new tt,h=new te;for(let l=0;l<=t;l++){const m=l/t;s[l]=this.getTangentAt(m,new tt)}n[0]=new tt,o[0]=new tt;let u=Number.MAX_VALUE;const c=Math.abs(s[0].x),f=Math.abs(s[0].y),p=Math.abs(s[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),p<=u&&r.set(0,0,1),a.crossVectors(s[0],r).normalize(),n[0].crossVectors(s[0],a),o[0].crossVectors(s[0],n[0]);for(let l=1;l<=t;l++){if(n[l]=n[l-1].clone(),o[l]=o[l-1].clone(),a.crossVectors(s[l-1],s[l]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(Qt(s[l-1].dot(s[l]),-1,1));n[l].applyMatrix4(h.makeRotationAxis(a,m))}o[l].crossVectors(s[l],n[l])}if(e===!0){let l=Math.acos(Qt(n[0].dot(n[t]),-1,1));l/=t,s[0].dot(a.crossVectors(n[0],n[t]))>0&&(l=-l);for(let m=1;m<=t;m++)n[m].applyMatrix4(h.makeRotationAxis(s[m],l*m)),o[m].crossVectors(s[m],n[m])}return{tangents:s,normals:n,binormals:o}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Sr extends ae{constructor(t=0,e=0,r=1,s=1,n=0,o=Math.PI*2,a=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=r,this.yRadius=s,this.aStartAngle=n,this.aEndAngle=o,this.aClockwise=a,this.aRotation=h}getPoint(t,e){const r=e||new dt,s=Math.PI*2;let n=this.aEndAngle-this.aStartAngle;const o=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=s;for(;n>s;)n-=s;n<Number.EPSILON&&(o?n=0:n=s),this.aClockwise===!0&&!o&&(n===s?n=-s:n=n-s);const a=this.aStartAngle+t*n;let h=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=h-this.aX,l=u-this.aY;h=p*c-l*f+this.aX,u=p*f+l*c+this.aY}return r.set(h,u)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Na extends Sr{constructor(t,e,r,s,n,o){super(t,e,r,r,s,n,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Cr(){let i=0,t=0,e=0,r=0;function s(n,o,a,h){i=n,t=a,e=-3*n+3*o-2*a-h,r=2*n-2*o+a+h}return{initCatmullRom:function(n,o,a,h,u){s(o,a,u*(a-n),u*(h-o))},initNonuniformCatmullRom:function(n,o,a,h,u,c,f){let p=(o-n)/u-(a-n)/(u+c)+(a-o)/c,l=(a-o)/c-(h-o)/(c+f)+(h-a)/f;p*=c,l*=c,s(o,a,p,l)},calc:function(n){const o=n*n,a=o*n;return i+t*n+e*o+r*a}}}const $i=new tt,kr=new Cr,zr=new Cr,Ir=new Cr;class Oa extends ae{constructor(t=[],e=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=r,this.tension=s}getPoint(t,e=new tt){const r=e,s=this.points,n=s.length,o=(n-(this.closed?0:1))*t;let a=Math.floor(o),h=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:h===0&&a===n-1&&(a=n-2,h=1);let u,c;this.closed||a>0?u=s[(a-1)%n]:($i.subVectors(s[0],s[1]).add(s[0]),u=$i);const f=s[a%n],p=s[(a+1)%n];if(this.closed||a+2<n?c=s[(a+2)%n]:($i.subVectors(s[n-1],s[n-2]).add(s[n-1]),c=$i),this.curveType==="centripetal"||this.curveType==="chordal"){const l=this.curveType==="chordal"?.5:.25;let m=Math.pow(u.distanceToSquared(f),l),y=Math.pow(f.distanceToSquared(p),l),v=Math.pow(p.distanceToSquared(c),l);y<1e-4&&(y=1),m<1e-4&&(m=y),v<1e-4&&(v=y),kr.initNonuniformCatmullRom(u.x,f.x,p.x,c.x,m,y,v),zr.initNonuniformCatmullRom(u.y,f.y,p.y,c.y,m,y,v),Ir.initNonuniformCatmullRom(u.z,f.z,p.z,c.z,m,y,v)}else this.curveType==="catmullrom"&&(kr.initCatmullRom(u.x,f.x,p.x,c.x,this.tension),zr.initCatmullRom(u.y,f.y,p.y,c.y,this.tension),Ir.initCatmullRom(u.z,f.z,p.z,c.z,this.tension));return r.set(kr.calc(h),zr.calc(h),Ir.calc(h)),r}copy(t){super.copy(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,r=this.points.length;e<r;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const s=t.points[e];this.points.push(new tt().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Ms(i,t,e,r,s){const n=(r-t)*.5,o=(s-e)*.5,a=i*i,h=i*a;return(2*e-2*r+n+o)*h+(-3*e+3*r-2*n-o)*a+n*i+e}function Ra(i,t){const e=1-i;return e*e*t}function La(i,t){return 2*(1-i)*i*t}function Ua(i,t){return i*i*t}function ui(i,t,e,r){return Ra(i,t)+La(i,e)+Ua(i,r)}function Da(i,t){const e=1-i;return e*e*e*t}function qa(i,t){const e=1-i;return 3*e*e*i*t}function ja(i,t){return 3*(1-i)*i*i*t}function Ga(i,t){return i*i*i*t}function li(i,t,e,r,s){return Da(i,t)+qa(i,e)+ja(i,r)+Ga(i,s)}class bs extends ae{constructor(t=new dt,e=new dt,r=new dt,s=new dt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=r,this.v3=s}getPoint(t,e=new dt){const r=e,s=this.v0,n=this.v1,o=this.v2,a=this.v3;return r.set(li(t,s.x,n.x,o.x,a.x),li(t,s.y,n.y,o.y,a.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Wa extends ae{constructor(t=new tt,e=new tt,r=new tt,s=new tt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=r,this.v3=s}getPoint(t,e=new tt){const r=e,s=this.v0,n=this.v1,o=this.v2,a=this.v3;return r.set(li(t,s.x,n.x,o.x,a.x),li(t,s.y,n.y,o.y,a.y),li(t,s.z,n.z,o.z,a.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class As extends ae{constructor(t=new dt,e=new dt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new dt){const r=e;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new dt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class $a extends ae{constructor(t=new tt,e=new tt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new tt){const r=e;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new tt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Es extends ae{constructor(t=new dt,e=new dt,r=new dt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=r}getPoint(t,e=new dt){const r=e,s=this.v0,n=this.v1,o=this.v2;return r.set(ui(t,s.x,n.x,o.x),ui(t,s.y,n.y,o.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Za extends ae{constructor(t=new tt,e=new tt,r=new tt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=r}getPoint(t,e=new tt){const r=e,s=this.v0,n=this.v1,o=this.v2;return r.set(ui(t,s.x,n.x,o.x),ui(t,s.y,n.y,o.y),ui(t,s.z,n.z,o.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ss extends ae{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new dt){const r=e,s=this.points,n=(s.length-1)*t,o=Math.floor(n),a=n-o,h=s[o===0?o:o-1],u=s[o],c=s[o>s.length-2?s.length-1:o+1],f=s[o>s.length-3?s.length-1:o+2];return r.set(Ms(a,h.x,u.x,c.x,f.x),Ms(a,h.y,u.y,c.y,f.y)),r}copy(t){super.copy(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,r=this.points.length;e<r;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const s=t.points[e];this.points.push(new dt().fromArray(s))}return this}}var Br=Object.freeze({__proto__:null,ArcCurve:Na,CatmullRomCurve3:Oa,CubicBezierCurve:bs,CubicBezierCurve3:Wa,EllipseCurve:Sr,LineCurve:As,LineCurve3:$a,QuadraticBezierCurve:Es,QuadraticBezierCurve3:Za,SplineCurve:Ss});class Ja extends ae{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const r=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Br[r](e,t))}return this}getPoint(t,e){const r=t*this.getLength(),s=this.getCurveLengths();let n=0;for(;n<s.length;){if(s[n]>=r){const o=s[n]-r,a=this.curves[n],h=a.getLength(),u=h===0?0:1-o/h;return a.getPointAt(u,e)}n++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let r=0,s=this.curves.length;r<s;r++)e+=this.curves[r].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let r=0;r<=t;r++)e.push(this.getPoint(r/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let r;for(let s=0,n=this.curves;s<n.length;s++){const o=n[s],a=o.isEllipseCurve?t*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,h=o.getPoints(a);for(let u=0;u<h.length;u++){const c=h[u];r&&r.equals(c)||(e.push(c),r=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,r=t.curves.length;e<r;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,r=this.curves.length;e<r;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,r=t.curves.length;e<r;e++){const s=t.curves[e];this.curves.push(new Br[s.type]().fromJSON(s))}return this}}class Cs extends Ja{constructor(t){super(),this.type="Path",this.currentPoint=new dt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,r=t.length;e<r;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const r=new As(this.currentPoint.clone(),new dt(t,e));return this.curves.push(r),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,r,s){const n=new Es(this.currentPoint.clone(),new dt(t,e),new dt(r,s));return this.curves.push(n),this.currentPoint.set(r,s),this}bezierCurveTo(t,e,r,s,n,o){const a=new bs(this.currentPoint.clone(),new dt(t,e),new dt(r,s),new dt(n,o));return this.curves.push(a),this.currentPoint.set(n,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),r=new Ss(e);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,r,s,n,o){const a=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(t+a,e+h,r,s,n,o),this}absarc(t,e,r,s,n,o){return this.absellipse(t,e,r,r,s,n,o),this}ellipse(t,e,r,s,n,o,a,h){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+u,e+c,r,s,n,o,a,h),this}absellipse(t,e,r,s,n,o,a,h){const u=new Sr(t,e,r,s,n,o,a,h);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Zi extends Cs{constructor(t){super(t),this.uuid=ii(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let r=0,s=this.holes.length;r<s;r++)e[r]=this.holes[r].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,r=t.holes.length;e<r;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,r=this.holes.length;e<r;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,r=t.holes.length;e<r;e++){const s=t.holes[e];this.holes.push(new Cs().fromJSON(s))}return this}}const Ha={triangulate:function(i,t,e=2){const r=t&&t.length,s=r?t[0]*e:i.length;let n=ks(i,0,s,e,!0);const o=[];if(!n||n.next===n.prev)return o;let a,h,u,c,f,p,l;if(r&&(n=Ka(i,t,n,e)),i.length>80*e){a=u=i[0],h=c=i[1];for(let m=e;m<s;m+=e)f=i[m],p=i[m+1],f<a&&(a=f),p<h&&(h=p),f>u&&(u=f),p>c&&(c=p);l=Math.max(u-a,c-h),l=l!==0?32767/l:0}return ci(n,o,e,a,h,l,0),o}};function ks(i,t,e,r,s){let n,o;if(s===lo(i,t,e,r)>0)for(n=t;n<e;n+=r)o=Bs(n,i[n],i[n+1],o);else for(n=e-r;n>=t;n-=r)o=Bs(n,i[n],i[n+1],o);return o&&Ji(o,o.next)&&(di(o),o=o.next),o}function ke(i,t){if(!i)return i;t||(t=i);let e=i,r;do if(r=!1,!e.steiner&&(Ji(e,e.next)||zt(e.prev,e,e.next)===0)){if(di(e),e=t=e.prev,e===e.next)break;r=!0}else e=e.next;while(r||e!==t);return t}function ci(i,t,e,r,s,n,o){if(!i)return;!o&&n&&so(i,r,s,n);let a=i,h,u;for(;i.prev!==i.next;){if(h=i.prev,u=i.next,n?Va(i,r,s,n):Xa(i)){t.push(h.i/e|0),t.push(i.i/e|0),t.push(u.i/e|0),di(i),i=u.next,a=u.next;continue}if(i=u,i===a){o?o===1?(i=Ya(ke(i),t,e),ci(i,t,e,r,s,n,2)):o===2&&Qa(i,t,e,r,s,n):ci(ke(i),t,e,r,s,n,1);break}}}function Xa(i){const t=i.prev,e=i,r=i.next;if(zt(t,e,r)>=0)return!1;const s=t.x,n=e.x,o=r.x,a=t.y,h=e.y,u=r.y,c=s<n?s<o?s:o:n<o?n:o,f=a<h?a<u?a:u:h<u?h:u,p=s>n?s>o?s:o:n>o?n:o,l=a>h?a>u?a:u:h>u?h:u;let m=r.next;for(;m!==t;){if(m.x>=c&&m.x<=p&&m.y>=f&&m.y<=l&&Ge(s,a,n,h,o,u,m.x,m.y)&&zt(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Va(i,t,e,r){const s=i.prev,n=i,o=i.next;if(zt(s,n,o)>=0)return!1;const a=s.x,h=n.x,u=o.x,c=s.y,f=n.y,p=o.y,l=a<h?a<u?a:u:h<u?h:u,m=c<f?c<p?c:p:f<p?f:p,y=a>h?a>u?a:u:h>u?h:u,v=c>f?c>p?c:p:f>p?f:p,M=Tr(l,m,t,e,r),S=Tr(y,v,t,e,r);let C=i.prevZ,T=i.nextZ;for(;C&&C.z>=M&&T&&T.z<=S;){if(C.x>=l&&C.x<=y&&C.y>=m&&C.y<=v&&C!==s&&C!==o&&Ge(a,c,h,f,u,p,C.x,C.y)&&zt(C.prev,C,C.next)>=0||(C=C.prevZ,T.x>=l&&T.x<=y&&T.y>=m&&T.y<=v&&T!==s&&T!==o&&Ge(a,c,h,f,u,p,T.x,T.y)&&zt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;C&&C.z>=M;){if(C.x>=l&&C.x<=y&&C.y>=m&&C.y<=v&&C!==s&&C!==o&&Ge(a,c,h,f,u,p,C.x,C.y)&&zt(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;T&&T.z<=S;){if(T.x>=l&&T.x<=y&&T.y>=m&&T.y<=v&&T!==s&&T!==o&&Ge(a,c,h,f,u,p,T.x,T.y)&&zt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Ya(i,t,e){let r=i;do{const s=r.prev,n=r.next.next;!Ji(s,n)&&zs(s,r,r.next,n)&&fi(s,n)&&fi(n,s)&&(t.push(s.i/e|0),t.push(r.i/e|0),t.push(n.i/e|0),di(r),di(r.next),r=i=n),r=r.next}while(r!==i);return ke(r)}function Qa(i,t,e,r,s,n){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&oo(o,a)){let h=Is(o,a);o=ke(o,o.next),h=ke(h,h.next),ci(o,t,e,r,s,n,0),ci(h,t,e,r,s,n,0);return}a=a.next}o=o.next}while(o!==i)}function Ka(i,t,e,r){const s=[];let n,o,a,h,u;for(n=0,o=t.length;n<o;n++)a=t[n]*r,h=n<o-1?t[n+1]*r:i.length,u=ks(i,a,h,r,!1),u===u.next&&(u.steiner=!0),s.push(ao(u));for(s.sort(to),n=0;n<s.length;n++)e=eo(s[n],e);return e}function to(i,t){return i.x-t.x}function eo(i,t){const e=io(i,t);if(!e)return t;const r=Is(e,i);return ke(r,r.next),ke(e,e.next)}function io(i,t){let e=t,r=-1/0,s;const n=i.x,o=i.y;do{if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){const p=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(p<=n&&p>r&&(r=p,s=e.x<e.next.x?e:e.next,p===n))return s}e=e.next}while(e!==t);if(!s)return null;const a=s,h=s.x,u=s.y;let c=1/0,f;e=s;do n>=e.x&&e.x>=h&&n!==e.x&&Ge(o<u?n:r,o,h,u,o<u?r:n,o,e.x,e.y)&&(f=Math.abs(o-e.y)/(n-e.x),fi(e,i)&&(f<c||f===c&&(e.x>s.x||e.x===s.x&&ro(s,e)))&&(s=e,c=f)),e=e.next;while(e!==a);return s}function ro(i,t){return zt(i.prev,i,t.prev)<0&&zt(t.next,i,i.next)<0}function so(i,t,e,r){let s=i;do s.z===0&&(s.z=Tr(s.x,s.y,t,e,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,no(s)}function no(i){let t,e,r,s,n,o,a,h,u=1;do{for(e=i,i=null,n=null,o=0;e;){for(o++,r=e,a=0,t=0;t<u&&(a++,r=r.nextZ,!!r);t++);for(h=u;a>0||h>0&&r;)a!==0&&(h===0||!r||e.z<=r.z)?(s=e,e=e.nextZ,a--):(s=r,r=r.nextZ,h--),n?n.nextZ=s:i=s,s.prevZ=n,n=s;e=r}n.nextZ=null,u*=2}while(o>1);return i}function Tr(i,t,e,r,s){return i=(i-e)*s|0,t=(t-r)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function ao(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function Ge(i,t,e,r,s,n,o,a){return(s-o)*(t-a)>=(i-o)*(n-a)&&(i-o)*(r-a)>=(e-o)*(t-a)&&(e-o)*(n-a)>=(s-o)*(r-a)}function oo(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!ho(i,t)&&(fi(i,t)&&fi(t,i)&&uo(i,t)&&(zt(i.prev,i,t.prev)||zt(i,t.prev,t))||Ji(i,t)&&zt(i.prev,i,i.next)>0&&zt(t.prev,t,t.next)>0)}function zt(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Ji(i,t){return i.x===t.x&&i.y===t.y}function zs(i,t,e,r){const s=Xi(zt(i,t,e)),n=Xi(zt(i,t,r)),o=Xi(zt(e,r,i)),a=Xi(zt(e,r,t));return!!(s!==n&&o!==a||s===0&&Hi(i,e,t)||n===0&&Hi(i,r,t)||o===0&&Hi(e,i,r)||a===0&&Hi(e,t,r))}function Hi(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Xi(i){return i>0?1:i<0?-1:0}function ho(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&zs(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function fi(i,t){return zt(i.prev,i,i.next)<0?zt(i,t,i.next)>=0&&zt(i,i.prev,t)>=0:zt(i,t,i.prev)<0||zt(i,i.next,t)<0}function uo(i,t){let e=i,r=!1;const s=(i.x+t.x)/2,n=(i.y+t.y)/2;do e.y>n!=e.next.y>n&&e.next.y!==e.y&&s<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next;while(e!==i);return r}function Is(i,t){const e=new Fr(i.i,i.x,i.y),r=new Fr(t.i,t.x,t.y),s=i.next,n=t.prev;return i.next=t,t.prev=i,e.next=s,s.prev=e,r.next=e,e.prev=r,n.next=r,r.prev=n,r}function Bs(i,t,e,r){const s=new Fr(i,t,e);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function di(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Fr(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lo(i,t,e,r){let s=0;for(let n=t,o=e-r;n<e;n+=r)s+=(i[o]-i[n])*(i[n+1]+i[o+1]),o=n;return s}class ve{static area(t){const e=t.length;let r=0;for(let s=e-1,n=0;n<e;s=n++)r+=t[s].x*t[n].y-t[n].x*t[s].y;return r*.5}static isClockWise(t){return ve.area(t)<0}static triangulateShape(t,e){const r=[],s=[],n=[];Ts(t),Fs(r,t);let o=t.length;e.forEach(Ts);for(let h=0;h<e.length;h++)s.push(o),o+=e[h].length,Fs(r,e[h]);const a=Ha.triangulate(r,s);for(let h=0;h<a.length;h+=3)n.push(a.slice(h,h+3));return n}}function Ts(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function Fs(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class Pr extends je{constructor(t=new Zi([new dt(.5,.5),new dt(-.5,.5),new dt(-.5,-.5),new dt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const r=this,s=[],n=[];for(let a=0,h=t.length;a<h;a++){const u=t[a];o(u)}this.setAttribute("position",new Ce(s,3)),this.setAttribute("uv",new Ce(n,2)),this.computeVertexNormals();function o(a){const h=[],u=e.curveSegments!==void 0?e.curveSegments:12,c=e.steps!==void 0?e.steps:1,f=e.depth!==void 0?e.depth:1;let p=e.bevelEnabled!==void 0?e.bevelEnabled:!0,l=e.bevelThickness!==void 0?e.bevelThickness:.2,m=e.bevelSize!==void 0?e.bevelSize:l-.1,y=e.bevelOffset!==void 0?e.bevelOffset:0,v=e.bevelSegments!==void 0?e.bevelSegments:3;const M=e.extrudePath,S=e.UVGenerator!==void 0?e.UVGenerator:co;let C,T=!1,F,L,U,V;M&&(C=M.getSpacedPoints(c),T=!0,p=!1,F=M.computeFrenetFrames(c,!1),L=new tt,U=new tt,V=new tt),p||(v=0,l=0,m=0,y=0);const W=a.extractPoints(u);let J=W.shape;const et=W.holes;if(!ve.isClockWise(J)){J=J.reverse();for(let rt=0,st=et.length;rt<st;rt++){const g=et[rt];ve.isClockWise(g)&&(et[rt]=g.reverse())}}const Z=ve.triangulateShape(J,et),A=J;for(let rt=0,st=et.length;rt<st;rt++){const g=et[rt];J=J.concat(g)}function H(rt,st,g){return st||console.error("THREE.ExtrudeGeometry: vec does not exist"),rt.clone().addScaledVector(st,g)}const lt=J.length,Q=Z.length;function pt(rt,st,g){let G,O,_;const w=rt.x-st.x,b=rt.y-st.y,z=g.x-rt.x,k=g.y-rt.y,B=w*w+b*b,R=w*k-b*z;if(Math.abs(R)>Number.EPSILON){const Y=Math.sqrt(B),D=Math.sqrt(z*z+k*k),at=st.x-b/Y,E=st.y+w/Y,d=g.x-k/D,x=g.y+z/D,I=((d-at)*k-(x-E)*z)/(w*k-b*z);G=at+w*I-rt.x,O=E+b*I-rt.y;const N=G*G+O*O;if(N<=2)return new dt(G,O);_=Math.sqrt(N/2)}else{let Y=!1;w>Number.EPSILON?z>Number.EPSILON&&(Y=!0):w<-Number.EPSILON?z<-Number.EPSILON&&(Y=!0):Math.sign(b)===Math.sign(k)&&(Y=!0),Y?(G=-b,O=w,_=Math.sqrt(B)):(G=w,O=b,_=Math.sqrt(B/2))}return new dt(G/_,O/_)}const K=[];for(let rt=0,st=A.length,g=st-1,G=rt+1;rt<st;rt++,g++,G++)g===st&&(g=0),G===st&&(G=0),K[rt]=pt(A[rt],A[g],A[G]);const ct=[];let q,j=K.concat();for(let rt=0,st=et.length;rt<st;rt++){const g=et[rt];q=[];for(let G=0,O=g.length,_=O-1,w=G+1;G<O;G++,_++,w++)_===O&&(_=0),w===O&&(w=0),q[G]=pt(g[G],g[_],g[w]);ct.push(q),j=j.concat(q)}for(let rt=0;rt<v;rt++){const st=rt/v,g=l*Math.cos(st*Math.PI/2),G=m*Math.sin(st*Math.PI/2)+y;for(let O=0,_=A.length;O<_;O++){const w=H(A[O],K[O],G);Mt(w.x,w.y,-g)}for(let O=0,_=et.length;O<_;O++){const w=et[O];q=ct[O];for(let b=0,z=w.length;b<z;b++){const k=H(w[b],q[b],G);Mt(k.x,k.y,-g)}}}const ft=m+y;for(let rt=0;rt<lt;rt++){const st=p?H(J[rt],j[rt],ft):J[rt];T?(U.copy(F.normals[0]).multiplyScalar(st.x),L.copy(F.binormals[0]).multiplyScalar(st.y),V.copy(C[0]).add(U).add(L),Mt(V.x,V.y,V.z)):Mt(st.x,st.y,0)}for(let rt=1;rt<=c;rt++)for(let st=0;st<lt;st++){const g=p?H(J[st],j[st],ft):J[st];T?(U.copy(F.normals[rt]).multiplyScalar(g.x),L.copy(F.binormals[rt]).multiplyScalar(g.y),V.copy(C[rt]).add(U).add(L),Mt(V.x,V.y,V.z)):Mt(g.x,g.y,f/c*rt)}for(let rt=v-1;rt>=0;rt--){const st=rt/v,g=l*Math.cos(st*Math.PI/2),G=m*Math.sin(st*Math.PI/2)+y;for(let O=0,_=A.length;O<_;O++){const w=H(A[O],K[O],G);Mt(w.x,w.y,f+g)}for(let O=0,_=et.length;O<_;O++){const w=et[O];q=ct[O];for(let b=0,z=w.length;b<z;b++){const k=H(w[b],q[b],G);T?Mt(k.x,k.y+C[c-1].y,C[c-1].x+g):Mt(k.x,k.y,f+g)}}}ht(),nt();function ht(){const rt=s.length/3;if(p){let st=0,g=lt*st;for(let G=0;G<Q;G++){const O=Z[G];mt(O[2]+g,O[1]+g,O[0]+g)}st=c+v*2,g=lt*st;for(let G=0;G<Q;G++){const O=Z[G];mt(O[0]+g,O[1]+g,O[2]+g)}}else{for(let st=0;st<Q;st++){const g=Z[st];mt(g[2],g[1],g[0])}for(let st=0;st<Q;st++){const g=Z[st];mt(g[0]+lt*c,g[1]+lt*c,g[2]+lt*c)}}r.addGroup(rt,s.length/3-rt,0)}function nt(){const rt=s.length/3;let st=0;Et(A,st),st+=A.length;for(let g=0,G=et.length;g<G;g++){const O=et[g];Et(O,st),st+=O.length}r.addGroup(rt,s.length/3-rt,1)}function Et(rt,st){let g=rt.length;for(;--g>=0;){const G=g;let O=g-1;O<0&&(O=rt.length-1);for(let _=0,w=c+v*2;_<w;_++){const b=lt*_,z=lt*(_+1),k=st+G+b,B=st+O+b,R=st+O+z,Y=st+G+z;gt(k,B,R,Y)}}}function Mt(rt,st,g){h.push(rt),h.push(st),h.push(g)}function mt(rt,st,g){wt(rt),wt(st),wt(g);const G=s.length/3,O=S.generateTopUV(r,s,G-3,G-2,G-1);vt(O[0]),vt(O[1]),vt(O[2])}function gt(rt,st,g,G){wt(rt),wt(st),wt(G),wt(st),wt(g),wt(G);const O=s.length/3,_=S.generateSideWallUV(r,s,O-6,O-3,O-2,O-1);vt(_[0]),vt(_[1]),vt(_[3]),vt(_[1]),vt(_[2]),vt(_[3])}function wt(rt){s.push(h[rt*3+0]),s.push(h[rt*3+1]),s.push(h[rt*3+2])}function vt(rt){n.push(rt.x),n.push(rt.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,r=this.parameters.options;return fo(e,r,t)}static fromJSON(t,e){const r=[];for(let n=0,o=t.shapes.length;n<o;n++){const a=e[t.shapes[n]];r.push(a)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new Br[s.type]().fromJSON(s)),new Pr(r,t.options)}}const co={generateTopUV:function(i,t,e,r,s){const n=t[e*3],o=t[e*3+1],a=t[r*3],h=t[r*3+1],u=t[s*3],c=t[s*3+1];return[new dt(n,o),new dt(a,h),new dt(u,c)]},generateSideWallUV:function(i,t,e,r,s,n){const o=t[e*3],a=t[e*3+1],h=t[e*3+2],u=t[r*3],c=t[r*3+1],f=t[r*3+2],p=t[s*3],l=t[s*3+1],m=t[s*3+2],y=t[n*3],v=t[n*3+1],M=t[n*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new dt(o,1-h),new dt(u,1-f),new dt(p,1-m),new dt(y,1-M)]:[new dt(a,1-h),new dt(c,1-f),new dt(l,1-m),new dt(v,1-M)]}};function fo(i,t,e){if(e.shapes=[],Array.isArray(i))for(let r=0,s=i.length;r<s;r++){const n=i[r];e.shapes.push(n.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class Nr extends je{constructor(t=new Zi([new dt(0,.5),new dt(-.5,-.5),new dt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const r=[],s=[],n=[],o=[];let a=0,h=0;if(Array.isArray(t)===!1)u(t);else for(let c=0;c<t.length;c++)u(t[c]),this.addGroup(a,h,c),a+=h,h=0;this.setIndex(r),this.setAttribute("position",new Ce(s,3)),this.setAttribute("normal",new Ce(n,3)),this.setAttribute("uv",new Ce(o,2));function u(c){const f=s.length/3,p=c.extractPoints(e);let l=p.shape;const m=p.holes;ve.isClockWise(l)===!1&&(l=l.reverse());for(let v=0,M=m.length;v<M;v++){const S=m[v];ve.isClockWise(S)===!0&&(m[v]=S.reverse())}const y=ve.triangulateShape(l,m);for(let v=0,M=m.length;v<M;v++){const S=m[v];l=l.concat(S)}for(let v=0,M=l.length;v<M;v++){const S=l[v];s.push(S.x,S.y,0),n.push(0,0,1),o.push(S.x,S.y)}for(let v=0,M=y.length;v<M;v++){const S=y[v],C=S[0]+f,T=S[1]+f,F=S[2]+f;r.push(C,T,F),h+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return po(e,t)}static fromJSON(t,e){const r=[];for(let s=0,n=t.shapes.length;s<n;s++){const o=e[t.shapes[s]];r.push(o)}return new Nr(r,t.curveSegments)}}function po(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,r=i.length;e<r;e++){const s=i[e];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class mo{constructor(t,e,r){const s=this;let n=!1,o=0,a=0,h;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(c){a++,n===!1&&s.onStart!==void 0&&s.onStart(c,o,a),n=!0},this.itemEnd=function(c){o++,s.onProgress!==void 0&&s.onProgress(c,o,a),o===a&&(n=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(c){s.onError!==void 0&&s.onError(c)},this.resolveURL=function(c){return h?h(c):c},this.setURLModifier=function(c){return h=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,p=u.length;f<p;f+=2){const l=u[f],m=u[f+1];if(l.global&&(l.lastIndex=0),l.test(c))return m}return null}}}const yo=new mo;class Ps{constructor(t){this.manager=t!==void 0?t:yo,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const r=this;return new Promise(function(s,n){r.load(t,s,e,n)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Ps.DEFAULT_MATERIAL_NAME="__DEFAULT",typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ns}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ns);function Ns(i,t=!1){const e=i[0].index!==null,r=new Set(Object.keys(i[0].attributes)),s=new Set(Object.keys(i[0].morphAttributes)),n={},o={},a=i[0].morphTargetsRelative,h=new je;let u=0;for(let c=0;c<i.length;++c){const f=i[c];let p=0;if(e!==(f.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const l in f.attributes){if(!r.has(l))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+l+'" attribute exists among all geometries, or in none of them.'),null;n[l]===void 0&&(n[l]=[]),n[l].push(f.attributes[l]),p++}if(p!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(a!==f.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const l in f.morphAttributes){if(!s.has(l))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;o[l]===void 0&&(o[l]=[]),o[l].push(f.morphAttributes[l])}if(t){let l;if(e)l=f.index.count;else if(f.attributes.position!==void 0)l=f.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;h.addGroup(u,l,c),u+=l}}if(e){let c=0;const f=[];for(let p=0;p<i.length;++p){const l=i[p].index;for(let m=0;m<l.count;++m)f.push(l.getX(m)+c);c+=i[p].attributes.position.count}h.setIndex(f)}for(const c in n){const f=Os(n[c]);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" attribute."),null;h.setAttribute(c,f)}for(const c in o){const f=o[c][0].length;if(f===0)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[c]=[];for(let p=0;p<f;++p){const l=[];for(let y=0;y<o[c].length;++y)l.push(o[c][y][p]);const m=Os(l);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" morphAttribute."),null;h.morphAttributes[c].push(m)}}return h}function Os(i){let t,e,r,s=-1,n=0;for(let u=0;u<i.length;++u){const c=i[u];if(t===void 0&&(t=c.array.constructor),t!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(e===void 0&&(e=c.itemSize),e!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=c.normalized),r!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(s===-1&&(s=c.gpuType),s!==c.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;n+=c.count*e}const o=new t(n),a=new Se(o,e,r);let h=0;for(let u=0;u<i.length;++u){const c=i[u];if(c.isInterleavedBufferAttribute){const f=h/e;for(let p=0,l=c.count;p<l;p++)for(let m=0;m<e;m++){const y=c.getComponent(p,m);a.setComponent(p+f,m,y)}}else o.set(c.array,h);h+=c.count*e}return s!==void 0&&(a.gpuType=s),a}function xo(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var ze=1,Ie=2,We=3,go=4,Or=5,Rs=6378137,vo=6356752314e-3,Ls=.0066943799901413165,pi=484813681109536e-20,it=Math.PI/2,_o=.16666666666666666,wo=.04722222222222222,Mo=.022156084656084655,ot=1e-10,Rt=.017453292519943295,oe=57.29577951308232,bt=Math.PI/4,mi=Math.PI*2,Bt=3.14159265359,Wt={};Wt.greenwich=0,Wt.lisbon=-9.131906111111,Wt.paris=2.337229166667,Wt.bogota=-74.080916666667,Wt.madrid=-3.687938888889,Wt.rome=12.452333333333,Wt.bern=7.439583333333,Wt.jakarta=106.807719444444,Wt.ferro=-17.666666666667,Wt.brussels=4.367975,Wt.stockholm=18.058277777778,Wt.athens=23.7163375,Wt.oslo=10.722916666667;var bo={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Us=/[\s_\-\/\(\)]/g;function _e(i,t){if(i[t])return i[t];for(var e=Object.keys(i),r=t.toLowerCase().replace(Us,""),s=-1,n,o;++s<e.length;)if(n=e[s],o=n.toLowerCase().replace(Us,""),o===r)return i[n]}function Rr(i){var t={},e=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,h){var u=h.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),r,s,n,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*Rt},lat_1:function(a){t.lat1=a*Rt},lat_2:function(a){t.lat2=a*Rt},lat_ts:function(a){t.lat_ts=a*Rt},lon_0:function(a){t.long0=a*Rt},lon_1:function(a){t.long1=a*Rt},lon_2:function(a){t.long2=a*Rt},alpha:function(a){t.alpha=parseFloat(a)*Rt},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*Rt},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(h){return parseFloat(h)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var h=_e(bo,a);h&&(t.to_meter=h.to_meter)},from_greenwich:function(a){t.from_greenwich=a*Rt},pm:function(a){var h=_e(Wt,a);t.from_greenwich=(h||parseFloat(a))*Rt},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var h="ewnsud";a.length===3&&h.indexOf(a.substr(0,1))!==-1&&h.indexOf(a.substr(1,1))!==-1&&h.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(r in e)s=e[r],r in o?(n=o[r],typeof n=="function"?n(s):t[n]=s):t[r]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var yi=1,Ds=2,qs=3,Vi=4,js=5,Lr=-1,Ao=/\s/,Eo=/[A-Za-z]/,So=/[A-Za-z84_]/,Yi=/[,\]]/,Gs=/[\d\.E\-\+]/;function de(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=yi}de.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==Vi)for(;Ao.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case yi:return this.neutral(i);case Ds:return this.keyword(i);case Vi:return this.quoted(i);case js:return this.afterquote(i);case qs:return this.number(i);case Lr:return}},de.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=Vi;return}if(Yi.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)},de.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=yi;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=yi,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Lr);return}},de.prototype.number=function(i){if(Gs.test(i)){this.word+=i;return}if(Yi.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)},de.prototype.quoted=function(i){if(i==='"'){this.state=js;return}this.word+=i},de.prototype.keyword=function(i){if(So.test(i)){this.word+=i;return}if(i==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=yi;return}if(Yi.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)},de.prototype.neutral=function(i){if(Eo.test(i)){this.word=i,this.state=Ds;return}if(i==='"'){this.word="",this.state=Vi;return}if(Gs.test(i)){this.word=i,this.state=qs;return}if(Yi.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)},de.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Lr)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Co(i){var t=new de(i);return t.output()}function Ws(i,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var r=t?{}:i,s=e.reduce(function(n,o){return $e(o,n),n},r);t&&(i[t]=s)}function $e(i,t){if(!Array.isArray(i)){t[i]=!0;return}var e=i.shift();if(e==="PARAMETER"&&(e=i.shift()),i.length===1){if(Array.isArray(i[0])){t[e]={},$e(i[0],t[e]);return}t[e]=i[0];return}if(!i.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=i;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(i);return}Array.isArray(e)||(t[e]={});var r;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&$e(i[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:i[0],a:i[1],rf:i[2]},i.length===4&&$e(i[3],t[e]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":i[0]=["name",i[0]],Ws(t,e,i);return;default:for(r=-1;++r<i.length;)if(!Array.isArray(i[r]))return $e(i,t[e]);return Ws(t,e,i)}}var ko=.017453292519943295;function zo(i,t){var e=t[0],r=t[1];!(e in i)&&r in i&&(i[e]=i[r],t.length===3&&(i[e]=t[2](i[e])))}function he(i){return i*ko}function Io(i){if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var t="",e=0,r=i.AXIS.length;e<r;++e){var s=[i.AXIS[e][0].toLowerCase(),i.AXIS[e][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(i.axis=t)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var n=i.GEOGCS;i.type==="GEOGCS"&&(n=i),n&&(n.DATUM?i.datumCode=n.DATUM.name.toLowerCase():i.datumCode=n.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),(i.datumCode==="new_zealand_geodetic_datum_1949"||i.datumCode==="new_zealand_1949")&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode.slice(-6)==="_ferro"&&(i.datumCode=i.datumCode.slice(0,-6)),i.datumCode.slice(-8)==="_jakarta"&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(i.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=n.DATUM.SPHEROID.a,i.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),n.DATUM&&n.DATUM.TOWGS84&&(i.datum_params=n.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function o(u){var c=i.to_meter||1;return u*c}var a=function(u){return zo(i,u)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",he],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",he],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",he],["lat0","latitude_of_origin",he],["lat0","standard_parallel_1",he],["lat1","standard_parallel_1",he],["lat2","standard_parallel_2",he],["azimuth","Azimuth"],["alpha","azimuth",he],["srsCode","name"]];h.forEach(a),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=he(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=he(i.lat0>0?90:-90))}function $s(i){var t=Co(i),e=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",e]);var s={};return $e(t,s),Io(s),s}function qt(i){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?qt[i]=Rr(arguments[1]):qt[i]=$s(arguments[1]):qt[i]=e}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(r){Array.isArray(r)?qt.apply(t,r):qt(r)});if(typeof i=="string"){if(i in qt)return qt[i]}else"EPSG"in i?qt["EPSG:"+i.EPSG]=i:"ESRI"in i?qt["ESRI:"+i.ESRI]=i:"IAU2000"in i?qt["IAU2000:"+i.IAU2000]=i:console.log(i);return}}xo(qt);function Bo(i){return typeof i=="string"}function To(i){return i in qt}var Fo=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Po(i){return Fo.some(function(t){return i.indexOf(t)>-1})}var No=["3857","900913","3785","102113"];function Oo(i){var t=_e(i,"authority");if(t){var e=_e(t,"epsg");return e&&No.indexOf(e)>-1}}function Ro(i){var t=_e(i,"extension");if(t)return _e(t,"proj4")}function Lo(i){return i[0]==="+"}function Uo(i){if(Bo(i)){if(To(i))return qt[i];if(Po(i)){var t=$s(i);if(Oo(t))return qt["EPSG:3857"];var e=Ro(t);return e?Rr(e):t}if(Lo(i))return Rr(i)}else return i}function Zs(i,t){i=i||{};var e,r;if(!t)return i;for(r in t)e=t[r],e!==void 0&&(i[r]=e);return i}function ue(i,t,e){var r=i*t;return e/Math.sqrt(1-r*r)}function xi(i){return i<0?-1:1}function ut(i){return Math.abs(i)<=Bt?i:i-xi(i)*mi}function ie(i,t,e){var r=i*e,s=.5*i;return r=Math.pow((1-r)/(1+r),s),Math.tan(.5*(it-t))/r}function gi(i,t){for(var e=.5*i,r,s,n=it-2*Math.atan(t),o=0;o<=15;o++)if(r=i*Math.sin(n),s=it-2*Math.atan(t*Math.pow((1-r)/(1+r),e))-n,n+=s,Math.abs(s)<=1e-10)return n;return-9999}function Do(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ue(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function qo(i){var t=i.x,e=i.y;if(e*oe>90&&e*oe<-90&&t*oe>180&&t*oe<-180)return null;var r,s;if(Math.abs(Math.abs(e)-it)<=ot)return null;if(this.sphere)r=this.x0+this.a*this.k0*ut(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(bt+.5*e));else{var n=Math.sin(e),o=ie(this.e,e,n);r=this.x0+this.a*this.k0*ut(t-this.long0),s=this.y0-this.a*this.k0*Math.log(o)}return i.x=r,i.y=s,i}function jo(i){var t=i.x-this.x0,e=i.y-this.y0,r,s;if(this.sphere)s=it-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var n=Math.exp(-e/(this.a*this.k0));if(s=gi(this.e,n),s===-9999)return null}return r=ut(this.long0+t/(this.a*this.k0)),i.x=r,i.y=s,i}var Go=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],Wo={init:Do,forward:qo,inverse:jo,names:Go};function $o(){}function Js(i){return i}var Zo=["longlat","identity"],Jo={init:$o,forward:Js,inverse:Js,names:Zo},Ho=[Wo,Jo],Qi={},Ki=[];function Hs(i,t){var e=Ki.length;return i.names?(Ki[e]=i,i.names.forEach(function(r){Qi[r.toLowerCase()]=e}),this):(console.log(t),!0)}function Xo(i){if(!i)return!1;var t=i.toLowerCase();if(typeof Qi[t]<"u"&&Ki[Qi[t]])return Ki[Qi[t]]}function Vo(){Ho.forEach(Hs)}var Yo={start:Vo,add:Hs,get:Xo},yt={};yt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},yt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},yt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},yt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},yt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},yt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},yt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},yt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},yt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},yt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},yt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},yt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},yt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},yt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},yt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},yt.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},yt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},yt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},yt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},yt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},yt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},yt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},yt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},yt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},yt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},yt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},yt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},yt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},yt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},yt.hough={a:6378270,rf:297,ellipseName:"Hough"},yt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},yt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},yt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},yt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},yt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},yt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},yt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},yt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},yt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},yt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},yt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},yt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Qo=yt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};yt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Ko(i,t,e,r){var s=i*i,n=t*t,o=(s-n)/s,a=0;r?(i*=1-o*(_o+o*(wo+o*Mo)),s=i*i,o=0):a=Math.sqrt(o);var h=(s-n)/n;return{es:o,e:a,ep2:h}}function th(i,t,e,r,s){if(!i){var n=_e(yt,r);n||(n=Qo),i=n.a,t=n.b,e=n.rf}return e&&!t&&(t=(1-1/e)*i),(e===0||Math.abs(i-t)<ot)&&(s=!0,t=i),{a:i,b:t,rf:e,sphere:s}}var Ot={};Ot.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Ot.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Ot.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Ot.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Ot.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Ot.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Ot.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Ot.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},Ot.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Ot.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Ot.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Ot.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Ot.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Ot.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Ot.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Ot.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Ot.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function eh(i,t,e,r,s,n,o){var a={};return i===void 0||i==="none"?a.datum_type=Or:a.datum_type=go,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=ze),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Ie,a.datum_params[3]*=pi,a.datum_params[4]*=pi,a.datum_params[5]*=pi,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=We,a.grids=o),a.a=e,a.b=r,a.es=s,a.ep2=n,a}var Xs={};function ih(i,t){var e=new DataView(t),r=nh(e),s=ah(e,r),n=oh(e,s,r),o={header:s,subgrids:n};return Xs[i]=o,o}function rh(i){if(i===void 0)return null;var t=i.split(",");return t.map(sh)}function sh(i){if(i.length===0)return null;var t=i[0]==="@";return t&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:i,mandatory:!t,grid:Xs[i]||null,isNull:!1}}function Ze(i){return i/3600*Math.PI/180}function nh(i){var t=i.getInt32(8,!1);return t===11?!1:(t=i.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function ah(i,t){return{nFields:i.getInt32(8,t),nSubgridFields:i.getInt32(24,t),nSubgrids:i.getInt32(40,t),shiftType:Ur(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,t),fromSemiMinorAxis:i.getFloat64(136,t),toSemiMajorAxis:i.getFloat64(152,t),toSemiMinorAxis:i.getFloat64(168,t)}}function Ur(i,t,e){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(t,e)))}function oh(i,t,e){for(var r=176,s=[],n=0;n<t.nSubgrids;n++){var o=uh(i,r,e),a=lh(i,r,o,e),h=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[Ze(o.lowerLongitude),Ze(o.lowerLatitude)],del:[Ze(o.longitudeInterval),Ze(o.latitudeInterval)],lim:[h,u],count:o.gridNodeCount,cvs:hh(a)}),r+=176+o.gridNodeCount*16}return s}function hh(i){return i.map(function(t){return[Ze(t.longitudeShift),Ze(t.latitudeShift)]})}function uh(i,t,e){return{name:Ur(i,t+8,t+16).trim(),parent:Ur(i,t+24,t+24+8).trim(),lowerLatitude:i.getFloat64(t+72,e),upperLatitude:i.getFloat64(t+88,e),lowerLongitude:i.getFloat64(t+104,e),upperLongitude:i.getFloat64(t+120,e),latitudeInterval:i.getFloat64(t+136,e),longitudeInterval:i.getFloat64(t+152,e),gridNodeCount:i.getInt32(t+168,e)}}function lh(i,t,e,r){for(var s=t+176,n=16,o=[],a=0;a<e.gridNodeCount;a++){var h={latitudeShift:i.getFloat32(s+a*n,r),longitudeShift:i.getFloat32(s+a*n+4,r),latitudeAccuracy:i.getFloat32(s+a*n+8,r),longitudeAccuracy:i.getFloat32(s+a*n+12,r)};o.push(h)}return o}function le(i,t){if(!(this instanceof le))return new le(i);t=t||function(u){if(u)throw u};var e=Uo(i);if(typeof e!="object"){t(i);return}var r=le.projections.get(e.projName);if(!r){t(i);return}if(e.datumCode&&e.datumCode!=="none"){var s=_e(Ot,e.datumCode);s&&(e.datum_params=e.datum_params||(s.towgs84?s.towgs84.split(","):null),e.ellps=s.ellipse,e.datumName=s.datumName?s.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var n=th(e.a,e.b,e.rf,e.ellps,e.sphere),o=Ko(n.a,n.b,n.rf,e.R_A),a=rh(e.nadgrids),h=e.datum||eh(e.datumCode,e.datum_params,n.a,n.b,o.es,o.ep2,a);Zs(this,e),Zs(this,r),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=h,this.init(),t(null,this)}le.projections=Yo,le.projections.start();function ch(i,t){return i.datum_type!==t.datum_type||i.a!==t.a||Math.abs(i.es-t.es)>5e-11?!1:i.datum_type===ze?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]:i.datum_type===Ie?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]&&i.datum_params[3]===t.datum_params[3]&&i.datum_params[4]===t.datum_params[4]&&i.datum_params[5]===t.datum_params[5]&&i.datum_params[6]===t.datum_params[6]:!0}function Vs(i,t,e){var r=i.x,s=i.y,n=i.z?i.z:0,o,a,h,u;if(s<-it&&s>-1.001*it)s=-it;else if(s>it&&s<1.001*it)s=it;else{if(s<-it)return{x:-1/0,y:-1/0,z:i.z};if(s>it)return{x:1/0,y:1/0,z:i.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(s),u=Math.cos(s),h=a*a,o=e/Math.sqrt(1-t*h),{x:(o+n)*u*Math.cos(r),y:(o+n)*u*Math.sin(r),z:(o*(1-t)+n)*a}}function Ys(i,t,e,r){var s=1e-12,n=s*s,o=30,a,h,u,c,f,p,l,m,y,v,M,S,C,T=i.x,F=i.y,L=i.z?i.z:0,U,V,W;if(a=Math.sqrt(T*T+F*F),h=Math.sqrt(T*T+F*F+L*L),a/e<s){if(U=0,h/e<s)return V=it,W=-r,{x:i.x,y:i.y,z:i.z}}else U=Math.atan2(F,T);u=L/h,c=a/h,f=1/Math.sqrt(1-t*(2-t)*c*c),m=c*(1-t)*f,y=u*f,C=0;do C++,l=e/Math.sqrt(1-t*y*y),W=a*m+L*y-l*(1-t*y*y),p=t*l/(l+W),f=1/Math.sqrt(1-p*(2-p)*c*c),v=c*(1-p)*f,M=u*f,S=M*m-v*y,m=v,y=M;while(S*S>n&&C<o);return V=Math.atan(M/Math.abs(v)),{x:U,y:V,z:W}}function fh(i,t,e){if(t===ze)return{x:i.x+e[0],y:i.y+e[1],z:i.z+e[2]};if(t===Ie){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=e[6];return{x:u*(i.x-h*i.y+a*i.z)+r,y:u*(h*i.x+i.y-o*i.z)+s,z:u*(-a*i.x+o*i.y+i.z)+n}}}function dh(i,t,e){if(t===ze)return{x:i.x-e[0],y:i.y-e[1],z:i.z-e[2]};if(t===Ie){var r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=(i.x-r)/u,f=(i.y-s)/u,p=(i.z-n)/u;return{x:c+h*f-a*p,y:-h*c+f+o*p,z:a*c-o*f+p}}}function tr(i){return i===ze||i===Ie}function ph(i,t,e){if(ch(i,t)||i.datum_type===Or||t.datum_type===Or)return e;var r=i.a,s=i.es;if(i.datum_type===We){var n=Qs(i,!1,e);if(n!==0)return;r=Rs,s=Ls}var o=t.a,a=t.b,h=t.es;if(t.datum_type===We&&(o=Rs,a=vo,h=Ls),s===h&&r===o&&!tr(i.datum_type)&&!tr(t.datum_type))return e;if(e=Vs(e,s,r),tr(i.datum_type)&&(e=fh(e,i.datum_type,i.datum_params)),tr(t.datum_type)&&(e=dh(e,t.datum_type,t.datum_params)),e=Ys(e,h,o,a),t.datum_type===We){var u=Qs(t,!0,e);if(u!==0)return}return e}function Qs(i,t,e){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-e.x,y:e.y},s={x:Number.NaN,y:Number.NaN},n=[];t:for(var o=0;o<i.grids.length;o++){var a=i.grids[o];if(n.push(a.name),a.isNull){s=r;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var h=a.grid.subgrids,u=0,c=h.length;u<c;u++){var f=h[u],p=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,l=f.ll[0]-p,m=f.ll[1]-p,y=f.ll[0]+(f.lim[0]-1)*f.del[0]+p,v=f.ll[1]+(f.lim[1]-1)*f.del[1]+p;if(!(m>r.y||l>r.x||v<r.y||y<r.x)&&(s=mh(r,t,f),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*oe+" "+r.y*oe+" tried: '"+n+"'"),-1):(e.x=-s.x,e.y=s.y,0)}function mh(i,t,e){var r={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return r;var s={x:i.x,y:i.y};s.x-=e.ll[0],s.y-=e.ll[1],s.x=ut(s.x-Math.PI)+Math.PI;var n=Ks(s,e);if(t){if(isNaN(n.x))return r;n.x=s.x-n.x,n.y=s.y-n.y;var o=9,a=1e-12,h,u;do{if(u=Ks(n,e),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:s.x-(u.x+n.x),y:s.y-(u.y+n.y)},n.x+=h.x,n.y+=h.y}while(o--&&Math.abs(h.x)>a&&Math.abs(h.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=ut(n.x+e.ll[0]),r.y=n.y+e.ll[1]}else isNaN(n.x)||(r.x=i.x+n.x,r.y=i.y+n.y);return r}function Ks(i,t){var e={x:i.x/t.del[0],y:i.y/t.del[1]},r={x:Math.floor(e.x),y:Math.floor(e.y)},s={x:e.x-1*r.x,y:e.y-1*r.y},n={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=t.lim[0]||r.y<0||r.y>=t.lim[1])return n;o=r.y*t.lim[0]+r.x;var a={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var h={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var u={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var c={x:t.cvs[o][0],y:t.cvs[o][1]},f=s.x*s.y,p=s.x*(1-s.y),l=(1-s.x)*(1-s.y),m=(1-s.x)*s.y;return n.x=l*a.x+p*h.x+m*c.x+f*u.x,n.y=l*a.y+p*h.y+m*c.y+f*u.y,n}function tn(i,t,e){var r=e.x,s=e.y,n=e.z||0,o,a,h,u={};for(h=0;h<3;h++)if(!(t&&h===2&&e.z===void 0))switch(h===0?(o=r,"ew".indexOf(i.axis[h])!==-1?a="x":a="y"):h===1?(o=s,"ns".indexOf(i.axis[h])!==-1?a="y":a="x"):(o=n,a="z"),i.axis[h]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":e[a]!==void 0&&(u.z=o);break;case"d":e[a]!==void 0&&(u.z=-o);break;default:return null}return u}function en(i){var t={x:i[0],y:i[1]};return i.length>2&&(t.z=i[2]),i.length>3&&(t.m=i[3]),t}function yh(i){rn(i.x),rn(i.y)}function rn(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function xh(i,t){return(i.datum.datum_type===ze||i.datum.datum_type===Ie||i.datum.datum_type===We)&&t.datumCode!=="WGS84"||(t.datum.datum_type===ze||t.datum.datum_type===Ie||t.datum.datum_type===We)&&i.datumCode!=="WGS84"}function er(i,t,e,r){var s;Array.isArray(e)?e=en(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var n=e.z!==void 0;if(yh(e),i.datum&&t.datum&&xh(i,t)&&(s=new le("WGS84"),e=er(i,s,e,r),i=s),r&&i.axis!=="enu"&&(e=tn(i,!1,e)),i.projName==="longlat")e={x:e.x*Rt,y:e.y*Rt,z:e.z||0};else if(i.to_meter&&(e={x:e.x*i.to_meter,y:e.y*i.to_meter,z:e.z||0}),e=i.inverse(e),!e)return;if(i.from_greenwich&&(e.x+=i.from_greenwich),e=ph(i.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*oe,y:e.y*oe,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),r&&t.axis!=="enu"?tn(t,!0,e):(e&&!n&&delete e.z,e)}var sn=le("WGS84");function Dr(i,t,e,r){var s,n,o;return Array.isArray(e)?(s=er(i,t,e,r)||{x:NaN,y:NaN},e.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(e.splice(3)):[s.x,s.y,e[2]].concat(e.splice(3)):[s.x,s.y].concat(e.splice(2)):[s.x,s.y]):(n=er(i,t,e,r),o=Object.keys(e),o.length===2||o.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;n[a]=e[a]}),n)}function nn(i){return i instanceof le?i:i.oProj?i.oProj:le(i)}function Ht(i,t,e){i=nn(i);var r=!1,s;return typeof t>"u"?(t=i,i=sn,r=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=i,i=sn,r=!0),t=nn(t),e?Dr(i,t,e):(s={forward:function(n,o){return Dr(i,t,n,o)},inverse:function(n,o){return Dr(t,i,n,o)}},r&&(s.oProj=t),s)}var an=6,on="AJSAJS",hn="AFAFAF",Je=65,$t=73,Yt=79,vi=86,_i=90,gh={forward:un,inverse:vh,toPoint:ln};function un(i,t){return t=t||5,Mh(_h({lat:i[1],lon:i[0]}),t)}function vh(i){var t=jr(dn(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function ln(i){var t=jr(dn(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function qr(i){return i*(Math.PI/180)}function cn(i){return 180*(i/Math.PI)}function _h(i){var t=i.lat,e=i.lon,r=6378137,s=.00669438,n=.9996,o,a,h,u,c,f,p,l=qr(t),m=qr(e),y,v;v=Math.floor((e+180)/6)+1,e===180&&(v=60),t>=56&&t<64&&e>=3&&e<12&&(v=32),t>=72&&t<84&&(e>=0&&e<9?v=31:e>=9&&e<21?v=33:e>=21&&e<33?v=35:e>=33&&e<42&&(v=37)),o=(v-1)*6-180+3,y=qr(o),a=s/(1-s),h=r/Math.sqrt(1-s*Math.sin(l)*Math.sin(l)),u=Math.tan(l)*Math.tan(l),c=a*Math.cos(l)*Math.cos(l),f=Math.cos(l)*(m-y),p=r*((1-s/4-3*s*s/64-5*s*s*s/256)*l-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*l)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*l)-35*s*s*s/3072*Math.sin(6*l));var M=n*h*(f+(1-u+c)*f*f*f/6+(5-18*u+u*u+72*c-58*a)*f*f*f*f*f/120)+5e5,S=n*(p+h*Math.tan(l)*(f*f/2+(5-u+9*c+4*c*c)*f*f*f*f/24+(61-58*u+u*u+600*c-330*a)*f*f*f*f*f*f/720));return t<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(M),zoneNumber:v,zoneLetter:wh(t)}}function jr(i){var t=i.northing,e=i.easting,r=i.zoneLetter,s=i.zoneNumber;if(s<0||s>60)return null;var n=.9996,o=6378137,a=.00669438,h,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,f,p,l,m,y,v,M,S,C=e-5e5,T=t;r<"N"&&(T-=1e7),v=(s-1)*6-180+3,h=a/(1-a),y=T/n,M=y/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),S=M+(3*u/2-27*u*u*u/32)*Math.sin(2*M)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*M)+151*u*u*u/96*Math.sin(6*M),c=o/Math.sqrt(1-a*Math.sin(S)*Math.sin(S)),f=Math.tan(S)*Math.tan(S),p=h*Math.cos(S)*Math.cos(S),l=o*(1-a)/Math.pow(1-a*Math.sin(S)*Math.sin(S),1.5),m=C/(c*n);var F=S-c*Math.tan(S)/l*(m*m/2-(5+3*f+10*p-4*p*p-9*h)*m*m*m*m/24+(61+90*f+298*p+45*f*f-252*h-3*p*p)*m*m*m*m*m*m/720);F=cn(F);var L=(m-(1+2*f+p)*m*m*m/6+(5-2*p+28*f-3*p*p+8*h+24*f*f)*m*m*m*m*m/120)/Math.cos(S);L=v+cn(L);var U;if(i.accuracy){var V=jr({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});U={top:V.lat,right:V.lon,bottom:F,left:L}}else U={lat:F,lon:L};return U}function wh(i){var t="Z";return 84>=i&&i>=72?t="X":72>i&&i>=64?t="W":64>i&&i>=56?t="V":56>i&&i>=48?t="U":48>i&&i>=40?t="T":40>i&&i>=32?t="S":32>i&&i>=24?t="R":24>i&&i>=16?t="Q":16>i&&i>=8?t="P":8>i&&i>=0?t="N":0>i&&i>=-8?t="M":-8>i&&i>=-16?t="L":-16>i&&i>=-24?t="K":-24>i&&i>=-32?t="J":-32>i&&i>=-40?t="H":-40>i&&i>=-48?t="G":-48>i&&i>=-56?t="F":-56>i&&i>=-64?t="E":-64>i&&i>=-72?t="D":-72>i&&i>=-80&&(t="C"),t}function Mh(i,t){var e="00000"+i.easting,r="00000"+i.northing;return i.zoneNumber+i.zoneLetter+bh(i.easting,i.northing,i.zoneNumber)+e.substr(e.length-5,t)+r.substr(r.length-5,t)}function bh(i,t,e){var r=fn(e),s=Math.floor(i/1e5),n=Math.floor(t/1e5)%20;return Ah(s,n,r)}function fn(i){var t=i%an;return t===0&&(t=an),t}function Ah(i,t,e){var r=e-1,s=on.charCodeAt(r),n=hn.charCodeAt(r),o=s+i-1,a=n+t,h=!1;o>_i&&(o=o-_i+Je-1,h=!0),(o===$t||s<$t&&o>$t||(o>$t||s<$t)&&h)&&o++,(o===Yt||s<Yt&&o>Yt||(o>Yt||s<Yt)&&h)&&(o++,o===$t&&o++),o>_i&&(o=o-_i+Je-1),a>vi?(a=a-vi+Je-1,h=!0):h=!1,(a===$t||n<$t&&a>$t||(a>$t||n<$t)&&h)&&a++,(a===Yt||n<Yt&&a>Yt||(a>Yt||n<Yt)&&h)&&(a++,a===$t&&a++),a>vi&&(a=a-vi+Je-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function dn(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var t=i.length,e=null,r="",s,n=0;!/[A-Z]/.test(s=i.charAt(n));){if(n>=2)throw"MGRSPoint bad conversion from: "+i;r+=s,n++}var o=parseInt(r,10);if(n===0||n+3>t)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(n++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;e=i.substring(n,n+=2);for(var h=fn(o),u=Eh(e.charAt(0),h),c=Sh(e.charAt(1),h);c<Ch(a);)c+=2e6;var f=t-n;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var p=f/2,l=0,m=0,y,v,M,S,C;return p>0&&(y=1e5/Math.pow(10,p),v=i.substring(n,n+p),l=parseFloat(v)*y,M=i.substring(n+p),m=parseFloat(M)*y),S=l+u,C=m+c,{easting:S,northing:C,zoneLetter:a,zoneNumber:o,accuracy:y}}function Eh(i,t){for(var e=on.charCodeAt(t-1),r=1e5,s=!1;e!==i.charCodeAt(0);){if(e++,e===$t&&e++,e===Yt&&e++,e>_i){if(s)throw"Bad character: "+i;e=Je,s=!0}r+=1e5}return r}function Sh(i,t){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var e=hn.charCodeAt(t-1),r=0,s=!1;e!==i.charCodeAt(0);){if(e++,e===$t&&e++,e===Yt&&e++,e>vi){if(s)throw"Bad character: "+i;e=Je,s=!0}r+=1e5}return r}function Ch(i){var t;switch(i){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+i}function He(i,t,e){if(!(this instanceof He))return new He(i,t,e);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof t>"u"){var r=i.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=i,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}He.fromMGRS=function(i){return new He(ln(i))},He.prototype.toMGRS=function(i){return un([this.x,this.y],i)};var kh=1,zh=.25,pn=.046875,mn=.01953125,yn=.01068115234375,Ih=.75,Bh=.46875,Th=.013020833333333334,Fh=.007120768229166667,Ph=.3645833333333333,Nh=.005696614583333333,Oh=.3076171875;function xn(i){var t=[];t[0]=kh-i*(zh+i*(pn+i*(mn+i*yn))),t[1]=i*(Ih-i*(pn+i*(mn+i*yn)));var e=i*i;return t[2]=e*(Bh-i*(Th+i*Fh)),e*=i,t[3]=e*(Ph-i*Nh),t[4]=e*i*Oh,t}function ir(i,t,e,r){return e*=t,t*=t,r[0]*i-e*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))}var Rh=20;function gn(i,t,e){for(var r=1/(1-t),s=i,n=Rh;n;--n){var o=Math.sin(s),a=1-t*o*o;if(a=(ir(s,o,Math.cos(s),e)-i)*(a*Math.sqrt(a))*r,s-=a,Math.abs(a)<ot)return s}return s}function Lh(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=xn(this.es),this.ml0=ir(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Uh(i){var t=i.x,e=i.y,r=ut(t-this.long0),s,n,o,a=Math.sin(e),h=Math.cos(e);if(this.es){var c=h*r,f=Math.pow(c,2),p=this.ep2*Math.pow(h,2),l=Math.pow(p,2),m=Math.abs(h)>ot?Math.tan(e):0,y=Math.pow(m,2),v=Math.pow(y,2);s=1-this.es*Math.pow(a,2),c=c/Math.sqrt(s);var M=ir(e,a,h,this.en);n=this.a*(this.k0*c*(1+f/6*(1-y+p+f/20*(5-18*y+v+14*p-58*y*p+f/42*(61+179*v-v*y-479*y)))))+this.x0,o=this.a*(this.k0*(M-this.ml0+a*r*c/2*(1+f/12*(5-y+9*p+4*l+f/30*(61+v-58*y+270*p-330*y*p+f/56*(1385+543*v-v*y-3111*y))))))+this.y0}else{var u=h*Math.sin(r);if(Math.abs(Math.abs(u)-1)<ot)return 93;if(n=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=h*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>ot)return 93;o=0}else o=Math.acos(o);e<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return i.x=n,i.y=o,i}function Dh(i){var t,e,r,s,n=(i.x-this.x0)*(1/this.a),o=(i.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,e=gn(t,this.es,this.en),Math.abs(e)<it){var f=Math.sin(e),p=Math.cos(e),l=Math.abs(p)>ot?Math.tan(e):0,m=this.ep2*Math.pow(p,2),y=Math.pow(m,2),v=Math.pow(l,2),M=Math.pow(v,2);t=1-this.es*Math.pow(f,2);var S=n*Math.sqrt(t)/this.k0,C=Math.pow(S,2);t=t*l,r=e-t*C/(1-this.es)*.5*(1-C/12*(5+3*v-9*m*v+m-4*y-C/30*(61+90*v-252*m*v+45*M+46*m-C/56*(1385+3633*v+4095*M+1574*M*v)))),s=ut(this.long0+S*(1-C/6*(1+2*v+m-C/20*(5+28*v+24*M+8*m*v+6*m-C/42*(61+662*v+1320*M+720*M*v))))/p)}else r=it*xi(o),s=0;else{var a=Math.exp(n/this.k0),h=.5*(a-1/a),u=this.lat0+o/this.k0,c=Math.cos(u);t=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(h,2))),r=Math.asin(t),o<0&&(r=-r),h===0&&c===0?s=0:s=ut(Math.atan2(h,c)+this.long0)}return i.x=s,i.y=r,i}var qh=["Fast_Transverse_Mercator","Fast Transverse Mercator"],rr={init:Lh,forward:Uh,inverse:Dh,names:qh};function vn(i){var t=Math.exp(i);return t=(t-1/t)/2,t}function re(i,t){i=Math.abs(i),t=Math.abs(t);var e=Math.max(i,t),r=Math.min(i,t)/(e||1);return e*Math.sqrt(1+Math.pow(r,2))}function jh(i){var t=1+i,e=t-1;return e===0?i:i*Math.log(t)/e}function Gh(i){var t=Math.abs(i);return t=jh(t*(1+t/(re(1,t)+1))),i<0?-t:t}function Gr(i,t){for(var e=2*Math.cos(2*t),r=i.length-1,s=i[r],n=0,o;--r>=0;)o=-n+e*s+i[r],n=s,s=o;return t+o*Math.sin(2*t)}function Wh(i,t){for(var e=2*Math.cos(t),r=i.length-1,s=i[r],n=0,o;--r>=0;)o=-n+e*s+i[r],n=s,s=o;return Math.sin(t)*o}function $h(i){var t=Math.exp(i);return t=(t+1/t)/2,t}function _n(i,t,e){for(var r=Math.sin(t),s=Math.cos(t),n=vn(e),o=$h(e),a=2*s*o,h=-2*r*n,u=i.length-1,c=i[u],f=0,p=0,l=0,m,y;--u>=0;)m=p,y=f,p=c,f=l,c=-m+a*p-h*f+i[u],l=-y+h*p+a*f;return a=r*o,h=s*n,[a*c-h*l,a*l+h*c]}function Zh(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(rr.init.apply(this),this.forward=rr.forward,this.inverse=rr.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),t=i/(2-i),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var r=Gr(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Wh(this.gtu,2*r))}function Jh(i){var t=ut(i.x-this.long0),e=i.y;e=Gr(this.cbg,e);var r=Math.sin(e),s=Math.cos(e),n=Math.sin(t),o=Math.cos(t);e=Math.atan2(r,o*s),t=Math.atan2(n*s,re(r,s*o)),t=Gh(Math.tan(t));var a=_n(this.gtu,2*e,2*t);e=e+a[0],t=t+a[1];var h,u;return Math.abs(t)<=2.623395162778?(h=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*e+this.Zb)+this.y0):(h=1/0,u=1/0),i.x=h,i.y=u,i}function Hh(i){var t=(i.x-this.x0)*(1/this.a),e=(i.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var r,s;if(Math.abs(t)<=2.623395162778){var n=_n(this.utg,2*e,2*t);e=e+n[0],t=t+n[1],t=Math.atan(vn(t));var o=Math.sin(e),a=Math.cos(e),h=Math.sin(t),u=Math.cos(t);e=Math.atan2(o*u,re(h,u*a)),t=Math.atan2(h,u*a),r=ut(t+this.long0),s=Gr(this.cgb,e)}else r=1/0,s=1/0;return i.x=r,i.y=s,i}var Xh=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],sr={init:Zh,forward:Jh,inverse:Hh,names:Xh};function Vh(i,t){if(i===void 0){if(i=Math.floor((ut(t)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var Yh="etmerc";function Qh(){var i=Vh(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Rt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,sr.init.apply(this),this.forward=sr.forward,this.inverse=sr.inverse}var Kh=["Universal Transverse Mercator System","utm"],tu={init:Qh,names:Kh,dependsOn:Yh};function Wr(i,t){return Math.pow((1-i)/(1+i),t)}var eu=20;function iu(){var i=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+bt)/(Math.pow(Math.tan(.5*this.lat0+bt),this.C)*Wr(this.e*i,this.ratexp))}function ru(i){var t=i.x,e=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+bt),this.C)*Wr(this.e*Math.sin(e),this.ratexp))-it,i.x=this.C*t,i}function su(i){for(var t=1e-14,e=i.x/this.C,r=i.y,s=Math.pow(Math.tan(.5*r+bt)/this.K,1/this.C),n=eu;n>0&&(r=2*Math.atan(s*Wr(this.e*Math.sin(i.y),-.5*this.e))-it,!(Math.abs(r-i.y)<t));--n)i.y=r;return n?(i.x=e,i.y=r,i):null}var nu=["gauss"],$r={init:iu,forward:ru,inverse:su,names:nu};function au(){$r.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ou(i){var t,e,r,s;return i.x=ut(i.x-this.long0),$r.forward.apply(this,[i]),t=Math.sin(i.y),e=Math.cos(i.y),r=Math.cos(i.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*r),i.x=s*e*Math.sin(i.x),i.y=s*(this.cosc0*t-this.sinc0*e*r),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function hu(i){var t,e,r,s,n;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,n=Math.sqrt(i.x*i.x+i.y*i.y)){var o=2*Math.atan2(n,this.R2);t=Math.sin(o),e=Math.cos(o),s=Math.asin(e*this.sinc0+i.y*t*this.cosc0/n),r=Math.atan2(i.x*t,n*this.cosc0*e-i.y*this.sinc0*t)}else s=this.phic0,r=0;return i.x=r,i.y=s,$r.inverse.apply(this,[i]),i.x=ut(i.x+this.long0),i}var uu=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],lu={init:au,forward:ou,inverse:hu,names:uu};function cu(i,t,e){return t*=e,Math.tan(.5*(it+i))*Math.pow((1-t)/(1+t),.5*e)}function fu(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ot&&(this.k0=.5*(1+xi(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ot&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ot&&Math.abs(Math.cos(this.lat_ts))>ot&&(this.k0=.5*this.cons*ue(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ie(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ue(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-it,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function du(i){var t=i.x,e=i.y,r=Math.sin(e),s=Math.cos(e),n,o,a,h,u,c,f=ut(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=ot&&Math.abs(e+this.lat0)<=ot?(i.x=NaN,i.y=NaN,i):this.sphere?(n=2*this.k0/(1+this.sinlat0*r+this.coslat0*s*Math.cos(f)),i.x=this.a*n*s*Math.sin(f)+this.x0,i.y=this.a*n*(this.coslat0*r-this.sinlat0*s*Math.cos(f))+this.y0,i):(o=2*Math.atan(this.ssfn_(e,r,this.e))-it,h=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=ot?(u=ie(this.e,e*this.con,this.con*r),c=2*this.a*this.k0*u/this.cons,i.x=this.x0+c*Math.sin(t-this.long0),i.y=this.y0-this.con*c*Math.cos(t-this.long0),i):(Math.abs(this.sinlat0)<ot?(n=2*this.a*this.k0/(1+h*Math.cos(f)),i.y=n*a):(n=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*h*Math.cos(f))),i.y=n*(this.cosX0*a-this.sinX0*h*Math.cos(f))+this.y0),i.x=n*h*Math.sin(f)+this.x0,i))}function pu(i){i.x-=this.x0,i.y-=this.y0;var t,e,r,s,n,o=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,e=this.lat0,o<=ot?(i.x=t,i.y=e,i):(e=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<ot?this.lat0>0?t=ut(this.long0+Math.atan2(i.x,-1*i.y)):t=ut(this.long0+Math.atan2(i.x,i.y)):t=ut(this.long0+Math.atan2(i.x*Math.sin(a),o*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=t,i.y=e,i)}else if(Math.abs(this.coslat0)<=ot){if(o<=ot)return e=this.lat0,t=this.long0,i.x=t,i.y=e,i;i.x*=this.con,i.y*=this.con,r=o*this.cons/(2*this.a*this.k0),e=this.con*gi(this.e,r),t=this.con*ut(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=ot?n=this.X0:(n=Math.asin(Math.cos(s)*this.sinX0+i.y*Math.sin(s)*this.cosX0/o),t=ut(this.long0+Math.atan2(i.x*Math.sin(s),o*this.cosX0*Math.cos(s)-i.y*this.sinX0*Math.sin(s)))),e=-1*gi(this.e,Math.tan(.5*(it+n)));return i.x=t,i.y=e,i}var mu=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],yu={init:fu,forward:du,inverse:pu,names:mu,ssfn_:cu};function xu(){var i=this.lat0;this.lambda0=this.long0;var t=Math.sin(i),e=this.a,r=this.rf,s=1/r,n=2*s-Math.pow(s,2),o=this.e=Math.sqrt(n);this.R=this.k0*e*Math.sqrt(1-n)/(1-n*Math.pow(t,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+i/2)),u=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*h+this.alpha*o/2*u}function gu(i){var t=Math.log(Math.tan(Math.PI/4-i.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),r=-this.alpha*(t+e)+this.K,s=2*(Math.atan(Math.exp(r))-Math.PI/4),n=this.alpha*(i.x-this.lambda0),o=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(n))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(n));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*o+this.x0,i}function vu(i){for(var t=i.x-this.x0,e=i.y-this.y0,r=t/this.R,s=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(s))),a=this.lambda0+o/this.alpha,h=0,u=n,c=-1e3,f=0;Math.abs(u-c)>1e-7;){if(++f>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(h))-Math.PI/2}return i.x=a,i.y=u,i}var _u=["somerc"],wu={init:xu,forward:gu,inverse:vu,names:_u},Xe=1e-7;function Mu(i){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||t.indexOf(e)!==-1}function bu(){var i,t,e,r,s,n,o,a,h,u,c=0,f,p=0,l=0,m=0,y=0,v=0,M=0;this.no_off=Mu(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var C=!1;if("rectified_grid_angle"in this&&(C=!0),S&&(M=this.alpha),C&&(c=this.rectified_grid_angle*Rt),S||C)p=this.longc;else if(l=this.long1,y=this.lat1,m=this.long2,v=this.lat2,Math.abs(y-v)<=Xe||(i=Math.abs(y))<=Xe||Math.abs(i-it)<=Xe||Math.abs(Math.abs(this.lat0)-it)<=Xe||Math.abs(Math.abs(v)-it)<=Xe)throw new Error;var T=1-this.es;t=Math.sqrt(T),Math.abs(this.lat0)>ot?(a=Math.sin(this.lat0),e=Math.cos(this.lat0),i=1-this.es*a*a,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/T),this.A=this.B*this.k0*t/i,r=this.B*t/(e*Math.sqrt(i)),s=r*r-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=r,this.E*=Math.pow(ie(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=r=s=1),S||C?(S?(f=Math.asin(Math.sin(M)/r),C||(c=M)):(f=c,M=Math.asin(r*Math.sin(f))),this.lam0=p-Math.asin(.5*(s-1/s)*Math.tan(f))/this.B):(n=Math.pow(ie(this.e,y,Math.sin(y)),this.B),o=Math.pow(ie(this.e,v,Math.sin(v)),this.B),s=this.E/n,h=(o-n)/(o+n),u=this.E*this.E,u=(u-o*n)/(u+o*n),i=l-m,i<-Math.pi?m-=mi:i>Math.pi&&(m+=mi),this.lam0=ut(.5*(l+m)-Math.atan(u*Math.tan(.5*this.B*(l-m))/h)/this.B),f=Math.atan(2*Math.sin(this.B*ut(l-this.lam0))/(s-1/s)),c=M=Math.asin(r*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(bt-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(bt+s))}function Au(i){var t={},e,r,s,n,o,a,h,u;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-it)>ot){if(o=this.E/Math.pow(ie(this.e,i.y,Math.sin(i.y)),this.B),a=1/o,e=.5*(o-a),r=.5*(o+a),n=Math.sin(this.B*i.x),s=(e*this.singam-n*this.cosgam)/r,Math.abs(Math.abs(s)-1)<ot)throw new Error;u=.5*this.ArB*Math.log((1-s)/(1+s)),a=Math.cos(this.B*i.x),Math.abs(a)<Xe?h=this.A*i.x:h=this.ArB*Math.atan2(e*this.cosgam+n*this.singam,a)}else u=i.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*i.y;return this.no_rot?(t.x=h,t.y=u):(h-=this.u_0,t.x=u*this.cosrot+h*this.sinrot,t.y=h*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Eu(i){var t,e,r,s,n,o,a,h={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(e=i.y,t=i.x):(e=i.x*this.cosrot-i.y*this.sinrot,t=i.y*this.cosrot+i.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*e),s=.5*(r-1/r),n=.5*(r+1/r),o=Math.sin(this.BrA*t),a=(o*this.cosgam+s*this.singam)/n,Math.abs(Math.abs(a)-1)<ot)h.x=0,h.y=a<0?-it:it;else{if(h.y=this.E/Math.sqrt((1+a)/(1-a)),h.y=gi(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return h.x+=this.lam0,h}var Su=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],Cu={init:bu,forward:Au,inverse:Eu,names:Su};function ku(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ot)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),r=ue(this.e,t,e),s=ie(this.e,this.lat1,t),n=Math.sin(this.lat2),o=Math.cos(this.lat2),a=ue(this.e,n,o),h=ie(this.e,this.lat2,n),u=ie(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ot?this.ns=Math.log(r/a)/Math.log(s/h):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function zu(i){var t=i.x,e=i.y;Math.abs(2*Math.abs(e)-Math.PI)<=ot&&(e=xi(e)*(it-2*ot));var r=Math.abs(Math.abs(e)-it),s,n;if(r>ot)s=ie(this.e,e,Math.sin(e)),n=this.a*this.f0*Math.pow(s,this.ns);else{if(r=e*this.ns,r<=0)return null;n=0}var o=this.ns*ut(t-this.long0);return i.x=this.k0*(n*Math.sin(o))+this.x0,i.y=this.k0*(this.rh-n*Math.cos(o))+this.y0,i}function Iu(i){var t,e,r,s,n,o=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),e=1):(t=-Math.sqrt(o*o+a*a),e=-1);var h=0;if(t!==0&&(h=Math.atan2(e*o,e*a)),t!==0||this.ns>0){if(e=1/this.ns,r=Math.pow(t/(this.a*this.f0),e),s=gi(this.e,r),s===-9999)return null}else s=-it;return n=ut(h/this.ns+this.long0),i.x=n,i.y=s,i}var Bu=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],Tu={init:ku,forward:zu,inverse:Iu,names:Bu};function Fu(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Pu(i){var t,e,r,s,n,o,a,h=i.x,u=i.y,c=ut(h-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),r=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(r)),n=Math.asin(Math.cos(e)*Math.sin(r)/Math.cos(s)),o=this.n*n,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),i.y=a*Math.cos(o)/1,i.x=a*Math.sin(o)/1,this.czech||(i.y*=-1,i.x*=-1),i}function Nu(i){var t,e,r,s,n,o,a,h,u=i.x;i.x=i.y,i.y=u,this.czech||(i.y*=-1,i.x*=-1),o=Math.sqrt(i.x*i.x+i.y*i.y),n=Math.atan2(i.y,i.x),s=n/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(s)),e=Math.asin(Math.cos(r)*Math.sin(s)/Math.cos(t)),i.x=this.long0-e/this.alfa,a=t,h=0;var c=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(h=1),a=i.y,c+=1;while(h===0&&c<15);return c>=15?null:i}var Ou=["Krovak","krovak"],Ru={init:Fu,forward:Pu,inverse:Nu,names:Ou};function jt(i,t,e,r,s){return i*s-t*Math.sin(2*s)+e*Math.sin(4*s)-r*Math.sin(6*s)}function wi(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function Mi(i){return .375*i*(1+.25*i*(1+.46875*i))}function bi(i){return .05859375*i*i*(1+.75*i)}function Ai(i){return i*i*i*(35/3072)}function Ve(i,t,e){var r=t*e;return i/Math.sqrt(1-r*r)}function Ye(i){return Math.abs(i)<it?i:i-xi(i)*Math.PI}function nr(i,t,e,r,s){var n,o;n=i/t;for(var a=0;a<15;a++)if(o=(i-(t*n-e*Math.sin(2*n)+r*Math.sin(4*n)-s*Math.sin(6*n)))/(t-2*e*Math.cos(2*n)+4*r*Math.cos(4*n)-6*s*Math.cos(6*n)),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function Lu(){this.sphere||(this.e0=wi(this.es),this.e1=Mi(this.es),this.e2=bi(this.es),this.e3=Ai(this.es),this.ml0=this.a*jt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Uu(i){var t,e,r=i.x,s=i.y;if(r=ut(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(r)),e=this.a*(Math.atan2(Math.tan(s),Math.cos(r))-this.lat0);else{var n=Math.sin(s),o=Math.cos(s),a=Ve(this.a,this.e,n),h=Math.tan(s)*Math.tan(s),u=r*Math.cos(s),c=u*u,f=this.es*o*o/(1-this.es),p=this.a*jt(this.e0,this.e1,this.e2,this.e3,s);t=a*u*(1-c*h*(1/6-(8-h+8*f)*c/120)),e=p-this.ml0+a*n/o*c*(.5+(5-h+6*f)*c/24)}return i.x=t+this.x0,i.y=e+this.y0,i}function Du(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,r,s;if(this.sphere){var n=e+this.lat0;r=Math.asin(Math.sin(n)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(n))}else{var o=this.ml0/this.a+e,a=nr(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-it)<=ot)return i.x=this.long0,i.y=it,e<0&&(i.y*=-1),i;var h=Ve(this.a,this.e,Math.sin(a)),u=h*h*h/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),f=t*this.a/h,p=f*f;r=a-h*Math.tan(a)/u*f*f*(.5-(1+3*c)*f*f/24),s=f*(1-p*(c/3+(1+3*c)*c*p/15))/Math.cos(a)}return i.x=ut(s+this.long0),i.y=Ye(r),i}var qu=["Cassini","Cassini_Soldner","cass"],ju={init:Lu,forward:Uu,inverse:Du,names:qu};function we(i,t){var e;return i>1e-7?(e=i*t,(1-i*i)*(t/(1-e*e)-.5/i*Math.log((1-e)/(1+e)))):2*t}var Gu=1,Wu=2,$u=3,Zu=4;function Ju(){var i=Math.abs(this.lat0);if(Math.abs(i-it)<ot?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<ot?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=we(this.e,1),this.mmf=.5/(1-this.es),this.apa=il(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=we(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Hu(i){var t,e,r,s,n,o,a,h,u,c,f=i.x,p=i.y;if(f=ut(f-this.long0),this.sphere){if(n=Math.sin(p),c=Math.cos(p),r=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+c*r:1+this.sinph0*n+this.cosph0*c*r,e<=ot)return null;e=Math.sqrt(2/e),t=e*c*Math.sin(f),e*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(p+this.lat0)<ot)return null;e=bt-p*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(f),e*=r}}else{switch(a=0,h=0,u=0,r=Math.cos(f),s=Math.sin(f),n=Math.sin(p),o=we(this.e,n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,h=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*h*r;break;case this.EQUIT:u=1+h*r;break;case this.N_POLE:u=it+p,o=this.qp-o;break;case this.S_POLE:u=p-it,o=this.qp+o;break}if(Math.abs(u)<ot)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?e=this.ymf*u*(this.cosb1*a-this.sinb1*h*r):e=(u=Math.sqrt(2/(1+h*r)))*a*this.ymf,t=this.xmf*u*h*s;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(u=Math.sqrt(o))*s,e=r*(this.mode===this.S_POLE?u:-u)):t=e=0;break}}return i.x=this.a*t+this.x0,i.y=this.a*e+this.y0,i}function Xu(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,r,s,n,o,a,h,u;if(this.sphere){var c=0,f,p=0;if(f=Math.sqrt(t*t+e*e),s=f*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(s),c=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(f)<=ot?0:Math.asin(e*p/f),t*=p,e=c*f;break;case this.OBLIQ:s=Math.abs(f)<=ot?this.lat0:Math.asin(c*this.sinph0+e*p*this.cosph0/f),t*=p*this.cosph0,e=(c-Math.sin(s)*this.sinph0)*f;break;case this.N_POLE:e=-e,s=it-s;break;case this.S_POLE:s-=it;break}r=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,h=Math.sqrt(t*t+e*e),h<ot)return i.x=this.long0,i.y=this.lat0,i;o=2*Math.asin(.5*h/this.rq),n=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(u=n*this.sinb1+e*o*this.cosb1/h,a=this.qp*u,e=h*this.cosb1*n-e*this.sinb1*o):(u=e*o/h,a=this.qp*u,e=h*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),a=t*t+e*e,!a)return i.x=this.long0,i.y=this.lat0,i;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(t,e),s=rl(Math.asin(u),this.apa)}return i.x=ut(this.long0+r),i.y=s,i}var Vu=.3333333333333333,Yu=.17222222222222222,Qu=.10257936507936508,Ku=.06388888888888888,tl=.0664021164021164,el=.016415012942191543;function il(i){var t,e=[];return e[0]=i*Vu,t=i*i,e[0]+=t*Yu,e[1]=t*Ku,t*=i,e[0]+=t*Qu,e[1]+=t*tl,e[2]=t*el,e}function rl(i,t){var e=i+i;return i+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var sl=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],nl={init:Ju,forward:Hu,inverse:Xu,names:sl,S_POLE:Gu,N_POLE:Wu,EQUIT:$u,OBLIQ:Zu};function Me(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function al(){Math.abs(this.lat1+this.lat2)<ot||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ue(this.e3,this.sin_po,this.cos_po),this.qs1=we(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ue(this.e3,this.sin_po,this.cos_po),this.qs2=we(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=we(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ot?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function ol(i){var t=i.x,e=i.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var r=we(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,n=this.ns0*ut(t-this.long0),o=s*Math.sin(n)+this.x0,a=this.rh-s*Math.cos(n)+this.y0;return i.x=o,i.y=a,i}function hl(i){var t,e,r,s,n,o;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),r=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),r=-1),s=0,t!==0&&(s=Math.atan2(r*i.x,r*i.y)),r=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(e=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,e)),n=ut(s/this.ns0+this.long0),i.x=n,i.y=o,i}function ul(i,t){var e,r,s,n,o,a=Me(.5*t);if(i<ot)return a;for(var h=i*i,u=1;u<=25;u++)if(e=Math.sin(a),r=Math.cos(a),s=i*e,n=1-s*s,o=.5*n*n/r*(t/(1-h)-e/n+.5/i*Math.log((1-s)/(1+s))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var ll=["Albers_Conic_Equal_Area","Albers","aea"],cl={init:al,forward:ol,inverse:hl,names:ll,phi1z:ul};function fl(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function dl(i){var t,e,r,s,n,o,a,h,u=i.x,c=i.y;return r=ut(u-this.long0),t=Math.sin(c),e=Math.cos(c),s=Math.cos(r),o=this.sin_p14*t+this.cos_p14*e*s,n=1,o>0||Math.abs(o)<=ot?(a=this.x0+this.a*n*e*Math.sin(r)/o,h=this.y0+this.a*n*(this.cos_p14*t-this.sin_p14*e*s)/o):(a=this.x0+this.infinity_dist*e*Math.sin(r),h=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*s)),i.x=a,i.y=h,i}function pl(i){var t,e,r,s,n,o;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(t=Math.sqrt(i.x*i.x+i.y*i.y))?(s=Math.atan2(t,this.rc),e=Math.sin(s),r=Math.cos(s),o=Me(r*this.sin_p14+i.y*e*this.cos_p14/t),n=Math.atan2(i.x*e,t*this.cos_p14*r-i.y*this.sin_p14*e),n=ut(this.long0+n)):(o=this.phic0,n=0),i.x=n,i.y=o,i}var ml=["gnom"],yl={init:fl,forward:dl,inverse:pl,names:ml};function xl(i,t){var e=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*it:it;for(var r=Math.asin(.5*t),s,n,o,a,h=0;h<30;h++)if(n=Math.sin(r),o=Math.cos(r),a=i*n,s=Math.pow(1-a*a,2)/(2*o)*(t/(1-i*i)-n/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),r+=s,Math.abs(s)<=1e-10)return r;return NaN}function gl(){this.sphere||(this.k0=ue(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function vl(i){var t=i.x,e=i.y,r,s,n=ut(t-this.long0);if(this.sphere)r=this.x0+this.a*n*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var o=we(this.e,Math.sin(e));r=this.x0+this.a*this.k0*n,s=this.y0+this.a*o*.5/this.k0}return i.x=r,i.y=s,i}function _l(i){i.x-=this.x0,i.y-=this.y0;var t,e;return this.sphere?(t=ut(this.long0+i.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(e=xl(this.e,2*i.y*this.k0/this.a),t=ut(this.long0+i.x/(this.a*this.k0))),i.x=t,i.y=e,i}var wl=["cea"],Ml={init:gl,forward:vl,inverse:_l,names:wl};function bl(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Al(i){var t=i.x,e=i.y,r=ut(t-this.long0),s=Ye(e-this.lat0);return i.x=this.x0+this.a*r*this.rc,i.y=this.y0+this.a*s,i}function El(i){var t=i.x,e=i.y;return i.x=ut(this.long0+(t-this.x0)/(this.a*this.rc)),i.y=Ye(this.lat0+(e-this.y0)/this.a),i}var Sl=["Equirectangular","Equidistant_Cylindrical","eqc"],Cl={init:bl,forward:Al,inverse:El,names:Sl},wn=20;function kl(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=wi(this.es),this.e1=Mi(this.es),this.e2=bi(this.es),this.e3=Ai(this.es),this.ml0=this.a*jt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function zl(i){var t=i.x,e=i.y,r,s,n,o=ut(t-this.long0);if(n=o*Math.sin(e),this.sphere)Math.abs(e)<=ot?(r=this.a*o,s=-1*this.a*this.lat0):(r=this.a*Math.sin(n)/Math.tan(e),s=this.a*(Ye(e-this.lat0)+(1-Math.cos(n))/Math.tan(e)));else if(Math.abs(e)<=ot)r=this.a*o,s=-1*this.ml0;else{var a=Ve(this.a,this.e,Math.sin(e))/Math.tan(e);r=a*Math.sin(n),s=this.a*jt(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+a*(1-Math.cos(n))}return i.x=r+this.x0,i.y=s+this.y0,i}function Il(i){var t,e,r,s,n,o,a,h,u;if(r=i.x-this.x0,s=i.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=ot)t=ut(r/this.a+this.long0),e=0;else{o=this.lat0+s/this.a,a=r*r/this.a/this.a+o*o,h=o;var c;for(n=wn;n;--n)if(c=Math.tan(h),u=-1*(o*(h*c+1)-h-.5*(h*h+a)*c)/((h-o)/c-1),h+=u,Math.abs(u)<=ot){e=h;break}t=ut(this.long0+Math.asin(r*Math.tan(h)/this.a)/Math.sin(e))}else if(Math.abs(s+this.ml0)<=ot)e=0,t=ut(this.long0+r/this.a);else{o=(this.ml0+s)/this.a,a=r*r/this.a/this.a+o*o,h=o;var f,p,l,m,y;for(n=wn;n;--n)if(y=this.e*Math.sin(h),f=Math.sqrt(1-y*y)*Math.tan(h),p=this.a*jt(this.e0,this.e1,this.e2,this.e3,h),l=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),m=p/this.a,u=(o*(f*m+1)-m-.5*f*(m*m+a))/(this.es*Math.sin(2*h)*(m*m+a-2*o*m)/(4*f)+(o-m)*(f*l-2/Math.sin(2*h))-l),h-=u,Math.abs(u)<=ot){e=h;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=ut(this.long0+Math.asin(r*f/this.a)/Math.sin(e))}return i.x=t,i.y=e,i}var Bl=["Polyconic","poly"],Tl={init:kl,forward:zl,inverse:Il,names:Bl};function Fl(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Pl(i){var t,e=i.x,r=i.y,s=r-this.lat0,n=e-this.long0,o=s/pi*1e-5,a=n,h=1,u=0;for(t=1;t<=10;t++)h=h*o,u=u+this.A[t]*h;var c=u,f=a,p=1,l=0,m,y,v=0,M=0;for(t=1;t<=6;t++)m=p*c-l*f,y=l*c+p*f,p=m,l=y,v=v+this.B_re[t]*p-this.B_im[t]*l,M=M+this.B_im[t]*p+this.B_re[t]*l;return i.x=M*this.a+this.x0,i.y=v*this.a+this.y0,i}function Nl(i){var t,e=i.x,r=i.y,s=e-this.x0,n=r-this.y0,o=n/this.a,a=s/this.a,h=1,u=0,c,f,p=0,l=0;for(t=1;t<=6;t++)c=h*o-u*a,f=u*o+h*a,h=c,u=f,p=p+this.C_re[t]*h-this.C_im[t]*u,l=l+this.C_im[t]*h+this.C_re[t]*u;for(var m=0;m<this.iterations;m++){var y=p,v=l,M,S,C=o,T=a;for(t=2;t<=6;t++)M=y*p-v*l,S=v*p+y*l,y=M,v=S,C=C+(t-1)*(this.B_re[t]*y-this.B_im[t]*v),T=T+(t-1)*(this.B_im[t]*y+this.B_re[t]*v);y=1,v=0;var F=this.B_re[1],L=this.B_im[1];for(t=2;t<=6;t++)M=y*p-v*l,S=v*p+y*l,y=M,v=S,F=F+t*(this.B_re[t]*y-this.B_im[t]*v),L=L+t*(this.B_im[t]*y+this.B_re[t]*v);var U=F*F+L*L;p=(C*F+T*L)/U,l=(T*F-C*L)/U}var V=p,W=l,J=1,et=0;for(t=1;t<=9;t++)J=J*V,et=et+this.D[t]*J;var P=this.lat0+et*pi*1e5,Z=this.long0+W;return i.x=Z,i.y=P,i}var Ol=["New_Zealand_Map_Grid","nzmg"],Rl={init:Fl,forward:Pl,inverse:Nl,names:Ol};function Ll(){}function Ul(i){var t=i.x,e=i.y,r=ut(t-this.long0),s=this.x0+this.a*r,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return i.x=s,i.y=n,i}function Dl(i){i.x-=this.x0,i.y-=this.y0;var t=ut(this.long0+i.x/this.a),e=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=t,i.y=e,i}var ql=["Miller_Cylindrical","mill"],jl={init:Ll,forward:Ul,inverse:Dl,names:ql},Gl=20;function Wl(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=xn(this.es)}function $l(i){var t,e,r=i.x,s=i.y;if(r=ut(r-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var n=this.n*Math.sin(s),o=Gl;o;--o){var a=(this.m*s+Math.sin(s)-n)/(this.m+Math.cos(s));if(s-=a,Math.abs(a)<ot)break}t=this.a*this.C_x*r*(this.m+Math.cos(s)),e=this.a*this.C_y*s}else{var h=Math.sin(s),u=Math.cos(s);e=this.a*ir(s,h,u,this.en),t=this.a*r*u/Math.sqrt(1-this.es*h*h)}return i.x=t,i.y=e,i}function Zl(i){var t,e,r,s;return i.x-=this.x0,r=i.x/this.a,i.y-=this.y0,t=i.y/this.a,this.sphere?(t/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(t))),this.m?t=Me((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Me(Math.sin(t)/this.n)),r=ut(r+this.long0),t=Ye(t)):(t=gn(i.y/this.a,this.es,this.en),s=Math.abs(t),s<it?(s=Math.sin(t),e=this.long0+i.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),r=ut(e)):s-ot<it&&(r=this.long0)),i.x=r,i.y=t,i}var Jl=["Sinusoidal","sinu"],Hl={init:Wl,forward:$l,inverse:Zl,names:Jl};function Xl(){}function Vl(i){for(var t=i.x,e=i.y,r=ut(t-this.long0),s=e,n=Math.PI*Math.sin(e);;){var o=-(s+Math.sin(s)-n)/(1+Math.cos(s));if(s+=o,Math.abs(o)<ot)break}s/=2,Math.PI/2-Math.abs(e)<ot&&(r=0);var a=.900316316158*this.a*r*Math.cos(s)+this.x0,h=1.4142135623731*this.a*Math.sin(s)+this.y0;return i.x=a,i.y=h,i}function Yl(i){var t,e;i.x-=this.x0,i.y-=this.y0,e=i.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var r=ut(this.long0+i.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var s=Math.asin(e);return i.x=r,i.y=s,i}var Ql=["Mollweide","moll"],Kl={init:Xl,forward:Vl,inverse:Yl,names:Ql};function tc(){Math.abs(this.lat1+this.lat2)<ot||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=wi(this.es),this.e1=Mi(this.es),this.e2=bi(this.es),this.e3=Ai(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ue(this.e,this.sinphi,this.cosphi),this.ml1=jt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ot?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ue(this.e,this.sinphi,this.cosphi),this.ml2=jt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=jt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function ec(i){var t=i.x,e=i.y,r;if(this.sphere)r=this.a*(this.g-e);else{var s=jt(this.e0,this.e1,this.e2,this.e3,e);r=this.a*(this.g-s)}var n=this.ns*ut(t-this.long0),o=this.x0+r*Math.sin(n),a=this.y0+this.rh-r*Math.cos(n);return i.x=o,i.y=a,i}function ic(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var t,e,r,s;this.ns>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),t=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),t=-1);var n=0;if(e!==0&&(n=Math.atan2(t*i.x,t*i.y)),this.sphere)return s=ut(this.long0+n/this.ns),r=Ye(this.g-e/this.a),i.x=s,i.y=r,i;var o=this.g-e/this.a;return r=nr(o,this.e0,this.e1,this.e2,this.e3),s=ut(this.long0+n/this.ns),i.x=s,i.y=r,i}var rc=["Equidistant_Conic","eqdc"],sc={init:tc,forward:ec,inverse:ic,names:rc};function nc(){this.R=this.a}function ac(i){var t=i.x,e=i.y,r=ut(t-this.long0),s,n;Math.abs(e)<=ot&&(s=this.x0+this.R*r,n=this.y0);var o=Me(2*Math.abs(e/Math.PI));(Math.abs(r)<=ot||Math.abs(Math.abs(e)-it)<=ot)&&(s=this.x0,e>=0?n=this.y0+Math.PI*this.R*Math.tan(.5*o):n=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),h=a*a,u=Math.sin(o),c=Math.cos(o),f=c/(u+c-1),p=f*f,l=f*(2/u-1),m=l*l,y=Math.PI*this.R*(a*(f-m)+Math.sqrt(h*(f-m)*(f-m)-(m+h)*(p-m)))/(m+h);r<0&&(y=-y),s=this.x0+y;var v=h+f;return y=Math.PI*this.R*(l*v-a*Math.sqrt((m+h)*(h+1)-v*v))/(m+h),e>=0?n=this.y0+y:n=this.y0-y,i.x=s,i.y=n,i}function oc(i){var t,e,r,s,n,o,a,h,u,c,f,p,l;return i.x-=this.x0,i.y-=this.y0,f=Math.PI*this.R,r=i.x/f,s=i.y/f,n=r*r+s*s,o=-Math.abs(s)*(1+n),a=o-2*s*s+r*r,h=-2*o+1+2*s*s+n*n,l=s*s/h+(2*a*a*a/h/h/h-9*o*a/h/h)/27,u=(o-a*a/3/h)/h,c=2*Math.sqrt(-u/3),f=3*l/u/c,Math.abs(f)>1&&(f>=0?f=1:f=-1),p=Math.acos(f)/3,i.y>=0?e=(-c*Math.cos(p+Math.PI/3)-a/3/h)*Math.PI:e=-(-c*Math.cos(p+Math.PI/3)-a/3/h)*Math.PI,Math.abs(r)<ot?t=this.long0:t=ut(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(r*r-s*s)+n*n))/2/r),i.x=t,i.y=e,i}var hc=["Van_der_Grinten_I","VanDerGrinten","vandg"],uc={init:nc,forward:ac,inverse:oc,names:hc};function lc(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function cc(i){var t=i.x,e=i.y,r=Math.sin(i.y),s=Math.cos(i.y),n=ut(t-this.long0),o,a,h,u,c,f,p,l,m,y,v,M,S,C,T,F,L,U,V,W,J,et,P;return this.sphere?Math.abs(this.sin_p12-1)<=ot?(i.x=this.x0+this.a*(it-e)*Math.sin(n),i.y=this.y0-this.a*(it-e)*Math.cos(n),i):Math.abs(this.sin_p12+1)<=ot?(i.x=this.x0+this.a*(it+e)*Math.sin(n),i.y=this.y0+this.a*(it+e)*Math.cos(n),i):(U=this.sin_p12*r+this.cos_p12*s*Math.cos(n),F=Math.acos(U),L=F?F/Math.sin(F):1,i.x=this.x0+this.a*L*s*Math.sin(n),i.y=this.y0+this.a*L*(this.cos_p12*r-this.sin_p12*s*Math.cos(n)),i):(o=wi(this.es),a=Mi(this.es),h=bi(this.es),u=Ai(this.es),Math.abs(this.sin_p12-1)<=ot?(c=this.a*jt(o,a,h,u,it),f=this.a*jt(o,a,h,u,e),i.x=this.x0+(c-f)*Math.sin(n),i.y=this.y0-(c-f)*Math.cos(n),i):Math.abs(this.sin_p12+1)<=ot?(c=this.a*jt(o,a,h,u,it),f=this.a*jt(o,a,h,u,e),i.x=this.x0+(c+f)*Math.sin(n),i.y=this.y0+(c+f)*Math.cos(n),i):(p=r/s,l=Ve(this.a,this.e,this.sin_p12),m=Ve(this.a,this.e,r),y=Math.atan((1-this.es)*p+this.es*l*this.sin_p12/(m*s)),v=Math.atan2(Math.sin(n),this.cos_p12*Math.tan(y)-this.sin_p12*Math.cos(n)),v===0?V=Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.abs(Math.abs(v)-Math.PI)<=ot?V=-Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):V=Math.asin(Math.sin(n)*Math.cos(y)/Math.sin(v)),M=this.e*this.sin_p12/Math.sqrt(1-this.es),S=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es),C=M*S,T=S*S,W=V*V,J=W*V,et=J*V,P=et*V,F=l*V*(1-W*T*(1-T)/6+J/8*C*(1-2*T)+et/120*(T*(4-7*T)-3*M*M*(1-7*T))-P/48*C),i.x=this.x0+F*Math.sin(v),i.y=this.y0+F*Math.cos(v),i))}function fc(i){i.x-=this.x0,i.y-=this.y0;var t,e,r,s,n,o,a,h,u,c,f,p,l,m,y,v,M,S,C,T,F,L,U,V;return this.sphere?(t=Math.sqrt(i.x*i.x+i.y*i.y),t>2*it*this.a?void 0:(e=t/this.a,r=Math.sin(e),s=Math.cos(e),n=this.long0,Math.abs(t)<=ot?o=this.lat0:(o=Me(s*this.sin_p12+i.y*r*this.cos_p12/t),a=Math.abs(this.lat0)-it,Math.abs(a)<=ot?this.lat0>=0?n=ut(this.long0+Math.atan2(i.x,-i.y)):n=ut(this.long0-Math.atan2(-i.x,i.y)):n=ut(this.long0+Math.atan2(i.x*r,t*this.cos_p12*s-i.y*this.sin_p12*r))),i.x=n,i.y=o,i)):(h=wi(this.es),u=Mi(this.es),c=bi(this.es),f=Ai(this.es),Math.abs(this.sin_p12-1)<=ot?(p=this.a*jt(h,u,c,f,it),t=Math.sqrt(i.x*i.x+i.y*i.y),l=p-t,o=nr(l/this.a,h,u,c,f),n=ut(this.long0+Math.atan2(i.x,-1*i.y)),i.x=n,i.y=o,i):Math.abs(this.sin_p12+1)<=ot?(p=this.a*jt(h,u,c,f,it),t=Math.sqrt(i.x*i.x+i.y*i.y),l=t-p,o=nr(l/this.a,h,u,c,f),n=ut(this.long0+Math.atan2(i.x,i.y)),i.x=n,i.y=o,i):(t=Math.sqrt(i.x*i.x+i.y*i.y),v=Math.atan2(i.x,i.y),m=Ve(this.a,this.e,this.sin_p12),M=Math.cos(v),S=this.e*this.cos_p12*M,C=-S*S/(1-this.es),T=3*this.es*(1-C)*this.sin_p12*this.cos_p12*M/(1-this.es),F=t/m,L=F-C*(1+C)*Math.pow(F,3)/6-T*(1+3*C)*Math.pow(F,4)/24,U=1-C*L*L/2-F*L*L*L/6,y=Math.asin(this.sin_p12*Math.cos(L)+this.cos_p12*Math.sin(L)*M),n=ut(this.long0+Math.asin(Math.sin(v)*Math.sin(L)/Math.cos(y))),V=Math.sin(y),o=Math.atan2((V-this.es*U*this.sin_p12)*Math.tan(y),V*(1-this.es)),i.x=n,i.y=o,i))}var dc=["Azimuthal_Equidistant","aeqd"],pc={init:lc,forward:cc,inverse:fc,names:dc};function mc(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function yc(i){var t,e,r,s,n,o,a,h,u=i.x,c=i.y;return r=ut(u-this.long0),t=Math.sin(c),e=Math.cos(c),s=Math.cos(r),o=this.sin_p14*t+this.cos_p14*e*s,n=1,(o>0||Math.abs(o)<=ot)&&(a=this.a*n*e*Math.sin(r),h=this.y0+this.a*n*(this.cos_p14*t-this.sin_p14*e*s)),i.x=a,i.y=h,i}function xc(i){var t,e,r,s,n,o,a;return i.x-=this.x0,i.y-=this.y0,t=Math.sqrt(i.x*i.x+i.y*i.y),e=Me(t/this.a),r=Math.sin(e),s=Math.cos(e),o=this.long0,Math.abs(t)<=ot?(a=this.lat0,i.x=o,i.y=a,i):(a=Me(s*this.sin_p14+i.y*r*this.cos_p14/t),n=Math.abs(this.lat0)-it,Math.abs(n)<=ot?(this.lat0>=0?o=ut(this.long0+Math.atan2(i.x,-i.y)):o=ut(this.long0-Math.atan2(-i.x,i.y)),i.x=o,i.y=a,i):(o=ut(this.long0+Math.atan2(i.x*r,t*this.cos_p14*s-i.y*this.sin_p14*r)),i.x=o,i.y=a,i))}var gc=["ortho"],vc={init:mc,forward:yc,inverse:xc,names:gc},It={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},At={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function _c(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=it-bt/2?this.face=It.TOP:this.lat0<=-(it-bt/2)?this.face=It.BOTTOM:Math.abs(this.long0)<=bt?this.face=It.FRONT:Math.abs(this.long0)<=it+bt?this.face=this.long0>0?It.RIGHT:It.LEFT:this.face=It.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function wc(i){var t={x:0,y:0},e,r,s,n,o,a,h={value:0};if(i.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):e=i.y,r=i.x,this.face===It.TOP)n=it-e,r>=bt&&r<=it+bt?(h.value=At.AREA_0,s=r-it):r>it+bt||r<=-(it+bt)?(h.value=At.AREA_1,s=r>0?r-Bt:r+Bt):r>-(it+bt)&&r<=-bt?(h.value=At.AREA_2,s=r+it):(h.value=At.AREA_3,s=r);else if(this.face===It.BOTTOM)n=it+e,r>=bt&&r<=it+bt?(h.value=At.AREA_0,s=-r+it):r<bt&&r>=-bt?(h.value=At.AREA_1,s=-r):r<-bt&&r>=-(it+bt)?(h.value=At.AREA_2,s=-r-it):(h.value=At.AREA_3,s=r>0?-r+Bt:-r-Bt);else{var u,c,f,p,l,m,y;this.face===It.RIGHT?r=Qe(r,+it):this.face===It.BACK?r=Qe(r,+Bt):this.face===It.LEFT&&(r=Qe(r,-it)),p=Math.sin(e),l=Math.cos(e),m=Math.sin(r),y=Math.cos(r),u=l*y,c=l*m,f=p,this.face===It.FRONT?(n=Math.acos(u),s=ar(n,f,c,h)):this.face===It.RIGHT?(n=Math.acos(c),s=ar(n,f,-u,h)):this.face===It.BACK?(n=Math.acos(-u),s=ar(n,f,-c,h)):this.face===It.LEFT?(n=Math.acos(-c),s=ar(n,f,u,h)):(n=s=0,h.value=At.AREA_0)}return a=Math.atan(12/Bt*(s+Math.acos(Math.sin(s)*Math.cos(bt))-it)),o=Math.sqrt((1-Math.cos(n))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(s))))),h.value===At.AREA_1?a+=it:h.value===At.AREA_2?a+=Bt:h.value===At.AREA_3&&(a+=1.5*Bt),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,i.x=t.x,i.y=t.y,i}function Mc(i){var t={lam:0,phi:0},e,r,s,n,o,a,h,u,c,f={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,r=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),e=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?f.value=At.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(f.value=At.AREA_1,e-=it):i.x<0&&-i.x>=Math.abs(i.y)?(f.value=At.AREA_2,e=e<0?e+Bt:e-Bt):(f.value=At.AREA_3,e+=it),c=Bt/12*Math.tan(e),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),s=Math.cos(e),n=Math.tan(r),h=1-s*s*n*n*(1-Math.cos(Math.atan(1/Math.cos(a)))),h<-1?h=-1:h>1&&(h=1),this.face===It.TOP)u=Math.acos(h),t.phi=it-u,f.value===At.AREA_0?t.lam=a+it:f.value===At.AREA_1?t.lam=a<0?a+Bt:a-Bt:f.value===At.AREA_2?t.lam=a-it:t.lam=a;else if(this.face===It.BOTTOM)u=Math.acos(h),t.phi=u-it,f.value===At.AREA_0?t.lam=-a+it:f.value===At.AREA_1?t.lam=-a:f.value===At.AREA_2?t.lam=-a-it:t.lam=a<0?-a-Bt:-a+Bt;else{var p,l,m;p=h,c=p*p,c>=1?m=0:m=Math.sqrt(1-c)*Math.sin(a),c+=m*m,c>=1?l=0:l=Math.sqrt(1-c),f.value===At.AREA_1?(c=l,l=-m,m=c):f.value===At.AREA_2?(l=-l,m=-m):f.value===At.AREA_3&&(c=l,l=m,m=-c),this.face===It.RIGHT?(c=p,p=-l,l=c):this.face===It.BACK?(p=-p,l=-l):this.face===It.LEFT&&(c=p,p=l,l=-c),t.phi=Math.acos(-m)-it,t.lam=Math.atan2(l,p),this.face===It.RIGHT?t.lam=Qe(t.lam,-it):this.face===It.BACK?t.lam=Qe(t.lam,-Bt):this.face===It.LEFT&&(t.lam=Qe(t.lam,+it))}if(this.es!==0){var y,v,M;y=t.phi<0?1:0,v=Math.tan(t.phi),M=this.b/Math.sqrt(v*v+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-M*M)/(this.one_minus_f*M)),y&&(t.phi=-t.phi)}return t.lam+=this.long0,i.x=t.lam,i.y=t.phi,i}function ar(i,t,e,r){var s;return i<ot?(r.value=At.AREA_0,s=0):(s=Math.atan2(t,e),Math.abs(s)<=bt?r.value=At.AREA_0:s>bt&&s<=it+bt?(r.value=At.AREA_1,s-=it):s>it+bt||s<=-(it+bt)?(r.value=At.AREA_2,s=s>=0?s-Bt:s+Bt):(r.value=At.AREA_3,s+=it)),s}function Qe(i,t){var e=i+t;return e<-Bt?e+=mi:e>+Bt&&(e-=mi),e}var bc=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],Ac={init:_c,forward:wc,inverse:Mc,names:bc},Zr=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ei=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Mn=.8487,bn=1.3523,An=oe/5,Ec=1/An,Ke=18,or=function(i,t){return i[0]+t*(i[1]+t*(i[2]+t*i[3]))},Sc=function(i,t){return i[1]+t*(2*i[2]+t*3*i[3])};function Cc(i,t,e,r){for(var s=t;r;--r){var n=i(s);if(s-=n,Math.abs(n)<e)break}return s}function kc(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function zc(i){var t=ut(i.x-this.long0),e=Math.abs(i.y),r=Math.floor(e*An);r<0?r=0:r>=Ke&&(r=Ke-1),e=oe*(e-Ec*r);var s={x:or(Zr[r],e)*t,y:or(Ei[r],e)};return i.y<0&&(s.y=-s.y),s.x=s.x*this.a*Mn+this.x0,s.y=s.y*this.a*bn+this.y0,s}function Ic(i){var t={x:(i.x-this.x0)/(this.a*Mn),y:Math.abs(i.y-this.y0)/(this.a*bn)};if(t.y>=1)t.x/=Zr[Ke][0],t.y=i.y<0?-it:it;else{var e=Math.floor(t.y*Ke);for(e<0?e=0:e>=Ke&&(e=Ke-1);;)if(Ei[e][0]>t.y)--e;else if(Ei[e+1][0]<=t.y)++e;else break;var r=Ei[e],s=5*(t.y-r[0])/(Ei[e+1][0]-r[0]);s=Cc(function(n){return(or(r,n)-t.y)/Sc(r,n)},s,ot,100),t.x/=or(Zr[e],s),t.y=(5*e+s)*Rt,i.y<0&&(t.y=-t.y)}return t.x=ut(t.x+this.long0),t}var Bc=["Robinson","robin"],Tc={init:kc,forward:zc,inverse:Ic,names:Bc};function Fc(){this.name="geocent"}function Pc(i){var t=Vs(i,this.es,this.a);return t}function Nc(i){var t=Ys(i,this.es,this.a,this.b);return t}var Oc=["Geocentric","geocentric","geocent","Geocent"],Rc={init:Fc,forward:Pc,inverse:Nc,names:Oc},Ut={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Si={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Lc(){if(Object.keys(Si).forEach(function(e){if(typeof this[e]>"u")this[e]=Si[e].def;else{if(Si[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Si[e].num&&(this[e]=parseFloat(this[e]))}Si[e].degrees&&(this[e]=this[e]*Rt)}.bind(this)),Math.abs(Math.abs(this.lat0)-it)<ot?this.mode=this.lat0<0?Ut.S_POLE:Ut.N_POLE:Math.abs(this.lat0)<ot?this.mode=Ut.EQUIT:(this.mode=Ut.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(i),this.sw=Math.sin(i)}function Uc(i){i.x-=this.long0;var t=Math.sin(i.y),e=Math.cos(i.y),r=Math.cos(i.x),s,n;switch(this.mode){case Ut.OBLIQ:n=this.sinph0*t+this.cosph0*e*r;break;case Ut.EQUIT:n=e*r;break;case Ut.S_POLE:n=-t;break;case Ut.N_POLE:n=t;break}switch(n=this.pn1/(this.p-n),s=n*e*Math.sin(i.x),this.mode){case Ut.OBLIQ:n*=this.cosph0*t-this.sinph0*e*r;break;case Ut.EQUIT:n*=t;break;case Ut.N_POLE:n*=-(e*r);break;case Ut.S_POLE:n*=e*r;break}var o,a;return o=n*this.cg+s*this.sg,a=1/(o*this.sw*this.h1+this.cw),s=(s*this.cg-n*this.sg)*this.cw*a,n=o*a,i.x=s*this.a,i.y=n*this.a,i}function Dc(i){i.x/=this.a,i.y/=this.a;var t={x:i.x,y:i.y},e,r,s;s=1/(this.pn1-i.y*this.sw),e=this.pn1*i.x*s,r=this.pn1*i.y*this.cw*s,i.x=e*this.cg+r*this.sg,i.y=r*this.cg-e*this.sg;var n=re(i.x,i.y);if(Math.abs(n)<ot)t.x=0,t.y=i.y;else{var o,a;switch(a=1-n*n*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/n+n/this.pn1),o=Math.sqrt(1-a*a),this.mode){case Ut.OBLIQ:t.y=Math.asin(o*this.sinph0+i.y*a*this.cosph0/n),i.y=(o-this.sinph0*Math.sin(t.y))*n,i.x*=a*this.cosph0;break;case Ut.EQUIT:t.y=Math.asin(i.y*a/n),i.y=o*n,i.x*=a;break;case Ut.N_POLE:t.y=Math.asin(o),i.y=-i.y;break;case Ut.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(i.x,i.y)}return i.x=t.x+this.long0,i.y=t.y,i}var qc=["Tilted_Perspective","tpers"],jc={init:Lc,forward:Uc,inverse:Dc,names:qc};function Gc(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,t=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Wc(i){var t=i.x,e=i.y,r,s,n,o;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var a=this.radius_p/re(this.radius_p*Math.cos(e),Math.sin(e));if(s=a*Math.cos(t)*Math.cos(e),n=a*Math.sin(t)*Math.cos(e),o=a*Math.sin(e),(this.radius_g-s)*s-n*n-o*o*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;r=this.radius_g-s,this.flip_axis?(i.x=this.radius_g_1*Math.atan(n/re(o,r)),i.y=this.radius_g_1*Math.atan(o/r)):(i.x=this.radius_g_1*Math.atan(n/r),i.y=this.radius_g_1*Math.atan(o/re(n,r)))}else this.shape==="sphere"&&(r=Math.cos(e),s=Math.cos(t)*r,n=Math.sin(t)*r,o=Math.sin(e),r=this.radius_g-s,this.flip_axis?(i.x=this.radius_g_1*Math.atan(n/re(o,r)),i.y=this.radius_g_1*Math.atan(o/r)):(i.x=this.radius_g_1*Math.atan(n/r),i.y=this.radius_g_1*Math.atan(o/re(n,r))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function $c(i){var t=-1,e=0,r=0,s,n,o,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*re(1,r)):(e=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*re(1,e));var h=r/this.radius_p;if(s=e*e+h*h+t*t,n=2*this.radius_g*t,o=n*n-4*s*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-n-Math.sqrt(o))/(2*s),t=this.radius_g+a*t,e*=a,r*=a,i.x=Math.atan2(e,t),i.y=Math.atan(r*Math.cos(i.x)/t),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+r*r)):(e=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+e*e)),s=e*e+r*r+t*t,n=2*this.radius_g*t,o=n*n-4*s*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-n-Math.sqrt(o))/(2*s),t=this.radius_g+a*t,e*=a,r*=a,i.x=Math.atan2(e,t),i.y=Math.atan(r*Math.cos(i.x)/t)}return i.x=i.x+this.long0,i}var Zc=["Geostationary Satellite View","Geostationary_Satellite","geos"],Jc={init:Gc,forward:Wc,inverse:$c,names:Zc};function Hc(i){i.Proj.projections.add(rr),i.Proj.projections.add(sr),i.Proj.projections.add(tu),i.Proj.projections.add(lu),i.Proj.projections.add(yu),i.Proj.projections.add(wu),i.Proj.projections.add(Cu),i.Proj.projections.add(Tu),i.Proj.projections.add(Ru),i.Proj.projections.add(ju),i.Proj.projections.add(nl),i.Proj.projections.add(cl),i.Proj.projections.add(yl),i.Proj.projections.add(Ml),i.Proj.projections.add(Cl),i.Proj.projections.add(Tl),i.Proj.projections.add(Rl),i.Proj.projections.add(jl),i.Proj.projections.add(Hl),i.Proj.projections.add(Kl),i.Proj.projections.add(sc),i.Proj.projections.add(uc),i.Proj.projections.add(pc),i.Proj.projections.add(vc),i.Proj.projections.add(Ac),i.Proj.projections.add(Tc),i.Proj.projections.add(Rc),i.Proj.projections.add(jc),i.Proj.projections.add(Jc)}Ht.defaultDatum="WGS84",Ht.Proj=le,Ht.WGS84=new Ht.Proj("WGS84"),Ht.Point=He,Ht.toPoint=en,Ht.defs=qt,Ht.nadgrid=ih,Ht.transform=er,Ht.mgrs=gh,Ht.version="__VERSION__",Hc(Ht);var Xc=Object.freeze({__proto__:null,default:Ht}),Vc=Jn(Xc);function hr(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var En={exports:{}};/*!

	JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/main/LICENSE
	*/(function(i,t){(function(e){i.exports=e()})(function(){return function e(r,s,n){function o(u,c){if(!s[u]){if(!r[u]){var f=typeof hr=="function"&&hr;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var l=s[u]={exports:{}};r[u][0].call(l.exports,function(m){var y=r[u][1][m];return o(y||m)},l,l.exports,e,r,s,n)}return s[u].exports}for(var a=typeof hr=="function"&&hr,h=0;h<n.length;h++)o(n[h]);return o}({1:[function(e,r,s){var n=e("./utils"),o=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(h){for(var u,c,f,p,l,m,y,v=[],M=0,S=h.length,C=S,T=n.getTypeOf(h)!=="string";M<h.length;)C=S-M,f=T?(u=h[M++],c=M<S?h[M++]:0,M<S?h[M++]:0):(u=h.charCodeAt(M++),c=M<S?h.charCodeAt(M++):0,M<S?h.charCodeAt(M++):0),p=u>>2,l=(3&u)<<4|c>>4,m=1<C?(15&c)<<2|f>>6:64,y=2<C?63&f:64,v.push(a.charAt(p)+a.charAt(l)+a.charAt(m)+a.charAt(y));return v.join("")},s.decode=function(h){var u,c,f,p,l,m,y=0,v=0,M="data:";if(h.substr(0,M.length)===M)throw new Error("Invalid base64 input, it looks like a data url.");var S,C=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===a.charAt(64)&&C--,h.charAt(h.length-2)===a.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|C):new Array(0|C);y<h.length;)u=a.indexOf(h.charAt(y++))<<2|(p=a.indexOf(h.charAt(y++)))>>4,c=(15&p)<<4|(l=a.indexOf(h.charAt(y++)))>>2,f=(3&l)<<6|(m=a.indexOf(h.charAt(y++))),S[v++]=u,l!==64&&(S[v++]=c),m!==64&&(S[v++]=f);return S}},{"./support":30,"./utils":32}],2:[function(e,r,s){var n=e("./external"),o=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),h=e("./stream/DataLengthProbe");function u(c,f,p,l,m){this.compressedSize=c,this.uncompressedSize=f,this.crc32=p,this.compression=l,this.compressedContent=m}u.prototype={getContentWorker:function(){var c=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,f,p){return c.pipe(new a).pipe(new h("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new h("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,r,s){var n=e("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},s.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,r,s){var n=e("./utils"),o=function(){for(var a,h=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;h[u]=a}return h}();r.exports=function(a,h){return a!==void 0&&a.length?n.getTypeOf(a)!=="string"?function(u,c,f,p){var l=o,m=p+f;u^=-1;for(var y=p;y<m;y++)u=u>>>8^l[255&(u^c[y])];return-1^u}(0|h,a,a.length,0):function(u,c,f,p){var l=o,m=p+f;u^=-1;for(var y=p;y<m;y++)u=u>>>8^l[255&(u^c.charCodeAt(y))];return-1^u}(0|h,a,a.length,0):0}},{"./utils":32}],5:[function(e,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(e,r,s){var n=null;n=typeof Promise<"u"?Promise:e("lie"),r.exports={Promise:n}},{lie:37}],7:[function(e,r,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),a=e("./utils"),h=e("./stream/GenericWorker"),u=n?"uint8array":"array";function c(f,p){h.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}s.magic="\b\0",a.inherits(c,h),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},c.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},s.compressWorker=function(f){return new c("Deflate",f)},s.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,r,s){function n(l,m){var y,v="";for(y=0;y<m;y++)v+=String.fromCharCode(255&l),l>>>=8;return v}function o(l,m,y,v,M,S){var C,T,F=l.file,L=l.compression,U=S!==u.utf8encode,V=a.transformTo("string",S(F.name)),W=a.transformTo("string",u.utf8encode(F.name)),J=F.comment,et=a.transformTo("string",S(J)),P=a.transformTo("string",u.utf8encode(J)),Z=W.length!==F.name.length,A=P.length!==J.length,H="",lt="",Q="",pt=F.dir,K=F.date,ct={crc32:0,compressedSize:0,uncompressedSize:0};m&&!y||(ct.crc32=l.crc32,ct.compressedSize=l.compressedSize,ct.uncompressedSize=l.uncompressedSize);var q=0;m&&(q|=8),U||!Z&&!A||(q|=2048);var j=0,ft=0;pt&&(j|=16),M==="UNIX"?(ft=798,j|=function(nt,Et){var Mt=nt;return nt||(Mt=Et?16893:33204),(65535&Mt)<<16}(F.unixPermissions,pt)):(ft=20,j|=function(nt){return 63&(nt||0)}(F.dosPermissions)),C=K.getUTCHours(),C<<=6,C|=K.getUTCMinutes(),C<<=5,C|=K.getUTCSeconds()/2,T=K.getUTCFullYear()-1980,T<<=4,T|=K.getUTCMonth()+1,T<<=5,T|=K.getUTCDate(),Z&&(lt=n(1,1)+n(c(V),4)+W,H+="up"+n(lt.length,2)+lt),A&&(Q=n(1,1)+n(c(et),4)+P,H+="uc"+n(Q.length,2)+Q);var ht="";return ht+=`
\0`,ht+=n(q,2),ht+=L.magic,ht+=n(C,2),ht+=n(T,2),ht+=n(ct.crc32,4),ht+=n(ct.compressedSize,4),ht+=n(ct.uncompressedSize,4),ht+=n(V.length,2),ht+=n(H.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ht+V+H,dirRecord:f.CENTRAL_FILE_HEADER+n(ft,2)+ht+n(et.length,2)+"\0\0\0\0"+n(j,4)+n(v,4)+V+H+et}}var a=e("../utils"),h=e("../stream/GenericWorker"),u=e("../utf8"),c=e("../crc32"),f=e("../signature");function p(l,m,y,v){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=y,this.encodeFileName=v,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,h),p.prototype.push=function(l){var m=l.meta.percent||0,y=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,h.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:y?(m+100*(y-v-1))/y:100}}))},p.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var m=this.streamFiles&&!l.file.dir;if(m){var y=o(l,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(l){this.accumulate=!1;var m=this.streamFiles&&!l.file.dir,y=o(l,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),m)this.push({data:function(v){return f.DATA_DESCRIPTOR+n(v.crc32,4)+n(v.compressedSize,4)+n(v.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var l=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var y=this.bytesWritten-l,v=function(M,S,C,T,F){var L=a.transformTo("string",F(T));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(M,2)+n(M,2)+n(S,4)+n(C,4)+n(L.length,2)+L}(this.dirRecords.length,y,l,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(l){this._sources.push(l);var m=this;return l.on("data",function(y){m.processChunk(y)}),l.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),l.on("error",function(y){m.error(y)}),this},p.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(l){var m=this._sources;if(!h.prototype.error.call(this,l))return!1;for(var y=0;y<m.length;y++)try{m[y].error(l)}catch{}return!0},p.prototype.lock=function(){h.prototype.lock.call(this);for(var l=this._sources,m=0;m<l.length;m++)l[m].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,r,s){var n=e("../compressions"),o=e("./ZipFileWorker");s.generateWorker=function(a,h,u){var c=new o(h.streamFiles,u,h.platform,h.encodeFileName),f=0;try{a.forEach(function(p,l){f++;var m=function(S,C){var T=S||C,F=n[T];if(!F)throw new Error(T+" is not a valid compression method !");return F}(l.options.compression,h.compression),y=l.options.compressionOptions||h.compressionOptions||{},v=l.dir,M=l.date;l._compressWorker(m,y).withStreamInfo("file",{name:p,dir:v,date:M,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(p){c.error(p)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,r,s){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new n;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(o,a){return new n().loadAsync(o,a)},n.external=e("./external"),r.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,r,s){var n=e("./utils"),o=e("./external"),a=e("./utf8"),h=e("./zipEntries"),u=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function f(p){return new o.Promise(function(l,m){var y=p.decompressed.getContentWorker().pipe(new u);y.on("error",function(v){m(v)}).on("end",function(){y.streamInfo.crc32!==p.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}r.exports=function(p,l){var m=this;return l=n.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",p,!0,l.optimizedBinaryString,l.base64).then(function(y){var v=new h(l);return v.load(y),v}).then(function(y){var v=[o.Promise.resolve(y)],M=y.files;if(l.checkCRC32)for(var S=0;S<M.length;S++)v.push(f(M[S]));return o.Promise.all(v)}).then(function(y){for(var v=y.shift(),M=v.files,S=0;S<M.length;S++){var C=M[S],T=C.fileNameStr,F=n.resolve(C.fileNameStr);m.file(F,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:l.createFolders}),C.dir||(m.file(F).unsafeOriginalName=T)}return v.zipComment.length&&(m.comment=v.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,r,s){var n=e("../utils"),o=e("../stream/GenericWorker");function a(h,u){o.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(u)}n.inherits(a,o),a.prototype._bindStream=function(h){var u=this;(this._stream=h).pause(),h.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,r,s){var n=e("readable-stream").Readable;function o(a,h,u){n.call(this,h),this._helper=a;var c=this;a.on("data",function(f,p){c.push(f)||c._helper.pause(),u&&u(p)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}e("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,o);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,o)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var o=new Buffer(n);return o.fill(0),o},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(e,r,s){function n(F,L,U){var V,W=a.getTypeOf(L),J=a.extend(U||{},c);J.date=J.date||new Date,J.compression!==null&&(J.compression=J.compression.toUpperCase()),typeof J.unixPermissions=="string"&&(J.unixPermissions=parseInt(J.unixPermissions,8)),J.unixPermissions&&16384&J.unixPermissions&&(J.dir=!0),J.dosPermissions&&16&J.dosPermissions&&(J.dir=!0),J.dir&&(F=M(F)),J.createFolders&&(V=v(F))&&S.call(this,V,!0);var et=W==="string"&&J.binary===!1&&J.base64===!1;U&&U.binary!==void 0||(J.binary=!et),(L instanceof f&&L.uncompressedSize===0||J.dir||!L||L.length===0)&&(J.base64=!1,J.binary=!0,L="",J.compression="STORE",W="string");var P=null;P=L instanceof f||L instanceof h?L:m.isNode&&m.isStream(L)?new y(F,L):a.prepareContent(F,L,J.binary,J.optimizedBinaryString,J.base64);var Z=new p(F,P,J);this.files[F]=Z}var o=e("./utf8"),a=e("./utils"),h=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),c=e("./defaults"),f=e("./compressedObject"),p=e("./zipObject"),l=e("./generate"),m=e("./nodejsUtils"),y=e("./nodejs/NodejsStreamInputAdapter"),v=function(F){F.slice(-1)==="/"&&(F=F.substring(0,F.length-1));var L=F.lastIndexOf("/");return 0<L?F.substring(0,L):""},M=function(F){return F.slice(-1)!=="/"&&(F+="/"),F},S=function(F,L){return L=L!==void 0?L:c.createFolders,F=M(F),this.files[F]||n.call(this,F,null,{dir:!0,createFolders:L}),this.files[F]};function C(F){return Object.prototype.toString.call(F)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(F){var L,U,V;for(L in this.files)V=this.files[L],(U=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&F(U,V)},filter:function(F){var L=[];return this.forEach(function(U,V){F(U,V)&&L.push(V)}),L},file:function(F,L,U){if(arguments.length!==1)return F=this.root+F,n.call(this,F,L,U),this;if(C(F)){var V=F;return this.filter(function(J,et){return!et.dir&&V.test(J)})}var W=this.files[this.root+F];return W&&!W.dir?W:null},folder:function(F){if(!F)return this;if(C(F))return this.filter(function(W,J){return J.dir&&F.test(W)});var L=this.root+F,U=S.call(this,L),V=this.clone();return V.root=U.name,V},remove:function(F){F=this.root+F;var L=this.files[F];if(L||(F.slice(-1)!=="/"&&(F+="/"),L=this.files[F]),L&&!L.dir)delete this.files[F];else for(var U=this.filter(function(W,J){return J.name.slice(0,F.length)===F}),V=0;V<U.length;V++)delete this.files[U[V].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(F){var L,U={};try{if((U=a.extend(F||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");a.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var V=U.comment||this.comment||"";L=l.generateWorker(this,U,V)}catch(W){(L=new h("error")).error(W)}return new u(L,U.type||"string",U.mimeType)},generateAsync:function(F,L){return this.generateInternalStream(F).accumulate(L)},generateNodeStream:function(F,L){return(F=F||{}).type||(F.type="nodebuffer"),this.generateInternalStream(F).toNodejsStream(L)}};r.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,r,s){r.exports=e("stream")},{stream:void 0}],17:[function(e,r,s){var n=e("./DataReader");function o(a){n.call(this,a);for(var h=0;h<this.data.length;h++)a[h]=255&a[h]}e("../utils").inherits(o,n),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var h=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===h&&this.data[p+1]===u&&this.data[p+2]===c&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var h=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return h===p[0]&&u===p[1]&&c===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,h},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,r,s){var n=e("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var h,u=0;for(this.checkOffset(a),h=this.index+a-1;h>=this.index;h--)u=(u<<8)+this.byteAt(h);return this.index+=a,u},readString:function(a){return n.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(e,r,s){var n=e("./Uint8ArrayReader");function o(a){n.call(this,a)}e("../utils").inherits(o,n),o.prototype.readData=function(a){this.checkOffset(a);var h=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,h},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,r,s){var n=e("./DataReader");function o(a){n.call(this,a)}e("../utils").inherits(o,n),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var h=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,h},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,r,s){var n=e("./ArrayReader");function o(a){n.call(this,a)}e("../utils").inherits(o,n),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,h},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,r,s){var n=e("../utils"),o=e("../support"),a=e("./ArrayReader"),h=e("./StringReader"),u=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");r.exports=function(f){var p=n.getTypeOf(f);return n.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new c(n.transformTo("uint8array",f)):new a(n.transformTo("array",f)):new h(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,r,s){var n=e("./GenericWorker"),o=e("../utils");function a(h){n.call(this,"ConvertWorker to "+h),this.destType=h}o.inherits(a,n),a.prototype.processChunk=function(h){this.push({data:o.transformTo(this.destType,h.data),meta:h.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,r,s){var n=e("./GenericWorker"),o=e("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,n),a.prototype.processChunk=function(h){this.streamInfo.crc32=o(h.data,this.streamInfo.crc32||0),this.push(h)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,r,s){var n=e("../utils"),o=e("./GenericWorker");function a(h){o.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}n.inherits(a,o),a.prototype.processChunk=function(h){if(h){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+h.data.length}o.prototype.processChunk.call(this,h)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,r,s){var n=e("../utils"),o=e("./GenericWorker");function a(h){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=n.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}n.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,u);break;case"uint8array":h=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":h=this.data.slice(this.index,u)}return this.index=u,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,r,s){function n(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var h=0;h<this._listeners[o].length;h++)this._listeners[o][h].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(h){a.processChunk(h)}),o.on("end",function(){a.end()}),o.on("error",function(h){a.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=n},{}],29:[function(e,r,s){var n=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),h=e("../base64"),u=e("../support"),c=e("../external"),f=null;if(u.nodestream)try{f=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(m,y){return new c.Promise(function(v,M){var S=[],C=m._internalType,T=m._outputType,F=m._mimeType;m.on("data",function(L,U){S.push(L),y&&y(U)}).on("error",function(L){S=[],M(L)}).on("end",function(){try{var L=function(U,V,W){switch(U){case"blob":return n.newBlob(n.transformTo("arraybuffer",V),W);case"base64":return h.encode(V);default:return n.transformTo(U,V)}}(T,function(U,V){var W,J=0,et=null,P=0;for(W=0;W<V.length;W++)P+=V[W].length;switch(U){case"string":return V.join("");case"array":return Array.prototype.concat.apply([],V);case"uint8array":for(et=new Uint8Array(P),W=0;W<V.length;W++)et.set(V[W],J),J+=V[W].length;return et;case"nodebuffer":return Buffer.concat(V);default:throw new Error("concat : unsupported type '"+U+"'")}}(C,S),F);v(L)}catch(U){M(U)}S=[]}).resume()})}function l(m,y,v){var M=y;switch(y){case"blob":case"arraybuffer":M="uint8array";break;case"base64":M="string"}try{this._internalType=M,this._outputType=y,this._mimeType=v,n.checkSupport(M),this._worker=m.pipe(new o(M)),m.lock()}catch(S){this._worker=new a("error"),this._worker.error(S)}}l.prototype={accumulate:function(m){return p(this,m)},on:function(m,y){var v=this;return m==="data"?this._worker.on(m,function(M){y.call(v,M.data,M.meta)}):this._worker.on(m,function(){n.delay(y,arguments,v)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},m)}},r.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var n=new ArrayBuffer(0);try{s.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!e("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(e,r,s){for(var n=e("./utils"),o=e("./support"),a=e("./nodejsUtils"),h=e("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function f(){h.call(this,"utf-8 decode"),this.leftOver=null}function p(){h.call(this,"utf-8 encode")}s.utf8encode=function(l){return o.nodebuffer?a.newBufferFrom(l,"utf-8"):function(m){var y,v,M,S,C,T=m.length,F=0;for(S=0;S<T;S++)(64512&(v=m.charCodeAt(S)))==55296&&S+1<T&&(64512&(M=m.charCodeAt(S+1)))==56320&&(v=65536+(v-55296<<10)+(M-56320),S++),F+=v<128?1:v<2048?2:v<65536?3:4;for(y=o.uint8array?new Uint8Array(F):new Array(F),S=C=0;C<F;S++)(64512&(v=m.charCodeAt(S)))==55296&&S+1<T&&(64512&(M=m.charCodeAt(S+1)))==56320&&(v=65536+(v-55296<<10)+(M-56320),S++),v<128?y[C++]=v:(v<2048?y[C++]=192|v>>>6:(v<65536?y[C++]=224|v>>>12:(y[C++]=240|v>>>18,y[C++]=128|v>>>12&63),y[C++]=128|v>>>6&63),y[C++]=128|63&v);return y}(l)},s.utf8decode=function(l){return o.nodebuffer?n.transformTo("nodebuffer",l).toString("utf-8"):function(m){var y,v,M,S,C=m.length,T=new Array(2*C);for(y=v=0;y<C;)if((M=m[y++])<128)T[v++]=M;else if(4<(S=u[M]))T[v++]=65533,y+=S-1;else{for(M&=S===2?31:S===3?15:7;1<S&&y<C;)M=M<<6|63&m[y++],S--;1<S?T[v++]=65533:M<65536?T[v++]=M:(M-=65536,T[v++]=55296|M>>10&1023,T[v++]=56320|1023&M)}return T.length!==v&&(T.subarray?T=T.subarray(0,v):T.length=v),n.applyFromCharCode(T)}(l=n.transformTo(o.uint8array?"uint8array":"array",l))},n.inherits(f,h),f.prototype.processChunk=function(l){var m=n.transformTo(o.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var y=m;(m=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),m.set(y,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var v=function(S,C){var T;for((C=C||S.length)>S.length&&(C=S.length),T=C-1;0<=T&&(192&S[T])==128;)T--;return T<0||T===0?C:T+u[S[T]]>C?T:C}(m),M=m;v!==m.length&&(o.uint8array?(M=m.subarray(0,v),this.leftOver=m.subarray(v,m.length)):(M=m.slice(0,v),this.leftOver=m.slice(v,m.length))),this.push({data:s.utf8decode(M),meta:l.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,n.inherits(p,h),p.prototype.processChunk=function(l){this.push({data:s.utf8encode(l.data),meta:l.meta})},s.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,r,s){var n=e("./support"),o=e("./base64"),a=e("./nodejsUtils"),h=e("./external");function u(y){return y}function c(y,v){for(var M=0;M<y.length;++M)v[M]=255&y.charCodeAt(M);return v}e("setimmediate"),s.newBlob=function(y,v){s.checkSupport("blob");try{return new Blob([y],{type:v})}catch{try{var M=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return M.append(y),M.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(y,v,M){var S=[],C=0,T=y.length;if(T<=M)return String.fromCharCode.apply(null,y);for(;C<T;)v==="array"||v==="nodebuffer"?S.push(String.fromCharCode.apply(null,y.slice(C,Math.min(C+M,T)))):S.push(String.fromCharCode.apply(null,y.subarray(C,Math.min(C+M,T)))),C+=M;return S.join("")},stringifyByChar:function(y){for(var v="",M=0;M<y.length;M++)v+=String.fromCharCode(y[M]);return v},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(y){var v=65536,M=s.getTypeOf(y),S=!0;if(M==="uint8array"?S=f.applyCanBeUsed.uint8array:M==="nodebuffer"&&(S=f.applyCanBeUsed.nodebuffer),S)for(;1<v;)try{return f.stringifyByChunk(y,M,v)}catch{v=Math.floor(v/2)}return f.stringifyByChar(y)}function l(y,v){for(var M=0;M<y.length;M++)v[M]=y[M];return v}s.applyFromCharCode=p;var m={};m.string={string:u,array:function(y){return c(y,new Array(y.length))},arraybuffer:function(y){return m.string.uint8array(y).buffer},uint8array:function(y){return c(y,new Uint8Array(y.length))},nodebuffer:function(y){return c(y,a.allocBuffer(y.length))}},m.array={string:p,array:u,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(y)}},m.arraybuffer={string:function(y){return p(new Uint8Array(y))},array:function(y){return l(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:u,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(new Uint8Array(y))}},m.uint8array={string:p,array:function(y){return l(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:u,nodebuffer:function(y){return a.newBufferFrom(y)}},m.nodebuffer={string:p,array:function(y){return l(y,new Array(y.length))},arraybuffer:function(y){return m.nodebuffer.uint8array(y).buffer},uint8array:function(y){return l(y,new Uint8Array(y.length))},nodebuffer:u},s.transformTo=function(y,v){if(v=v||"",!y)return v;s.checkSupport(y);var M=s.getTypeOf(v);return m[M][y](v)},s.resolve=function(y){for(var v=y.split("/"),M=[],S=0;S<v.length;S++){var C=v[S];C==="."||C===""&&S!==0&&S!==v.length-1||(C===".."?M.pop():M.push(C))}return M.join("/")},s.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":n.nodebuffer&&a.isBuffer(y)?"nodebuffer":n.uint8array&&y instanceof Uint8Array?"uint8array":n.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(y){if(!n[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(y){var v,M,S="";for(M=0;M<(y||"").length;M++)S+="\\x"+((v=y.charCodeAt(M))<16?"0":"")+v.toString(16).toUpperCase();return S},s.delay=function(y,v,M){setImmediate(function(){y.apply(M||null,v||[])})},s.inherits=function(y,v){function M(){}M.prototype=v.prototype,y.prototype=new M},s.extend=function(){var y,v,M={};for(y=0;y<arguments.length;y++)for(v in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],v)&&M[v]===void 0&&(M[v]=arguments[y][v]);return M},s.prepareContent=function(y,v,M,S,C){return h.Promise.resolve(v).then(function(T){return n.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new h.Promise(function(F,L){var U=new FileReader;U.onload=function(V){F(V.target.result)},U.onerror=function(V){L(V.target.error)},U.readAsArrayBuffer(T)}):T}).then(function(T){var F=s.getTypeOf(T);return F?(F==="arraybuffer"?T=s.transformTo("uint8array",T):F==="string"&&(C?T=o.decode(T):M&&S!==!0&&(T=function(L){return c(L,n.uint8array?new Uint8Array(L.length):new Array(L.length))}(T))),T):h.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,r,s){var n=e("./reader/readerFor"),o=e("./utils"),a=e("./signature"),h=e("./zipEntry"),u=e("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var l=this.reader.index;this.reader.setIndex(f);var m=this.reader.readString(4)===p;return this.reader.setIndex(l),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",l=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,l,m=this.zip64EndOfCentralSize-44;0<m;)f=this.reader.readInt(2),p=this.reader.readInt(4),l=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var m=p-l;if(0<m)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(f){this.reader=n(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,r,s){var n=e("./reader/readerFor"),o=e("./utils"),a=e("./compressedObject"),h=e("./crc32"),u=e("./utf8"),c=e("./compressions"),f=e("./support");function p(l,m){this.options=l,this.loadOptions=m}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var m,y;if(l.skip(22),this.fileNameLength=l.readInt(2),y=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(v){for(var M in c)if(Object.prototype.hasOwnProperty.call(c,M)&&c[M].magic===v)return c[M];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,m,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var m=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(m),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var l=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(l){var m,y,v,M=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<M;)m=l.readInt(2),y=l.readInt(2),v=l.readData(y),this.extraFields[m]={id:m,length:y,value:v};l.setIndex(M)},handleUTF8:function(){var l=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var y=o.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var M=o.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(M)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var m=n(l.value);return m.readInt(1)!==1||h(this.fileName)!==m.readInt(4)?null:u.utf8decode(m.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var m=n(l.value);return m.readInt(1)!==1||h(this.fileComment)!==m.readInt(4)?null:u.utf8decode(m.readData(l.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,r,s){function n(m,y,v){this.name=m,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=y,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var o=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),h=e("./utf8"),u=e("./compressedObject"),c=e("./stream/GenericWorker");n.prototype={internalStream:function(m){var y=null,v="string";try{if(!m)throw new Error("No output type specified.");var M=(v=m.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),y=this._decompressWorker();var S=!this._dataBinary;S&&!M&&(y=y.pipe(new h.Utf8EncodeWorker)),!S&&M&&(y=y.pipe(new h.Utf8DecodeWorker))}catch(C){(y=new c("error")).error(C)}return new o(y,v,"")},async:function(m,y){return this.internalStream(m).accumulate(y)},nodeStream:function(m,y){return this.internalStream(m||"nodebuffer").toNodejsStream(y)},_compressWorker:function(m,y){if(this._data instanceof u&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new h.Utf8EncodeWorker)),u.createWorkerFrom(v,m,y)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<f.length;l++)n.prototype[f[l]]=p;r.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,r,s){(function(n){var o,a,h=n.MutationObserver||n.WebKitMutationObserver;if(h){var u=0,c=new h(m),f=n.document.createTextNode("");c.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(n.setImmediate||n.MessageChannel===void 0)o="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var y=n.document.createElement("script");y.onreadystatechange=function(){m(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},n.document.documentElement.appendChild(y)}:function(){setTimeout(m,0)};else{var p=new n.MessageChannel;p.port1.onmessage=m,o=function(){p.port2.postMessage(0)}}var l=[];function m(){var y,v;a=!0;for(var M=l.length;M;){for(v=l,l=[],y=-1;++y<M;)v[y]();M=l.length}a=!1}r.exports=function(y){l.push(y)!==1||a||o()}}).call(this,typeof Pt<"u"?Pt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,r,s){var n=e("immediate");function o(){}var a={},h=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(M){if(typeof M!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,M!==o&&y(this,M)}function p(M,S,C){this.promise=M,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function l(M,S,C){n(function(){var T;try{T=S(C)}catch(F){return a.reject(M,F)}T===M?a.reject(M,new TypeError("Cannot resolve promise with itself")):a.resolve(M,T)})}function m(M){var S=M&&M.then;if(M&&(typeof M=="object"||typeof M=="function")&&typeof S=="function")return function(){S.apply(M,arguments)}}function y(M,S){var C=!1;function T(U){C||(C=!0,a.reject(M,U))}function F(U){C||(C=!0,a.resolve(M,U))}var L=v(function(){S(F,T)});L.status==="error"&&T(L.value)}function v(M,S){var C={};try{C.value=M(S),C.status="success"}catch(T){C.status="error",C.value=T}return C}(r.exports=f).prototype.finally=function(M){if(typeof M!="function")return this;var S=this.constructor;return this.then(function(C){return S.resolve(M()).then(function(){return C})},function(C){return S.resolve(M()).then(function(){throw C})})},f.prototype.catch=function(M){return this.then(null,M)},f.prototype.then=function(M,S){if(typeof M!="function"&&this.state===u||typeof S!="function"&&this.state===h)return this;var C=new this.constructor(o);return this.state!==c?l(C,this.state===u?M:S,this.outcome):this.queue.push(new p(C,M,S)),C},p.prototype.callFulfilled=function(M){a.resolve(this.promise,M)},p.prototype.otherCallFulfilled=function(M){l(this.promise,this.onFulfilled,M)},p.prototype.callRejected=function(M){a.reject(this.promise,M)},p.prototype.otherCallRejected=function(M){l(this.promise,this.onRejected,M)},a.resolve=function(M,S){var C=v(m,S);if(C.status==="error")return a.reject(M,C.value);var T=C.value;if(T)y(M,T);else{M.state=u,M.outcome=S;for(var F=-1,L=M.queue.length;++F<L;)M.queue[F].callFulfilled(S)}return M},a.reject=function(M,S){M.state=h,M.outcome=S;for(var C=-1,T=M.queue.length;++C<T;)M.queue[C].callRejected(S);return M},f.resolve=function(M){return M instanceof this?M:a.resolve(new this(o),M)},f.reject=function(M){var S=new this(o);return a.reject(S,M)},f.all=function(M){var S=this;if(Object.prototype.toString.call(M)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=M.length,T=!1;if(!C)return this.resolve([]);for(var F=new Array(C),L=0,U=-1,V=new this(o);++U<C;)W(M[U],U);return V;function W(J,et){S.resolve(J).then(function(P){F[et]=P,++L!==C||T||(T=!0,a.resolve(V,F))},function(P){T||(T=!0,a.reject(V,P))})}},f.race=function(M){var S=this;if(Object.prototype.toString.call(M)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=M.length,T=!1;if(!C)return this.resolve([]);for(var F=-1,L=new this(o);++F<C;)U=M[F],S.resolve(U).then(function(V){T||(T=!0,a.resolve(L,V))},function(V){T||(T=!0,a.reject(L,V))});var U;return L}},{immediate:36}],38:[function(e,r,s){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),r.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,r,s){var n=e("./zlib/deflate"),o=e("./utils/common"),a=e("./utils/strings"),h=e("./zlib/messages"),u=e("./zlib/zstream"),c=Object.prototype.toString,f=0,p=-1,l=0,m=8;function y(M){if(!(this instanceof y))return new y(M);this.options=o.assign({level:p,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},M||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var C=n.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(C!==f)throw new Error(h[C]);if(S.header&&n.deflateSetHeader(this.strm,S.header),S.dictionary){var T;if(T=typeof S.dictionary=="string"?a.string2buf(S.dictionary):c.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(C=n.deflateSetDictionary(this.strm,T))!==f)throw new Error(h[C]);this._dict_set=!0}}function v(M,S){var C=new y(S);if(C.push(M,!0),C.err)throw C.msg||h[C.err];return C.result}y.prototype.push=function(M,S){var C,T,F=this.strm,L=this.options.chunkSize;if(this.ended)return!1;T=S===~~S?S:S===!0?4:0,typeof M=="string"?F.input=a.string2buf(M):c.call(M)==="[object ArrayBuffer]"?F.input=new Uint8Array(M):F.input=M,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new o.Buf8(L),F.next_out=0,F.avail_out=L),(C=n.deflate(F,T))!==1&&C!==f)return this.onEnd(C),!(this.ended=!0);F.avail_out!==0&&(F.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(F.output,F.next_out))):this.onData(o.shrinkBuf(F.output,F.next_out)))}while((0<F.avail_in||F.avail_out===0)&&C!==1);return T===4?(C=n.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===f):T!==2||(this.onEnd(f),!(F.avail_out=0))},y.prototype.onData=function(M){this.chunks.push(M)},y.prototype.onEnd=function(M){M===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg},s.Deflate=y,s.deflate=v,s.deflateRaw=function(M,S){return(S=S||{}).raw=!0,v(M,S)},s.gzip=function(M,S){return(S=S||{}).gzip=!0,v(M,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,r,s){var n=e("./zlib/inflate"),o=e("./utils/common"),a=e("./utils/strings"),h=e("./zlib/constants"),u=e("./zlib/messages"),c=e("./zlib/zstream"),f=e("./zlib/gzheader"),p=Object.prototype.toString;function l(y){if(!(this instanceof l))return new l(y);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},y||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||y&&y.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&!(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var M=n.inflateInit2(this.strm,v.windowBits);if(M!==h.Z_OK)throw new Error(u[M]);this.header=new f,n.inflateGetHeader(this.strm,this.header)}function m(y,v){var M=new l(v);if(M.push(y,!0),M.err)throw M.msg||u[M.err];return M.result}l.prototype.push=function(y,v){var M,S,C,T,F,L,U=this.strm,V=this.options.chunkSize,W=this.options.dictionary,J=!1;if(this.ended)return!1;S=v===~~v?v:v===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof y=="string"?U.input=a.binstring2buf(y):p.call(y)==="[object ArrayBuffer]"?U.input=new Uint8Array(y):U.input=y,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new o.Buf8(V),U.next_out=0,U.avail_out=V),(M=n.inflate(U,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&W&&(L=typeof W=="string"?a.string2buf(W):p.call(W)==="[object ArrayBuffer]"?new Uint8Array(W):W,M=n.inflateSetDictionary(this.strm,L)),M===h.Z_BUF_ERROR&&J===!0&&(M=h.Z_OK,J=!1),M!==h.Z_STREAM_END&&M!==h.Z_OK)return this.onEnd(M),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&M!==h.Z_STREAM_END&&(U.avail_in!==0||S!==h.Z_FINISH&&S!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=a.utf8border(U.output,U.next_out),T=U.next_out-C,F=a.buf2string(U.output,C),U.next_out=T,U.avail_out=V-T,T&&o.arraySet(U.output,U.output,C,T,0),this.onData(F)):this.onData(o.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(J=!0)}while((0<U.avail_in||U.avail_out===0)&&M!==h.Z_STREAM_END);return M===h.Z_STREAM_END&&(S=h.Z_FINISH),S===h.Z_FINISH?(M=n.inflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===h.Z_OK):S!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(U.avail_out=0))},l.prototype.onData=function(y){this.chunks.push(y)},l.prototype.onEnd=function(y){y===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},s.Inflate=l,s.inflate=m,s.inflateRaw=function(y,v){return(v=v||{}).raw=!0,m(y,v)},s.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,r,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(h){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(h[f]=c[f])}}return h},s.shrinkBuf=function(h,u){return h.length===u?h:h.subarray?h.subarray(0,u):(h.length=u,h)};var o={arraySet:function(h,u,c,f,p){if(u.subarray&&h.subarray)h.set(u.subarray(c,c+f),p);else for(var l=0;l<f;l++)h[p+l]=u[c+l]},flattenChunks:function(h){var u,c,f,p,l,m;for(u=f=0,c=h.length;u<c;u++)f+=h[u].length;for(m=new Uint8Array(f),u=p=0,c=h.length;u<c;u++)l=h[u],m.set(l,p),p+=l.length;return m}},a={arraySet:function(h,u,c,f,p){for(var l=0;l<f;l++)h[p+l]=u[c+l]},flattenChunks:function(h){return[].concat.apply([],h)}};s.setTyped=function(h){h?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(n)},{}],42:[function(e,r,s){var n=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var h=new n.Buf8(256),u=0;u<256;u++)h[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(f,p));for(var l="",m=0;m<p;m++)l+=String.fromCharCode(f[m]);return l}h[254]=h[254]=1,s.string2buf=function(f){var p,l,m,y,v,M=f.length,S=0;for(y=0;y<M;y++)(64512&(l=f.charCodeAt(y)))==55296&&y+1<M&&(64512&(m=f.charCodeAt(y+1)))==56320&&(l=65536+(l-55296<<10)+(m-56320),y++),S+=l<128?1:l<2048?2:l<65536?3:4;for(p=new n.Buf8(S),y=v=0;v<S;y++)(64512&(l=f.charCodeAt(y)))==55296&&y+1<M&&(64512&(m=f.charCodeAt(y+1)))==56320&&(l=65536+(l-55296<<10)+(m-56320),y++),l<128?p[v++]=l:(l<2048?p[v++]=192|l>>>6:(l<65536?p[v++]=224|l>>>12:(p[v++]=240|l>>>18,p[v++]=128|l>>>12&63),p[v++]=128|l>>>6&63),p[v++]=128|63&l);return p},s.buf2binstring=function(f){return c(f,f.length)},s.binstring2buf=function(f){for(var p=new n.Buf8(f.length),l=0,m=p.length;l<m;l++)p[l]=f.charCodeAt(l);return p},s.buf2string=function(f,p){var l,m,y,v,M=p||f.length,S=new Array(2*M);for(l=m=0;l<M;)if((y=f[l++])<128)S[m++]=y;else if(4<(v=h[y]))S[m++]=65533,l+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&l<M;)y=y<<6|63&f[l++],v--;1<v?S[m++]=65533:y<65536?S[m++]=y:(y-=65536,S[m++]=55296|y>>10&1023,S[m++]=56320|1023&y)}return c(S,m)},s.utf8border=function(f,p){var l;for((p=p||f.length)>f.length&&(p=f.length),l=p-1;0<=l&&(192&f[l])==128;)l--;return l<0||l===0?p:l+h[f[l]]>p?l:p}},{"./common":41}],43:[function(e,r,s){r.exports=function(n,o,a,h){for(var u=65535&n|0,c=n>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;c=c+(u=u+o[h++]|0)|0,--f;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(e,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,r,s){var n=function(){for(var o,a=[],h=0;h<256;h++){o=h;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[h]=o}return a}();r.exports=function(o,a,h,u){var c=n,f=u+h;o^=-1;for(var p=u;p<f;p++)o=o>>>8^c[255&(o^a[p])];return-1^o}},{}],46:[function(e,r,s){var n,o=e("../utils/common"),a=e("./trees"),h=e("./adler32"),u=e("./crc32"),c=e("./messages"),f=0,p=4,l=0,m=-2,y=-1,v=4,M=2,S=8,C=9,T=286,F=30,L=19,U=2*T+1,V=15,W=3,J=258,et=J+W+1,P=42,Z=113,A=1,H=2,lt=3,Q=4;function pt(g,G){return g.msg=c[G],G}function K(g){return(g<<1)-(4<g?9:0)}function ct(g){for(var G=g.length;0<=--G;)g[G]=0}function q(g){var G=g.state,O=G.pending;O>g.avail_out&&(O=g.avail_out),O!==0&&(o.arraySet(g.output,G.pending_buf,G.pending_out,O,g.next_out),g.next_out+=O,G.pending_out+=O,g.total_out+=O,g.avail_out-=O,G.pending-=O,G.pending===0&&(G.pending_out=0))}function j(g,G){a._tr_flush_block(g,0<=g.block_start?g.block_start:-1,g.strstart-g.block_start,G),g.block_start=g.strstart,q(g.strm)}function ft(g,G){g.pending_buf[g.pending++]=G}function ht(g,G){g.pending_buf[g.pending++]=G>>>8&255,g.pending_buf[g.pending++]=255&G}function nt(g,G){var O,_,w=g.max_chain_length,b=g.strstart,z=g.prev_length,k=g.nice_match,B=g.strstart>g.w_size-et?g.strstart-(g.w_size-et):0,R=g.window,Y=g.w_mask,D=g.prev,at=g.strstart+J,E=R[b+z-1],d=R[b+z];g.prev_length>=g.good_match&&(w>>=2),k>g.lookahead&&(k=g.lookahead);do if(R[(O=G)+z]===d&&R[O+z-1]===E&&R[O]===R[b]&&R[++O]===R[b+1]){b+=2,O++;do;while(R[++b]===R[++O]&&R[++b]===R[++O]&&R[++b]===R[++O]&&R[++b]===R[++O]&&R[++b]===R[++O]&&R[++b]===R[++O]&&R[++b]===R[++O]&&R[++b]===R[++O]&&b<at);if(_=J-(at-b),b=at-J,z<_){if(g.match_start=G,k<=(z=_))break;E=R[b+z-1],d=R[b+z]}}while((G=D[G&Y])>B&&--w!=0);return z<=g.lookahead?z:g.lookahead}function Et(g){var G,O,_,w,b,z,k,B,R,Y,D=g.w_size;do{if(w=g.window_size-g.lookahead-g.strstart,g.strstart>=D+(D-et)){for(o.arraySet(g.window,g.window,D,D,0),g.match_start-=D,g.strstart-=D,g.block_start-=D,G=O=g.hash_size;_=g.head[--G],g.head[G]=D<=_?_-D:0,--O;);for(G=O=D;_=g.prev[--G],g.prev[G]=D<=_?_-D:0,--O;);w+=D}if(g.strm.avail_in===0)break;if(z=g.strm,k=g.window,B=g.strstart+g.lookahead,R=w,Y=void 0,Y=z.avail_in,R<Y&&(Y=R),O=Y===0?0:(z.avail_in-=Y,o.arraySet(k,z.input,z.next_in,Y,B),z.state.wrap===1?z.adler=h(z.adler,k,Y,B):z.state.wrap===2&&(z.adler=u(z.adler,k,Y,B)),z.next_in+=Y,z.total_in+=Y,Y),g.lookahead+=O,g.lookahead+g.insert>=W)for(b=g.strstart-g.insert,g.ins_h=g.window[b],g.ins_h=(g.ins_h<<g.hash_shift^g.window[b+1])&g.hash_mask;g.insert&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[b+W-1])&g.hash_mask,g.prev[b&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=b,b++,g.insert--,!(g.lookahead+g.insert<W)););}while(g.lookahead<et&&g.strm.avail_in!==0)}function Mt(g,G){for(var O,_;;){if(g.lookahead<et){if(Et(g),g.lookahead<et&&G===f)return A;if(g.lookahead===0)break}if(O=0,g.lookahead>=W&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+W-1])&g.hash_mask,O=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),O!==0&&g.strstart-O<=g.w_size-et&&(g.match_length=nt(g,O)),g.match_length>=W)if(_=a._tr_tally(g,g.strstart-g.match_start,g.match_length-W),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=W){for(g.match_length--;g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+W-1])&g.hash_mask,O=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart,--g.match_length!=0;);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else _=a._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(_&&(j(g,!1),g.strm.avail_out===0))return A}return g.insert=g.strstart<W-1?g.strstart:W-1,G===p?(j(g,!0),g.strm.avail_out===0?lt:Q):g.last_lit&&(j(g,!1),g.strm.avail_out===0)?A:H}function mt(g,G){for(var O,_,w;;){if(g.lookahead<et){if(Et(g),g.lookahead<et&&G===f)return A;if(g.lookahead===0)break}if(O=0,g.lookahead>=W&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+W-1])&g.hash_mask,O=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=W-1,O!==0&&g.prev_length<g.max_lazy_match&&g.strstart-O<=g.w_size-et&&(g.match_length=nt(g,O),g.match_length<=5&&(g.strategy===1||g.match_length===W&&4096<g.strstart-g.match_start)&&(g.match_length=W-1)),g.prev_length>=W&&g.match_length<=g.prev_length){for(w=g.strstart+g.lookahead-W,_=a._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-W),g.lookahead-=g.prev_length-1,g.prev_length-=2;++g.strstart<=w&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+W-1])&g.hash_mask,O=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),--g.prev_length!=0;);if(g.match_available=0,g.match_length=W-1,g.strstart++,_&&(j(g,!1),g.strm.avail_out===0))return A}else if(g.match_available){if((_=a._tr_tally(g,0,g.window[g.strstart-1]))&&j(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return A}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(_=a._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<W-1?g.strstart:W-1,G===p?(j(g,!0),g.strm.avail_out===0?lt:Q):g.last_lit&&(j(g,!1),g.strm.avail_out===0)?A:H}function gt(g,G,O,_,w){this.good_length=g,this.max_lazy=G,this.nice_length=O,this.max_chain=_,this.func=w}function wt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*U),this.dyn_dtree=new o.Buf16(2*(2*F+1)),this.bl_tree=new o.Buf16(2*(2*L+1)),ct(this.dyn_ltree),ct(this.dyn_dtree),ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(V+1),this.heap=new o.Buf16(2*T+1),ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*T+1),ct(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function vt(g){var G;return g&&g.state?(g.total_in=g.total_out=0,g.data_type=M,(G=g.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?P:Z,g.adler=G.wrap===2?0:1,G.last_flush=f,a._tr_init(G),l):pt(g,m)}function rt(g){var G=vt(g);return G===l&&function(O){O.window_size=2*O.w_size,ct(O.head),O.max_lazy_match=n[O.level].max_lazy,O.good_match=n[O.level].good_length,O.nice_match=n[O.level].nice_length,O.max_chain_length=n[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=W-1,O.match_available=0,O.ins_h=0}(g.state),G}function st(g,G,O,_,w,b){if(!g)return m;var z=1;if(G===y&&(G=6),_<0?(z=0,_=-_):15<_&&(z=2,_-=16),w<1||C<w||O!==S||_<8||15<_||G<0||9<G||b<0||v<b)return pt(g,m);_===8&&(_=9);var k=new wt;return(g.state=k).strm=g,k.wrap=z,k.gzhead=null,k.w_bits=_,k.w_size=1<<k.w_bits,k.w_mask=k.w_size-1,k.hash_bits=w+7,k.hash_size=1<<k.hash_bits,k.hash_mask=k.hash_size-1,k.hash_shift=~~((k.hash_bits+W-1)/W),k.window=new o.Buf8(2*k.w_size),k.head=new o.Buf16(k.hash_size),k.prev=new o.Buf16(k.w_size),k.lit_bufsize=1<<w+6,k.pending_buf_size=4*k.lit_bufsize,k.pending_buf=new o.Buf8(k.pending_buf_size),k.d_buf=1*k.lit_bufsize,k.l_buf=3*k.lit_bufsize,k.level=G,k.strategy=b,k.method=O,rt(g)}n=[new gt(0,0,0,0,function(g,G){var O=65535;for(O>g.pending_buf_size-5&&(O=g.pending_buf_size-5);;){if(g.lookahead<=1){if(Et(g),g.lookahead===0&&G===f)return A;if(g.lookahead===0)break}g.strstart+=g.lookahead,g.lookahead=0;var _=g.block_start+O;if((g.strstart===0||g.strstart>=_)&&(g.lookahead=g.strstart-_,g.strstart=_,j(g,!1),g.strm.avail_out===0)||g.strstart-g.block_start>=g.w_size-et&&(j(g,!1),g.strm.avail_out===0))return A}return g.insert=0,G===p?(j(g,!0),g.strm.avail_out===0?lt:Q):(g.strstart>g.block_start&&(j(g,!1),g.strm.avail_out),A)}),new gt(4,4,8,4,Mt),new gt(4,5,16,8,Mt),new gt(4,6,32,32,Mt),new gt(4,4,16,16,mt),new gt(8,16,32,32,mt),new gt(8,16,128,128,mt),new gt(8,32,128,256,mt),new gt(32,128,258,1024,mt),new gt(32,258,258,4096,mt)],s.deflateInit=function(g,G){return st(g,G,S,15,8,0)},s.deflateInit2=st,s.deflateReset=rt,s.deflateResetKeep=vt,s.deflateSetHeader=function(g,G){return g&&g.state?g.state.wrap!==2?m:(g.state.gzhead=G,l):m},s.deflate=function(g,G){var O,_,w,b;if(!g||!g.state||5<G||G<0)return g?pt(g,m):m;if(_=g.state,!g.output||!g.input&&g.avail_in!==0||_.status===666&&G!==p)return pt(g,g.avail_out===0?-5:m);if(_.strm=g,O=_.last_flush,_.last_flush=G,_.status===P)if(_.wrap===2)g.adler=0,ft(_,31),ft(_,139),ft(_,8),_.gzhead?(ft(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),ft(_,255&_.gzhead.time),ft(_,_.gzhead.time>>8&255),ft(_,_.gzhead.time>>16&255),ft(_,_.gzhead.time>>24&255),ft(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),ft(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(ft(_,255&_.gzhead.extra.length),ft(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(g.adler=u(g.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(ft(_,0),ft(_,0),ft(_,0),ft(_,0),ft(_,0),ft(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),ft(_,3),_.status=Z);else{var z=S+(_.w_bits-8<<4)<<8;z|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(z|=32),z+=31-z%31,_.status=Z,ht(_,z),_.strstart!==0&&(ht(_,g.adler>>>16),ht(_,65535&g.adler)),g.adler=1}if(_.status===69)if(_.gzhead.extra){for(w=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>w&&(g.adler=u(g.adler,_.pending_buf,_.pending-w,w)),q(g),w=_.pending,_.pending!==_.pending_buf_size));)ft(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>w&&(g.adler=u(g.adler,_.pending_buf,_.pending-w,w)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){w=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>w&&(g.adler=u(g.adler,_.pending_buf,_.pending-w,w)),q(g),w=_.pending,_.pending===_.pending_buf_size)){b=1;break}b=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,ft(_,b)}while(b!==0);_.gzhead.hcrc&&_.pending>w&&(g.adler=u(g.adler,_.pending_buf,_.pending-w,w)),b===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){w=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>w&&(g.adler=u(g.adler,_.pending_buf,_.pending-w,w)),q(g),w=_.pending,_.pending===_.pending_buf_size)){b=1;break}b=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,ft(_,b)}while(b!==0);_.gzhead.hcrc&&_.pending>w&&(g.adler=u(g.adler,_.pending_buf,_.pending-w,w)),b===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&q(g),_.pending+2<=_.pending_buf_size&&(ft(_,255&g.adler),ft(_,g.adler>>8&255),g.adler=0,_.status=Z)):_.status=Z),_.pending!==0){if(q(g),g.avail_out===0)return _.last_flush=-1,l}else if(g.avail_in===0&&K(G)<=K(O)&&G!==p)return pt(g,-5);if(_.status===666&&g.avail_in!==0)return pt(g,-5);if(g.avail_in!==0||_.lookahead!==0||G!==f&&_.status!==666){var k=_.strategy===2?function(B,R){for(var Y;;){if(B.lookahead===0&&(Et(B),B.lookahead===0)){if(R===f)return A;break}if(B.match_length=0,Y=a._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,Y&&(j(B,!1),B.strm.avail_out===0))return A}return B.insert=0,R===p?(j(B,!0),B.strm.avail_out===0?lt:Q):B.last_lit&&(j(B,!1),B.strm.avail_out===0)?A:H}(_,G):_.strategy===3?function(B,R){for(var Y,D,at,E,d=B.window;;){if(B.lookahead<=J){if(Et(B),B.lookahead<=J&&R===f)return A;if(B.lookahead===0)break}if(B.match_length=0,B.lookahead>=W&&0<B.strstart&&(D=d[at=B.strstart-1])===d[++at]&&D===d[++at]&&D===d[++at]){E=B.strstart+J;do;while(D===d[++at]&&D===d[++at]&&D===d[++at]&&D===d[++at]&&D===d[++at]&&D===d[++at]&&D===d[++at]&&D===d[++at]&&at<E);B.match_length=J-(E-at),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=W?(Y=a._tr_tally(B,1,B.match_length-W),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(Y=a._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),Y&&(j(B,!1),B.strm.avail_out===0))return A}return B.insert=0,R===p?(j(B,!0),B.strm.avail_out===0?lt:Q):B.last_lit&&(j(B,!1),B.strm.avail_out===0)?A:H}(_,G):n[_.level].func(_,G);if(k!==lt&&k!==Q||(_.status=666),k===A||k===lt)return g.avail_out===0&&(_.last_flush=-1),l;if(k===H&&(G===1?a._tr_align(_):G!==5&&(a._tr_stored_block(_,0,0,!1),G===3&&(ct(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),q(g),g.avail_out===0))return _.last_flush=-1,l}return G!==p?l:_.wrap<=0?1:(_.wrap===2?(ft(_,255&g.adler),ft(_,g.adler>>8&255),ft(_,g.adler>>16&255),ft(_,g.adler>>24&255),ft(_,255&g.total_in),ft(_,g.total_in>>8&255),ft(_,g.total_in>>16&255),ft(_,g.total_in>>24&255)):(ht(_,g.adler>>>16),ht(_,65535&g.adler)),q(g),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?l:1)},s.deflateEnd=function(g){var G;return g&&g.state?(G=g.state.status)!==P&&G!==69&&G!==73&&G!==91&&G!==103&&G!==Z&&G!==666?pt(g,m):(g.state=null,G===Z?pt(g,-3):l):m},s.deflateSetDictionary=function(g,G){var O,_,w,b,z,k,B,R,Y=G.length;if(!g||!g.state||(b=(O=g.state).wrap)===2||b===1&&O.status!==P||O.lookahead)return m;for(b===1&&(g.adler=h(g.adler,G,Y,0)),O.wrap=0,Y>=O.w_size&&(b===0&&(ct(O.head),O.strstart=0,O.block_start=0,O.insert=0),R=new o.Buf8(O.w_size),o.arraySet(R,G,Y-O.w_size,O.w_size,0),G=R,Y=O.w_size),z=g.avail_in,k=g.next_in,B=g.input,g.avail_in=Y,g.next_in=0,g.input=G,Et(O);O.lookahead>=W;){for(_=O.strstart,w=O.lookahead-(W-1);O.ins_h=(O.ins_h<<O.hash_shift^O.window[_+W-1])&O.hash_mask,O.prev[_&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=_,_++,--w;);O.strstart=_,O.lookahead=W-1,Et(O)}return O.strstart+=O.lookahead,O.block_start=O.strstart,O.insert=O.lookahead,O.lookahead=0,O.match_length=O.prev_length=W-1,O.match_available=0,g.next_in=k,g.input=B,g.avail_in=z,O.wrap=b,l},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,r,s){r.exports=function(n,o){var a,h,u,c,f,p,l,m,y,v,M,S,C,T,F,L,U,V,W,J,et,P,Z,A,H;a=n.state,h=n.next_in,A=n.input,u=h+(n.avail_in-5),c=n.next_out,H=n.output,f=c-(o-n.avail_out),p=c+(n.avail_out-257),l=a.dmax,m=a.wsize,y=a.whave,v=a.wnext,M=a.window,S=a.hold,C=a.bits,T=a.lencode,F=a.distcode,L=(1<<a.lenbits)-1,U=(1<<a.distbits)-1;t:do{C<15&&(S+=A[h++]<<C,C+=8,S+=A[h++]<<C,C+=8),V=T[S&L];e:for(;;){if(S>>>=W=V>>>24,C-=W,(W=V>>>16&255)===0)H[c++]=65535&V;else{if(!(16&W)){if(!(64&W)){V=T[(65535&V)+(S&(1<<W)-1)];continue e}if(32&W){a.mode=12;break t}n.msg="invalid literal/length code",a.mode=30;break t}J=65535&V,(W&=15)&&(C<W&&(S+=A[h++]<<C,C+=8),J+=S&(1<<W)-1,S>>>=W,C-=W),C<15&&(S+=A[h++]<<C,C+=8,S+=A[h++]<<C,C+=8),V=F[S&U];i:for(;;){if(S>>>=W=V>>>24,C-=W,!(16&(W=V>>>16&255))){if(!(64&W)){V=F[(65535&V)+(S&(1<<W)-1)];continue i}n.msg="invalid distance code",a.mode=30;break t}if(et=65535&V,C<(W&=15)&&(S+=A[h++]<<C,(C+=8)<W&&(S+=A[h++]<<C,C+=8)),l<(et+=S&(1<<W)-1)){n.msg="invalid distance too far back",a.mode=30;break t}if(S>>>=W,C-=W,(W=c-f)<et){if(y<(W=et-W)&&a.sane){n.msg="invalid distance too far back",a.mode=30;break t}if(Z=M,(P=0)===v){if(P+=m-W,W<J){for(J-=W;H[c++]=M[P++],--W;);P=c-et,Z=H}}else if(v<W){if(P+=m+v-W,(W-=v)<J){for(J-=W;H[c++]=M[P++],--W;);if(P=0,v<J){for(J-=W=v;H[c++]=M[P++],--W;);P=c-et,Z=H}}}else if(P+=v-W,W<J){for(J-=W;H[c++]=M[P++],--W;);P=c-et,Z=H}for(;2<J;)H[c++]=Z[P++],H[c++]=Z[P++],H[c++]=Z[P++],J-=3;J&&(H[c++]=Z[P++],1<J&&(H[c++]=Z[P++]))}else{for(P=c-et;H[c++]=H[P++],H[c++]=H[P++],H[c++]=H[P++],2<(J-=3););J&&(H[c++]=H[P++],1<J&&(H[c++]=H[P++]))}break}}break}}while(h<u&&c<p);h-=J=C>>3,S&=(1<<(C-=J<<3))-1,n.next_in=h,n.next_out=c,n.avail_in=h<u?u-h+5:5-(h-u),n.avail_out=c<p?p-c+257:257-(c-p),a.hold=S,a.bits=C}},{}],49:[function(e,r,s){var n=e("../utils/common"),o=e("./adler32"),a=e("./crc32"),h=e("./inffast"),u=e("./inftrees"),c=1,f=2,p=0,l=-2,m=1,y=852,v=592;function M(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(P){var Z;return P&&P.state?(Z=P.state,P.total_in=P.total_out=Z.total=0,P.msg="",Z.wrap&&(P.adler=1&Z.wrap),Z.mode=m,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new n.Buf32(y),Z.distcode=Z.distdyn=new n.Buf32(v),Z.sane=1,Z.back=-1,p):l}function T(P){var Z;return P&&P.state?((Z=P.state).wsize=0,Z.whave=0,Z.wnext=0,C(P)):l}function F(P,Z){var A,H;return P&&P.state?(H=P.state,Z<0?(A=0,Z=-Z):(A=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?l:(H.window!==null&&H.wbits!==Z&&(H.window=null),H.wrap=A,H.wbits=Z,T(P))):l}function L(P,Z){var A,H;return P?(H=new S,(P.state=H).window=null,(A=F(P,Z))!==p&&(P.state=null),A):l}var U,V,W=!0;function J(P){if(W){var Z;for(U=new n.Buf32(512),V=new n.Buf32(32),Z=0;Z<144;)P.lens[Z++]=8;for(;Z<256;)P.lens[Z++]=9;for(;Z<280;)P.lens[Z++]=7;for(;Z<288;)P.lens[Z++]=8;for(u(c,P.lens,0,288,U,0,P.work,{bits:9}),Z=0;Z<32;)P.lens[Z++]=5;u(f,P.lens,0,32,V,0,P.work,{bits:5}),W=!1}P.lencode=U,P.lenbits=9,P.distcode=V,P.distbits=5}function et(P,Z,A,H){var lt,Q=P.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new n.Buf8(Q.wsize)),H>=Q.wsize?(n.arraySet(Q.window,Z,A-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(H<(lt=Q.wsize-Q.wnext)&&(lt=H),n.arraySet(Q.window,Z,A-H,lt,Q.wnext),(H-=lt)?(n.arraySet(Q.window,Z,A-H,H,0),Q.wnext=H,Q.whave=Q.wsize):(Q.wnext+=lt,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=lt))),0}s.inflateReset=T,s.inflateReset2=F,s.inflateResetKeep=C,s.inflateInit=function(P){return L(P,15)},s.inflateInit2=L,s.inflate=function(P,Z){var A,H,lt,Q,pt,K,ct,q,j,ft,ht,nt,Et,Mt,mt,gt,wt,vt,rt,st,g,G,O,_,w=0,b=new n.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return l;(A=P.state).mode===12&&(A.mode=13),pt=P.next_out,lt=P.output,ct=P.avail_out,Q=P.next_in,H=P.input,K=P.avail_in,q=A.hold,j=A.bits,ft=K,ht=ct,G=p;t:for(;;)switch(A.mode){case m:if(A.wrap===0){A.mode=13;break}for(;j<16;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(2&A.wrap&&q===35615){b[A.check=0]=255&q,b[1]=q>>>8&255,A.check=a(A.check,b,2,0),j=q=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&q)<<8)+(q>>8))%31){P.msg="incorrect header check",A.mode=30;break}if((15&q)!=8){P.msg="unknown compression method",A.mode=30;break}if(j-=4,g=8+(15&(q>>>=4)),A.wbits===0)A.wbits=g;else if(g>A.wbits){P.msg="invalid window size",A.mode=30;break}A.dmax=1<<g,P.adler=A.check=1,A.mode=512&q?10:12,j=q=0;break;case 2:for(;j<16;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(A.flags=q,(255&A.flags)!=8){P.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){P.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=q>>8&1),512&A.flags&&(b[0]=255&q,b[1]=q>>>8&255,A.check=a(A.check,b,2,0)),j=q=0,A.mode=3;case 3:for(;j<32;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}A.head&&(A.head.time=q),512&A.flags&&(b[0]=255&q,b[1]=q>>>8&255,b[2]=q>>>16&255,b[3]=q>>>24&255,A.check=a(A.check,b,4,0)),j=q=0,A.mode=4;case 4:for(;j<16;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}A.head&&(A.head.xflags=255&q,A.head.os=q>>8),512&A.flags&&(b[0]=255&q,b[1]=q>>>8&255,A.check=a(A.check,b,2,0)),j=q=0,A.mode=5;case 5:if(1024&A.flags){for(;j<16;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}A.length=q,A.head&&(A.head.extra_len=q),512&A.flags&&(b[0]=255&q,b[1]=q>>>8&255,A.check=a(A.check,b,2,0)),j=q=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(K<(nt=A.length)&&(nt=K),nt&&(A.head&&(g=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),n.arraySet(A.head.extra,H,Q,nt,g)),512&A.flags&&(A.check=a(A.check,H,nt,Q)),K-=nt,Q+=nt,A.length-=nt),A.length))break t;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(K===0)break t;for(nt=0;g=H[Q+nt++],A.head&&g&&A.length<65536&&(A.head.name+=String.fromCharCode(g)),g&&nt<K;);if(512&A.flags&&(A.check=a(A.check,H,nt,Q)),K-=nt,Q+=nt,g)break t}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(K===0)break t;for(nt=0;g=H[Q+nt++],A.head&&g&&A.length<65536&&(A.head.comment+=String.fromCharCode(g)),g&&nt<K;);if(512&A.flags&&(A.check=a(A.check,H,nt,Q)),K-=nt,Q+=nt,g)break t}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;j<16;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(q!==(65535&A.check)){P.msg="header crc mismatch",A.mode=30;break}j=q=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),P.adler=A.check=0,A.mode=12;break;case 10:for(;j<32;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}P.adler=A.check=M(q),j=q=0,A.mode=11;case 11:if(A.havedict===0)return P.next_out=pt,P.avail_out=ct,P.next_in=Q,P.avail_in=K,A.hold=q,A.bits=j,2;P.adler=A.check=1,A.mode=12;case 12:if(Z===5||Z===6)break t;case 13:if(A.last){q>>>=7&j,j-=7&j,A.mode=27;break}for(;j<3;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}switch(A.last=1&q,j-=1,3&(q>>>=1)){case 0:A.mode=14;break;case 1:if(J(A),A.mode=20,Z!==6)break;q>>>=2,j-=2;break t;case 2:A.mode=17;break;case 3:P.msg="invalid block type",A.mode=30}q>>>=2,j-=2;break;case 14:for(q>>>=7&j,j-=7&j;j<32;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if((65535&q)!=(q>>>16^65535)){P.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&q,j=q=0,A.mode=15,Z===6)break t;case 15:A.mode=16;case 16:if(nt=A.length){if(K<nt&&(nt=K),ct<nt&&(nt=ct),nt===0)break t;n.arraySet(lt,H,Q,nt,pt),K-=nt,Q+=nt,ct-=nt,pt+=nt,A.length-=nt;break}A.mode=12;break;case 17:for(;j<14;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(A.nlen=257+(31&q),q>>>=5,j-=5,A.ndist=1+(31&q),q>>>=5,j-=5,A.ncode=4+(15&q),q>>>=4,j-=4,286<A.nlen||30<A.ndist){P.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;j<3;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}A.lens[z[A.have++]]=7&q,q>>>=3,j-=3}for(;A.have<19;)A.lens[z[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,O={bits:A.lenbits},G=u(0,A.lens,0,19,A.lencode,0,A.work,O),A.lenbits=O.bits,G){P.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;gt=(w=A.lencode[q&(1<<A.lenbits)-1])>>>16&255,wt=65535&w,!((mt=w>>>24)<=j);){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(wt<16)q>>>=mt,j-=mt,A.lens[A.have++]=wt;else{if(wt===16){for(_=mt+2;j<_;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(q>>>=mt,j-=mt,A.have===0){P.msg="invalid bit length repeat",A.mode=30;break}g=A.lens[A.have-1],nt=3+(3&q),q>>>=2,j-=2}else if(wt===17){for(_=mt+3;j<_;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}j-=mt,g=0,nt=3+(7&(q>>>=mt)),q>>>=3,j-=3}else{for(_=mt+7;j<_;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}j-=mt,g=0,nt=11+(127&(q>>>=mt)),q>>>=7,j-=7}if(A.have+nt>A.nlen+A.ndist){P.msg="invalid bit length repeat",A.mode=30;break}for(;nt--;)A.lens[A.have++]=g}}if(A.mode===30)break;if(A.lens[256]===0){P.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,O={bits:A.lenbits},G=u(c,A.lens,0,A.nlen,A.lencode,0,A.work,O),A.lenbits=O.bits,G){P.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,O={bits:A.distbits},G=u(f,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,O),A.distbits=O.bits,G){P.msg="invalid distances set",A.mode=30;break}if(A.mode=20,Z===6)break t;case 20:A.mode=21;case 21:if(6<=K&&258<=ct){P.next_out=pt,P.avail_out=ct,P.next_in=Q,P.avail_in=K,A.hold=q,A.bits=j,h(P,ht),pt=P.next_out,lt=P.output,ct=P.avail_out,Q=P.next_in,H=P.input,K=P.avail_in,q=A.hold,j=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;gt=(w=A.lencode[q&(1<<A.lenbits)-1])>>>16&255,wt=65535&w,!((mt=w>>>24)<=j);){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(gt&&!(240&gt)){for(vt=mt,rt=gt,st=wt;gt=(w=A.lencode[st+((q&(1<<vt+rt)-1)>>vt)])>>>16&255,wt=65535&w,!(vt+(mt=w>>>24)<=j);){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}q>>>=vt,j-=vt,A.back+=vt}if(q>>>=mt,j-=mt,A.back+=mt,A.length=wt,gt===0){A.mode=26;break}if(32&gt){A.back=-1,A.mode=12;break}if(64&gt){P.msg="invalid literal/length code",A.mode=30;break}A.extra=15&gt,A.mode=22;case 22:if(A.extra){for(_=A.extra;j<_;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}A.length+=q&(1<<A.extra)-1,q>>>=A.extra,j-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;gt=(w=A.distcode[q&(1<<A.distbits)-1])>>>16&255,wt=65535&w,!((mt=w>>>24)<=j);){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(!(240&gt)){for(vt=mt,rt=gt,st=wt;gt=(w=A.distcode[st+((q&(1<<vt+rt)-1)>>vt)])>>>16&255,wt=65535&w,!(vt+(mt=w>>>24)<=j);){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}q>>>=vt,j-=vt,A.back+=vt}if(q>>>=mt,j-=mt,A.back+=mt,64&gt){P.msg="invalid distance code",A.mode=30;break}A.offset=wt,A.extra=15&gt,A.mode=24;case 24:if(A.extra){for(_=A.extra;j<_;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}A.offset+=q&(1<<A.extra)-1,q>>>=A.extra,j-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){P.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(ct===0)break t;if(nt=ht-ct,A.offset>nt){if((nt=A.offset-nt)>A.whave&&A.sane){P.msg="invalid distance too far back",A.mode=30;break}Et=nt>A.wnext?(nt-=A.wnext,A.wsize-nt):A.wnext-nt,nt>A.length&&(nt=A.length),Mt=A.window}else Mt=lt,Et=pt-A.offset,nt=A.length;for(ct<nt&&(nt=ct),ct-=nt,A.length-=nt;lt[pt++]=Mt[Et++],--nt;);A.length===0&&(A.mode=21);break;case 26:if(ct===0)break t;lt[pt++]=A.length,ct--,A.mode=21;break;case 27:if(A.wrap){for(;j<32;){if(K===0)break t;K--,q|=H[Q++]<<j,j+=8}if(ht-=ct,P.total_out+=ht,A.total+=ht,ht&&(P.adler=A.check=A.flags?a(A.check,lt,ht,pt-ht):o(A.check,lt,ht,pt-ht)),ht=ct,(A.flags?q:M(q))!==A.check){P.msg="incorrect data check",A.mode=30;break}j=q=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;j<32;){if(K===0)break t;K--,q+=H[Q++]<<j,j+=8}if(q!==(4294967295&A.total)){P.msg="incorrect length check",A.mode=30;break}j=q=0}A.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return l}return P.next_out=pt,P.avail_out=ct,P.next_in=Q,P.avail_in=K,A.hold=q,A.bits=j,(A.wsize||ht!==P.avail_out&&A.mode<30&&(A.mode<27||Z!==4))&&et(P,P.output,P.next_out,ht-P.avail_out)?(A.mode=31,-4):(ft-=P.avail_in,ht-=P.avail_out,P.total_in+=ft,P.total_out+=ht,A.total+=ht,A.wrap&&ht&&(P.adler=A.check=A.flags?a(A.check,lt,ht,P.next_out-ht):o(A.check,lt,ht,P.next_out-ht)),P.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(ft==0&&ht===0||Z===4)&&G===p&&(G=-5),G)},s.inflateEnd=function(P){if(!P||!P.state)return l;var Z=P.state;return Z.window&&(Z.window=null),P.state=null,p},s.inflateGetHeader=function(P,Z){var A;return P&&P.state&&2&(A=P.state).wrap?((A.head=Z).done=!1,p):l},s.inflateSetDictionary=function(P,Z){var A,H=Z.length;return P&&P.state?(A=P.state).wrap!==0&&A.mode!==11?l:A.mode===11&&o(1,Z,H,0)!==A.check?-3:et(P,Z,H,H)?(A.mode=31,-4):(A.havedict=1,p):l},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,r,s){var n=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,f,p,l,m,y,v,M){var S,C,T,F,L,U,V,W,J,et=M.bits,P=0,Z=0,A=0,H=0,lt=0,Q=0,pt=0,K=0,ct=0,q=0,j=null,ft=0,ht=new n.Buf16(16),nt=new n.Buf16(16),Et=null,Mt=0;for(P=0;P<=15;P++)ht[P]=0;for(Z=0;Z<l;Z++)ht[f[p+Z]]++;for(lt=et,H=15;1<=H&&ht[H]===0;H--);if(H<lt&&(lt=H),H===0)return m[y++]=20971520,m[y++]=20971520,M.bits=1,0;for(A=1;A<H&&ht[A]===0;A++);for(lt<A&&(lt=A),P=K=1;P<=15;P++)if(K<<=1,(K-=ht[P])<0)return-1;if(0<K&&(c===0||H!==1))return-1;for(nt[1]=0,P=1;P<15;P++)nt[P+1]=nt[P]+ht[P];for(Z=0;Z<l;Z++)f[p+Z]!==0&&(v[nt[f[p+Z]]++]=Z);if(U=c===0?(j=Et=v,19):c===1?(j=o,ft-=257,Et=a,Mt-=257,256):(j=h,Et=u,-1),P=A,L=y,pt=Z=q=0,T=-1,F=(ct=1<<(Q=lt))-1,c===1&&852<ct||c===2&&592<ct)return 1;for(;;){for(V=P-pt,J=v[Z]<U?(W=0,v[Z]):v[Z]>U?(W=Et[Mt+v[Z]],j[ft+v[Z]]):(W=96,0),S=1<<P-pt,A=C=1<<Q;m[L+(q>>pt)+(C-=S)]=V<<24|W<<16|J|0,C!==0;);for(S=1<<P-1;q&S;)S>>=1;if(S!==0?(q&=S-1,q+=S):q=0,Z++,--ht[P]==0){if(P===H)break;P=f[p+v[Z]]}if(lt<P&&(q&F)!==T){for(pt===0&&(pt=lt),L+=A,K=1<<(Q=P-pt);Q+pt<H&&!((K-=ht[Q+pt])<=0);)Q++,K<<=1;if(ct+=1<<Q,c===1&&852<ct||c===2&&592<ct)return 1;m[T=q&F]=lt<<24|Q<<16|L-y|0}}return q!==0&&(m[L+q]=P-pt<<24|64<<16|0),M.bits=lt,0}},{"../utils/common":41}],51:[function(e,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,r,s){var n=e("../utils/common"),o=0,a=1;function h(w){for(var b=w.length;0<=--b;)w[b]=0}var u=0,c=29,f=256,p=f+1+c,l=30,m=19,y=2*p+1,v=15,M=16,S=7,C=256,T=16,F=17,L=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],et=new Array(2*(p+2));h(et);var P=new Array(2*l);h(P);var Z=new Array(512);h(Z);var A=new Array(256);h(A);var H=new Array(c);h(H);var lt,Q,pt,K=new Array(l);function ct(w,b,z,k,B){this.static_tree=w,this.extra_bits=b,this.extra_base=z,this.elems=k,this.max_length=B,this.has_stree=w&&w.length}function q(w,b){this.dyn_tree=w,this.max_code=0,this.stat_desc=b}function j(w){return w<256?Z[w]:Z[256+(w>>>7)]}function ft(w,b){w.pending_buf[w.pending++]=255&b,w.pending_buf[w.pending++]=b>>>8&255}function ht(w,b,z){w.bi_valid>M-z?(w.bi_buf|=b<<w.bi_valid&65535,ft(w,w.bi_buf),w.bi_buf=b>>M-w.bi_valid,w.bi_valid+=z-M):(w.bi_buf|=b<<w.bi_valid&65535,w.bi_valid+=z)}function nt(w,b,z){ht(w,z[2*b],z[2*b+1])}function Et(w,b){for(var z=0;z|=1&w,w>>>=1,z<<=1,0<--b;);return z>>>1}function Mt(w,b,z){var k,B,R=new Array(v+1),Y=0;for(k=1;k<=v;k++)R[k]=Y=Y+z[k-1]<<1;for(B=0;B<=b;B++){var D=w[2*B+1];D!==0&&(w[2*B]=Et(R[D]++,D))}}function mt(w){var b;for(b=0;b<p;b++)w.dyn_ltree[2*b]=0;for(b=0;b<l;b++)w.dyn_dtree[2*b]=0;for(b=0;b<m;b++)w.bl_tree[2*b]=0;w.dyn_ltree[2*C]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function gt(w){8<w.bi_valid?ft(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function wt(w,b,z,k){var B=2*b,R=2*z;return w[B]<w[R]||w[B]===w[R]&&k[b]<=k[z]}function vt(w,b,z){for(var k=w.heap[z],B=z<<1;B<=w.heap_len&&(B<w.heap_len&&wt(b,w.heap[B+1],w.heap[B],w.depth)&&B++,!wt(b,k,w.heap[B],w.depth));)w.heap[z]=w.heap[B],z=B,B<<=1;w.heap[z]=k}function rt(w,b,z){var k,B,R,Y,D=0;if(w.last_lit!==0)for(;k=w.pending_buf[w.d_buf+2*D]<<8|w.pending_buf[w.d_buf+2*D+1],B=w.pending_buf[w.l_buf+D],D++,k===0?nt(w,B,b):(nt(w,(R=A[B])+f+1,b),(Y=U[R])!==0&&ht(w,B-=H[R],Y),nt(w,R=j(--k),z),(Y=V[R])!==0&&ht(w,k-=K[R],Y)),D<w.last_lit;);nt(w,C,b)}function st(w,b){var z,k,B,R=b.dyn_tree,Y=b.stat_desc.static_tree,D=b.stat_desc.has_stree,at=b.stat_desc.elems,E=-1;for(w.heap_len=0,w.heap_max=y,z=0;z<at;z++)R[2*z]!==0?(w.heap[++w.heap_len]=E=z,w.depth[z]=0):R[2*z+1]=0;for(;w.heap_len<2;)R[2*(B=w.heap[++w.heap_len]=E<2?++E:0)]=1,w.depth[B]=0,w.opt_len--,D&&(w.static_len-=Y[2*B+1]);for(b.max_code=E,z=w.heap_len>>1;1<=z;z--)vt(w,R,z);for(B=at;z=w.heap[1],w.heap[1]=w.heap[w.heap_len--],vt(w,R,1),k=w.heap[1],w.heap[--w.heap_max]=z,w.heap[--w.heap_max]=k,R[2*B]=R[2*z]+R[2*k],w.depth[B]=(w.depth[z]>=w.depth[k]?w.depth[z]:w.depth[k])+1,R[2*z+1]=R[2*k+1]=B,w.heap[1]=B++,vt(w,R,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],function(d,x){var I,N,$,X,xt,Ct,_t=x.dyn_tree,kt=x.max_code,St=x.stat_desc.static_tree,h0=x.stat_desc.has_stree,u0=x.stat_desc.extra_bits,Zn=x.stat_desc.extra_base,Fi=x.stat_desc.max_length,cr=0;for(X=0;X<=v;X++)d.bl_count[X]=0;for(_t[2*d.heap[d.heap_max]+1]=0,I=d.heap_max+1;I<y;I++)Fi<(X=_t[2*_t[2*(N=d.heap[I])+1]+1]+1)&&(X=Fi,cr++),_t[2*N+1]=X,kt<N||(d.bl_count[X]++,xt=0,Zn<=N&&(xt=u0[N-Zn]),Ct=_t[2*N],d.opt_len+=Ct*(X+xt),h0&&(d.static_len+=Ct*(St[2*N+1]+xt)));if(cr!==0){do{for(X=Fi-1;d.bl_count[X]===0;)X--;d.bl_count[X]--,d.bl_count[X+1]+=2,d.bl_count[Fi]--,cr-=2}while(0<cr);for(X=Fi;X!==0;X--)for(N=d.bl_count[X];N!==0;)kt<($=d.heap[--I])||(_t[2*$+1]!==X&&(d.opt_len+=(X-_t[2*$+1])*_t[2*$],_t[2*$+1]=X),N--)}}(w,b),Mt(R,E,w.bl_count)}function g(w,b,z){var k,B,R=-1,Y=b[1],D=0,at=7,E=4;for(Y===0&&(at=138,E=3),b[2*(z+1)+1]=65535,k=0;k<=z;k++)B=Y,Y=b[2*(k+1)+1],++D<at&&B===Y||(D<E?w.bl_tree[2*B]+=D:B!==0?(B!==R&&w.bl_tree[2*B]++,w.bl_tree[2*T]++):D<=10?w.bl_tree[2*F]++:w.bl_tree[2*L]++,R=B,E=(D=0)===Y?(at=138,3):B===Y?(at=6,3):(at=7,4))}function G(w,b,z){var k,B,R=-1,Y=b[1],D=0,at=7,E=4;for(Y===0&&(at=138,E=3),k=0;k<=z;k++)if(B=Y,Y=b[2*(k+1)+1],!(++D<at&&B===Y)){if(D<E)for(;nt(w,B,w.bl_tree),--D!=0;);else B!==0?(B!==R&&(nt(w,B,w.bl_tree),D--),nt(w,T,w.bl_tree),ht(w,D-3,2)):D<=10?(nt(w,F,w.bl_tree),ht(w,D-3,3)):(nt(w,L,w.bl_tree),ht(w,D-11,7));R=B,E=(D=0)===Y?(at=138,3):B===Y?(at=6,3):(at=7,4)}}h(K);var O=!1;function _(w,b,z,k){ht(w,(u<<1)+(k?1:0),3),function(B,R,Y,D){gt(B),D&&(ft(B,Y),ft(B,~Y)),n.arraySet(B.pending_buf,B.window,R,Y,B.pending),B.pending+=Y}(w,b,z,!0)}s._tr_init=function(w){O||(function(){var b,z,k,B,R,Y=new Array(v+1);for(B=k=0;B<c-1;B++)for(H[B]=k,b=0;b<1<<U[B];b++)A[k++]=B;for(A[k-1]=B,B=R=0;B<16;B++)for(K[B]=R,b=0;b<1<<V[B];b++)Z[R++]=B;for(R>>=7;B<l;B++)for(K[B]=R<<7,b=0;b<1<<V[B]-7;b++)Z[256+R++]=B;for(z=0;z<=v;z++)Y[z]=0;for(b=0;b<=143;)et[2*b+1]=8,b++,Y[8]++;for(;b<=255;)et[2*b+1]=9,b++,Y[9]++;for(;b<=279;)et[2*b+1]=7,b++,Y[7]++;for(;b<=287;)et[2*b+1]=8,b++,Y[8]++;for(Mt(et,p+1,Y),b=0;b<l;b++)P[2*b+1]=5,P[2*b]=Et(b,5);lt=new ct(et,U,f+1,p,v),Q=new ct(P,V,0,l,v),pt=new ct(new Array(0),W,0,m,S)}(),O=!0),w.l_desc=new q(w.dyn_ltree,lt),w.d_desc=new q(w.dyn_dtree,Q),w.bl_desc=new q(w.bl_tree,pt),w.bi_buf=0,w.bi_valid=0,mt(w)},s._tr_stored_block=_,s._tr_flush_block=function(w,b,z,k){var B,R,Y=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=function(D){var at,E=4093624447;for(at=0;at<=31;at++,E>>>=1)if(1&E&&D.dyn_ltree[2*at]!==0)return o;if(D.dyn_ltree[18]!==0||D.dyn_ltree[20]!==0||D.dyn_ltree[26]!==0)return a;for(at=32;at<f;at++)if(D.dyn_ltree[2*at]!==0)return a;return o}(w)),st(w,w.l_desc),st(w,w.d_desc),Y=function(D){var at;for(g(D,D.dyn_ltree,D.l_desc.max_code),g(D,D.dyn_dtree,D.d_desc.max_code),st(D,D.bl_desc),at=m-1;3<=at&&D.bl_tree[2*J[at]+1]===0;at--);return D.opt_len+=3*(at+1)+5+5+4,at}(w),B=w.opt_len+3+7>>>3,(R=w.static_len+3+7>>>3)<=B&&(B=R)):B=R=z+5,z+4<=B&&b!==-1?_(w,b,z,k):w.strategy===4||R===B?(ht(w,2+(k?1:0),3),rt(w,et,P)):(ht(w,4+(k?1:0),3),function(D,at,E,d){var x;for(ht(D,at-257,5),ht(D,E-1,5),ht(D,d-4,4),x=0;x<d;x++)ht(D,D.bl_tree[2*J[x]+1],3);G(D,D.dyn_ltree,at-1),G(D,D.dyn_dtree,E-1)}(w,w.l_desc.max_code+1,w.d_desc.max_code+1,Y+1),rt(w,w.dyn_ltree,w.dyn_dtree)),mt(w),k&&gt(w)},s._tr_tally=function(w,b,z){return w.pending_buf[w.d_buf+2*w.last_lit]=b>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&b,w.pending_buf[w.l_buf+w.last_lit]=255&z,w.last_lit++,b===0?w.dyn_ltree[2*z]++:(w.matches++,b--,w.dyn_ltree[2*(A[z]+f+1)]++,w.dyn_dtree[2*j(b)]++),w.last_lit===w.lit_bufsize-1},s._tr_align=function(w){ht(w,2,3),nt(w,C,et),function(b){b.bi_valid===16?(ft(b,b.bi_buf),b.bi_buf=0,b.bi_valid=0):8<=b.bi_valid&&(b.pending_buf[b.pending++]=255&b.bi_buf,b.bi_buf>>=8,b.bi_valid-=8)}(w)}},{"../utils/common":41}],53:[function(e,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,r,s){(function(n){(function(o,a){if(!o.setImmediate){var h,u,c,f,p=1,l={},m=!1,y=o.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(o);v=v&&v.setTimeout?v:o,h={}.toString.call(o.process)==="[object process]"?function(T){process.nextTick(function(){S(T)})}:function(){if(o.postMessage&&!o.importScripts){var T=!0,F=o.onmessage;return o.onmessage=function(){T=!1},o.postMessage("","*"),o.onmessage=F,T}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",C,!1):o.attachEvent("onmessage",C),function(T){o.postMessage(f+T,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(T){S(T.data)},function(T){c.port2.postMessage(T)}):y&&"onreadystatechange"in y.createElement("script")?(u=y.documentElement,function(T){var F=y.createElement("script");F.onreadystatechange=function(){S(T),F.onreadystatechange=null,u.removeChild(F),F=null},u.appendChild(F)}):function(T){setTimeout(S,0,T)},v.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var F=new Array(arguments.length-1),L=0;L<F.length;L++)F[L]=arguments[L+1];var U={callback:T,args:F};return l[p]=U,h(p),p++},v.clearImmediate=M}function M(T){delete l[T]}function S(T){if(m)setTimeout(S,0,T);else{var F=l[T];if(F){m=!0;try{(function(L){var U=L.callback,V=L.args;switch(V.length){case 0:U();break;case 1:U(V[0]);break;case 2:U(V[0],V[1]);break;case 3:U(V[0],V[1],V[2]);break;default:U.apply(a,V)}})(F)}finally{M(T),m=!1}}}}function C(T){T.source===o&&typeof T.data=="string"&&T.data.indexOf(f)===0&&S(+T.data.slice(f.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof Pt<"u"?Pt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(En);var Yc=En.exports;const Qc=Yc;var Kc=async i=>{const t=new Qc;await t.loadAsync(i);const e=t.file(/.+/),r={};return await Promise.all(e.map(async s=>{let n;s.name.slice(-3).toLowerCase()==="shp"||s.name.slice(-3).toLowerCase()==="dbf"?n=await s.async("nodebuffer"):n=await s.async("text"),r[s.name]=n})),r},Sn=Pt.MutationObserver||Pt.WebKitMutationObserver,Ci;if(Sn){var Cn=0,tf=new Sn(ur),kn=Pt.document.createTextNode("");tf.observe(kn,{characterData:!0}),Ci=function(){kn.data=Cn=++Cn%2}}else if(!Pt.setImmediate&&typeof Pt.MessageChannel<"u"){var zn=new Pt.MessageChannel;zn.port1.onmessage=ur,Ci=function(){zn.port2.postMessage(0)}}else"document"in Pt&&"onreadystatechange"in Pt.document.createElement("script")?Ci=function(){var i=Pt.document.createElement("script");i.onreadystatechange=function(){ur(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},Pt.document.documentElement.appendChild(i)}:Ci=function(){setTimeout(ur,0)};var Jr,ki=[];function ur(){Jr=!0;for(var i,t,e=ki.length;e;){for(t=ki,ki=[],i=-1;++i<e;)t[i]();e=ki.length}Jr=!1}var ef=rf;function rf(i){ki.push(i)===1&&!Jr&&Ci()}var sf=ef;function ti(){}var Dt={},In=["REJECTED"],Hr=["FULFILLED"],Bn=["PENDING"],Tn=be;function be(i){if(typeof i!="function")throw new TypeError("resolver must be a function");this.state=Bn,this.queue=[],this.outcome=void 0,i!==ti&&Fn(this,i)}be.prototype.finally=function(i){if(typeof i!="function")return this;var t=this.constructor;return this.then(e,r);function e(s){function n(){return s}return t.resolve(i()).then(n)}function r(s){function n(){throw s}return t.resolve(i()).then(n)}},be.prototype.catch=function(i){return this.then(null,i)},be.prototype.then=function(i,t){if(typeof i!="function"&&this.state===Hr||typeof t!="function"&&this.state===In)return this;var e=new this.constructor(ti);if(this.state!==Bn){var r=this.state===Hr?i:t;Xr(e,r,this.outcome)}else this.queue.push(new zi(e,i,t));return e};function zi(i,t,e){this.promise=i,typeof t=="function"&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),typeof e=="function"&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}zi.prototype.callFulfilled=function(i){Dt.resolve(this.promise,i)},zi.prototype.otherCallFulfilled=function(i){Xr(this.promise,this.onFulfilled,i)},zi.prototype.callRejected=function(i){Dt.reject(this.promise,i)},zi.prototype.otherCallRejected=function(i){Xr(this.promise,this.onRejected,i)};function Xr(i,t,e){sf(function(){var r;try{r=t(e)}catch(s){return Dt.reject(i,s)}r===i?Dt.reject(i,new TypeError("Cannot resolve promise with itself")):Dt.resolve(i,r)})}Dt.resolve=function(i,t){var e=Pn(nf,t);if(e.status==="error")return Dt.reject(i,e.value);var r=e.value;if(r)Fn(i,r);else{i.state=Hr,i.outcome=t;for(var s=-1,n=i.queue.length;++s<n;)i.queue[s].callFulfilled(t)}return i},Dt.reject=function(i,t){i.state=In,i.outcome=t;for(var e=-1,r=i.queue.length;++e<r;)i.queue[e].callRejected(t);return i};function nf(i){var t=i&&i.then;if(i&&(typeof i=="object"||typeof i=="function")&&typeof t=="function")return function(){t.apply(i,arguments)}}function Fn(i,t){var e=!1;function r(a){e||(e=!0,Dt.reject(i,a))}function s(a){e||(e=!0,Dt.resolve(i,a))}function n(){t(s,r)}var o=Pn(n);o.status==="error"&&r(o.value)}function Pn(i,t){var e={};try{e.value=i(t),e.status="success"}catch(r){e.status="error",e.value=r}return e}be.resolve=af;function af(i){return i instanceof this?i:Dt.resolve(new this(ti),i)}be.reject=of;function of(i){var t=new this(ti);return Dt.reject(t,i)}be.all=hf;function hf(i){var t=this;if(Object.prototype.toString.call(i)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=i.length,r=!1;if(!e)return this.resolve([]);for(var s=new Array(e),n=0,o=-1,a=new this(ti);++o<e;)h(i[o],o);return a;function h(u,c){t.resolve(u).then(f,function(p){r||(r=!0,Dt.reject(a,p))});function f(p){s[c]=p,++n===e&&!r&&(r=!0,Dt.resolve(a,s))}}}be.race=uf;function uf(i){var t=this;if(Object.prototype.toString.call(i)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=i.length,r=!1;if(!e)return this.resolve([]);for(var s=-1,n=new this(ti);++s<e;)o(i[s]);return n;function o(a){t.resolve(a).then(function(h){r||(r=!0,Dt.resolve(n,h))},function(h){r||(r=!0,Dt.reject(n,h))})}}const lf=Pt.URL;var Nn=(i,t)=>{if(!t)return i;const e=new lf(i);return e.pathname=`${e.pathname}.${t}`,e.href};const cf=Tn,ff=Nn,df=Be.Buffer;var pf=mf;function mf(i,t){return new cf(function(e,r){const s=ff(i,t),n=new XMLHttpRequest;n.open("GET",s,!0),t!=="prj"&&t!=="cpg"&&(n.responseType="arraybuffer"),n.addEventListener("load",function(){return n.status>399?t==="prj"||t==="cpg"?e(!1):r(new Error(n.status)):e(t!=="prj"&&t!=="cpg"?df.from(n.response):n.response)},!1),n.send()})}const yf=pf,xf=Nn,gf=Be.Buffer;var vf=async function(t,e){if(!Pt.fetch)return yf(t,e);const r=xf(t,e),s=e==="prj"||e==="cpg";try{const n=await fetch(r);if(n.status>399)throw new Error(n.statusText);if(s)return n.text();const o=await n.arrayBuffer();return gf.from(o)}catch(n){if(console.log("ERROR",n,e),s||e==="dbf")return!1;throw n}};function _f(i){let t=0,e=1;const r=i.length;let s,n;for(;e<r;)s=n||i[0],n=i[e],t+=(n[0]-s[0])*(n[1]+s[1]),e++;return t>0}function wf(i,t){return _f(t)||!i.length?i.push([t]):i[i.length-1].push(t),i}Tt.prototype.parsePoint=function(i){return{type:"Point",coordinates:this.parseCoord(i,0)}},Tt.prototype.parseZPoint=function(i){const t=this.parsePoint(i);return t.coordinates.push(i.readDoubleLE(16)),t},Tt.prototype.parsePointArray=function(i,t,e){const r=[];let s=0;for(;s<e;)r.push(this.parseCoord(i,t)),t+=16,s++;return r},Tt.prototype.parseZPointArray=function(i,t,e,r){let s=0;for(;s<e;)r[s].push(i.readDoubleLE(t)),s++,t+=8;return r},Tt.prototype.parseArrayGroup=function(i,t,e,r,s){const n=[];let o=0,a,h=0,u;for(;o<r;)o++,e+=4,a=h,o===r?h=s:h=i.readInt32LE(e),u=h-a,u&&(n.push(this.parsePointArray(i,t,u)),t+=u<<4);return n},Tt.prototype.parseZArrayGroup=function(i,t,e,r){let s=0;for(;s<e;)r[s]=this.parseZPointArray(i,t,r[s].length,r[s]),t+=r[s].length<<3,s++;return r},Tt.prototype.parseMultiPoint=function(i){const t={},e=i.readInt32LE(32,!0);if(!e)return null;const r=this.parseCoord(i,0),s=this.parseCoord(i,16);t.bbox=[r[0],r[1],s[0],s[1]];const n=36;return e===1?(t.type="Point",t.coordinates=this.parseCoord(i,n)):(t.type="MultiPoint",t.coordinates=this.parsePointArray(i,n,e)),t},Tt.prototype.parseZMultiPoint=function(i){const t=this.parseMultiPoint(i);if(!t)return null;let e;if(t.type==="Point")return t.coordinates.push(i.readDoubleLE(72)),t;e=t.coordinates.length;const r=52+(e<<4);return t.coordinates=this.parseZPointArray(i,r,e,t.coordinates),t},Tt.prototype.parsePolyline=function(i){const t={},e=i.readInt32LE(32);if(!e)return null;const r=this.parseCoord(i,0),s=this.parseCoord(i,16);t.bbox=[r[0],r[1],s[0],s[1]];const n=i.readInt32LE(36);let o,a;return e===1?(t.type="LineString",o=44,t.coordinates=this.parsePointArray(i,o,n)):(t.type="MultiLineString",o=40+(e<<2),a=40,t.coordinates=this.parseArrayGroup(i,o,a,e,n)),t},Tt.prototype.parseZPolyline=function(i){const t=this.parsePolyline(i);if(!t)return null;const e=t.coordinates.length;let r;return t.type==="LineString"?(r=60+(e<<4),t.coordinates=this.parseZPointArray(i,r,e,t.coordinates),t):(r=56+(t.coordinates.reduce(function(n,o){return n+o.length},0)<<4)+(e<<2),t.coordinates=this.parseZArrayGroup(i,r,e,t.coordinates),t)},Tt.prototype.polyFuncs=function(i){return i&&(i.type==="LineString"?(i.type="Polygon",i.coordinates=[i.coordinates],i):(i.coordinates=i.coordinates.reduce(wf,[]),i.coordinates.length===1?(i.type="Polygon",i.coordinates=i.coordinates[0],i):(i.type="MultiPolygon",i)))},Tt.prototype.parsePolygon=function(i){return this.polyFuncs(this.parsePolyline(i))},Tt.prototype.parseZPolygon=function(i){return this.polyFuncs(this.parseZPolyline(i))};const On={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function Mf(i){return i?function(t,e){const r=[t.readDoubleLE(e),t.readDoubleLE(e+8)];return i.inverse(r)}:function(t,e){return[t.readDoubleLE(e),t.readDoubleLE(e+8)]}}function Tt(i,t){if(!(this instanceof Tt))return new Tt(i,t);this.buffer=i,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(t),this.rows=this.getRows()}Tt.prototype.shpFuncs=function(i){let t=this.headers.shpCode;if(t>20&&(t-=20),!(t in On))throw new Error("I don't know that shp type");this.parseFunc=this[On[t]],this.parseCoord=Mf(i)},Tt.prototype.getShpCode=function(){return this.parseHeader().shpCode},Tt.prototype.parseHeader=function(){const i=this.buffer.slice(0,100);return{length:i.readInt32BE(24)<<1,version:i.readInt32LE(28),shpCode:i.readInt32LE(32),bbox:[i.readDoubleLE(36),i.readDoubleLE(44),i.readDoubleLE(52),i.readDoubleLE(52)]}},Tt.prototype.getRows=function(){let i=100;const t=this.buffer.byteLength,e=[];let r;for(;i<t&&(r=this.getRow(i),!!r);)i+=8,i+=r.len,r.type?e.push(this.parseFunc(r.data)):e.push(null);return e},Tt.prototype.getRow=function(i){const t=this.buffer.slice(i,i+12),e=t.readInt32BE(4)<<1,r=t.readInt32BE(0);return e===0?{id:r,len:e,type:0}:{id:r,len:e,data:this.buffer.slice(i+12,i+e+8),type:t.readInt32LE(8)}};var bf=function(i,t){return new Tt(i,t).rows},Af={exports:{}};(function(i){(function(t){i.exports&&t["encoding-indexes"];function e(_,w,b){return w<=_&&_<=b}function r(_,w){return _.indexOf(w)!==-1}var s=Math.floor;function n(_){if(_===void 0)return{};if(_===Object(_))return _;throw TypeError("Could not convert argument to dictionary")}function o(_){for(var w=String(_),b=w.length,z=0,k=[];z<b;){var B=w.charCodeAt(z);if(B<55296||B>57343)k.push(B);else if(56320<=B&&B<=57343)k.push(65533);else if(55296<=B&&B<=56319)if(z===b-1)k.push(65533);else{var R=w.charCodeAt(z+1);if(56320<=R&&R<=57343){var Y=B&1023,D=R&1023;k.push(65536+(Y<<10)+D),z+=1}else k.push(65533)}z+=1}return k}function a(_){for(var w="",b=0;b<_.length;++b){var z=_[b];z<=65535?w+=String.fromCharCode(z):(z-=65536,w+=String.fromCharCode((z>>10)+55296,(z&1023)+56320))}return w}function h(_){return 0<=_&&_<=127}var u=h,c=-1;function f(_){this.tokens=[].slice.call(_),this.tokens.reverse()}f.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():c},prepend:function(_){if(Array.isArray(_))for(var w=_;w.length;)this.tokens.push(w.pop());else this.tokens.push(_)},push:function(_){if(Array.isArray(_))for(var w=_;w.length;)this.tokens.unshift(w.shift());else this.tokens.unshift(_)}};var p=-1;function l(_,w){if(_)throw TypeError("Decoder error");return w||65533}function m(_){throw TypeError("The code point "+_+" could not be encoded.")}function y(_){return _=String(_).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(M,_)?M[_]:null}var v=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],M={};v.forEach(function(_){_.encodings.forEach(function(w){w.labels.forEach(function(b){M[b]=w})})});var S={},C={};function T(_,w){return w&&w[_]||null}function F(_,w){var b=w.indexOf(_);return b===-1?null:b}function L(_){if(!("encoding-indexes"in t))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return t["encoding-indexes"][_]}function U(_){if(_>39419&&_<189e3||_>1237575)return null;if(_===7457)return 59335;var w=0,b=0,z=L("gb18030-ranges"),k;for(k=0;k<z.length;++k){var B=z[k];if(B[0]<=_)w=B[0],b=B[1];else break}return b+_-w}function V(_){if(_===59335)return 7457;var w=0,b=0,z=L("gb18030-ranges"),k;for(k=0;k<z.length;++k){var B=z[k];if(B[1]<=_)w=B[1],b=B[0];else break}return b+_-w}function W(_){J=J||L("jis0208").map(function(b,z){return e(z,8272,8835)?null:b});var w=J;return w.indexOf(_)}var J;function et(_){P=P||L("big5").map(function(b,z){return z<32*157?null:b});var w=P;return _===9552||_===9566||_===9569||_===9578||_===21313||_===21317?w.lastIndexOf(_):F(_,w)}var P,Z="utf-8";function A(_,w){if(!(this instanceof A))throw TypeError("Called as a function. Did you forget 'new'?");_=_!==void 0?String(_):Z,w=n(w),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var b=y(_);if(b===null||b.name==="replacement")throw RangeError("Unknown encoding: "+_);if(!C[b.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var z=this;return z._encoding=b,w.fatal&&(z._error_mode="fatal"),w.ignoreBOM&&(z._ignoreBOM=!0),Object.defineProperty||(this.encoding=z._encoding.name.toLowerCase(),this.fatal=z._error_mode==="fatal",this.ignoreBOM=z._ignoreBOM),z}Object.defineProperty&&(Object.defineProperty(A.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(A.prototype,"fatal",{get:function(){return this._error_mode==="fatal"}}),Object.defineProperty(A.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),A.prototype.decode=function(w,b){var z;typeof w=="object"&&w instanceof ArrayBuffer?z=new Uint8Array(w):typeof w=="object"&&"buffer"in w&&w.buffer instanceof ArrayBuffer?z=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):z=new Uint8Array(0),b=n(b),this._do_not_flush||(this._decoder=C[this._encoding.name]({fatal:this._error_mode==="fatal"}),this._BOMseen=!1),this._do_not_flush=!!b.stream;for(var k=new f(z),B=[],R;;){var Y=k.read();if(Y===c||(R=this._decoder.handler(k,Y),R===p))break;R!==null&&(Array.isArray(R)?B.push.apply(B,R):B.push(R))}if(!this._do_not_flush){do{if(R=this._decoder.handler(k,k.read()),R===p)break;R!==null&&(Array.isArray(R)?B.push.apply(B,R):B.push(R))}while(!k.endOfStream());this._decoder=null}function D(at){return r(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)&&!this._ignoreBOM&&!this._BOMseen&&(at.length>0&&at[0]===65279?(this._BOMseen=!0,at.shift()):at.length>0&&(this._BOMseen=!0)),a(at)}return D.call(this,B)};function H(_,w){if(!(this instanceof H))throw TypeError("Called as a function. Did you forget 'new'?");w=n(w),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=w.fatal?"fatal":"replacement";var b=this;if(w.NONSTANDARD_allowLegacyEncoding){_=_!==void 0?String(_):Z;var z=y(_);if(z===null||z.name==="replacement")throw RangeError("Unknown encoding: "+_);if(!S[z.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");b._encoding=z}else b._encoding=y("utf-8"),_!==void 0&&"console"in t&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=b._encoding.name.toLowerCase()),b}Object.defineProperty&&Object.defineProperty(H.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),H.prototype.encode=function(w,b){w=w===void 0?"":String(w),b=n(b),this._do_not_flush||(this._encoder=S[this._encoding.name]({fatal:this._fatal==="fatal"})),this._do_not_flush=!!b.stream;for(var z=new f(o(w)),k=[],B;;){var R=z.read();if(R===c||(B=this._encoder.handler(z,R),B===p))break;Array.isArray(B)?k.push.apply(k,B):k.push(B)}if(!this._do_not_flush){for(;B=this._encoder.handler(z,z.read()),B!==p;)Array.isArray(B)?k.push.apply(k,B):k.push(B);this._encoder=null}return new Uint8Array(k)};function lt(_){var w=_.fatal,b=0,z=0,k=0,B=128,R=191;this.handler=function(Y,D){if(D===c&&k!==0)return k=0,l(w);if(D===c)return p;if(k===0){if(e(D,0,127))return D;if(e(D,194,223))k=1,b=D&31;else if(e(D,224,239))D===224&&(B=160),D===237&&(R=159),k=2,b=D&15;else if(e(D,240,244))D===240&&(B=144),D===244&&(R=143),k=3,b=D&7;else return l(w);return null}if(!e(D,B,R))return b=k=z=0,B=128,R=191,Y.prepend(D),l(w);if(B=128,R=191,b=b<<6|D&63,z+=1,z!==k)return null;var at=b;return b=k=z=0,at}}function Q(_){_.fatal,this.handler=function(w,b){if(b===c)return p;if(u(b))return b;var z,k;e(b,128,2047)?(z=1,k=192):e(b,2048,65535)?(z=2,k=224):e(b,65536,1114111)&&(z=3,k=240);for(var B=[(b>>6*z)+k];z>0;){var R=b>>6*(z-1);B.push(128|R&63),z-=1}return B}}S["UTF-8"]=function(_){return new Q(_)},C["UTF-8"]=function(_){return new lt(_)};function pt(_,w){var b=w.fatal;this.handler=function(z,k){if(k===c)return p;if(h(k))return k;var B=_[k-128];return B===null?l(b):B}}function K(_,w){w.fatal,this.handler=function(b,z){if(z===c)return p;if(u(z))return z;var k=F(z,_);return k===null&&m(z),k+128}}(function(){"encoding-indexes"in t&&v.forEach(function(_){_.heading==="Legacy single-byte encodings"&&_.encodings.forEach(function(w){var b=w.name,z=L(b.toLowerCase());C[b]=function(k){return new pt(z,k)},S[b]=function(k){return new K(z,k)}})})})(),C.GBK=function(_){return new ct(_)},S.GBK=function(_){return new q(_,!0)};function ct(_){var w=_.fatal,b=0,z=0,k=0;this.handler=function(B,R){if(R===c&&b===0&&z===0&&k===0)return p;R===c&&(b!==0||z!==0||k!==0)&&(b=0,z=0,k=0,l(w));var Y;if(k!==0){Y=null,e(R,48,57)&&(Y=U((((b-129)*10+z-48)*126+k-129)*10+R-48));var D=[z,k,R];return b=0,z=0,k=0,Y===null?(B.prepend(D),l(w)):Y}if(z!==0)return e(R,129,254)?(k=R,null):(B.prepend([z,R]),b=0,z=0,l(w));if(b!==0){if(e(R,48,57))return z=R,null;var at=b,E=null;b=0;var d=R<127?64:65;return(e(R,64,126)||e(R,128,254))&&(E=(at-129)*190+(R-d)),Y=E===null?null:T(E,L("gb18030")),Y===null&&h(R)&&B.prepend(R),Y===null?l(w):Y}return h(R)?R:R===128?8364:e(R,129,254)?(b=R,null):l(w)}}function q(_,w){_.fatal,this.handler=function(b,z){if(z===c)return p;if(u(z))return z;if(z===58853)return m(z);if(w&&z===8364)return 128;var k=F(z,L("gb18030"));if(k!==null){var B=s(k/190)+129,R=k%190,Y=R<63?64:65;return[B,R+Y]}if(w)return m(z);k=V(z);var D=s(k/10/126/10);k=k-D*10*126*10;var at=s(k/10/126);k=k-at*10*126;var E=s(k/10),d=k-E*10;return[D+129,at+48,E+129,d+48]}}S.gb18030=function(_){return new q(_)},C.gb18030=function(_){return new ct(_)};function j(_){var w=_.fatal,b=0;this.handler=function(z,k){if(k===c&&b!==0)return b=0,l(w);if(k===c&&b===0)return p;if(b!==0){var B=b,R=null;b=0;var Y=k<127?64:98;switch((e(k,64,126)||e(k,161,254))&&(R=(B-129)*157+(k-Y)),R){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var D=R===null?null:T(R,L("big5"));return D===null&&h(k)&&z.prepend(k),D===null?l(w):D}return h(k)?k:e(k,129,254)?(b=k,null):l(w)}}function ft(_){_.fatal,this.handler=function(w,b){if(b===c)return p;if(u(b))return b;var z=et(b);if(z===null)return m(b);var k=s(z/157)+129;if(k<161)return m(b);var B=z%157,R=B<63?64:98;return[k,B+R]}}S.Big5=function(_){return new ft(_)},C.Big5=function(_){return new j(_)};function ht(_){var w=_.fatal,b=!1,z=0;this.handler=function(k,B){if(B===c&&z!==0)return z=0,l(w);if(B===c&&z===0)return p;if(z===142&&e(B,161,223))return z=0,65216+B;if(z===143&&e(B,161,254))return b=!0,z=B,null;if(z!==0){var R=z;z=0;var Y=null;return e(R,161,254)&&e(B,161,254)&&(Y=T((R-161)*94+(B-161),L(b?"jis0212":"jis0208"))),b=!1,e(B,161,254)||k.prepend(B),Y===null?l(w):Y}return h(B)?B:B===142||B===143||e(B,161,254)?(z=B,null):l(w)}}function nt(_){_.fatal,this.handler=function(w,b){if(b===c)return p;if(u(b))return b;if(b===165)return 92;if(b===8254)return 126;if(e(b,65377,65439))return[142,b-65377+161];b===8722&&(b=65293);var z=F(b,L("jis0208"));if(z===null)return m(b);var k=s(z/94)+161,B=z%94+161;return[k,B]}}S["EUC-JP"]=function(_){return new nt(_)},C["EUC-JP"]=function(_){return new ht(_)};function Et(_){var w=_.fatal,b={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},z=b.ASCII,k=b.ASCII,B=0,R=!1;this.handler=function(Y,D){switch(z){default:case b.ASCII:return D===27?(z=b.EscapeStart,null):e(D,0,127)&&D!==14&&D!==15&&D!==27?(R=!1,D):D===c?p:(R=!1,l(w));case b.Roman:return D===27?(z=b.EscapeStart,null):D===92?(R=!1,165):D===126?(R=!1,8254):e(D,0,127)&&D!==14&&D!==15&&D!==27&&D!==92&&D!==126?(R=!1,D):D===c?p:(R=!1,l(w));case b.Katakana:return D===27?(z=b.EscapeStart,null):e(D,33,95)?(R=!1,65344+D):D===c?p:(R=!1,l(w));case b.LeadByte:return D===27?(z=b.EscapeStart,null):e(D,33,126)?(R=!1,B=D,z=b.TrailByte,null):D===c?p:(R=!1,l(w));case b.TrailByte:if(D===27)return z=b.EscapeStart,l(w);if(e(D,33,126)){z=b.LeadByte;var at=(B-33)*94+D-33,E=T(at,L("jis0208"));return E===null?l(w):E}return D===c?(z=b.LeadByte,Y.prepend(D),l(w)):(z=b.LeadByte,l(w));case b.EscapeStart:return D===36||D===40?(B=D,z=b.Escape,null):(Y.prepend(D),R=!1,z=k,l(w));case b.Escape:var d=B;B=0;var x=null;if(d===40&&D===66&&(x=b.ASCII),d===40&&D===74&&(x=b.Roman),d===40&&D===73&&(x=b.Katakana),d===36&&(D===64||D===66)&&(x=b.LeadByte),x!==null){z=z=x;var I=R;return R=!0,I?l(w):null}return Y.prepend([d,D]),R=!1,z=k,l(w)}}}function Mt(_){_.fatal;var w={ASCII:0,Roman:1,jis0208:2},b=w.ASCII;this.handler=function(z,k){if(k===c&&b!==w.ASCII)return z.prepend(k),b=w.ASCII,[27,40,66];if(k===c&&b===w.ASCII)return p;if((b===w.ASCII||b===w.Roman)&&(k===14||k===15||k===27))return m(65533);if(b===w.ASCII&&u(k))return k;if(b===w.Roman&&(u(k)&&k!==92&&k!==126||k==165||k==8254)){if(u(k))return k;if(k===165)return 92;if(k===8254)return 126}if(u(k)&&b!==w.ASCII)return z.prepend(k),b=w.ASCII,[27,40,66];if((k===165||k===8254)&&b!==w.Roman)return z.prepend(k),b=w.Roman,[27,40,74];k===8722&&(k=65293);var B=F(k,L("jis0208"));if(B===null)return m(k);if(b!==w.jis0208)return z.prepend(k),b=w.jis0208,[27,36,66];var R=s(B/94)+33,Y=B%94+33;return[R,Y]}}S["ISO-2022-JP"]=function(_){return new Mt(_)},C["ISO-2022-JP"]=function(_){return new Et(_)};function mt(_){var w=_.fatal,b=0;this.handler=function(z,k){if(k===c&&b!==0)return b=0,l(w);if(k===c&&b===0)return p;if(b!==0){var B=b,R=null;b=0;var Y=k<127?64:65,D=B<160?129:193;if((e(k,64,126)||e(k,128,252))&&(R=(B-D)*188+k-Y),e(R,8836,10715))return 48508+R;var at=R===null?null:T(R,L("jis0208"));return at===null&&h(k)&&z.prepend(k),at===null?l(w):at}return h(k)||k===128?k:e(k,161,223)?65216+k:e(k,129,159)||e(k,224,252)?(b=k,null):l(w)}}function gt(_){_.fatal,this.handler=function(w,b){if(b===c)return p;if(u(b)||b===128)return b;if(b===165)return 92;if(b===8254)return 126;if(e(b,65377,65439))return b-65377+161;b===8722&&(b=65293);var z=W(b);if(z===null)return m(b);var k=s(z/188),B=k<31?129:193,R=z%188,Y=R<63?64:65;return[k+B,R+Y]}}S.Shift_JIS=function(_){return new gt(_)},C.Shift_JIS=function(_){return new mt(_)};function wt(_){var w=_.fatal,b=0;this.handler=function(z,k){if(k===c&&b!==0)return b=0,l(w);if(k===c&&b===0)return p;if(b!==0){var B=b,R=null;b=0,e(k,65,254)&&(R=(B-129)*190+(k-65));var Y=R===null?null:T(R,L("euc-kr"));return R===null&&h(k)&&z.prepend(k),Y===null?l(w):Y}return h(k)?k:e(k,129,254)?(b=k,null):l(w)}}function vt(_){_.fatal,this.handler=function(w,b){if(b===c)return p;if(u(b))return b;var z=F(b,L("euc-kr"));if(z===null)return m(b);var k=s(z/190)+129,B=z%190+65;return[k,B]}}S["EUC-KR"]=function(_){return new vt(_)},C["EUC-KR"]=function(_){return new wt(_)};function rt(_,w){var b=_>>8,z=_&255;return w?[b,z]:[z,b]}function st(_,w){var b=w.fatal,z=null,k=null;this.handler=function(B,R){if(R===c&&(z!==null||k!==null))return l(b);if(R===c&&z===null&&k===null)return p;if(z===null)return z=R,null;var Y;if(_?Y=(z<<8)+R:Y=(R<<8)+z,z=null,k!==null){var D=k;return k=null,e(Y,56320,57343)?65536+(D-55296)*1024+(Y-56320):(B.prepend(rt(Y,_)),l(b))}return e(Y,55296,56319)?(k=Y,null):e(Y,56320,57343)?l(b):Y}}function g(_,w){w.fatal,this.handler=function(b,z){if(z===c)return p;if(e(z,0,65535))return rt(z,_);var k=rt((z-65536>>10)+55296,_),B=rt((z-65536&1023)+56320,_);return k.concat(B)}}S["UTF-16BE"]=function(_){return new g(!0,_)},C["UTF-16BE"]=function(_){return new st(!0,_)},S["UTF-16LE"]=function(_){return new g(!1,_)},C["UTF-16LE"]=function(_){return new st(!1,_)};function G(_){_.fatal,this.handler=function(w,b){return b===c?p:h(b)?b:63360+b-128}}function O(_){_.fatal,this.handler=function(w,b){return b===c?p:u(b)?b:e(b,63360,63487)?b-63360+128:m(b)}}S["x-user-defined"]=function(_){return new O(_)},C["x-user-defined"]=function(_){return new G(_)},t.TextEncoder||(t.TextEncoder=H),t.TextDecoder||(t.TextDecoder=A),i.exports&&(i.exports={TextEncoder:t.TextEncoder,TextDecoder:t.TextDecoder,EncodingIndexes:t["encoding-indexes"]})})(Pt||{})})(Af);var Rn={},Vr={exports:{}};(function(i,t){var e=Be,r=e.Buffer;function s(o,a){for(var h in o)a[h]=o[h]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?i.exports=e:(s(e,t),t.Buffer=n);function n(o,a,h){return r(o,a,h)}s(r,n),n.from=function(o,a,h){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,h)},n.alloc=function(o,a,h){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof h=="string"?u.fill(a,h):u.fill(a):u.fill(0),u},n.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},n.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Vr,Vr.exports);var Ef=Vr.exports,Yr=Ef.Buffer,Ln=Yr.isEncoding||function(i){switch(i=""+i,i&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Sf(i){if(!i)return"utf8";for(var t;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(t)return;i=(""+i).toLowerCase(),t=!0}}function Cf(i){var t=Sf(i);if(typeof t!="string"&&(Yr.isEncoding===Ln||!Ln(i)))throw new Error("Unknown encoding: "+i);return t||i}Rn.StringDecoder=Ii;function Ii(i){this.encoding=Cf(i);var t;switch(this.encoding){case"utf16le":this.text=Ff,this.end=Pf,t=4;break;case"utf8":this.fillLast=If,t=4;break;case"base64":this.text=Nf,this.end=Of,t=3;break;default:this.write=Rf,this.end=Lf;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Yr.allocUnsafe(t)}Ii.prototype.write=function(i){if(i.length===0)return"";var t,e;if(this.lastNeed){if(t=this.fillLast(i),t===void 0)return"";e=this.lastNeed,this.lastNeed=0}else e=0;return e<i.length?t?t+this.text(i,e):this.text(i,e):t||""},Ii.prototype.end=Tf,Ii.prototype.text=Bf,Ii.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length};function Qr(i){return i<=127?0:i>>5===6?2:i>>4===14?3:i>>3===30?4:i>>6===2?-1:-2}function kf(i,t,e){var r=t.length-1;if(r<e)return 0;var s=Qr(t[r]);return s>=0?(s>0&&(i.lastNeed=s-1),s):--r<e||s===-2?0:(s=Qr(t[r]),s>=0?(s>0&&(i.lastNeed=s-2),s):--r<e||s===-2?0:(s=Qr(t[r]),s>=0?(s>0&&(s===2?s=0:i.lastNeed=s-3),s):0))}function zf(i,t,e){if((t[0]&192)!==128)return i.lastNeed=0,"�";if(i.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return i.lastNeed=1,"�";if(i.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return i.lastNeed=2,"�"}}function If(i){var t=this.lastTotal-this.lastNeed,e=zf(this,i);if(e!==void 0)return e;if(this.lastNeed<=i.length)return i.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,t,0,i.length),this.lastNeed-=i.length}function Bf(i,t){var e=kf(this,i,t);if(!this.lastNeed)return i.toString("utf8",t);this.lastTotal=e;var r=i.length-(e-this.lastNeed);return i.copy(this.lastChar,0,r),i.toString("utf8",t,r)}function Tf(i){var t=i&&i.length?this.write(i):"";return this.lastNeed?t+"�":t}function Ff(i,t){if((i.length-t)%2===0){var e=i.toString("utf16le",t);if(e){var r=e.charCodeAt(e.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",t,i.length-1)}function Pf(i){var t=i&&i.length?this.write(i):"";if(this.lastNeed){var e=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,e)}return t}function Nf(i,t){var e=(i.length-t)%3;return e===0?i.toString("base64",t):(this.lastNeed=3-e,this.lastTotal=3,e===1?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",t,i.length-e))}function Of(i){var t=i&&i.length?this.write(i):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Rf(i){return i.toString(this.encoding)}function Lf(i){return i&&i.length?this.write(i):""}var Uf=Rn.StringDecoder;function Un(i){var t=new Uf,e=t.write(i)+t.end();return e.replace(/\0/g,"").trim()}var Df=Dn,qf=/^(?:ANSI\s)?(\d+)$/m;function Dn(i,t){if(!i)return Un;try{new TextDecoder(i.trim())}catch{var e=qf.exec(i);return e&&!t?Dn("windows-"+e[1],!0):Un}return r;function r(s){var n=new TextDecoder(i),o=n.decode(s,{stream:!0})+n.decode();return o.replace(/\0/g,"").trim()}}var jf=Df;function Gf(i){var t={};return t.lastUpdated=new Date(i.readUInt8(1)+1900,i.readUInt8(2),i.readUInt8(3)),t.records=i.readUInt32LE(4),t.headerLen=i.readUInt16LE(8),t.recLen=i.readUInt16LE(10),t}function Wf(i,t,e){for(var r=[],s=32;s<t&&(r.push({name:e(i.slice(s,s+11)),dataType:String.fromCharCode(i.readUInt8(s+11)),len:i.readUInt8(s+16),decimal:i.readUInt8(s+17)}),i.readUInt8(s+32)!==13);)s+=32;return r}function $f(i,t,e,r,s){var n=i.slice(t,t+e),o=s(n);switch(r){case"N":case"F":case"O":return parseFloat(o,10);case"D":return new Date(o.slice(0,4),parseInt(o.slice(4,6),10)-1,o.slice(6,8));case"L":return o.toLowerCase()==="y"||o.toLowerCase()==="t";default:return o}}function Zf(i,t,e,r){for(var s={},n=0,o=e.length,a,h;n<o;)h=e[n],a=$f(i,t,h.len,h.dataType,r),t+=h.len,typeof a<"u"&&(s[h.name]=a),n++;return s}var Jf=function(i,t){for(var e=jf(t),r=Gf(i),s=Wf(i,r.headerLen-1,e),n=(s.length+1<<5)+2,o=r.recLen,a=r.records,h=[];a;)h.push(Zf(i,n,s,e)),n+=o,a--;return h},qn={exports:{}};(function(i){(function(){i.exports?i.exports=n:this.LRUCache=n;function t(l,m){return Object.prototype.hasOwnProperty.call(l,m)}function e(){return 1}var r=!1;function s(l){!r&&typeof l!="string"&&typeof l!="number"&&(r=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof l).stack))}function n(l){if(!(this instanceof n))return new n(l);typeof l=="number"&&(l={max:l}),l||(l={}),this._max=l.max,(!this._max||typeof this._max!="number"||this._max<=0)&&(this._max=1/0),this._lengthCalculator=l.length||e,typeof this._lengthCalculator!="function"&&(this._lengthCalculator=e),this._allowStale=l.stale||!1,this._maxAge=l.maxAge||null,this._dispose=l.dispose,this.reset()}Object.defineProperty(n.prototype,"max",{set:function(l){(!l||typeof l!="number"||l<=0)&&(l=1/0),this._max=l,this._length>this._max&&u(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(n.prototype,"lengthCalculator",{set:function(l){if(typeof l!="function"){this._lengthCalculator=e,this._length=this._itemCount;for(var m in this._cache)this._cache[m].length=1}else{this._lengthCalculator=l,this._length=0;for(var m in this._cache)this._cache[m].length=this._lengthCalculator(this._cache[m].value),this._length+=this._cache[m].length}this._length>this._max&&u(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(n.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),n.prototype.forEach=function(l,m){m=m||this;for(var y=0,v=this._itemCount,M=this._mru-1;M>=0&&y<v;M--)if(this._lruList[M]){y++;var S=this._lruList[M];a(this,S)&&(f(this,S),this._allowStale||(S=void 0)),S&&l.call(m,S.value,S.key,this)}},n.prototype.keys=function(){for(var l=new Array(this._itemCount),m=0,y=this._mru-1;y>=0&&m<this._itemCount;y--)if(this._lruList[y]){var v=this._lruList[y];l[m++]=v.key}return l},n.prototype.values=function(){for(var l=new Array(this._itemCount),m=0,y=this._mru-1;y>=0&&m<this._itemCount;y--)if(this._lruList[y]){var v=this._lruList[y];l[m++]=v.value}return l},n.prototype.reset=function(){if(this._dispose&&this._cache)for(var l in this._cache)this._dispose(l,this._cache[l].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},n.prototype.dump=function(){for(var l=[],m=0,y=this._mru-1;y>=0&&m<this._itemCount;y--)if(this._lruList[y]){var v=this._lruList[y];a(this,v)||(++m,l.push({k:v.key,v:v.value,e:v.now+(v.maxAge||0)}))}return l},n.prototype.dumpLru=function(){return this._lruList},n.prototype.set=function(l,m,y){y=y||this._maxAge,s(l);var v=y?Date.now():0,M=this._lengthCalculator(m);if(t(this._cache,l))return M>this._max?(f(this,this._cache[l]),!1):(this._dispose&&this._dispose(l,this._cache[l].value),this._cache[l].now=v,this._cache[l].maxAge=y,this._cache[l].value=m,this._length+=M-this._cache[l].length,this._cache[l].length=M,this.get(l),this._length>this._max&&u(this),!0);var S=new p(l,m,this._mru++,M,v,y);return S.length>this._max?(this._dispose&&this._dispose(l,m),!1):(this._length+=S.length,this._lruList[S.lu]=this._cache[l]=S,this._itemCount++,this._length>this._max&&u(this),!0)},n.prototype.has=function(l){if(s(l),!t(this._cache,l))return!1;var m=this._cache[l];return!a(this,m)},n.prototype.get=function(l){return s(l),o(this,l,!0)},n.prototype.peek=function(l){return s(l),o(this,l,!1)},n.prototype.pop=function(){var l=this._lruList[this._lru];return f(this,l),l||null},n.prototype.del=function(l){s(l),f(this,this._cache[l])},n.prototype.load=function(l){this.reset();for(var m=Date.now(),y=l.length-1;y>=0;y--){var v=l[y];s(v.k);var M=v.e||0;if(M===0)this.set(v.k,v.v);else{var S=M-m;S>0&&this.set(v.k,v.v,S)}}};function o(l,m,y){s(m);var v=l._cache[m];return v&&(a(l,v)?(f(l,v),l._allowStale||(v=void 0)):y&&h(l,v),v&&(v=v.value)),v}function a(l,m){if(!m||!m.maxAge&&!l._maxAge)return!1;var y=!1,v=Date.now()-m.now;return m.maxAge?y=v>m.maxAge:y=l._maxAge&&v>l._maxAge,y}function h(l,m){c(l,m),m.lu=l._mru++,l._lruList[m.lu]=m}function u(l){for(;l._lru<l._mru&&l._length>l._max;)f(l,l._lruList[l._lru])}function c(l,m){for(delete l._lruList[m.lu];l._lru<l._mru&&!l._lruList[l._lru];)l._lru++}function f(l,m){m&&(l._dispose&&l._dispose(m.key,m.value),l._length-=m.length,l._itemCount--,delete l._cache[m.key],c(l,m))}function p(l,m,y,v,M,S){this.key=l,this.value=m,this.lu=y,this.length=v,this.now=M,S&&(this.maxAge=S)}})()})(qn);var Hf=qn.exports;let ei=Vc;ei.default&&(ei=ei.default);const Xf=Kc,Bi=vf,Kr=bf,ts=Jf,lr=Tn,Vf=Hf,Ti=Be.Buffer,Yf=Pt.URL,es=new Vf({max:20});function is(i){if(!i)throw new Error("forgot to pass buffer");if(Ti.isBuffer(i))return i;if(jn(i))return Ti.from(i);if(jn(i.buffer))return i.BYTES_PER_ELEMENT===1?Ti.from(i):Ti.from(i.buffer)}function jn(i){return i instanceof Pt.ArrayBuffer||Object.prototype.toString.call(i)==="[object ArrayBuffer]"}function se(i,t){return typeof i=="string"&&es.has(i)?lr.resolve(es.get(i)):se.getShapefile(i,t).then(function(e){return typeof i=="string"&&es.set(i,e),e})}se.combine=function([i,t]){const e={};e.type="FeatureCollection",e.features=[];let r=0;const s=i.length;for(t||(t=[]);r<s;)e.features.push({type:"Feature",geometry:i[r],properties:t[r]||{}}),r++;return e},se.parseZip=async function(i,t){let e;i=is(i);const r=await Xf(i),s=[];t=t||[];for(e in r)e.indexOf("__MACOSX")===-1&&(e.slice(-3).toLowerCase()==="shp"?(s.push(e.slice(0,-4)),r[e.slice(0,-3)+e.slice(-3).toLowerCase()]=r[e]):e.slice(-3).toLowerCase()==="prj"?r[e.slice(0,-3)+e.slice(-3).toLowerCase()]=ei(r[e]):e.slice(-4).toLowerCase()==="json"||t.indexOf(e.split(".").pop())>-1?s.push(e.slice(0,-3)+e.slice(-3).toLowerCase()):(e.slice(-3).toLowerCase()==="dbf"||e.slice(-3).toLowerCase()==="cpg")&&(r[e.slice(0,-3)+e.slice(-3).toLowerCase()]=r[e]));if(!s.length)throw new Error("no layers founds");const n=s.map(function(o){let a,h;const u=o.lastIndexOf(".");return u>-1&&o.slice(u).indexOf("json")>-1?(a=JSON.parse(r[o]),a.fileName=o.slice(0,u)):t.indexOf(o.slice(u+1))>-1?(a=r[o],a.fileName=o):(r[o+".dbf"]&&(h=ts(r[o+".dbf"],r[o+".cpg"])),a=se.combine([Kr(r[o+".shp"],r[o+".prj"]),h]),a.fileName=o),a});return n.length===1?n[0]:n};async function Qf(i,t){const e=await Bi(i);return se.parseZip(e,t)}const Kf=async i=>{const t=await lr.all([Bi(i,"shp"),Bi(i,"prj")]);let e=!1;try{t[1]&&(e=ei(t[1]))}catch{e=!1}return Kr(t[0],e)},t0=async i=>{const[t,e]=await lr.all([Bi(i,"dbf"),Bi(i,"cpg")]);if(t)return ts(t,e)},e0=(i,t)=>new Yf(i).pathname.slice(-4).toLowerCase()===t;se.getShapefile=async function(i,t){if(typeof i!="string")return se.parseZip(i);if(e0(i,".zip"))return Qf(i,t);const e=await lr.all([Kf(i),t0(i)]);return se.combine(e)},se.parseShp=function(i,t){if(i=is(i),Ti.isBuffer(t)&&(t=t.toString()),typeof t=="string")try{t=ei(t)}catch{t=!1}return Kr(i,t)},se.parseDbf=function(i,t){return i=is(i),ts(i,t)};var i0=se,r0=rs(i0);const s0={dpr:self.devicePixelRatio||1,width:self.innerWidth,height:self.innerHeight,axes:{x:new tt(1,0,0)},shp:{boundingBox:new Ne(new tt(-83.7189712524414,-0,-127.5303955078125),new tt(96.13094329833984,0,53.660400390625)),center:new tt(116.39033126831055,39.920570373535156,0).negate(),scale:new tt(86,112,112),enableLayer:!0,layer:1,visibleDistance:4},cityCenter:new tt(-6.205986022949219,0,36.93499755859375).negate()},Gn=()=>{};class n0 extends Zi{height;constructor(t=0){super(),this.height=t}}class Wn extends Ps{info={Point:0,MultiPoint:0,LineString:0,MultiLineString:0,Polygon:0,MultiPolygon:0,GeometryCollection:0};fileName="";shapes=[];shape3ds=[];next_positions_index=0;vertices=[];indices=[];constructor(t){super(t)}load(t,e=Gn,r,s=Gn){t.startsWith("http")===!1&&(t=`${location.origin}${t}`),t.endsWith(".zip")?r0(t).then(n=>{this.parse(n),e(this)}).catch(n=>s(n)):t.endsWith(".json")?fetch(t).then(n=>n.json()).then(n=>{this.parse(n),e(this)}).catch(n=>s(n)):s(new Error("unknow file type"))}parse(t){Array.isArray(t)?t.forEach(e=>this.parseGeoJson(e)):this.parseGeoJson(t)}parseGeoJson(t){this.fileName=t?.fileName||"";const e=t.features;for(let r=0,s=e.length;r<s;r++){const n=e[r],{type:o}=n.geometry;o==="Polygon"?this.parsePolygon(n):o==="MultiPolygon"?this.parseMultiPolygon(n):o==="LineString"?this.parseLineString(n.geometry):o==="MultiLineString"&&this.parseMultiLineString(n.geometry)}}parsePolygon(t){const e=t.geometry,s=t.properties?.height;if(s&&s>0){const o=new n0(s);n(o),this.shape3ds.push(o)}else{const o=new Zi;n(o),this.shapes.push(o)}function n(o){for(let a=0,h=e.coordinates.length;a<h;a++){const u=e.coordinates[a];for(let c=0,f=u.length;c<f;c++){const[p,l]=u[c];c===0?o.moveTo(p,l):o.lineTo(p,l)}}}}parseMultiPolygon(t){const r=t.geometry.coordinates;for(let s=0,n=r.length;s<n;s++){const a={type:"Feature",geometry:{type:"Polygon",coordinates:[r[s][0]]},properties:null};this.parsePolygon(a)}}parseLineString(t){const{vertices:e,indices:r}=this,s=t.coordinates;for(let n=0,o=s.length;n<o;n++){const[a,h]=s[n];if(e.push(a,h,0),o===2)r.push(this.next_positions_index);else if(o>2){if(n<=1)r.push(this.next_positions_index);else if(n>1){const u=this.next_positions_index-1;r.push(u,this.next_positions_index)}}this.next_positions_index++}}parseMultiLineString(t){const e=t.coordinates;for(let r=0,s=e.length;r<s;r++){const n=e[r];this.parseLineString({type:"LineString",coordinates:n})}}}function $n(i,t,e=s0.shp.scale){i.translate(t.x,t.y,t.z),i.scale(e.x,e.y,e.z),i.rotateX(-Math.PI/2)}na(async i=>{console.log("worker.ts: ",i);const{type:t}=i;if(t==="fetch-shp"){const e=i.configs,r=i.center,s=i.scale,n=e.map(a=>new Wn().loadAsync(a).then(h=>o0(h))),o=await Promise.all(n);return r&&s&&o.forEach(a=>$n(a,r,s)),{geometries:o}}if(t==="fetch-shp-url"){const e=i.url,r=i.center,s=i.scale;let n=!1,o=!1;const a=await new Wn().loadAsync(e).then(h=>{const{shapes:u,vertices:c}=h;return u.length>0&&(n=!0),c.length>0&&(o=!0),a0(h)});return r&&s&&$n(a,r,s),{geometry:a,isLineSegments:o,isMesh:n}}return"pong"});function a0(i){const{shapes:t,vertices:e,indices:r,fileName:s}=i;if(t.length>0){const n=Ns(t.map(o=>new Nr(o)));return n.name=s,n}if(e.length>0){const n=new je,o=new Ce(e,3);return n.setIndex(r),n.setAttribute("position",o),n.name=s,n}throw new Error("No shapes or vertices")}function o0(i){const{shape3ds:t,fileName:e}=i;if(t.length>0){const r=[];t.forEach(n=>{const{height:o}=n,a={depth:o*13e-6,bevelEnabled:!1},h=new Pr(n,a);r.push(h)});const s=Ns(r);return s.name=e,s}throw new Error("No shape3ds")}})();
